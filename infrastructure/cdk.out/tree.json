{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.219.0"},"children":{"JobLanderDev":{"id":"JobLanderDev","path":"JobLanderDev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"VPC":{"id":"VPC","path":"JobLanderDev/VPC","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"JobLanderDev/VPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"JobLanderDev/VPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet3":{"id":"PublicSubnet3","path":"JobLanderDev/VPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet4":{"id":"PublicSubnet4","path":"JobLanderDev/VPC/PublicSubnet4","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet5":{"id":"PublicSubnet5","path":"JobLanderDev/VPC/PublicSubnet5","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet6":{"id":"PublicSubnet6","path":"JobLanderDev/VPC/PublicSubnet6","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UploadsBucket":{"id":"UploadsBucket","path":"JobLanderDev/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"job-lander-uploads-development-817977749885","corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","DELETE"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"id":"ExpireOldUploads","status":"Enabled"}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"JobLanderDev/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin2S3OriginE484D4BF","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"JobLanderDev/UploadsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"JobLanderDev/UploadsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"JobLanderDev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"JobLanderDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Role":{"id":"Role","path":"JobLanderDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}},"Handler":{"id":"Handler","path":"JobLanderDev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"DBSecret":{"id":"DBSecret","path":"JobLanderDev/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/DBSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludePunctuation":true,"includeSpace":false},"name":"job-lander-db-secret-development"}}},"Attachment":{"id":"Attachment","path":"JobLanderDev/DBSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/DBSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"DatabaseB269D8BB"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"JobLanderDev/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander RDS instance","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","fromPort":5432,"toPort":5432,"description":"Allow ECS tasks to access RDS"}],"vpcId":"vpc-03019039f5b20e40d"}}}}},"Database":{"id":"Database","path":"JobLanderDev/Database","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.219.0","metadata":[]},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"JobLanderDev/Database/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"JobLanderDev/Database/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for Database database","subnetIds":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"]}}}}},"Resource":{"id":"Resource","path":"JobLanderDev/Database/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":1,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"joblander","dbSubnetGroupName":{"Ref":"DatabaseSubnetGroup7D60F180"},"deleteAutomatedBackups":true,"enablePerformanceInsights":false,"engine":"postgres","engineVersion":"15.8","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"publiclyAccessible":false,"storageType":"gp3","vpcSecurityGroups":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}}}},"Repository":{"id":"Repository","path":"JobLanderDev/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}},"JobLanderCluster":{"id":"JobLanderCluster","path":"JobLanderDev/JobLanderCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/JobLanderCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"JobLanderDev-JobLanderCluster","clusterSettings":[{"name":"containerInsights","value":"disabled"}]}}}}},"ALB":{"id":"ALB","path":"JobLanderDev/ALB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/ALB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"name":"JobLanderDev-ALB","scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]}],"subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"JobLanderDev/ALB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/ALB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB JobLanderDevALB853EB403","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":"vpc-03019039f5b20e40d"}}},"to JobLanderDevECSSecurityGroupDE5CB21A:5000":{"id":"to JobLanderDevECSSecurityGroupDE5CB21A:5000","path":"JobLanderDev/ALB/SecurityGroup/to JobLanderDevECSSecurityGroupDE5CB21A:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"fromPort":5000,"groupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","toPort":5000}}}}},"Listener":{"id":"Listener","path":"JobLanderDev/ALB/Listener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/ALB/Listener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"}}],"loadBalancerArn":{"Ref":"ALBAEE750D2"},"port":80,"protocol":"HTTP"}}}}}}},"LogGroup":{"id":"LogGroup","path":"JobLanderDev/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/job-lander-development","retentionInDays":7}}}}},"TaskDef":{"id":"TaskDef","path":"JobLanderDev/TaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.219.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"JobLanderDev/TaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"JobLanderDev/TaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderDev/TaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderDev/TaskDef/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/TaskDef/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TaskDefTaskRoleDefaultPolicyA592CB18","roles":[{"Ref":"TaskDefTaskRole1EDB4A67"}]}}}}}}},"Resource":{"id":"Resource","path":"JobLanderDev/TaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",["817977749885.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/job-lander-development:latest"]]},"name":"JobLanderContainer","portMappings":[{"containerPort":5000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"LogGroupF5B46931"},"awslogs-stream-prefix":"ecs","awslogs-region":"us-east-1"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"5000"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"S3_BUCKET_NAME","value":{"Ref":"UploadsBucket5E5E9B64"}},{"name":"DB_HOST","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Address"]}},{"name":"DB_PORT","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Port"]}},{"name":"DB_NAME","value":"joblander"},{"name":"DB_USER","value":"postgres"}],"secrets":[{"name":"DB_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"DBSecretD58955BC"},":password::"]]}},{"name":"GEMINI_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-development"},{"name":"SESSION_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-development"},{"name":"CANVA_CLIENT_ID","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-development"},{"name":"CANVA_CLIENT_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-development"},{"name":"JSEARCH_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-development"},{"name":"WEB3_RPC_URL","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-development"},{"name":"PRIVATE_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-development"}],"healthCheck":{"command":["CMD-SHELL","curl -f http://localhost:5000/api/health || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"512","executionRoleArn":{"Fn::GetAtt":["TaskDefExecutionRoleB4775C97","Arn"]},"family":"job-lander-task-development","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefTaskRole1EDB4A67","Arn"]}}}},"JobLanderContainer":{"id":"JobLanderContainer","path":"JobLanderDev/TaskDef/JobLanderContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.219.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"JobLanderDev/TaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"JobLanderDev/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderDev/TaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderDev/TaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/TaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:817977749885:repository/job-lander-development"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LogGroupF5B46931","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-development-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-development-??????",{"Ref":"DBSecretD58955BC"}]}],"Version":"2012-10-17"},"policyName":"TaskDefExecutionRoleDefaultPolicy0DBB737A","roles":[{"Ref":"TaskDefExecutionRoleB4775C97"}]}}}}}}}}},"GeminiSecret":{"id":"GeminiSecret","path":"JobLanderDev/GeminiSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"SessionSecret":{"id":"SessionSecret","path":"JobLanderDev/SessionSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientId":{"id":"CanvaClientId","path":"JobLanderDev/CanvaClientId","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientSecret":{"id":"CanvaClientSecret","path":"JobLanderDev/CanvaClientSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"JSearchApiKey":{"id":"JSearchApiKey","path":"JobLanderDev/JSearchApiKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Web3RpcUrl":{"id":"Web3RpcUrl","path":"JobLanderDev/Web3RpcUrl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PrivateKey":{"id":"PrivateKey","path":"JobLanderDev/PrivateKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"ECSSecurityGroup":{"id":"ECSSecurityGroup","path":"JobLanderDev/ECSSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/ECSSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander ECS service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","fromPort":5000,"toPort":5000,"description":"Allow ALB to access ECS service"}],"vpcId":"vpc-03019039f5b20e40d"}}},"from JobLanderDevALBSecurityGroup786EAF25:5000":{"id":"from JobLanderDevALBSecurityGroup786EAF25:5000","path":"JobLanderDev/ECSSecurityGroup/from JobLanderDevALBSecurityGroup786EAF25:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":5000,"groupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"toPort":5000}}}}},"Service":{"id":"Service","path":"JobLanderDev/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.219.0","metadata":[]},"children":{"Service":{"id":"Service","path":"JobLanderDev/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"JobLanderCluster9A38F0EB"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"deploymentCircuitBreaker":{"enable":true,"rollback":true}},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"},"containerName":"JobLanderContainer","containerPort":5000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"ENABLED","subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"securityGroups":[{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]}]}},"serviceName":"JobLanderDev-JobLanderService","taskDefinition":{"Ref":"TaskDef54694570"}}}}}},"TargetGroup":{"id":"TargetGroup","path":"JobLanderDev/TargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/TargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/api/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":5000,"protocol":"HTTP","targetGroupAttributes":[{"key":"deregistration_delay.timeout_seconds","value":"30"},{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":"vpc-03019039f5b20e40d"}}}}},"Distribution":{"id":"Distribution","path":"JobLanderDev/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"JobLanderDev/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"JobLanderDev/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3Origin":{"id":"S3Origin","path":"JobLanderDev/Distribution/Origin2/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderDev/Distribution/Origin2/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for JobLanderDevDistributionOrigin23F6C9022"}}}}}}}},"Resource":{"id":"Resource","path":"JobLanderDev/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ALBAEE750D2","DNSName"]},"id":"JobLanderDevDistributionOrigin1F63758C7","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":{"Fn::GetAtt":["UploadsBucket5E5E9B64","RegionalDomainName"]},"id":"JobLanderDevDistributionOrigin23F6C9022","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin2S3OriginE484D4BF"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"JobLanderDevDistributionOrigin1F63758C7","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/assets/*","targetOriginId":"JobLanderDevDistributionOrigin23F6C9022","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"JobLanderDev/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontURL":{"id":"CloudFrontURL","path":"JobLanderDev/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"JobLanderDev/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ECRRepositoryURI":{"id":"ECRRepositoryURI","path":"JobLanderDev/ECRRepositoryURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"JobLanderDev/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ClusterName":{"id":"ClusterName","path":"JobLanderDev/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ServiceName":{"id":"ServiceName","path":"JobLanderDev/ServiceName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"JobLanderDev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"JobLanderDev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"JobLanderDev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"JobLanderDev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"JobLanderStaging":{"id":"JobLanderStaging","path":"JobLanderStaging","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"VPC":{"id":"VPC","path":"JobLanderStaging/VPC","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"JobLanderStaging/VPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"JobLanderStaging/VPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet3":{"id":"PublicSubnet3","path":"JobLanderStaging/VPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet4":{"id":"PublicSubnet4","path":"JobLanderStaging/VPC/PublicSubnet4","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet5":{"id":"PublicSubnet5","path":"JobLanderStaging/VPC/PublicSubnet5","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet6":{"id":"PublicSubnet6","path":"JobLanderStaging/VPC/PublicSubnet6","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UploadsBucket":{"id":"UploadsBucket","path":"JobLanderStaging/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"job-lander-uploads-staging-817977749885","corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","DELETE"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"id":"ExpireOldUploads","status":"Enabled"}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"JobLanderStaging/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin2S3OriginE484D4BF","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"JobLanderStaging/UploadsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"JobLanderStaging/UploadsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"JobLanderStaging/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.219.0"},"children":{"Staging":{"id":"Staging","path":"JobLanderStaging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.219.0"}},"Role":{"id":"Role","path":"JobLanderStaging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}},"Handler":{"id":"Handler","path":"JobLanderStaging/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"DBSecret":{"id":"DBSecret","path":"JobLanderStaging/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/DBSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludePunctuation":true,"includeSpace":false},"name":"job-lander-db-secret-staging"}}},"Attachment":{"id":"Attachment","path":"JobLanderStaging/DBSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/DBSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"DatabaseB269D8BB"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"JobLanderStaging/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander RDS instance","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","fromPort":5432,"toPort":5432,"description":"Allow ECS tasks to access RDS"}],"vpcId":"vpc-03019039f5b20e40d"}}}}},"Database":{"id":"Database","path":"JobLanderStaging/Database","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.219.0","metadata":[]},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"JobLanderStaging/Database/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"JobLanderStaging/Database/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for Database database","subnetIds":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"]}}}}},"Resource":{"id":"Resource","path":"JobLanderStaging/Database/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":1,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"joblander","dbSubnetGroupName":{"Ref":"DatabaseSubnetGroup7D60F180"},"deleteAutomatedBackups":true,"enablePerformanceInsights":false,"engine":"postgres","engineVersion":"15.8","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"maxAllocatedStorage":100,"publiclyAccessible":false,"storageType":"gp3","vpcSecurityGroups":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}}}},"Repository":{"id":"Repository","path":"JobLanderStaging/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}},"JobLanderCluster":{"id":"JobLanderCluster","path":"JobLanderStaging/JobLanderCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/JobLanderCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"JobLanderStaging-JobLanderCluster","clusterSettings":[{"name":"containerInsights","value":"disabled"}]}}}}},"ALB":{"id":"ALB","path":"JobLanderStaging/ALB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/ALB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"name":"JobLanderStaging-ALB","scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]}],"subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"JobLanderStaging/ALB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/ALB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB JobLanderStagingALBA9E82589","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":"vpc-03019039f5b20e40d"}}},"to JobLanderStagingECSSecurityGroupEFA3FD2E:5000":{"id":"to JobLanderStagingECSSecurityGroupEFA3FD2E:5000","path":"JobLanderStaging/ALB/SecurityGroup/to JobLanderStagingECSSecurityGroupEFA3FD2E:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"fromPort":5000,"groupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","toPort":5000}}}}},"Listener":{"id":"Listener","path":"JobLanderStaging/ALB/Listener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/ALB/Listener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"}}],"loadBalancerArn":{"Ref":"ALBAEE750D2"},"port":80,"protocol":"HTTP"}}}}}}},"LogGroup":{"id":"LogGroup","path":"JobLanderStaging/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/job-lander-staging","retentionInDays":7}}}}},"TaskDef":{"id":"TaskDef","path":"JobLanderStaging/TaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.219.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"JobLanderStaging/TaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"JobLanderStaging/TaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderStaging/TaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderStaging/TaskDef/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/TaskDef/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TaskDefTaskRoleDefaultPolicyA592CB18","roles":[{"Ref":"TaskDefTaskRole1EDB4A67"}]}}}}}}},"Resource":{"id":"Resource","path":"JobLanderStaging/TaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",["817977749885.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/job-lander-staging:latest"]]},"name":"JobLanderContainer","portMappings":[{"containerPort":5000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"LogGroupF5B46931"},"awslogs-stream-prefix":"ecs","awslogs-region":"us-east-1"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"5000"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"S3_BUCKET_NAME","value":{"Ref":"UploadsBucket5E5E9B64"}},{"name":"DB_HOST","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Address"]}},{"name":"DB_PORT","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Port"]}},{"name":"DB_NAME","value":"joblander"},{"name":"DB_USER","value":"postgres"}],"secrets":[{"name":"DB_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"DBSecretD58955BC"},":password::"]]}},{"name":"GEMINI_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-staging"},{"name":"SESSION_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-staging"},{"name":"CANVA_CLIENT_ID","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-staging"},{"name":"CANVA_CLIENT_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-staging"},{"name":"JSEARCH_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-staging"},{"name":"WEB3_RPC_URL","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-staging"},{"name":"PRIVATE_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-staging"}],"healthCheck":{"command":["CMD-SHELL","curl -f http://localhost:5000/api/health || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"1024","executionRoleArn":{"Fn::GetAtt":["TaskDefExecutionRoleB4775C97","Arn"]},"family":"job-lander-task-staging","memory":"2048","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefTaskRole1EDB4A67","Arn"]}}}},"JobLanderContainer":{"id":"JobLanderContainer","path":"JobLanderStaging/TaskDef/JobLanderContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.219.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"JobLanderStaging/TaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"JobLanderStaging/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderStaging/TaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderStaging/TaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/TaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:817977749885:repository/job-lander-staging"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LogGroupF5B46931","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-staging-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-staging-??????",{"Ref":"DBSecretD58955BC"}]}],"Version":"2012-10-17"},"policyName":"TaskDefExecutionRoleDefaultPolicy0DBB737A","roles":[{"Ref":"TaskDefExecutionRoleB4775C97"}]}}}}}}}}},"GeminiSecret":{"id":"GeminiSecret","path":"JobLanderStaging/GeminiSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"SessionSecret":{"id":"SessionSecret","path":"JobLanderStaging/SessionSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientId":{"id":"CanvaClientId","path":"JobLanderStaging/CanvaClientId","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientSecret":{"id":"CanvaClientSecret","path":"JobLanderStaging/CanvaClientSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"JSearchApiKey":{"id":"JSearchApiKey","path":"JobLanderStaging/JSearchApiKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Web3RpcUrl":{"id":"Web3RpcUrl","path":"JobLanderStaging/Web3RpcUrl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PrivateKey":{"id":"PrivateKey","path":"JobLanderStaging/PrivateKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"ECSSecurityGroup":{"id":"ECSSecurityGroup","path":"JobLanderStaging/ECSSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/ECSSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander ECS service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","fromPort":5000,"toPort":5000,"description":"Allow ALB to access ECS service"}],"vpcId":"vpc-03019039f5b20e40d"}}},"from JobLanderStagingALBSecurityGroup821A78DE:5000":{"id":"from JobLanderStagingALBSecurityGroup821A78DE:5000","path":"JobLanderStaging/ECSSecurityGroup/from JobLanderStagingALBSecurityGroup821A78DE:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":5000,"groupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"toPort":5000}}}}},"Service":{"id":"Service","path":"JobLanderStaging/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.219.0","metadata":[]},"children":{"Service":{"id":"Service","path":"JobLanderStaging/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"JobLanderCluster9A38F0EB"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"deploymentCircuitBreaker":{"enable":true,"rollback":true}},"desiredCount":2,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"},"containerName":"JobLanderContainer","containerPort":5000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"ENABLED","subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"securityGroups":[{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]}]}},"serviceName":"JobLanderStaging-JobLanderService","taskDefinition":{"Ref":"TaskDef54694570"}}}},"ScalingRole":{"id":"ScalingRole","path":"JobLanderStaging/Service/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"JobLanderStaging/Service/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.219.0"},"children":{"Target":{"id":"Target","path":"JobLanderStaging/Service/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/Service/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":6,"minCapacity":2,"resourceId":{"Fn::Join":["",["service/",{"Ref":"JobLanderCluster9A38F0EB"},"/",{"Fn::GetAtt":["ServiceD69D759B","Name"]}]]},"roleArn":"arn:aws:iam::817977749885:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"CpuScaling":{"id":"CpuScaling","path":"JobLanderStaging/Service/TaskCount/Target/CpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/Service/TaskCount/Target/CpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"JobLanderStagingServiceTaskCountTargetCpuScalingD4F09AF5","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"ServiceTaskCountTarget23E25614"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":70}}}}}},"MemoryScaling":{"id":"MemoryScaling","path":"JobLanderStaging/Service/TaskCount/Target/MemoryScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/Service/TaskCount/Target/MemoryScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"JobLanderStagingServiceTaskCountTargetMemoryScaling0E84577E","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"ServiceTaskCountTarget23E25614"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageMemoryUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":80}}}}}}}}}}}},"TargetGroup":{"id":"TargetGroup","path":"JobLanderStaging/TargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/TargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/api/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":5000,"protocol":"HTTP","targetGroupAttributes":[{"key":"deregistration_delay.timeout_seconds","value":"30"},{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":"vpc-03019039f5b20e40d"}}}}},"Distribution":{"id":"Distribution","path":"JobLanderStaging/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"JobLanderStaging/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"JobLanderStaging/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3Origin":{"id":"S3Origin","path":"JobLanderStaging/Distribution/Origin2/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderStaging/Distribution/Origin2/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for JobLanderStagingDistributionOrigin2C01487B9"}}}}}}}},"Resource":{"id":"Resource","path":"JobLanderStaging/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ALBAEE750D2","DNSName"]},"id":"JobLanderStagingDistributionOrigin1564EACD6","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":{"Fn::GetAtt":["UploadsBucket5E5E9B64","RegionalDomainName"]},"id":"JobLanderStagingDistributionOrigin2C01487B9","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin2S3OriginE484D4BF"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"JobLanderStagingDistributionOrigin1564EACD6","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/assets/*","targetOriginId":"JobLanderStagingDistributionOrigin2C01487B9","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"JobLanderStaging/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontURL":{"id":"CloudFrontURL","path":"JobLanderStaging/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"JobLanderStaging/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ECRRepositoryURI":{"id":"ECRRepositoryURI","path":"JobLanderStaging/ECRRepositoryURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"JobLanderStaging/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ClusterName":{"id":"ClusterName","path":"JobLanderStaging/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ServiceName":{"id":"ServiceName","path":"JobLanderStaging/ServiceName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"JobLanderStaging/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"JobLanderStaging/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"JobLanderStaging/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"JobLanderStaging/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"JobLanderProd":{"id":"JobLanderProd","path":"JobLanderProd","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.219.0"},"children":{"VPC":{"id":"VPC","path":"JobLanderProd/VPC","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"JobLanderProd/VPC/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet2":{"id":"PublicSubnet2","path":"JobLanderProd/VPC/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet3":{"id":"PublicSubnet3","path":"JobLanderProd/VPC/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet4":{"id":"PublicSubnet4","path":"JobLanderProd/VPC/PublicSubnet4","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet5":{"id":"PublicSubnet5","path":"JobLanderProd/VPC/PublicSubnet5","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PublicSubnet6":{"id":"PublicSubnet6","path":"JobLanderProd/VPC/PublicSubnet6","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}}}},"UploadsBucket":{"id":"UploadsBucket","path":"JobLanderProd/UploadsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/UploadsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"job-lander-uploads-production-817977749885","corsConfiguration":{"corsRules":[{"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","DELETE"],"allowedOrigins":["*"]}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":90,"id":"ExpireOldUploads","status":"Enabled"}]},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"JobLanderProd/UploadsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/UploadsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"UploadsBucket5E5E9B64"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin2S3OriginE484D4BF","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"DBSecret":{"id":"DBSecret","path":"JobLanderProd/DBSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/DBSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludePunctuation":true,"includeSpace":false},"name":"job-lander-db-secret-production"}}},"Attachment":{"id":"Attachment","path":"JobLanderProd/DBSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/DBSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DBSecretD58955BC"},"targetId":{"Ref":"DatabaseB269D8BB"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"DBSecurityGroup":{"id":"DBSecurityGroup","path":"JobLanderProd/DBSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/DBSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander RDS instance","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","fromPort":5432,"toPort":5432,"description":"Allow ECS tasks to access RDS"}],"vpcId":"vpc-03019039f5b20e40d"}}}}},"Database":{"id":"Database","path":"JobLanderProd/Database","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.219.0","metadata":[]},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"JobLanderProd/Database/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.219.0","metadata":[]},"children":{"Default":{"id":"Default","path":"JobLanderProd/Database/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for Database database","subnetIds":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"]}}}}},"Resource":{"id":"Resource","path":"JobLanderProd/Database/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"100","backupRetentionPeriod":7,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.medium","dbName":"joblander","dbSubnetGroupName":{"Ref":"DatabaseSubnetGroup7D60F180"},"deleteAutomatedBackups":false,"enablePerformanceInsights":true,"engine":"postgres","engineVersion":"15.8","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DBSecretD58955BC"},":SecretString:password::}}"]]},"maxAllocatedStorage":500,"performanceInsightsRetentionPeriod":7,"publiclyAccessible":false,"storageType":"gp3","vpcSecurityGroups":[{"Fn::GetAtt":["DBSecurityGroupE3B245A3","GroupId"]}]}}}}},"Repository":{"id":"Repository","path":"JobLanderProd/Repository","constructInfo":{"fqn":"aws-cdk-lib.aws_ecr.RepositoryBase","version":"2.219.0","metadata":[]}},"JobLanderCluster":{"id":"JobLanderCluster","path":"JobLanderProd/JobLanderCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/JobLanderCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"JobLanderProd-JobLanderCluster","clusterSettings":[{"name":"containerInsights","value":"enabled"}]}}}}},"ALB":{"id":"ALB","path":"JobLanderProd/ALB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/ALB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"name":"JobLanderProd-ALB","scheme":"internet-facing","securityGroups":[{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]}],"subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"JobLanderProd/ALB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/ALB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB JobLanderProdALB0A913128","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"vpcId":"vpc-03019039f5b20e40d"}}},"to JobLanderProdECSSecurityGroup36DA0B26:5000":{"id":"to JobLanderProdECSSecurityGroup36DA0B26:5000","path":"JobLanderProd/ALB/SecurityGroup/to JobLanderProdECSSecurityGroup36DA0B26:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"fromPort":5000,"groupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","toPort":5000}}}}},"Listener":{"id":"Listener","path":"JobLanderProd/ALB/Listener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/ALB/Listener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"}}],"loadBalancerArn":{"Ref":"ALBAEE750D2"},"port":80,"protocol":"HTTP"}}}}}}},"LogGroup":{"id":"LogGroup","path":"JobLanderProd/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/ecs/job-lander-production","retentionInDays":30}}}}},"TaskDef":{"id":"TaskDef","path":"JobLanderProd/TaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.219.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"JobLanderProd/TaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"JobLanderProd/TaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderProd/TaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderProd/TaskDef/TaskRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/TaskDef/TaskRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UploadsBucket5E5E9B64","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"TaskDefTaskRoleDefaultPolicyA592CB18","roles":[{"Ref":"TaskDefTaskRole1EDB4A67"}]}}}}}}},"Resource":{"id":"Resource","path":"JobLanderProd/TaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":{"Fn::Join":["",["817977749885.dkr.ecr.us-east-1.",{"Ref":"AWS::URLSuffix"},"/job-lander-production:latest"]]},"name":"JobLanderContainer","portMappings":[{"containerPort":5000,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"LogGroupF5B46931"},"awslogs-stream-prefix":"ecs","awslogs-region":"us-east-1"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"5000"},{"name":"AWS_REGION","value":"us-east-1"},{"name":"S3_BUCKET_NAME","value":{"Ref":"UploadsBucket5E5E9B64"}},{"name":"DB_HOST","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Address"]}},{"name":"DB_PORT","value":{"Fn::GetAtt":["DatabaseB269D8BB","Endpoint.Port"]}},{"name":"DB_NAME","value":"joblander"},{"name":"DB_USER","value":"postgres"}],"secrets":[{"name":"DB_PASSWORD","valueFrom":{"Fn::Join":["",[{"Ref":"DBSecretD58955BC"},":password::"]]}},{"name":"GEMINI_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-production"},{"name":"SESSION_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-production"},{"name":"CANVA_CLIENT_ID","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-production"},{"name":"CANVA_CLIENT_SECRET","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-production"},{"name":"JSEARCH_API_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-production"},{"name":"WEB3_RPC_URL","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-production"},{"name":"PRIVATE_KEY","valueFrom":"arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-production"}],"healthCheck":{"command":["CMD-SHELL","curl -f http://localhost:5000/api/health || exit 1"],"interval":30,"retries":3,"startPeriod":60,"timeout":5}}],"cpu":"2048","executionRoleArn":{"Fn::GetAtt":["TaskDefExecutionRoleB4775C97","Arn"]},"family":"job-lander-task-production","memory":"4096","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"taskRoleArn":{"Fn::GetAtt":["TaskDefTaskRole1EDB4A67","Arn"]}}}},"JobLanderContainer":{"id":"JobLanderContainer","path":"JobLanderProd/TaskDef/JobLanderContainer","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.219.0"}},"ExecutionRole":{"id":"ExecutionRole","path":"JobLanderProd/TaskDef/ExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.219.0","metadata":[]},"children":{"ImportExecutionRole":{"id":"ImportExecutionRole","path":"JobLanderProd/TaskDef/ExecutionRole/ImportExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Resource":{"id":"Resource","path":"JobLanderProd/TaskDef/ExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"JobLanderProd/TaskDef/ExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/TaskDef/ExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ecr:BatchCheckLayerAvailability","ecr:BatchGetImage","ecr:GetDownloadUrlForLayer"],"Effect":"Allow","Resource":"arn:aws:ecr:us-east-1:817977749885:repository/job-lander-production"},{"Action":"ecr:GetAuthorizationToken","Effect":"Allow","Resource":"*"},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LogGroupF5B46931","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":["arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-id-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/canva-client-secret-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/gemini-api-key-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/jsearch-api-key-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/private-key-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/session-secret-production-??????","arn:aws:secretsmanager:us-east-1:817977749885:secret:job-lander/web3-rpc-url-production-??????",{"Ref":"DBSecretD58955BC"}]}],"Version":"2012-10-17"},"policyName":"TaskDefExecutionRoleDefaultPolicy0DBB737A","roles":[{"Ref":"TaskDefExecutionRoleB4775C97"}]}}}}}}}}},"GeminiSecret":{"id":"GeminiSecret","path":"JobLanderProd/GeminiSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"SessionSecret":{"id":"SessionSecret","path":"JobLanderProd/SessionSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientId":{"id":"CanvaClientId","path":"JobLanderProd/CanvaClientId","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"CanvaClientSecret":{"id":"CanvaClientSecret","path":"JobLanderProd/CanvaClientSecret","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"JSearchApiKey":{"id":"JSearchApiKey","path":"JobLanderProd/JSearchApiKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"Web3RpcUrl":{"id":"Web3RpcUrl","path":"JobLanderProd/Web3RpcUrl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"PrivateKey":{"id":"PrivateKey","path":"JobLanderProd/PrivateKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"ECSSecurityGroup":{"id":"ECSSecurityGroup","path":"JobLanderProd/ECSSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/ECSSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Job-Lander ECS service","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"ipProtocol":"tcp","fromPort":5000,"toPort":5000,"description":"Allow ALB to access ECS service"}],"vpcId":"vpc-03019039f5b20e40d"}}},"from JobLanderProdALBSecurityGroupBAA2A47D:5000":{"id":"from JobLanderProdALBSecurityGroupBAA2A47D:5000","path":"JobLanderProd/ECSSecurityGroup/from JobLanderProdALBSecurityGroupBAA2A47D:5000","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":5000,"groupId":{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ALBSecurityGroup8B8624F8","GroupId"]},"toPort":5000}}}}},"Service":{"id":"Service","path":"JobLanderProd/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.219.0","metadata":[]},"children":{"Service":{"id":"Service","path":"JobLanderProd/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"JobLanderCluster9A38F0EB"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"deploymentCircuitBreaker":{"enable":true,"rollback":true}},"desiredCount":3,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"TargetGroup3D7CD9B8"},"containerName":"JobLanderContainer","containerPort":5000}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"ENABLED","subnets":["subnet-0aff1eabf6f102b31","subnet-0b412834e2219fc84","subnet-0c55b0d57fbee267b","subnet-0ff4ce7df07628b4f","subnet-0c3b2320510446ec3","subnet-0859081978043eb6a"],"securityGroups":[{"Fn::GetAtt":["ECSSecurityGroupA14DBE7D","GroupId"]}]}},"serviceName":"JobLanderProd-JobLanderService","taskDefinition":{"Ref":"TaskDef54694570"}}}},"ScalingRole":{"id":"ScalingRole","path":"JobLanderProd/Service/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.219.0","metadata":[]}},"TaskCount":{"id":"TaskCount","path":"JobLanderProd/Service/TaskCount","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ScalableTaskCount","version":"2.219.0"},"children":{"Target":{"id":"Target","path":"JobLanderProd/Service/TaskCount/Target","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.ScalableTarget","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/Service/TaskCount/Target/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalableTarget","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalableTarget","aws:cdk:cloudformation:props":{"maxCapacity":9,"minCapacity":3,"resourceId":{"Fn::Join":["",["service/",{"Ref":"JobLanderCluster9A38F0EB"},"/",{"Fn::GetAtt":["ServiceD69D759B","Name"]}]]},"roleArn":"arn:aws:iam::817977749885:role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService","scalableDimension":"ecs:service:DesiredCount","serviceNamespace":"ecs"}}},"CpuScaling":{"id":"CpuScaling","path":"JobLanderProd/Service/TaskCount/Target/CpuScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/Service/TaskCount/Target/CpuScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"JobLanderProdServiceTaskCountTargetCpuScalingF1D11F33","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"ServiceTaskCountTarget23E25614"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageCPUUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":70}}}}}},"MemoryScaling":{"id":"MemoryScaling","path":"JobLanderProd/Service/TaskCount/Target/MemoryScaling","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.TargetTrackingScalingPolicy","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/Service/TaskCount/Target/MemoryScaling/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_applicationautoscaling.CfnScalingPolicy","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApplicationAutoScaling::ScalingPolicy","aws:cdk:cloudformation:props":{"policyName":"JobLanderProdServiceTaskCountTargetMemoryScalingCCA50323","policyType":"TargetTrackingScaling","scalingTargetId":{"Ref":"ServiceTaskCountTarget23E25614"},"targetTrackingScalingPolicyConfiguration":{"predefinedMetricSpecification":{"predefinedMetricType":"ECSServiceAverageMemoryUtilization"},"scaleInCooldown":60,"scaleOutCooldown":60,"targetValue":80}}}}}}}}}}}},"TargetGroup":{"id":"TargetGroup","path":"JobLanderProd/TargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.219.0"},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/TargetGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"healthCheckIntervalSeconds":30,"healthCheckPath":"/api/health","healthCheckTimeoutSeconds":5,"healthyThresholdCount":2,"port":5000,"protocol":"HTTP","targetGroupAttributes":[{"key":"deregistration_delay.timeout_seconds","value":"30"},{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","unhealthyThresholdCount":3,"vpcId":"vpc-03019039f5b20e40d"}}}}},"Distribution":{"id":"Distribution","path":"JobLanderProd/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.219.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"JobLanderProd/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Origin2":{"id":"Origin2","path":"JobLanderProd/Distribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"S3Origin":{"id":"S3Origin","path":"JobLanderProd/Distribution/Origin2/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.219.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"JobLanderProd/Distribution/Origin2/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for JobLanderProdDistributionOrigin2E1613438"}}}}}}}},"Resource":{"id":"Resource","path":"JobLanderProd/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.219.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ALBAEE750D2","DNSName"]},"id":"JobLanderProdDistributionOrigin1593BAE88","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}},{"domainName":{"Fn::GetAtt":["UploadsBucket5E5E9B64","RegionalDomainName"]},"id":"JobLanderProdDistributionOrigin2E1613438","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin2S3OriginE484D4BF"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"JobLanderProdDistributionOrigin1593BAE88","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"216adef6-5c7f-47e4-b989-5492eafa07d3","viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/assets/*","targetOriginId":"JobLanderProdDistributionOrigin2E1613438","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"JobLanderProd/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CloudFrontURL":{"id":"CloudFrontURL","path":"JobLanderProd/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"JobLanderProd/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ECRRepositoryURI":{"id":"ECRRepositoryURI","path":"JobLanderProd/ECRRepositoryURI","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"UploadsBucketName":{"id":"UploadsBucketName","path":"JobLanderProd/UploadsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ClusterName":{"id":"ClusterName","path":"JobLanderProd/ClusterName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"ServiceName":{"id":"ServiceName","path":"JobLanderProd/ServiceName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.219.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"JobLanderProd/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"JobLanderProd/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.219.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"JobLanderProd/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.219.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"JobLanderProd/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.219.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}