/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var MO=Object.create;var Oi=Object.defineProperty;var LO=Object.getOwnPropertyDescriptor;var FO=Object.getOwnPropertyNames;var BO=Object.getPrototypeOf,UO=Object.prototype.hasOwnProperty;var ee=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var T=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ct=(e,t)=>{for(var r in t)Oi(e,r,{get:t[r],enumerable:!0})},ry=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of FO(t))!UO.call(e,o)&&o!==r&&Oi(e,o,{get:()=>t[o],enumerable:!(n=LO(t,o))||n.enumerable});return e};var v=(e,t,r)=>(r=e!=null?MO(BO(e)):{},ry(t||!e||!e.__esModule?Oi(r,"default",{value:e,enumerable:!0}):r,e)),Y=e=>ry(Oi({},"__esModule",{value:!0}),e);import{createRequire as $O}from"node:module";import HO from"node:path";import qO from"node:url";var c=T(()=>{global.require=$O(import.meta.url);global.__filename=qO.fileURLToPath(import.meta.url);global.__dirname=HO.dirname(__filename)});var br=I(ue=>{"use strict";c();ue.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpAuthLocation||(ue.HttpAuthLocation={}));ue.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpApiKeyAuthLocation||(ue.HttpApiKeyAuthLocation={}));ue.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ue.EndpointURLScheme||(ue.EndpointURLScheme={}));ue.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ue.AlgorithmId||(ue.AlgorithmId={}));var jO=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ue.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ue.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},zO=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},VO=e=>jO(e),GO=e=>zO(e);ue.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ue.FieldPosition||(ue.FieldPosition={}));var WO="__smithy_context";ue.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ue.IniSectionType||(ue.IniSectionType={}));ue.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ue.RequestHandlerProtocol||(ue.RequestHandlerProtocol={}));ue.SMITHY_CONTEXT_KEY=WO;ue.getDefaultClientConfiguration=VO;ue.resolveDefaultRuntimeConfig=GO});var ie=I(Cr=>{"use strict";c();var KO=br(),YO=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),JO=e=>({httpHandler:e.httpHandler()}),Eu=class{name;kind;values;constructor({name:t,kind:r=KO.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},_u=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},wu=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=XO(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function XO(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var xu=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function QO(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Cr.Field=Eu;Cr.Fields=_u;Cr.HttpRequest=wu;Cr.HttpResponse=xu;Cr.getHttpHandlerExtensionConfiguration=YO;Cr.isValidHostname=QO;Cr.resolveHttpHandlerRuntimeConfig=JO});var uy=I((A8,ly)=>{"use strict";c();var Ni=Object.defineProperty,ZO=Object.getOwnPropertyDescriptor,eN=Object.getOwnPropertyNames,tN=Object.prototype.hasOwnProperty,Wo=(e,t)=>Ni(e,"name",{value:t,configurable:!0}),rN=(e,t)=>{for(var r in t)Ni(e,r,{get:t[r],enumerable:!0})},nN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of eN(t))!tN.call(e,o)&&o!==r&&Ni(e,o,{get:()=>t[o],enumerable:!(n=ZO(t,o))||n.enumerable});return e},oN=e=>nN(Ni({},"__esModule",{value:!0}),e),ny={};rN(ny,{eventStreamHandlingMiddleware:()=>iy,eventStreamHandlingMiddlewareOptions:()=>ay,eventStreamHeaderMiddleware:()=>cy,eventStreamHeaderMiddlewareOptions:()=>dy,getEventStreamPlugin:()=>sN,resolveEventStreamConfig:()=>oy});ly.exports=oN(ny);function oy(e){let t=e.signer,r=e.signer,n=Object.assign(e,{eventSigner:t,messageSigner:r}),o=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:o})}Wo(oy,"resolveEventStreamConfig");var sy=ie(),iy=Wo(e=>(t,r)=>async n=>{let{request:o}=n;return sy.HttpRequest.isInstance(o)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},"eventStreamHandlingMiddleware"),ay={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},cy=Wo(e=>async t=>{let{request:r}=t;return sy.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},"eventStreamHeaderMiddleware"),dy={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},sN=Wo(e=>({applyToStack:Wo(t=>{t.addRelativeTo(iy(e),ay),t.add(cy,dy)},"applyToStack")}),"getEventStreamPlugin")});var zn=I((I8,gy)=>{"use strict";c();var ki=Object.defineProperty,iN=Object.getOwnPropertyDescriptor,aN=Object.getOwnPropertyNames,cN=Object.prototype.hasOwnProperty,Di=(e,t)=>ki(e,"name",{value:t,configurable:!0}),dN=(e,t)=>{for(var r in t)ki(e,r,{get:t[r],enumerable:!0})},lN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of aN(t))!cN.call(e,o)&&o!==r&&ki(e,o,{get:()=>t[o],enumerable:!(n=iN(t,o))||n.enumerable});return e},uN=e=>lN(ki({},"__esModule",{value:!0}),e),fy={};dN(fy,{getHostHeaderPlugin:()=>mN,hostHeaderMiddleware:()=>py,hostHeaderMiddlewareOptions:()=>hy,resolveHostHeaderConfig:()=>my});gy.exports=uN(fy);var fN=ie();function my(e){return e}Di(my,"resolveHostHeaderConfig");var py=Di(e=>t=>async r=>{if(!fN.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},"hostHeaderMiddleware"),hy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},mN=Di(e=>({applyToStack:Di(t=>{t.add(py(e),hy)},"applyToStack")}),"getHostHeaderPlugin")});var Vn=I((O8,_y)=>{"use strict";c();var Mi=Object.defineProperty,pN=Object.getOwnPropertyDescriptor,hN=Object.getOwnPropertyNames,gN=Object.prototype.hasOwnProperty,bu=(e,t)=>Mi(e,"name",{value:t,configurable:!0}),yN=(e,t)=>{for(var r in t)Mi(e,r,{get:t[r],enumerable:!0})},SN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of hN(t))!gN.call(e,o)&&o!==r&&Mi(e,o,{get:()=>t[o],enumerable:!(n=pN(t,o))||n.enumerable});return e},EN=e=>SN(Mi({},"__esModule",{value:!0}),e),yy={};yN(yy,{getLoggerPlugin:()=>_N,loggerMiddleware:()=>Sy,loggerMiddlewareOptions:()=>Ey});_y.exports=EN(yy);var Sy=bu(()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:l}=a,m=d??t.inputFilterSensitiveLog,h=l??t.outputFilterSensitiveLog,{$metadata:S,...y}=n.output;return i?.info?.({clientName:o,commandName:s,input:m(r.input),output:h(y),metadata:S}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:d}=a,l=d??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:l(r.input),error:n,metadata:n.$metadata}),n}},"loggerMiddleware"),Ey={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},_N=bu(e=>({applyToStack:bu(t=>{t.add(Sy(),Ey)},"applyToStack")}),"getLoggerPlugin")});var wy=I(Fi=>{"use strict";c();Object.defineProperty(Fi,"__esModule",{value:!0});Fi.InvokeStore=void 0;var wN=ee("async_hooks"),Cu=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Cu||(globalThis.awslambda=globalThis.awslambda||{});var xN={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},Tu=class{static storage=new wN.AsyncLocalStorage;static PROTECTED_KEYS=xN;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}},Li;!Cu&&globalThis.awslambda?.InvokeStore?Li=globalThis.awslambda.InvokeStore:(Li=Tu,!Cu&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=Li));Fi.InvokeStore=Li});var Au=I(Bi=>{"use strict";c();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.recursionDetectionMiddleware=void 0;var bN=wy(),CN=ie(),vu="X-Amzn-Trace-Id",TN="AWS_LAMBDA_FUNCTION_NAME",vN="_X_AMZN_TRACE_ID",AN=()=>e=>async t=>{let{request:r}=t;if(!CN.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(l=>l.toLowerCase()===vu.toLowerCase())??vu;if(r.headers.hasOwnProperty(n))return e(t);let o=process.env[TN],s=process.env[vN],a=bN.InvokeStore.getXRayTraceId()??s,d=l=>typeof l=="string"&&l.length>0;return d(o)&&d(a)&&(r.headers[vu]=a),e({...t,request:r})};Bi.recursionDetectionMiddleware=AN});var Gn=I((F8,Pu)=>{"use strict";c();var Ui=Object.defineProperty,RN=Object.getOwnPropertyDescriptor,IN=Object.getOwnPropertyNames,PN=Object.prototype.hasOwnProperty,xy=(e,t)=>Ui(e,"name",{value:t,configurable:!0}),ON=(e,t)=>{for(var r in t)Ui(e,r,{get:t[r],enumerable:!0})},Ru=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IN(t))!PN.call(e,o)&&o!==r&&Ui(e,o,{get:()=>t[o],enumerable:!(n=RN(t,o))||n.enumerable});return e},NN=(e,t,r)=>(Ru(e,t,"default"),r&&Ru(r,t,"default")),DN=e=>Ru(Ui({},"__esModule",{value:!0}),e),Iu={};ON(Iu,{getRecursionDetectionPlugin:()=>LN});Pu.exports=DN(Iu);var kN={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},MN=Au(),LN=xy(e=>({applyToStack:xy(t=>{t.add((0,MN.recursionDetectionMiddleware)(),kN)},"applyToStack")}),"getRecursionDetectionPlugin");NN(Iu,Au(),Pu.exports)});var Ou,FN,by=T(()=>{c();Ou=v(br()),FN=e=>e[Ou.SMITHY_CONTEXT_KEY]||(e[Ou.SMITHY_CONTEXT_KEY]={})});var Xe=I(Nu=>{"use strict";c();var Cy=br(),BN=e=>e[Cy.SMITHY_CONTEXT_KEY]||(e[Cy.SMITHY_CONTEXT_KEY]={}),UN=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Nu.getSmithyContext=BN;Nu.normalizeProvider=UN});var Ty,vy=T(()=>{c();Ty=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function $N(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Ay,Ko,$i=T(()=>{c();Ay=v(Xe());vy();Ko=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=Ty(s,i),d=$N(e.httpAuthSchemes),l=(0,Ay.getSmithyContext)(n),m=[];for(let h of a){let S=d.get(h.schemeId);if(!S){m.push(`HttpAuthScheme \`${h.schemeId}\` was not enabled for this service.`);continue}let y=S.identityProvider(await t.identityProviderConfigProvider(e));if(!y){m.push(`HttpAuthScheme \`${h.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:w={},signingProperties:R={}}=h.propertiesExtractor?.(e,n)||{};h.identityProperties=Object.assign(h.identityProperties||{},w),h.signingProperties=Object.assign(h.signingProperties||{},R),l.selectedHttpAuthScheme={httpAuthOption:h,identity:await y(h.identityProperties),signer:S.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(m.join(`
`));return r(o)}});var Ry,Yo,Iy=T(()=>{c();$i();Ry={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Yo=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ko(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Ry)}})});var Qt=I(Wn=>{"use strict";c();var HN=ie(),Py=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(HN.HttpResponse.isInstance(s)){let{headers:d={}}=s,l=Object.entries(d);i.$metadata={httpStatusCode:s.statusCode,requestId:Du(/^x-[\w-]+-request-?id$/,l),extendedRequestId:Du(/^x-[\w-]+-id-2$/,l),cfId:Du(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},Du=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],Oy=(e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},Ny={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Dy={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function qN(e,t,r){return{applyToStack:n=>{n.add(Py(e,r),Ny),n.add(Oy(e,t),Dy)}}}Wn.deserializerMiddleware=Py;Wn.deserializerMiddlewareOption=Ny;Wn.getSerdePlugin=qN;Wn.serializerMiddleware=Oy;Wn.serializerMiddlewareOption=Dy});var ky,My,jN,Ly=T(()=>{c();ky=v(Qt());$i();My={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:ky.serializerMiddlewareOption.name},jN=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ko(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),My)}})});var Fy=T(()=>{c();$i();Iy();Ly()});var By,Uy,zN,VN,ku,Mu=T(()=>{c();By=v(ie()),Uy=v(Xe()),zN=e=>t=>{throw t},VN=(e,t)=>{},ku=e=>(t,r)=>async n=>{if(!By.HttpRequest.isInstance(n.request))return t(n);let s=(0,Uy.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:d}=s,l=await t({...n,request:await d.sign(n.request,a,i)}).catch((d.errorHandler||zN)(i));return(d.successHandler||VN)(l.response,i),l}});var $y,Jo,Hy=T(()=>{c();Mu();$y={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Jo=e=>({applyToStack:t=>{t.addRelativeTo(ku(e),$y)}})});var qy=T(()=>{c();Mu();Hy()});var Tr,jy=T(()=>{c();Tr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function zy(e,t,r,n,o){return async function*(i,a,...d){let l=a,m=i.startingToken??l[r],h=!0,S;for(;h;){if(l[r]=m,o&&(l[o]=l[o]??i.pageSize),i.client instanceof e)S=await GN(t,i.client,a,i.withCommand,...d);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield S;let y=m;m=WN(S,n),h=!!(m&&(!i.stopOnSameToken||m!==y))}return void 0}}var GN,WN,Vy=T(()=>{c();GN=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};WN=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var Lu=I(Gy=>{"use strict";c();var KN=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Gy.isArrayBuffer=KN});var Kn=I(Bu=>{"use strict";c();var YN=Lu(),Fu=ee("buffer"),JN=(e,t=0,r=e.byteLength-t)=>{if(!YN.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Fu.Buffer.from(e,t,r)},XN=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Fu.Buffer.from(e,t):Fu.Buffer.from(e)};Bu.fromArrayBuffer=JN;Bu.fromString=XN});var Wy=I(Hi=>{"use strict";c();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.fromBase64=void 0;var QN=Kn(),ZN=/^[A-Za-z0-9+/]*={0,2}$/,eD=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!ZN.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,QN.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Hi.fromBase64=eD});var Le=I(qi=>{"use strict";c();var Ky=Kn(),Yy=e=>{let t=Ky.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},tD=e=>typeof e=="string"?Yy(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),rD=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Ky.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};qi.fromUtf8=Yy;qi.toUint8Array=tD;qi.toUtf8=rD});var Jy=I(ji=>{"use strict";c();Object.defineProperty(ji,"__esModule",{value:!0});ji.toBase64=void 0;var nD=Kn(),oD=Le(),sD=e=>{let t;if(typeof e=="string"?t=(0,oD.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,nD.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};ji.toBase64=sD});var Fe=I(Xo=>{"use strict";c();var Xy=Wy(),Qy=Jy();Object.keys(Xy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xo,e)&&Object.defineProperty(Xo,e,{enumerable:!0,get:function(){return Xy[e]}})});Object.keys(Qy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xo,e)&&Object.defineProperty(Xo,e,{enumerable:!0,get:function(){return Qy[e]}})})});var $u=I(zi=>{"use strict";c();Object.defineProperty(zi,"__esModule",{value:!0});zi.ChecksumStream=void 0;var iD=Fe(),aD=ee("stream"),Uu=class extends aD.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:o,base64Encoder:s}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=s??iD.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(o){return n(o)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};zi.ChecksumStream=Uu});var vr=I(Yn=>{"use strict";c();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.isBlob=Yn.isReadableStream=void 0;var cD=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Yn.isReadableStream=cD;var dD=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Yn.isBlob=dD});var Zy=I(Vi=>{"use strict";c();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ChecksumStream=void 0;var lD=typeof ReadableStream=="function"?ReadableStream:function(){},Hu=class extends lD{};Vi.ChecksumStream=Hu});var eS=I(Gi=>{"use strict";c();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.createChecksumStream=void 0;var uD=Fe(),fD=vr(),mD=Zy(),pD=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!(0,fD.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let s=o??uD.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(d,l){t.update(d),l.enqueue(d)},async flush(d){let l=await t.digest(),m=s(l);if(e!==m){let h=new Error(`Checksum mismatch: expected "${e}" but received "${m}" in response header "${n}".`);d.error(h)}else d.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,mD.ChecksumStream.prototype),a};Gi.createChecksumStream=pD});var tS=I(qu=>{"use strict";c();Object.defineProperty(qu,"__esModule",{value:!0});qu.createChecksumStream=SD;var hD=vr(),gD=$u(),yD=eS();function SD(e){return typeof ReadableStream=="function"&&(0,hD.isReadableStream)(e.source)?(0,yD.createChecksumStream)(e):new gD.ChecksumStream(e)}});var zu=I(Wi=>{"use strict";c();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ByteArrayCollector=void 0;var ju=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Wi.ByteArrayCollector=ju});var sS=I(Zt=>{"use strict";c();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.createBufferedReadable=void 0;Zt.createBufferedReadableStream=rS;Zt.merge=nS;Zt.flush=Ki;Zt.sizeOf=Jn;Zt.modeOf=oS;var ED=zu();function rS(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new ED.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,d=async l=>{let{value:m,done:h}=await n.read(),S=m;if(h){if(a!==-1){let y=Ki(i,a);Jn(y)>0&&l.enqueue(y)}l.close()}else{let y=oS(S,!1);if(a!==y&&(a>=0&&l.enqueue(Ki(i,a)),a=y),a===-1){l.enqueue(S);return}let w=Jn(S);s+=w;let R=Jn(i[a]);if(w>=t&&R===0)l.enqueue(S);else{let P=nS(i,a,S);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${w} is below threshold of ${t}, automatically buffering.`)),P>=t?l.enqueue(Ki(i,a)):await d(l)}}};return new ReadableStream({pull:d})}Zt.createBufferedReadable=rS;function nS(e,t,r){switch(t){case 0:return e[0]+=r,Jn(e[0]);case 1:case 2:return e[t].push(r),Jn(e[t])}}function Ki(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Jn(e){return e?.byteLength??e?.length??0}function oS(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var aS=I(Vu=>{"use strict";c();Object.defineProperty(Vu,"__esModule",{value:!0});Vu.createBufferedReadable=xD;var _D=ee("node:stream"),iS=zu(),er=sS(),wD=vr();function xD(e,t,r){if((0,wD.isReadableStream)(e))return(0,er.createBufferedReadableStream)(e,t,r);let n=new _D.Readable({read(){}}),o=!1,s=0,i=["",new iS.ByteArrayCollector(d=>new Uint8Array(d)),new iS.ByteArrayCollector(d=>Buffer.from(new Uint8Array(d)))],a=-1;return e.on("data",d=>{let l=(0,er.modeOf)(d,!0);if(a!==l&&(a>=0&&n.push((0,er.flush)(i,a)),a=l),a===-1){n.push(d);return}let m=(0,er.sizeOf)(d);s+=m;let h=(0,er.sizeOf)(i[a]);if(m>=t&&h===0)n.push(d);else{let S=(0,er.merge)(i,a,d);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),S>=t&&n.push((0,er.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let d=(0,er.flush)(i,a);(0,er.sizeOf)(d)>0&&n.push(d)}n.push(null)}),n}});var cS=I(Yi=>{"use strict";c();Object.defineProperty(Yi,"__esModule",{value:!0});Yi.getAwsChunkedEncodingStream=void 0;var bD=ee("stream"),CD=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,d=a?i(o,e):void 0,l=new bD.Readable({read:()=>{}});return e.on("data",m=>{let h=n(m)||0;l.push(`${h.toString(16)}\r
`),l.push(m),l.push(`\r
`)}),e.on("end",async()=>{if(l.push(`0\r
`),a){let m=r(await d);l.push(`${s}:${m}\r
`),l.push(`\r
`)}l.push(null)}),l};Yi.getAwsChunkedEncodingStream=CD});var dS=I(Gu=>{"use strict";c();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.headStream=TD;async function TD(e,t){let r=0,n=[],o=e.getReader(),s=!1;for(;!s;){let{done:d,value:l}=await o.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;s=d}o.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let d of n){if(d.byteLength>i.byteLength-a){i.set(d.subarray(0,i.byteLength-a),a);break}else i.set(d,a);a+=d.length}return i}});var lS=I(Ji=>{"use strict";c();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.headStream=void 0;var vD=ee("stream"),AD=dS(),RD=vr(),ID=(e,t)=>(0,RD.isReadableStream)(e)?(0,AD.headStream)(e,t):new Promise((r,n)=>{let o=new Wu;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});Ji.headStream=ID;var Wu=class extends vD.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}});var Yu=I(Ku=>{"use strict";c();var uS=e=>encodeURIComponent(e).replace(/[!'()*]/g,PD),PD=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,OD=e=>e.split("/").map(uS).join("/");Ku.escapeUri=uS;Ku.escapeUriPath=OD});var Xi=I(fS=>{"use strict";c();var Ju=Yu();function ND(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Ju.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Ju.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Ju.escapeUri(n)}`),t.push(o)}}return t.join("&")}fS.buildQueryString=ND});var Ar=I(Qo=>{"use strict";c();var gS=ie(),yS=Xi(),Xu=ee("http"),Qu=ee("https"),SS=ee("stream"),Zu=ee("http2"),DD=["ECONNRESET","EPIPE","ETIMEDOUT"],ES=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},rt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},mS=1e3,kD=(e,t,r=0)=>{if(!r)return-1;let n=o=>{let s=rt.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),i=a=>{a?.connecting?a.on("connect",()=>{rt.clearTimeout(s)}):rt.clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):rt.setTimeout(n.bind(null,mS),mS)},MD=3e3,LD=(e,{keepAlive:t,keepAliveMsecs:r},n=MD)=>{if(t!==!0)return-1;let o=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return n===0?(o(),0):rt.setTimeout(o,n)},pS=3e3,FD=(e,t,r=wS)=>{let n=o=>{let s=r-o,i=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)};return 0<r&&r<6e3?(n(0),0):rt.setTimeout(n.bind(null,r===0?0:pS),pS)},hS=6e3;async function _S(e,t,r=hS){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!0;o==="100-continue"&&(i=await Promise.race([new Promise(a=>{s=Number(rt.setTimeout(()=>a(!0),Math.max(hS,r)))}),new Promise(a=>{e.on("continue",()=>{rt.clearTimeout(s),a(!0)}),e.on("response",()=>{rt.clearTimeout(s),a(!1)}),e.on("error",()=>{rt.clearTimeout(s),a(!1)})})])),i&&BD(e,t.body)}function BD(e,t){if(t instanceof SS.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var wS=0,ef=class e{config;configProvider;socketWarningTimestamp=0;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let d in o){let l=o[d]?.length??0,m=s[d]?.length??0;if(l>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a}=t||{},d=!0,l=50;return{connectionTimeout:n,requestTimeout:r??o,socketAcquisitionWarningTimeout:s,httpAgent:i instanceof Xu.Agent||typeof i?.destroy=="function"?i:new Xu.Agent({keepAlive:d,maxSockets:l,...i}),httpsAgent:a instanceof Qu.Agent||typeof a?.destroy=="function"?a:new Qu.Agent({keepAlive:d,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i,a=[],d=async q=>{await i,a.forEach(rt.clearTimeout),o(q)},l=async q=>{await i,a.forEach(rt.clearTimeout),s(q)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let q=new Error("Request aborted");q.name="AbortError",l(q);return}let m=t.protocol==="https:",h=m?this.config.httpsAgent:this.config.httpAgent;a.push(rt.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(h,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let S=yS.buildQueryString(t.query||{}),y;if(t.username!=null||t.password!=null){let q=t.username??"",re=t.password??"";y=`${q}:${re}`}let w=t.path;S&&(w+=`?${S}`),t.fragment&&(w+=`#${t.fragment}`);let R=t.hostname??"";R[0]==="["&&R.endsWith("]")?R=t.hostname.slice(1,-1):R=t.hostname;let P={headers:t.headers,host:R,method:t.method,path:w,port:t.port,agent:h,auth:y},k=(m?Qu.request:Xu.request)(P,q=>{let re=new gS.HttpResponse({statusCode:q.statusCode||-1,reason:q.statusMessage,headers:ES(q.headers),body:q});d({response:re})});if(k.on("error",q=>{DD.includes(q.code)?l(Object.assign(q,{name:"TimeoutError"})):l(q)}),r){let q=()=>{k.destroy();let re=new Error("Request aborted");re.name="AbortError",l(re)};if(typeof r.addEventListener=="function"){let re=r;re.addEventListener("abort",q,{once:!0}),k.once("close",()=>re.removeEventListener("abort",q))}else r.onabort=q}let $=n??this.config.requestTimeout;a.push(kD(k,l,this.config.connectionTimeout)),a.push(FD(k,l,$));let z=P.agent;typeof z=="object"&&"keepAlive"in z&&a.push(LD(k,{keepAlive:z.keepAlive,keepAliveMsecs:z.keepAliveMsecs})),i=_S(k,t,$).catch(q=>(a.forEach(rt.clearTimeout),s(q)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},tf=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},rf=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){let d=o.poll();if(d&&!this.config.disableConcurrency)return d}let s=Zu.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},d=>{if(d)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();let i=()=>{s.destroy(),this.deleteSession(n,s)};s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new tf;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},nf=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new rf({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,d)=>{let l=!1,m,h=async de=>{await m,a(de)},S=async de=>{await m,d(de)};if(r?.aborted){l=!0;let de=new Error("Request aborted");de.name="AbortError",S(de);return}let{hostname:y,method:w,port:R,protocol:P,query:N}=t,k="";if(t.username!=null||t.password!=null){let de=t.username??"",Oe=t.password??"";k=`${de}:${Oe}@`}let $=`${P}//${k}${y}${R?`:${R}`:""}`,z={destination:new URL($)},q=this.connectionManager.lease(z,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),re=de=>{s&&this.destroySession(q),l=!0,S(de)},ze=yS.buildQueryString(N||{}),tt=t.path;ze&&(tt+=`?${ze}`),t.fragment&&(tt+=`#${t.fragment}`);let _e=q.request({...t.headers,[Zu.constants.HTTP2_HEADER_PATH]:tt,[Zu.constants.HTTP2_HEADER_METHOD]:w});if(q.ref(),_e.on("response",de=>{let Oe=new gS.HttpResponse({statusCode:de[":status"]||-1,headers:ES(de),body:_e});l=!0,h({response:Oe}),s&&(q.close(),this.connectionManager.deleteSession($,q))}),i&&_e.setTimeout(i,()=>{_e.close();let de=new Error(`Stream timed out because of no activity for ${i} ms`);de.name="TimeoutError",re(de)}),r){let de=()=>{_e.close();let Oe=new Error("Request aborted");Oe.name="AbortError",re(Oe)};if(typeof r.addEventListener=="function"){let Oe=r;Oe.addEventListener("abort",de,{once:!0}),_e.once("close",()=>Oe.removeEventListener("abort",de))}else r.onabort=de}_e.on("frameError",(de,Oe,jn)=>{re(new Error(`Frame type id ${de} in stream id ${jn} has failed with code ${Oe}.`))}),_e.on("error",re),_e.on("aborted",()=>{re(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${_e.rstCode}.`))}),_e.on("close",()=>{q.unref(),s&&q.destroy(),l||re(new Error("Unexpected error: http2 request did not get a response"))}),m=_S(_e,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},of=class extends SS.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},UD=e=>$D(e)?HD(e):new Promise((t,r)=>{let n=new of;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),$D=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function HD(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(t.push(d),o+=d.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}Qo.DEFAULT_REQUEST_TIMEOUT=wS;Qo.NodeHttp2Handler=nf;Qo.NodeHttpHandler=ef;Qo.streamCollector=UD});var af=I(Zi=>{"use strict";c();var xS=ie(),qD=Xi(),jD=Fe();function bS(e,t){return new Request(e,t)}function zD(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var Qi={supported:void 0},sf=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Qi.supported===void 0&&(Qi.supported=typeof Request<"u"&&"keepalive"in bS("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let k=new Error("Request aborted");return k.name="AbortError",Promise.reject(k)}let a=t.path,d=qD.buildQueryString(t.query||{});d&&(a+=`?${d}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let k=t.username??"",$=t.password??"";l=`${k}:${$}@`}let{port:m,method:h}=t,S=`${t.protocol}//${l}${t.hostname}${m?`:${m}`:""}${a}`,y=h==="GET"||h==="HEAD"?void 0:t.body,w={body:y,headers:new Headers(t.headers),method:h,credentials:i};this.config?.cache&&(w.cache=this.config.cache),y&&(w.duplex="half"),typeof AbortController<"u"&&(w.signal=r),Qi.supported&&(w.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(w,this.config.requestInit(t));let R=()=>{},P=bS(S,w),N=[fetch(P).then(k=>{let $=k.headers,z={};for(let re of $.entries())z[re[0]]=re[1];return k.body!=null?{response:new xS.HttpResponse({headers:z,reason:k.statusText,statusCode:k.status,body:k.body})}:k.blob().then(re=>({response:new xS.HttpResponse({headers:z,reason:k.statusText,statusCode:k.status,body:re})}))}),zD(o)];return r&&N.push(new Promise((k,$)=>{let z=()=>{let q=new Error("Request aborted");q.name="AbortError",$(q)};if(typeof r.addEventListener=="function"){let q=r;q.addEventListener("abort",z,{once:!0}),R=()=>q.removeEventListener("abort",z)}else r.onabort=z})),Promise.race(N).finally(R)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},VD=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):GD(e):WD(e);async function GD(e){let t=await KD(e),r=jD.fromBase64(t);return new Uint8Array(r)}async function WD(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(t.push(d),o+=d.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}function KD(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}Zi.FetchHttpHandler=sf;Zi.keepAliveSupport=Qi;Zi.streamCollector=VD});var Zo=I(df=>{"use strict";c();var CS={},cf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),CS[e]=t,cf[t]=e}function YD(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in cf)t[r/2]=cf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function JD(e){let t="";for(let r=0;r<e.byteLength;r++)t+=CS[e[r]];return t}df.fromHex=YD;df.toHex=JD});var RS=I(ea=>{"use strict";c();Object.defineProperty(ea,"__esModule",{value:!0});ea.sdkStreamMixin=void 0;var XD=af(),QD=Fe(),ZD=Zo(),ek=Le(),TS=vr(),vS="The stream has already been transformed.",tk=e=>{if(!AS(e)&&!(0,TS.isReadableStream)(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(vS);return t=!0,await(0,XD.streamCollector)(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let s=await r();if(o==="base64")return(0,QD.toBase64)(s);if(o==="hex")return(0,ZD.toHex)(s);if(o===void 0||o==="utf8"||o==="utf-8")return(0,ek.toUtf8)(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(vS);if(t=!0,AS(e))return n(e);if((0,TS.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};ea.sdkStreamMixin=tk;var AS=e=>typeof Blob=="function"&&e instanceof Blob});var PS=I(ta=>{"use strict";c();Object.defineProperty(ta,"__esModule",{value:!0});ta.sdkStreamMixin=void 0;var rk=Ar(),nk=Kn(),lf=ee("stream"),ok=RS(),IS="The stream has already been transformed.",sk=e=>{if(!(e instanceof lf.Readable))try{return(0,ok.sdkStreamMixin)(e)}catch{let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(IS);return t=!0,await(0,rk.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?(0,nk.fromArrayBuffer)(o.buffer,o.byteOffset,o.byteLength).toString(n):new TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(IS);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof lf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,lf.Readable.toWeb(e)}})};ta.sdkStreamMixin=sk});var OS=I(uf=>{"use strict";c();Object.defineProperty(uf,"__esModule",{value:!0});uf.splitStream=ik;async function ik(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var kS=I(ff=>{"use strict";c();Object.defineProperty(ff,"__esModule",{value:!0});ff.splitStream=ck;var NS=ee("stream"),ak=OS(),DS=vr();async function ck(e){if((0,DS.isReadableStream)(e)||(0,DS.isBlob)(e))return(0,ak.splitStream)(e);let t=new NS.PassThrough,r=new NS.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ra=I(Be=>{"use strict";c();var jS=Fe(),zS=Le(),MS=$u(),LS=tS(),FS=aS(),BS=cS(),US=lS(),$S=PS(),HS=kS(),qS=vr();function dk(e,t="utf-8"){return t==="base64"?jS.toBase64(e):zS.toUtf8(e)}function lk(e,t){return t==="base64"?es.mutate(jS.fromBase64(e)):es.mutate(zS.fromUtf8(e))}var es=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return lk(t,r);throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return dk(this,t)}};Be.Uint8ArrayBlobAdapter=es;Object.keys(MS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return MS[e]}})});Object.keys(LS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return LS[e]}})});Object.keys(FS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return FS[e]}})});Object.keys(BS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return BS[e]}})});Object.keys(US).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return US[e]}})});Object.keys($S).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return $S[e]}})});Object.keys(HS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return HS[e]}})});Object.keys(qS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return qS[e]}})})});var na,Tt,oa=T(()=>{c();na=v(ra()),Tt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return na.Uint8ArrayBlobAdapter.mutate(e);if(!e)return na.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return na.Uint8ArrayBlobAdapter.mutate(await r)}});function Ot(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var sa=T(()=>{c()});var pt,mf=T(()=>{c();pt=e=>typeof e=="function"?e():e});var VS,GS,WS,pf,KS=T(()=>{c();VS=v(ie()),GS=v(Xe()),WS=e=>(t,r)=>async n=>{let{response:o}=await t(n),{operationSchema:s}=(0,GS.getSmithyContext)(r);try{let i=await e.protocol.deserializeResponse(s,{...e,...r},o);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(VS.HttpResponse.isInstance(o)){let{headers:d={}}=o,l=Object.entries(d);i.$metadata={httpStatusCode:o.statusCode,requestId:pf(/^x-[\w-]+-request-?id$/,l),extendedRequestId:pf(/^x-[\w-]+-id-2$/,l),cfId:pf(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},pf=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var YS,JS,XS=T(()=>{c();YS=v(Xe()),JS=e=>(t,r)=>async n=>{let{operationSchema:o}=(0,YS.getSmithyContext)(r),s=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,i=await e.protocol.serializeRequest(o,n.input,{...e,...r,endpoint:s});return t({...n,request:i})}});function uk(e){return{applyToStack:t=>{t.add(JS(e),ZS),t.add(WS(e),QS),e.protocol.setSerdeContext(e)}}}var QS,ZS,eE=T(()=>{c();KS();XS();QS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ZS={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ne,hf=T(()=>{c();Ne=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);this.schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){this.exceptions.set(t,r)}getErrorCtor(t){return this.exceptions.get(t)}getBaseException(){for(let[t,r]of this.schemas.entries())if(t.startsWith("smithy.ts.sdk.synthetic.")&&t.endsWith("ServiceException"))return r}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}getNamespace(t){return this.normalizeShapeId(t).split("#")[0]}}});var xe,tr=T(()=>{c();hf();xe=class{name;namespace;traits;static assign(t,r){let n=Object.assign(t,r);return Ne.for(n.namespace).register(n.name,n),n}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Xn,fk,gf=T(()=>{c();tr();Xn=class e extends xe{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},fk=(e,t,r,n)=>xe.assign(new Xn,{name:t,namespace:e,traits:r,valueSchema:n})});var Qn,mk,yf=T(()=>{c();tr();Qn=class e extends xe{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},mk=(e,t,r,n,o)=>xe.assign(new Qn,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:o})});var ia,pk,tE=T(()=>{c();tr();ia=class e extends xe{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},pk=(e,t,r,n,o)=>xe.assign(new ia,{name:t,namespace:e,traits:r,input:n,output:o})});var Rr,hk,aa=T(()=>{c();tr();Rr=class e extends xe{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},hk=(e,t,r,n,o)=>xe.assign(new Rr,{name:t,namespace:e,traits:r,memberNames:n,memberList:o})});var ca,gk,rE=T(()=>{c();tr();aa();ca=class e extends Rr{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},gk=(e,t,r,n,o,s)=>xe.assign(new ca,{name:t,namespace:e,traits:r,memberNames:n,memberList:o,ctor:null})});function Ir(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var Sf=T(()=>{c()});function ts(e,t){if(e instanceof U)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=U;return new r(e,t)}var U,nE=T(()=>{c();mf();gf();yf();tr();aa();Sf();U=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],o=t,s=t;for(this._isMemberSchema=!1;Array.isArray(o);)n.push(o[1]),o=o[0],s=pt(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Ir(a))}}else this.memberTraits=0;if(s instanceof e){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=pt(s),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(this.schema instanceof xe?this.schema.getName?.():void 0)??this.memberName??String(s),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){return xe[Symbol.hasInstance].bind(this)(t)}static of(t){let r=pt(t);if(r instanceof e)return r;if(Array.isArray(r)){let[n,o]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),Ir(o)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){return pt(this.schema?.schemaRef??this.schema)}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t instanceof Xn}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t instanceof Qn}isStructSchema(){let t=this.getSchema();return t!==null&&typeof t=="object"&&"members"in t||t instanceof Rr}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:o}=this;return t(r)||t(n)||t(o)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Ir(this.memberTraits)}getOwnTraits(){return Ir(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),o=t?15:n?.keySchema??0;return ts([o,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,o]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||o)?t.valueSchema:r?15:void 0;if(s!=null)return ts([s,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r.memberNames.includes(t)){let n=r.memberNames.indexOf(t),o=r.memberList[n];return ts(Array.isArray(o)?o:[o,0],t)}if(this.isDocumentSchema())return ts([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t.memberNames.length;++r)yield[t.memberNames[r],ts([t.memberList[r],0],t.memberNames[r])]}}});var da,yk,oE=T(()=>{c();tr();da=class e extends xe{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},yk=(e,t,r,n)=>xe.assign(new da,{name:t,namespace:e,traits:n,schemaRef:r})});var Sk,sE=T(()=>{c();Sk={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var iE={};Ct(iE,{ErrorSchema:()=>ca,ListSchema:()=>Xn,MapSchema:()=>Qn,NormalizedSchema:()=>U,OperationSchema:()=>ia,SCHEMA:()=>Sk,Schema:()=>xe,SimpleSchema:()=>da,StructureSchema:()=>Rr,TypeRegistry:()=>Ne,deref:()=>pt,deserializerMiddlewareOption:()=>QS,error:()=>gk,getSchemaSerdePlugin:()=>uk,list:()=>fk,map:()=>mk,op:()=>pk,serializerMiddlewareOption:()=>ZS,sim:()=>yk,struct:()=>hk,translateTraits:()=>Ir});var Te=T(()=>{c();mf();eE();gf();yf();tE();rE();nE();tr();oE();aa();sE();Sf();hf()});var Ek,aE=T(()=>{c();Ek=(e,t,r=n=>n)=>e});var _k,wk,rs,xk,la,ns,bk,Ef,_f,wf,xf,Ck,Tk,cE,vk,Ak,fa,Rk,bf,Ik,Zn,Cf,Pk,Ok,Nk,dE,lE,Dk,kk,un,Tf,ua,os,vf=T(()=>{c();_k=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},wk=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&os.warn(ua(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&os.warn(ua(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},rs=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&os.warn(ua(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},xk=Math.ceil(34028234663852886e22),la=e=>{let t=rs(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>xk)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},ns=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},bk=ns,Ef=e=>xf(e,32),_f=e=>xf(e,16),wf=e=>xf(e,8),xf=(e,t)=>{let r=ns(e);if(r!==void 0&&Ck(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Ck=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Tk=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},cE=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},vk=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return os.warn(ua(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Ak=e=>{if(e==null)return;let t=cE(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},fa=e=>rs(typeof e=="string"?Zn(e):e),Rk=fa,bf=e=>la(typeof e=="string"?Zn(e):e),Ik=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zn=e=>{let t=e.match(Ik);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Cf=e=>typeof e=="string"?dE(e):rs(e),Pk=Cf,Ok=Cf,Nk=e=>typeof e=="string"?dE(e):la(e),dE=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},lE=e=>ns(typeof e=="string"?Zn(e):e),Dk=lE,kk=e=>Ef(typeof e=="string"?Zn(e):e),un=e=>_f(typeof e=="string"?Zn(e):e),Tf=e=>wf(typeof e=="string"?Zn(e):e),ua=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),os={warn:console.warn}});function is(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),d=o<10?`0${o}`:`${o}`,l=s<10?`0${s}`:`${s}`,m=i<10?`0${i}`:`${i}`,h=a<10?`0${a}`:`${a}`;return`${Mk[n]}, ${d} ${Rf[r]} ${t} ${l}:${m}:${h} GMT`}var Mk,Rf,Lk,Fk,Bk,If,Uk,$k,Hk,Pf,Of,ss,qk,jk,zk,Af,Vk,Gk,Wk,Nt,Kk,Yk,eo,uE=T(()=>{c();vf();Mk=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Rf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Lk=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Fk=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Lk.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,d,l]=t,m=un(eo(n)),h=Nt(o,"month",1,12),S=Nt(s,"day",1,31);return ss(m,h,S,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l})},Bk=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),If=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Bk.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,d,l,m]=t,h=un(eo(n)),S=Nt(o,"month",1,12),y=Nt(s,"day",1,31),w=ss(h,S,y,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l});return m.toUpperCase()!="Z"&&w.setTime(w.getTime()-Yk(m)),w},Uk=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),$k=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Hk=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Pf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Uk.exec(e);if(t){let[r,n,o,s,i,a,d,l]=t;return ss(un(eo(s)),Af(o),Nt(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l})}if(t=$k.exec(e),t){let[r,n,o,s,i,a,d,l]=t;return zk(ss(qk(s),Af(o),Nt(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l}))}if(t=Hk.exec(e),t){let[r,n,o,s,i,a,d,l]=t;return ss(un(eo(l)),Af(n),Nt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")},Of=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=fa(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},ss=(e,t,r,n)=>{let o=t-1;return Gk(e,o,r),new Date(Date.UTC(e,o,r,Nt(n.hours,"hour",0,23),Nt(n.minutes,"minute",0,59),Nt(n.seconds,"seconds",0,60),Kk(n.fractionalMilliseconds)))},qk=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+un(eo(e));return r<t?r+100:r},jk=50*365*24*60*60*1e3,zk=e=>e.getTime()-new Date().getTime()>jk?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Af=e=>{let t=Rf.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},Vk=[31,28,31,30,31,30,31,31,30,31,30,31],Gk=(e,t,r)=>{let n=Vk[t];if(t===1&&Wk(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Rf[t]} in ${e}: ${r}`)},Wk=e=>e%4===0&&(e%100!==0||e%400===0),Nt=(e,t,r,n)=>{let o=Tf(eo(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},Kk=e=>e==null?0:bf("0."+e)*1e3,Yk=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},eo=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Pr={};Ct(Pr,{__addDisposableResource:()=>LE,__assign:()=>ma,__asyncDelegator:()=>RE,__asyncGenerator:()=>AE,__asyncValues:()=>IE,__await:()=>to,__awaiter:()=>wE,__classPrivateFieldGet:()=>DE,__classPrivateFieldIn:()=>ME,__classPrivateFieldSet:()=>kE,__createBinding:()=>ha,__decorate:()=>pE,__disposeResources:()=>FE,__esDecorate:()=>gE,__exportStar:()=>bE,__extends:()=>fE,__generator:()=>xE,__importDefault:()=>NE,__importStar:()=>OE,__makeTemplateObject:()=>PE,__metadata:()=>_E,__param:()=>hE,__propKey:()=>SE,__read:()=>kf,__rest:()=>mE,__rewriteRelativeImportExtension:()=>BE,__runInitializers:()=>yE,__setFunctionName:()=>EE,__spread:()=>CE,__spreadArray:()=>vE,__spreadArrays:()=>TE,__values:()=>pa,default:()=>Qk});function fE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Nf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function mE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function pE(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function hE(e,t){return function(r,n){t(r,n,e)}}function gE(e,t,r,n,o,s){function i(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var a=n.kind,d=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,m=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,S=!1,y=r.length-1;y>=0;y--){var w={};for(var R in n)w[R]=R==="access"?{}:n[R];for(var R in n.access)w.access[R]=n.access[R];w.addInitializer=function(N){if(S)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(N||null))};var P=(0,r[y])(a==="accessor"?{get:m.get,set:m.set}:m[d],w);if(a==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(h=i(P.get))&&(m.get=h),(h=i(P.set))&&(m.set=h),(h=i(P.init))&&o.unshift(h)}else(h=i(P))&&(a==="field"?o.unshift(h):m[d]=h)}l&&Object.defineProperty(l,n.name,m),S=!0}function yE(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function SE(e){return typeof e=="symbol"?e:"".concat(e)}function EE(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function _E(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function wE(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(m){try{l(n.next(m))}catch(h){i(h)}}function d(m){try{l(n.throw(m))}catch(h){i(h)}}function l(m){m.done?s(m.value):o(m.value).then(a,d)}l((n=n.apply(e,t||[])).next())})}function xE(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(m){return d([l,m])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function bE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ha(t,e,r)}function pa(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function kf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function CE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(kf(arguments[t]));return e}function TE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function vE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function to(e){return this instanceof to?(this.v=e,this):new to(e)}function AE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){n[y]&&(o[y]=function(R){return new Promise(function(P,N){s.push([y,R,P,N])>1||d(y,R)})},w&&(o[y]=w(o[y])))}function d(y,w){try{l(n[y](w))}catch(R){S(s[0][3],R)}}function l(y){y.value instanceof to?Promise.resolve(y.value.v).then(m,h):S(s[0][2],y)}function m(y){d("next",y)}function h(y){d("throw",y)}function S(y,w){y(w),s.shift(),s.length&&d(s[0][0],s[0][1])}}function RE(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:to(e[o](i)),done:!1}:s?s(i):i}:s}}function IE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof pa=="function"?pa(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,d){i=e[s](i),o(a,d,i.done,i.value)})}}function o(s,i,a,d){Promise.resolve(d).then(function(l){s({value:l,done:a})},i)}}function PE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function OE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Df(e),n=0;n<r.length;n++)r[n]!=="default"&&ha(t,e,r[n]);return Jk(t,e),t}function NE(e){return e&&e.__esModule?e:{default:e}}function DE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function kE(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function ME(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function LE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function FE(e){function t(s){e.error=e.hasError?new Xk(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function BE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Nf,ma,ha,Jk,Df,Xk,Qk,Or=T(()=>{c();Nf=function(e,t){return Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Nf(e,t)};ma=function(){return ma=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},ma.apply(this,arguments)};ha=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});Jk=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Df=function(e){return Df=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Df(e)};Xk=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};Qk={__extends:fE,__assign:ma,__rest:mE,__decorate:pE,__param:hE,__esDecorate:gE,__runInitializers:yE,__propKey:SE,__setFunctionName:EE,__metadata:_E,__awaiter:wE,__generator:xE,__createBinding:ha,__exportStar:bE,__values:pa,__read:kf,__spread:CE,__spreadArrays:TE,__spreadArray:vE,__await:to,__asyncGenerator:AE,__asyncDelegator:RE,__asyncValues:IE,__makeTemplateObject:PE,__importStar:OE,__importDefault:NE,__classPrivateFieldGet:DE,__classPrivateFieldSet:kE,__classPrivateFieldIn:ME,__addDisposableResource:LE,__disposeResources:FE,__rewriteRelativeImportExtension:BE}});var $E=I(ga=>{"use strict";c();Object.defineProperty(ga,"__esModule",{value:!0});ga.randomUUID=void 0;var Zk=(Or(),Y(Pr)),UE=Zk.__importDefault(ee("crypto"));ga.randomUUID=UE.default.randomUUID.bind(UE.default)});var as=I(qE=>{"use strict";c();var HE=$E(),Ve=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),eM=()=>{if(HE.randomUUID)return HE.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Ve[e[0]]+Ve[e[1]]+Ve[e[2]]+Ve[e[3]]+"-"+Ve[e[4]]+Ve[e[5]]+"-"+Ve[e[6]]+Ve[e[7]]+"-"+Ve[e[8]]+Ve[e[9]]+"-"+Ve[e[10]]+Ve[e[11]]+Ve[e[12]]+Ve[e[13]]+Ve[e[14]]+Ve[e[15]]};qE.v4=eM});var Dt,jE=T(()=>{c();Dt=v(as())});var Qe,zE=T(()=>{c();Qe=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Qe.from=e=>e&&typeof e=="object"&&(e instanceof Qe||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Qe(String(e)):Qe(JSON.stringify(e));Qe.fromObject=Qe.from});function Mf(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var VE=T(()=>{c()});function rr(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var Lf,Ff,Bf,GE,WE,tM,rM,nM,oM,sM,cs,Uf,$f,KE=T(()=>{c();Lf="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Ff="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Bf="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",GE="(\\d?\\d)",WE="(\\d{4})",tM=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),rM=new RegExp(`^${Lf}, ${GE} ${Ff} ${WE} ${Bf} GMT$`),nM=new RegExp(`^${Lf}, ${GE}-${Ff}-(\\d\\d) ${Bf} GMT$`),oM=new RegExp(`^${Lf} ${Ff} ( [1-9]|\\d\\d) ${Bf} ${WE}$`),sM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cs=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},Uf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=tM.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,o,s,i,a,,d,l]=t;rr(n,1,12),rr(o,1,31),rr(s,0,23),rr(i,0,59),rr(a,0,60);let m=new Date;if(m.setUTCFullYear(Number(r),Number(n)-1,Number(o)),m.setUTCHours(Number(s)),m.setUTCMinutes(Number(i)),m.setUTCSeconds(Number(a)),m.setUTCMilliseconds(Number(d)?Math.round(parseFloat(`0.${d}`)*1e3):0),l.toUpperCase()!="Z"){let[,h,S,y]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],w=h==="-"?1:-1;m.setTime(m.getTime()+w*(Number(S)*60*60*1e3+Number(y)*60*1e3))}return m},$f=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,o,s,i,a,d;if((d=rM.exec(e))?[,t,r,n,o,s,i,a]=d:(d=nM.exec(e))?([,t,r,n,o,s,i,a]=d,n=(Number(n)+1900).toString()):(d=oM.exec(e))&&([,r,t,o,s,i,a,n]=d),n&&i){let l=new Date;return l.setUTCFullYear(Number(n)),l.setUTCMonth(sM.indexOf(r)),rr(t,1,31),l.setUTCDate(Number(t)),rr(o,0,23),l.setUTCHours(Number(o)),rr(s,0,59),l.setUTCMinutes(Number(s)),rr(i,0,60),l.setUTCSeconds(Number(i)),l.setUTCMilliseconds(a?Math.round(parseFloat(`0.${a}`)*1e3):0),l}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function Hf(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var YE=T(()=>{c()});var ds,JE=T(()=>{c();ds=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function qf(e){return new be(String(e),"bigDecimal")}var XE,be,QE=T(()=>{c();XE=/^-?\d*(\.\d+)?$/,be=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!XE.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&XE.test(r.string)}}});var ZE={};Ct(ZE,{LazyJsonString:()=>Qe,NumericValue:()=>be,_parseEpochTimestamp:()=>cs,_parseRfc3339DateTimeWithOffset:()=>Uf,_parseRfc7231DateTime:()=>$f,copyDocumentWithTransform:()=>Ek,dateToUtcString:()=>is,expectBoolean:()=>wk,expectByte:()=>wf,expectFloat32:()=>la,expectInt:()=>bk,expectInt32:()=>Ef,expectLong:()=>ns,expectNonNull:()=>Tk,expectNumber:()=>rs,expectObject:()=>cE,expectShort:()=>_f,expectString:()=>vk,expectUnion:()=>Ak,generateIdempotencyToken:()=>Dt.v4,handleFloat:()=>Pk,limitedParseDouble:()=>Cf,limitedParseFloat:()=>Ok,limitedParseFloat32:()=>Nk,logger:()=>os,nv:()=>qf,parseBoolean:()=>_k,parseEpochTimestamp:()=>Of,parseRfc3339DateTime:()=>Fk,parseRfc3339DateTimeWithOffset:()=>If,parseRfc7231DateTime:()=>Pf,quoteHeader:()=>Mf,splitEvery:()=>Hf,splitHeader:()=>ds,strictParseByte:()=>Tf,strictParseDouble:()=>fa,strictParseFloat:()=>Rk,strictParseFloat32:()=>bf,strictParseInt:()=>Dk,strictParseInt32:()=>kk,strictParseLong:()=>lE,strictParseShort:()=>un});var nt=T(()=>{c();aE();uE();jE();zE();vf();VE();KE();YE();JE();QE()});var e_,jf,t_=T(()=>{c();e_=v(Le()),jf=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:o,defaultContentType:s}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=o,this.defaultContentType=s}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let o=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),a=i.getMemberSchemas(),d=this.serializer,l=this.defaultContentType,m=Symbol("initialRequestMarker"),h={async*[Symbol.asyncIterator](){if(n){let S={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:l}};d.write(r,n);let y=d.flush();yield{[m]:!0,headers:S,body:y}}for await(let S of t)yield S}};return o.serialize(h,S=>{if(S[m])return{headers:S.headers,body:S.body};let y=Object.keys(S).find($=>$!=="__type")??"",{additionalHeaders:w,body:R,eventType:P,explicitPayloadContentType:N}=this.writeEventBody(y,i,S);return{headers:{":event-type":{type:"string",value:P},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:N??l},...w},body:R}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let o=this.marshaller,s=r.getEventStreamMember(),a=r.getMemberSchema(s).getMemberSchemas(),d=Symbol("initialResponseMarker"),l=o.deserialize(t.body,async S=>{let y=Object.keys(S).find(w=>w!=="__type")??"";if(y==="initial-response"){let w=await this.deserializer.read(r,S[y].body);return delete w[s],{[d]:!0,...w}}else if(y in a){let w=a[y];return{[y]:await this.deserializer.read(w,S[y].body)}}else return{$unknown:S}}),m=l[Symbol.asyncIterator](),h=await m.next();if(h.done)return l;if(h.value?.[d]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[S,y]of Object.entries(h.value))n[S]=y}return{async*[Symbol.asyncIterator](){for(h?.value?.[d]||(yield h.value);;){let{done:S,value:y}=await m.next();if(S)break;yield y}}}}writeEventBody(t,r,n){let o=this.serializer,s=t,i=null,a,d=r.getSchema().memberNames.includes(t),l={};if(d){let S=r.getMemberSchema(t);if(S.isStructSchema()){for(let[y,w]of S.structIterator()){let{eventHeader:R,eventPayload:P}=w.getMergedTraits();if(P){i=y;break}else if(R){let N=n[t][y],k="binary";w.isNumericSchema()?(-2)**31<=N&&N<=2**31-1?k="integer":k="long":w.isTimestampSchema()?k="timestamp":w.isStringSchema()?k="string":w.isBooleanSchema()&&(k="boolean"),N!=null&&(l[y]={type:k,value:N},delete n[t][y])}}if(i!==null){let y=S.getMemberSchema(i);y.isBlobSchema()?a="application/octet-stream":y.isStringSchema()&&(a="text/plain"),o.write(y,n[t][i])}else o.write(S,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[S,y]=n[t];s=S,o.write(15,y)}let m=o.flush();return{body:typeof m=="string"?(this.serdeContext?.utf8Decoder??e_.fromUtf8)(m):m,eventType:s,explicitPayloadContentType:a,additionalHeaders:l}}}});var r_={};Ct(r_,{EventStreamSerde:()=>jf});var n_=T(()=>{c();t_()});var ya,fn,Sa=T(()=>{c();Te();ya=v(ie()),fn=class{options;serdeContext;constructor(t){this.options=t}getRequestType(){return ya.HttpRequest}getResponseType(){return ya.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,o]of r.url.searchParams.entries())t.query[n]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let o=U.of(r),s=U.of(r.input);if(o.getMergedTraits().endpoint){let i=o.getMergedTraits().endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,d])=>d.getMergedTraits().hostLabel);for(let[d]of a){let l=n[d];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${d} in input must be a string as hostLabel.`);i=i.replace(`{${d}}`,l)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(n_(),r_));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,o,s){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var o_,s_,mn,i_=T(()=>{c();Te();nt();o_=v(ie()),s_=v(ra());oa();sa();Sa();mn=class extends fn{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},d=await n.endpoint(),l=U.of(t?.input),m=l.getSchema(),h=!1,S,y=new o_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(d){this.updateServiceEndpoint(y,d),this.setHostPrefix(y,t,o);let w=Ir(t.traits);if(w.http){y.method=w.http[0];let[R,P]=w.http[1].split("?");y.path=="/"?y.path=R:y.path+=R;let N=new URLSearchParams(P??"");Object.assign(i,Object.fromEntries(N))}}for(let[w,R]of l.structIterator()){let P=R.getMergedTraits()??{},N=o[w];if(N!=null)if(P.httpPayload)R.isStreaming()?R.isStructSchema()?o[w]&&(S=await this.serializeEventStream({eventStream:o[w],requestSchema:l})):S=N:(s.write(R,N),S=s.flush()),delete o[w];else if(P.httpLabel){s.write(R,N);let k=s.flush();y.path.includes(`{${w}+}`)?y.path=y.path.replace(`{${w}+}`,k.split("/").map(Ot).join("/")):y.path.includes(`{${w}}`)&&(y.path=y.path.replace(`{${w}}`,Ot(k))),delete o[w]}else if(P.httpHeader)s.write(R,N),a[P.httpHeader.toLowerCase()]=String(s.flush()),delete o[w];else if(typeof P.httpPrefixHeaders=="string"){for(let[k,$]of Object.entries(N)){let z=P.httpPrefixHeaders+k;s.write([R.getValueSchema(),{httpHeader:z}],$),a[z.toLowerCase()]=s.flush()}delete o[w]}else P.httpQuery||P.httpQueryParams?(this.serializeQuery(R,N,i),delete o[w]):h=!0}return h&&o&&(s.write(m,o),S=s.flush()),y.headers=a,y.query=i,y.body=S,y}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let d=t.getValueSchema();Object.assign(d.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(d,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let d of r){o.write([t.getValueSchema(),s],d);let l=o.flush();(i||l!==void 0)&&a.push(l)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let d=await Tt(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(15,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let d=await Tt(n.body,r);if(d.byteLength>0){let l=await o.read(s,d);for(let m of a)i[m]=l[m]}}return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=this.deserializer,d=U.of(t),l=[];for(let[m,h]of d.structIterator()){let S=h.getMemberTraits();if(S.httpPayload){if(h.isStreaming())h.isStructSchema()?i[m]=await this.deserializeEventStream({response:n,responseSchema:d}):i[m]=(0,s_.sdkStreamMixin)(n.body);else if(n.body){let w=await Tt(n.body,r);w.byteLength>0&&(i[m]=await a.read(h,w))}}else if(S.httpHeader){let y=String(S.httpHeader).toLowerCase(),w=n.headers[y];if(w!=null)if(h.isListSchema()){let R=h.getValueSchema();R.getMergedTraits().httpHeader=y;let P;R.isTimestampSchema()&&R.getSchema()===4?P=Hf(w,",",2):P=ds(w);let N=[];for(let k of P)N.push(await a.read(R,k.trim()));i[m]=N}else i[m]=await a.read(h,w)}else if(S.httpPrefixHeaders!==void 0){i[m]={};for(let[y,w]of Object.entries(n.headers))if(y.startsWith(S.httpPrefixHeaders)){let R=h.getValueSchema();R.getMergedTraits().httpHeader=y,i[m][y.slice(S.httpPrefixHeaders.length)]=await a.read(R,w)}}else S.httpResponseCode?i[m]=n.statusCode:l.push(m)}return l}}});var a_,nr,c_=T(()=>{c();Te();a_=v(ie());oa();Sa();nr=class extends fn{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),d=U.of(t?.input),l=d.getSchema(),m,h=new a_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(h,a),this.setHostPrefix(h,t,r));let S={...r};if(r){let y=d.getEventStreamMember();if(y){if(S[y]){let w={};for(let[R,P]of d.structIterator())R!==y&&S[R]&&(o.write(P,S[R]),w[R]=o.flush());m=await this.serializeEventStream({eventStream:S[y],requestSchema:d,initialRequest:w})}}else o.write(l,S),m=o.flush()}return h.headers=i,h.query=s,h.body=m,h.method="POST",h}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let d=await Tt(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(15,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=s.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:s,initialResponseContainer:i});else{let d=await Tt(n.body,r);d.byteLength>0&&Object.assign(i,await o.read(s,d))}return i.$metadata=this.deserializeMetadata(n),i}}});var zf,Vf=T(()=>{c();sa();zf=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>Ot(a)).join("/"):Ot(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function ls(e,t){return new Ea(e,t)}var d_,Ea,l_=T(()=>{c();d_=v(ie());Vf();Ea=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new d_.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=zf(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function dt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?6:s||r?5:void 0:void 0)??t.timestampFormat.default}var _a=T(()=>{c()});var Gf,u_,pn,Wf=T(()=>{c();Te();nt();Gf=v(Fe()),u_=v(Le());_a();pn=class{settings;serdeContext;constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}read(t,r){let n=U.of(t);if(n.isListSchema())return ds(r).map(o=>this.read(n.getValueSchema(),o));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Gf.fromBase64)(r);if(n.isTimestampSchema())switch(dt(n,this.settings)){case 5:return Uf(r);case 6:return $f(r);case 7:return cs(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let o=n.getMergedTraits().mediaType,s=r;if(o)return n.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(o==="application/json"||o.endsWith("+json"))&&(s=Qe.from(s)),s}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new be(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??u_.toUtf8)((this.serdeContext?.base64Decoder??Gf.fromBase64)(t))}}});var wa,hn,f_=T(()=>{c();Te();wa=v(Le());Wf();hn=class{codecDeserializer;stringDeserializer;serdeContext;constructor(t,r){this.codecDeserializer=t,this.stringDeserializer=new pn(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=U.of(t),o=n.getMergedTraits(),s=this.serdeContext?.utf8Encoder??wa.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(n,s(r));if(o.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??wa.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(n,r)}}});var Kf,us,Yf=T(()=>{c();Te();nt();Kf=v(Fe());_a();us=class{settings;stringBuffer="";serdeContext=void 0;constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}write(t,r){let n=U.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(dt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=is(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Kf.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let d=this.flush(),l=n.getValueSchema().isTimestampSchema()?d:Mf(d);i!==""&&(i+=", "),i+=l}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=n.getMergedTraits().mediaType,s=r;if(o&&((o==="application/json"||o.endsWith("+json"))&&(s=Qe.from(s)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Kf.toBase64)(s.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var gn,m_=T(()=>{c();Te();Yf();gn=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new us(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=U.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var p_={};Ct(p_,{FromStringShapeDeserializer:()=>pn,HttpBindingProtocol:()=>mn,HttpInterceptingShapeDeserializer:()=>hn,HttpInterceptingShapeSerializer:()=>gn,HttpProtocol:()=>fn,RequestBuilder:()=>Ea,RpcProtocol:()=>nr,ToStringShapeSerializer:()=>us,collectBody:()=>Tt,determineTimestampFormat:()=>dt,extendedEncodeURIComponent:()=>Ot,requestBuilder:()=>ls,resolvedPath:()=>zf});var lt=T(()=>{c();oa();sa();i_();Sa();c_();l_();Vf();Wf();f_();m_();Yf();_a()});var h_=T(()=>{c();lt()});function iM(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var g_=T(()=>{c()});var yn,y_=T(()=>{c();yn=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var S_,Jf,Xf,E_=T(()=>{c();S_=v(ie()),Jf=v(br()),Xf=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=S_.HttpRequest.clone(t);if(n.in===Jf.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===Jf.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var __,Qf,w_=T(()=>{c();__=v(ie()),Qf=class{async sign(t,r,n){let o=__.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var or,x_=T(()=>{c();or=class{async sign(t,r,n){return t}}});var b_=T(()=>{c();E_();w_();x_()});var C_,aM,Zf,xa,em,T_=T(()=>{c();C_=e=>function(r){return xa(r)&&r.expiration.getTime()-Date.now()<e},aM=3e5,Zf=C_(3e5),xa=e=>e.expiration!==void 0,em=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,d=async l=>{s||(s=n(l));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async l=>((!i||l?.forceRefresh)&&(o=await d(l)),o):async l=>((!i||l?.forceRefresh)&&(o=await d(l)),a?o:r(o)?(t(o)&&await d(l),o):(a=!0,o))}});var v_=T(()=>{c();y_();b_();T_()});var kt={};Ct(kt,{DefaultIdentityProviderConfig:()=>yn,EXPIRATION_MS:()=>aM,HttpApiKeyAuthSigner:()=>Xf,HttpBearerAuthSigner:()=>Qf,NoAuthSigner:()=>or,createIsIdentityExpiredFunction:()=>C_,createPaginator:()=>zy,doesIdentityRequireRefresh:()=>xa,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Yo,getHttpAuthSchemePlugin:()=>jN,getHttpSigningPlugin:()=>Jo,getSmithyContext:()=>FN,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Ry,httpAuthSchemeMiddleware:()=>Ko,httpAuthSchemeMiddlewareOptions:()=>My,httpSigningMiddleware:()=>ku,httpSigningMiddlewareOptions:()=>$y,isIdentityExpired:()=>Zf,memoizeIdentityProvider:()=>em,normalizeProvider:()=>Tr,requestBuilder:()=>ls,setFeature:()=>iM});var Ue=T(()=>{c();by();Fy();qy();jy();Vy();h_();g_();v_()});var En=I(Sn=>{"use strict";c();var rm=br(),nm=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:a}=o.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}},cM=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),A_=e=>cM.test(e)||e.startsWith("[")&&e.endsWith("]"),dM=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),sm=(e,t=!1)=>{if(!t)return dM.test(e);let r=e.split(".");for(let n of r)if(!sm(n))return!1;return!0},om={},fs="endpoints";function Nr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Nr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Nr).join(", ")})`:JSON.stringify(e,null,2)}var Ge=class extends Error{constructor(t){super(t),this.name="EndpointError"}},lM=(e,t)=>e===t,uM=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Ge(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new Ge(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},R_=(e,t)=>uM(t).reduce((r,n)=>{if(typeof r!="object")throw new Ge(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),fM=e=>e!=null,mM=e=>!e,tm={[rm.EndpointURLScheme.HTTP]:80,[rm.EndpointURLScheme.HTTPS]:443},pM=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:S,port:y,protocol:w="",path:R="",query:P={}}=e,N=new URL(`${w}//${S}${y?`:${y}`:""}${R}`);return N.search=Object.entries(P).map(([k,$])=>`${k}=${$}`).join("&"),N}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let d=i.slice(0,-1);if(!Object.values(rm.EndpointURLScheme).includes(d))return null;let l=A_(o),m=r.includes(`${n}:${tm[d]}`)||typeof e=="string"&&e.includes(`${n}:${tm[d]}`),h=`${n}${m?`:${tm[d]}`:""}`;return{scheme:d,authority:h,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}},hM=(e,t)=>e===t,gM=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),yM=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),SM={booleanEquals:lM,getAttr:R_,isSet:fM,isValidHostLabel:sm,not:mM,parseURL:pM,stringEquals:hM,substring:gM,uriEncode:yM},I_=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[d,l]=a.split("#");r.push(R_(n[d],l))}else r.push(n[a]);o=i+1}return r.join("")},EM=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],ba=(e,t,r)=>{if(typeof e=="string")return I_(e,r);if(e.fn)return P_(e,r);if(e.ref)return EM(e,r);throw new Ge(`'${t}': ${String(e)} is not a string, function or reference.`)},P_=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:ba(s,"arg",r)),o=e.split(".");return o[0]in om&&o[1]!=null?om[o[0]][o[1]](...n):SM[e](...n)},_M=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ge(`'${e}' is already defined in Reference Record.`);let n=P_(t,r);return r.logger?.debug?.(`${fs} evaluateCondition: ${Nr(t)} = ${Nr(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},im=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=_M(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${fs} assign: ${s.name} := ${Nr(s.value)}`))}return{result:!0,referenceRecord:r}},wM=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=ba(s,"Header value entry",t);if(typeof i!="string")throw new Ge(`Header '${n}' value '${i}' is not a string`);return i})}),{}),O_=(e,t)=>{if(Array.isArray(e))return e.map(r=>O_(r,t));switch(typeof e){case"string":return I_(e,t);case"object":if(e===null)throw new Ge(`Unexpected endpoint property: ${e}`);return N_(e,t);case"boolean":return e;default:throw new Ge(`Unexpected endpoint property type: ${typeof e}`)}},N_=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:O_(o,t)}),{}),xM=(e,t)=>{let r=ba(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Ge(`Endpoint URL must be a string, got ${typeof r}`)},bM=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=im(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:d,headers:l}=n;return t.logger?.debug?.(`${fs} Resolving endpoint from template: ${Nr(n)}`),{...l!=null&&{headers:wM(l,i)},...d!=null&&{properties:N_(d,i)},url:xM(a,i)}},CM=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=im(r,t);if(o)throw new Ge(ba(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},TM=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=im(r,t);if(o)return D_(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},D_=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=bM(r,t);if(n)return n}else if(r.type==="error")CM(r,t);else if(r.type==="tree"){let n=TM(r,t);if(n)return n}else throw new Ge(`Unknown endpoint rule: ${r}`);throw new Ge("Rules evaluation failed")},vM=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${fs} Initial EndpointParams: ${Nr(r)}`);let i=Object.entries(o).filter(([,l])=>l.default!=null).map(([l,m])=>[l,m.default]);if(i.length>0)for(let[l,m]of i)r[l]=r[l]??m;let a=Object.entries(o).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new Ge(`Missing required parameter: '${l}'`);let d=D_(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${fs} Resolved endpoint: ${Nr(d)}`),d};Sn.EndpointCache=nm;Sn.EndpointError=Ge;Sn.customEndpointFunctions=om;Sn.isIpAddress=A_;Sn.isValidHostLabel=sm;Sn.resolveEndpoint=vM});var M_=I(k_=>{"use strict";c();function AM(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}k_.parseQueryString=AM});var sr=I(F_=>{"use strict";c();var RM=M_(),L_=e=>{if(typeof e=="string")return L_(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=RM.parseQueryString(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};F_.parseUrl=L_});var _n=I((nJ,K_)=>{"use strict";c();var Ca=Object.defineProperty,IM=Object.getOwnPropertyDescriptor,PM=Object.getOwnPropertyNames,OM=Object.prototype.hasOwnProperty,Dr=(e,t)=>Ca(e,"name",{value:t,configurable:!0}),NM=(e,t)=>{for(var r in t)Ca(e,r,{get:t[r],enumerable:!0})},DM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of PM(t))!OM.call(e,o)&&o!==r&&Ca(e,o,{get:()=>t[o],enumerable:!(n=IM(t,o))||n.enumerable});return e},kM=e=>DM(Ca({},"__esModule",{value:!0}),e),U_={};NM(U_,{ConditionObject:()=>me.ConditionObject,DeprecatedObject:()=>me.DeprecatedObject,EndpointError:()=>me.EndpointError,EndpointObject:()=>me.EndpointObject,EndpointObjectHeaders:()=>me.EndpointObjectHeaders,EndpointObjectProperties:()=>me.EndpointObjectProperties,EndpointParams:()=>me.EndpointParams,EndpointResolverOptions:()=>me.EndpointResolverOptions,EndpointRuleObject:()=>me.EndpointRuleObject,ErrorRuleObject:()=>me.ErrorRuleObject,EvaluateOptions:()=>me.EvaluateOptions,Expression:()=>me.Expression,FunctionArgv:()=>me.FunctionArgv,FunctionObject:()=>me.FunctionObject,FunctionReturn:()=>me.FunctionReturn,ParameterObject:()=>me.ParameterObject,ReferenceObject:()=>me.ReferenceObject,ReferenceRecord:()=>me.ReferenceRecord,RuleSetObject:()=>me.RuleSetObject,RuleSetRules:()=>me.RuleSetRules,TreeRuleObject:()=>me.TreeRuleObject,awsEndpointFunctions:()=>G_,getUserAgentPrefix:()=>BM,isIpAddress:()=>me.isIpAddress,partition:()=>z_,resolveDefaultAwsRegionalEndpointsConfig:()=>$M,resolveEndpoint:()=>me.resolveEndpoint,setPartitionInfo:()=>V_,toEndpointV1:()=>W_,useDefaultPartitionInfo:()=>FM});K_.exports=kM(U_);var me=En(),$_=Dr((e,t=!1)=>{if(t){for(let r of e.split("."))if(!$_(r))return!1;return!0}return!(!(0,me.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,me.isIpAddress)(e))},"isVirtualHostableS3Bucket"),B_=":",MM="/",LM=Dr(e=>{let t=e.split(B_);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(B_)==="")return null;let d=a.map(l=>l.split(MM)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:d}},"parseArn"),H_={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],version:"1.1"},q_=H_,j_="",z_=Dr(e=>{let{partitions:t}=q_;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),V_=Dr((e,t="")=>{q_=e,j_=t},"setPartitionInfo"),FM=Dr(()=>{V_(H_,"")},"useDefaultPartitionInfo"),BM=Dr(()=>j_,"getUserAgentPrefix"),G_={isVirtualHostableS3Bucket:$_,parseArn:LM,partition:z_};me.customEndpointFunctions.aws=G_;var UM=sr(),$M=Dr(e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>W_(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},"resolveDefaultAwsRegionalEndpointsConfig"),W_=Dr(e=>(0,UM.parseUrl)(e.url),"toEndpointV1")});var Ta,ro,Y_=T(()=>{c();Ta={warningEmitted:!1},ro=e=>{e&&!Ta.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Ta.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function kr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var J_=T(()=>{c()});function X_(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Q_=T(()=>{c()});function Z_(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var ew=T(()=>{c()});var Mr={};Ct(Mr,{emitWarningIfUnsupportedVersion:()=>ro,setCredentialFeature:()=>kr,setFeature:()=>X_,setTokenFeature:()=>Z_,state:()=>Ta});var vt=T(()=>{c();Y_();J_();Q_();ew()});var tw,am,rw=T(()=>{c();tw=v(ie()),am=e=>tw.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var no,cm=T(()=>{c();no=e=>new Date(Date.now()+e)});var nw,ow=T(()=>{c();cm();nw=(e,t)=>Math.abs(no(t).getTime()-e)>=3e5});var dm,sw=T(()=>{c();ow();dm=(e,t)=>{let r=Date.parse(e);return nw(r,t)?r-Date.now():t}});var lm=T(()=>{c();rw();cm();sw()});var iw,ms,oo,ot,um,fm=T(()=>{c();iw=v(ie());lm();ms=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},oo=async e=>{let t=ms("context",e.context),r=ms("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await ms("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,d=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:d}},ot=class{async sign(t,r,n){if(!iw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await oo(n),{config:s,signer:i}=o,{signingRegion:a,signingName:d}=o,l=n.context;if(l?.authSchemes?.length??!1){let[h,S]=l.authSchemes;h?.name==="sigv4a"&&S?.name==="sigv4"&&(a=S?.signingRegion??a,d=S?.signingName??d)}return await i.sign(t,{signingDate:no(s.systemClockOffset),signingRegion:a,signingService:d})}errorHandler(t){return r=>{let n=r.ServerTime??am(r.$response);if(n){let o=ms("config",t.config),s=o.systemClockOffset;o.systemClockOffset=dm(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=am(t);if(n){let o=ms("config",r.config);o.systemClockOffset=dm(n,o.systemClockOffset)}}},um=ot});var aw,ps,cw=T(()=>{c();aw=v(ie());lm();fm();ps=class extends ot{async sign(t,r,n){if(!aw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:d}=await oo(n),m=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:no(o.systemClockOffset),signingRegion:m,signingService:d})}}});var mm,dw=T(()=>{c();mm=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var va,pm=T(()=>{c();va=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var lw,uw,so,fw=T(()=>{c();dw();pm();lw="AWS_AUTH_SCHEME_PREFERENCE",uw="auth_scheme_preference",so={environmentVariableSelector:(e,t)=>{if(t?.signingName&&va(t.signingName)in e)return["httpBearerAuth"];if(lw in e)return mm(e[lw])},configFileSelector:e=>{if(uw in e)return mm(e[uw])},default:[]}});var Ze=I(wn=>{"use strict";c();var io=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.tryNextLink=o,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},hm=class e extends io{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},gm=class e extends io{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},HM=(...e)=>async()=>{if(e.length===0)throw new io("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},qM=e=>()=>Promise.resolve(e),jM=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async d=>((!s||d?.forceRefresh)&&(n=await a()),n):async d=>((!s||d?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};wn.CredentialsProviderError=hm;wn.ProviderError=io;wn.TokenProviderError=gm;wn.chain=HM;wn.fromStatic=qM;wn.memoize=jM});var ym,mw,pw,hw=T(()=>{c();Ue();ym=v(Ze()),mw=e=>(e.sigv4aSigningRegionSet=Tr(e.sigv4aSigningRegionSet),e),pw={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new ym.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new ym.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Uw=I(X=>{"use strict";c();var Lr=Zo(),xn=Le(),zM=Lu(),Ew=ie(),gw=Xe(),Aa=Yu(),_w="X-Amz-Algorithm",ww="X-Amz-Credential",bm="X-Amz-Date",xw="X-Amz-SignedHeaders",bw="X-Amz-Expires",Cm="X-Amz-Signature",Tm="X-Amz-Security-Token",VM="X-Amz-Region-Set",vm="authorization",Am=bm.toLowerCase(),Cw="date",Tw=[vm,Am,Cw],vw=Cm.toLowerCase(),Na="x-amz-content-sha256",Aw=Tm.toLowerCase(),GM="host",Rw={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Iw=/^proxy-/,Pw=/^sec-/,WM=[/^proxy-/i,/^sec-/i],Ra="AWS4-HMAC-SHA256",KM="AWS4-ECDSA-P256-SHA256",Ow="AWS4-HMAC-SHA256-PAYLOAD",Nw="UNSIGNED-PAYLOAD",Dw=50,Rm="aws4_request",kw=3600*24*7,ao={},Ia=[],Pa=(e,t,r)=>`${e}/${t}/${r}/${Rm}`,Mw=async(e,t,r,n,o)=>{let s=await yw(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Lr.toHex(s)}:${t.sessionToken}`;if(i in ao)return ao[i];for(Ia.push(i);Ia.length>Dw;)delete ao[Ia.shift()];let a=`AWS4${t.secretAccessKey}`;for(let d of[r,n,o,Rm])a=await yw(e,a,d);return ao[i]=a},YM=()=>{Ia.length=0,Object.keys(ao).forEach(e=>{delete ao[e]})},yw=(e,t,r)=>{let n=new e(t);return n.update(xn.toUint8Array(r)),n.digest()},Sm=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Rw||t?.has(s)||Iw.test(s)||Pw.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},Oa=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Na)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||zM.isArrayBuffer(t)){let n=new r;return n.update(xn.toUint8Array(t)),Lr.toHex(await n.digest())}return Nw},Em=class{format(t){let r=[];for(let s of Object.keys(t)){let i=xn.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=xn.fromUtf8(t.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(_m.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!JM.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let h=new Uint8Array(17);return h[0]=9,h.set(Lr.fromHex(t.value.replace(/\-/g,"")),1),h}}},JM=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,_m=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Sw(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Sw(t),parseInt(Lr.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Sw(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Lw=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Fw=(e,t={})=>{let{headers:r,query:n={}}=Ew.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},wm=e=>{e=Ew.HttpRequest.clone(e);for(let t of Object.keys(e.headers))Tw.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Bw=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===vw)continue;let o=Aa.escapeUri(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${Aa.escapeUri(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${Aa.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},XM=e=>QM(e).toISOString().replace(/\.\d{3}Z$/,"Z"),QM=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,Da=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=gw.normalizeProvider(n),this.credentialProvider=gw.normalizeProvider(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Bw(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let s=new this.sha256;s.update(xn.toUint8Array(n));let i=await s.digest();return`${o}
${t}
${r}
${Lr.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Aa.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=XM(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},xm=class extends Da{headerFormatter=new Em;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:d,signingRegion:l,signingService:m}=r,h=await this.credentialProvider();this.validateResolvedCredentials(h);let S=l??await this.regionProvider(),{longDate:y,shortDate:w}=this.formatDate(n);if(o>kw)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let R=Pa(w,S,m??this.service),P=Fw(wm(t),{unhoistableHeaders:i,hoistableHeaders:d});h.sessionToken&&(P.query[Tm]=h.sessionToken),P.query[_w]=Ra,P.query[ww]=`${h.accessKeyId}/${R}`,P.query[bm]=y,P.query[bw]=o.toString(10);let N=Sm(P,s,a);return P.query[xw]=this.getCanonicalHeaderList(N),P.query[Cm]=await this.getSignature(y,R,this.getSigningKey(h,S,w,m),this.createCanonicalRequest(P,N,await Oa(t,this.sha256))),P}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:d,longDate:l}=this.formatDate(n),m=Pa(d,a,i??this.service),h=await Oa({headers:{},body:r},this.sha256),S=new this.sha256;S.update(t);let y=Lr.toHex(await S.digest()),w=[Ow,l,m,o,y,h].join(`
`);return this.signString(w,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),d=new this.sha256(await this.getSigningKey(s,i,a,o));return d.update(xn.toUint8Array(t)),Lr.toHex(await d.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=s??await this.regionProvider(),l=wm(t),{longDate:m,shortDate:h}=this.formatDate(r),S=Pa(h,d,i??this.service);l.headers[Am]=m,a.sessionToken&&(l.headers[Aw]=a.sessionToken);let y=await Oa(l,this.sha256);!Lw(Na,l.headers)&&this.applyChecksum&&(l.headers[Na]=y);let w=Sm(l,o,n),R=await this.getSignature(m,S,this.getSigningKey(a,d,h,i),this.createCanonicalRequest(l,w,y));return l.headers[vm]=`${Ra} Credential=${a.accessKeyId}/${S}, SignedHeaders=${this.getCanonicalHeaderList(w)}, Signature=${R}`,l}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o,Ra),i=new this.sha256(await n);return i.update(xn.toUint8Array(s)),Lr.toHex(await i.digest())}getSigningKey(t,r,n,o){return Mw(this.sha256,t,n,r,o||this.service)}},ZM={SignatureV4a:null};X.ALGORITHM_IDENTIFIER=Ra;X.ALGORITHM_IDENTIFIER_V4A=KM;X.ALGORITHM_QUERY_PARAM=_w;X.ALWAYS_UNSIGNABLE_HEADERS=Rw;X.AMZ_DATE_HEADER=Am;X.AMZ_DATE_QUERY_PARAM=bm;X.AUTH_HEADER=vm;X.CREDENTIAL_QUERY_PARAM=ww;X.DATE_HEADER=Cw;X.EVENT_ALGORITHM_IDENTIFIER=Ow;X.EXPIRES_QUERY_PARAM=bw;X.GENERATED_HEADERS=Tw;X.HOST_HEADER=GM;X.KEY_TYPE_IDENTIFIER=Rm;X.MAX_CACHE_SIZE=Dw;X.MAX_PRESIGNED_TTL=kw;X.PROXY_HEADER_PATTERN=Iw;X.REGION_SET_PARAM=VM;X.SEC_HEADER_PATTERN=Pw;X.SHA256_HEADER=Na;X.SIGNATURE_HEADER=vw;X.SIGNATURE_QUERY_PARAM=Cm;X.SIGNED_HEADERS_QUERY_PARAM=xw;X.SignatureV4=xm;X.SignatureV4Base=Da;X.TOKEN_HEADER=Aw;X.TOKEN_QUERY_PARAM=Tm;X.UNSIGNABLE_PATTERNS=WM;X.UNSIGNED_PAYLOAD=Nw;X.clearCredentialCache=YM;X.createScope=Pa;X.getCanonicalHeaders=Sm;X.getCanonicalQuery=Bw;X.getPayloadHash=Oa;X.getSigningKey=Mw;X.hasHeader=Lw;X.moveHeadersToQuery=Fw;X.prepareRequest=wm;X.signatureV4aContainer=ZM});function e1(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=em(t,Zf,xa):r?n=Tr(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function t1(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Im,bn,$w,Hw=T(()=>{c();vt();Ue();Im=v(Uw()),bn=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let m=e1(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),h=t1(e,m);r&&!h.attributed?(n=async S=>h(S).then(y=>kr(y,"CREDENTIALS_CODE","e")),n.memoized=h.memoized,n.configBound=h.configBound,n.attributed=!0):n=h},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Tr(e.signer):e.regionInfoProvider?a=()=>Tr(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,m])=>{let{signingRegion:h,signingService:S}=l;e.signingRegion=e.signingRegion||h||m,e.signingName=e.signingName||S||e.serviceId;let y={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},w=e.signerConstructor||Im.SignatureV4;return new w(y)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Tr(e.region)(),properties:{}},l);let m=l.signingRegion,h=l.signingName;e.signingRegion=e.signingRegion||m,e.signingName=e.signingName||h||e.serviceId;let S={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},y=e.signerConstructor||Im.SignatureV4;return new y(S)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},$w=bn});var qw=T(()=>{c();fm();cw();fw();hw();Hw()});var jw={};Ct(jw,{AWSSDKSigV4Signer:()=>um,AwsSdkSigV4ASigner:()=>ps,AwsSdkSigV4Signer:()=>ot,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>so,NODE_SIGV4A_CONFIG_OPTIONS:()=>pw,getBearerTokenEnvKey:()=>va,resolveAWSSDKSigV4Config:()=>$w,resolveAwsSdkSigV4AConfig:()=>mw,resolveAwsSdkSigV4Config:()=>bn,validateSigningProperties:()=>oo});var Pm=T(()=>{c();qw();pm()});function Fr(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function ka(e){return e[Om]=!0,e}var Om,Ma=T(()=>{c();Om=Symbol("@smithy/core/cbor::tagSymbol")});function Gw(e){le=e,ar=new DataView(le.buffer,le.byteOffset,le.byteLength)}function Mt(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(le[e]&224)>>5,n=le[e]&31;switch(r){case 0:case 1:case 6:let o,s;if(n<24)o=n,s=1;else switch(n){case 24:case 25:case 26:case 27:let i=Kw[n],a=i+1;if(s=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let d=e+1;i===1?o=le[d]:i===2?o=ar.getUint16(d):i===4?o=ar.getUint32(d):o=ar.getBigUint64(d);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return Z=s,Nm(o);if(r===1){let i;return typeof o=="bigint"?i=BigInt(-1)-o:i=-1-o,Z=s,Nm(i)}else if(n===2||n===3){let i=Ss(e+s,t),a=BigInt(0),d=e+s+Z;for(let l=d;l<d+i;++l)a=a<<BigInt(8)|BigInt(le[l]);return Z=s+Z+i,n===3?-a-BigInt(1):a}else if(n===4){let i=Mt(e+s,t),[a,d]=i,l=d<0?-1:1,m="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(d)),h,S=d<0?"-":"";return h=a===0?m:m.slice(0,m.length+a)+"."+m.slice(a),h=h.replace(/^0+/g,""),h===""&&(h="0"),h[0]==="."&&(h="0"+h),h=S+h,Z=s+Z,qf(h)}else{let i=Mt(e+s,t);return Z=s+Z,ka({tag:Nm(o),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return c1(e,t);case 5:return m1(e,t);case 4:return u1(e,t);case 2:return d1(e,t)}else switch(r){case 3:return a1(e,t);case 5:return f1(e,t);case 4:return l1(e,t);case 2:return Bm(e,t)}default:return p1(e,t)}}function Ww(e,t,r){return o1&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):zw?zw.decode(e.subarray(t,r)):(0,Vw.toUtf8)(e.subarray(t,r))}function s1(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function i1(e,t){let r=e>>7,n=(e&124)>>2,o=(e&3)<<8|t,s=r===0?1:-1,i,a;if(n===0){if(o===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return o===0?s*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=o/1024,s*(i*a)}function Ss(e,t){let r=le[e]&31;if(r<24)return Z=1,r;if(r===24||r===25||r===26||r===27){let n=Kw[r];if(Z=n+1,t-e<Z)throw new Error(`countLength ${n} greater than remaining buf len.`);let o=e+1;return n===1?le[o]:n===2?ar.getUint16(o):n===4?ar.getUint32(o):s1(ar.getBigUint64(o))}throw new Error(`unexpected minor value ${r}.`)}function a1(e,t){let r=Ss(e,t),n=Z;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let o=Ww(le,e,e+r);return Z=n+r,o}function c1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255){let d=Fr(r.length);return d.set(r,0),Z=e-n+2,Ww(d,0,d.length)}let o=(le[e]&224)>>5,s=le[e]&31;if(o!==3)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=Bm(e,t);e+=Z;for(let d=0;d<i.length;++d)r.push(i[d])}throw new Error("expected break marker.")}function Bm(e,t){let r=Ss(e,t),n=Z;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let o=le.subarray(e,e+r);return Z=n+r,o}function d1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255){let d=Fr(r.length);return d.set(r,0),Z=e-n+2,d}let o=(le[e]&224)>>5,s=le[e]&31;if(o!==2)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=Bm(e,t);e+=Z;for(let d=0;d<i.length;++d)r.push(i[d])}throw new Error("expected break marker.")}function l1(e,t){let r=Ss(e,t),n=Z;e+=n;let o=e,s=Array(r);for(let i=0;i<r;++i){let a=Mt(e,t),d=Z;s[i]=a,e+=d}return Z=n+(e-o),s}function u1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255)return Z=e-n+2,r;let o=Mt(e,t);e+=Z,r.push(o)}throw new Error("expected break marker.")}function f1(e,t){let r=Ss(e,t),n=Z;e+=n;let o=e,s={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(le[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let d=Mt(e,t);e+=Z;let l=Mt(e,t);e+=Z,s[d]=l}return Z=n+(e-o),s}function m1(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(le[e]===255)return Z=e-r+2,n;let o=(le[e]&224)>>5;if(o!==3)throw new Error(`unexpected major type ${o} for map key.`);let s=Mt(e,t);e+=Z;let i=Mt(e,t);e+=Z,n[s]=i}throw new Error("expected break marker.")}function p1(e,t){let r=le[e]&31;switch(r){case 21:case 20:return Z=1,r===21;case 22:return Z=1,null;case 23:return Z=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return Z=3,i1(le[e+1],le[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return Z=5,ar.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return Z=9,ar.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Nm(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var Vw,n1,o1,le,ar,zw,Z,Kw,Yw=T(()=>{c();nt();Vw=v(Le());Ma();n1=typeof TextDecoder<"u",o1=typeof Buffer<"u",le=Fr(0),ar=new DataView(le.buffer,le.byteOffset,le.byteLength),zw=n1?new TextDecoder:null,Z=0;Kw={24:1,25:2,26:4,27:8}});function $m(e){V.byteLength-H<e&&(H<16e6?Fa(Math.max(V.byteLength*4,V.byteLength+e)):Fa(V.byteLength+e+16e6))}function Hm(){let e=Fr(H);return e.set(V.subarray(0,H),0),H=0,e}function Fa(e){let t=V;V=Fr(e),t&&(t.copy?t.copy(V,0,0,t.byteLength):V.set(t,0)),lr=new DataView(V.buffer,V.byteOffset,V.byteLength)}function dr(e,t){t<24?V[H++]=e<<5|t:t<256?(V[H++]=e<<5|24,V[H++]=t):t<65536?(V[H++]=e<<5|25,lr.setUint16(H,t),H+=2):t<2**32?(V[H++]=e<<5|26,lr.setUint32(H,t),H+=4):(V[H++]=e<<5|27,lr.setBigUint64(H,typeof t=="bigint"?t:BigInt(t)),H+=8)}function Qw(e){let t=[e];for(;t.length;){let r=t.pop();if($m(typeof r=="string"?r.length*4:64),typeof r=="string"){if(Jw)dr(3,Buffer.byteLength(r)),H+=V.write(r,H);else{let n=(0,Xw.fromUtf8)(r);dr(3,n.byteLength),V.set(n,H),H+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,o=n?0:1,s=n?r:-r-1;s<24?V[H++]=o<<5|s:s<256?(V[H++]=o<<5|24,V[H++]=s):s<65536?(V[H++]=o<<5|25,V[H++]=s>>8,V[H++]=s):s<4294967296?(V[H++]=o<<5|26,lr.setUint32(H,s),H+=4):(V[H++]=o<<5|27,lr.setBigUint64(H,BigInt(s)),H+=8);continue}V[H++]=251,lr.setFloat64(H,r),H+=8;continue}else if(typeof r=="bigint"){let n=r>=0,o=n?0:1,s=n?r:-r-BigInt(1),i=Number(s);if(i<24)V[H++]=o<<5|i;else if(i<256)V[H++]=o<<5|24,V[H++]=i;else if(i<65536)V[H++]=o<<5|25,V[H++]=i>>8,V[H++]=i&255;else if(i<4294967296)V[H++]=o<<5|26,lr.setUint32(H,i),H+=4;else if(s<BigInt("18446744073709551616"))V[H++]=o<<5|27,lr.setBigUint64(H,s),H+=8;else{let a=s.toString(2),d=new Uint8Array(Math.ceil(a.length/8)),l=s,m=0;for(;d.byteLength-++m>=0;)d[d.byteLength-m]=Number(l&BigInt(255)),l>>=BigInt(8);$m(d.byteLength*2),V[H++]=n?194:195,Jw?dr(2,Buffer.byteLength(d)):dr(2,d.byteLength),V.set(d,H),H+=d.byteLength}continue}else if(r===null){V[H++]=246;continue}else if(typeof r=="boolean"){V[H++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);dr(4,r.length);continue}else if(typeof r.byteLength=="number"){$m(r.length*2),dr(2,r.length),V.set(r,H),H+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof be){let o=r.string.indexOf("."),s=o===-1?0:o-r.string.length+1,i=BigInt(r.string.replace(".",""));V[H++]=196,t.push(i),t.push(s),dr(4,2);continue}if(r[Om])if("tag"in r&&"value"in r){t.push(r.value),dr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let o=n.length-1;o>=0;--o){let s=n[o];t.push(r[s]),t.push(s)}dr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var Xw,Jw,h1,V,lr,H,Zw=T(()=>{c();nt();Xw=v(Le());Ma();Jw=typeof Buffer<"u",h1=2048,V=Fr(h1),lr=new DataView(V.buffer,V.byteOffset,V.byteLength),H=0});var qm,ex=T(()=>{c();Yw();Zw();qm={deserialize(e){return Gw(e),Mt(0,e.length)},serialize(e){try{return Qw(e),Hm()}catch(t){throw Hm(),t}},resizeEncodingBuffer(e){Fa(e)}}});var Ba,Ua,$a=T(()=>{c();Ma();Ba=e=>ka({tag:1,value:e.getTime()/1e3}),Ua=(e,t)=>{let r=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(o=>o.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var Vm,Ha,jm,zm,Gm=T(()=>{c();Te();nt();Vm=v(Fe());ex();$a();Ha=class{serdeContext;createSerializer(){let t=new jm;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new zm;return t.setSerdeContext(this.serdeContext),t}setSerdeContext(t){this.serdeContext=t}},jm=class{serdeContext;value;setSerdeContext(t){this.serdeContext=t}write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=U.of(t);if(r==null)return n.isIdempotencyToken()?(0,Dt.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Vm.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Ba(new Date(Number(r)/1e3|0)):Ba(r);if(typeof r=="function"||typeof r=="object"){let o=r;if(n.isListSchema()&&Array.isArray(o)){let i=!!n.getMergedTraits().sparse,a=[],d=0;for(let l of o){let m=this.serialize(n.getValueSchema(),l);(m!=null||i)&&(a[d++]=m)}return a}if(o instanceof Date)return Ba(o);let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(o)){let d=this.serialize(n.getValueSchema(),o[a]);(d!=null||i)&&(s[a]=d)}}else if(n.isStructSchema())for(let[i,a]of n.structIterator()){let d=this.serialize(a,o[i]);d!=null&&(s[i]=d)}else if(n.isDocumentSchema())for(let i of Object.keys(o))s[i]=this.serialize(n.getValueSchema(),o[i]);return s}return r}flush(){let t=qm.serialize(this.value);return this.value=void 0,t}},zm=class{serdeContext;setSerdeContext(t){this.serdeContext=t}read(t,r){let n=qm.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=U.of(t);if(n.isTimestampSchema()&&typeof r=="number")return cs(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Vm.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let s=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let d of r){let l=this.readValue(i,d);(l!=null||a)&&s.push(l)}return s}let o={};if(n.isMapSchema()){let s=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let d=this.readValue(i,r[a]);(d!=null||s)&&(o[a]=d)}}else if(n.isStructSchema())for(let[s,i]of n.structIterator())o[s]=this.readValue(i,r[s]);return o}else return r}}});var tx,qa,rx=T(()=>{c();lt();Te();tx=v(Xe());Gm();$a();qa=class extends nr{codec=new Ha;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);if(Object.assign(o.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),pt(t.input)==="unit")delete o.body,delete o.headers["content-type"];else{o.body||(this.serializer.write(15,{}),o.body=this.serializer.flush());try{o.headers["content-length"]=String(o.body.byteLength)}catch{}}let{service:s,operation:i}=(0,tx.getSmithyContext)(n),a=`/service/${s}/operation/${i}`;return o.path.endsWith("/")?o.path+=a.slice(1):o.path+=a,o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=Ua(n,o)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let d={$metadata:s,$response:n,$fault:n.statusCode<=500?"client":"server"},l=Ne.for(a),m;try{m=l.getSchema(i)}catch{o.Message&&(o.message=o.Message);let N=Ne.for("smithy.ts.sdk.synthetic."+a),k=N.getBaseException();if(k){let $=N.getErrorCtor(k);throw Object.assign(new $({name:i}),d,o)}throw Object.assign(new Error(i),d,o)}let h=U.of(m),S=l.getErrorCtor(m),y=o.message??o.Message??"Unknown",w=new S(y),R={};for(let[P,N]of h.structIterator())R[P]=this.deserializer.readValue(N,o[P]);throw Object.assign(w,d,{$fault:h.getMergedTraits().error,message:y},R)}getDefaultContentType(){return"application/cbor"}}});var nx=T(()=>{c();$a();rx();Gm()});var ht,lo=T(()=>{c();Te();ht=class{resolveRestContentType(t,r){let n=r.getMemberSchemas(),o=Object.values(n).find(s=>!!s.getMergedTraits().httpPayload);if(o){let s=o.getMergedTraits().mediaType;return s||(o.isStringSchema()?"text/plain":o.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:d,httpHeader:l,httpLabel:m,httpPrefixHeaders:h}=i.getMergedTraits();return!a&&!d&&!l&&!m&&h===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,o,s,i){let a=r,d=t;t.includes("#")&&([a,d]=t.split("#"));let l={$metadata:s,$response:n,$fault:n.statusCode<500?"client":"server"},m=Ne.for(a);try{return{errorSchema:i?.(m,d)??m.getSchema(t),errorMetadata:l}}catch{o.message=o.message??o.Message??"UnknownError";let S=Ne.for("smithy.ts.sdk.synthetic."+a),y=S.getBaseException();if(y){let w=S.getErrorCtor(y)??Error;throw Object.assign(new w({name:d}),l,o)}throw Object.assign(new Error(d),l,o)}}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[o,s]=n.split(";"),i=Object.entries(t),a={Code:o,Type:s};Object.assign(t,a);for(let[d,l]of i)a[d]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var Wm,ox=T(()=>{c();nx();Te();lo();Wm=class extends qa{awsQueryCompatible;mixin=new ht;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),o}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=Ua(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m),y={};for(let[w,R]of l.structIterator())y[w]=this.deserializer.readValue(R,o[w]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,y),Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}}});var g1,y1,S1,sx=T(()=>{c();g1=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},y1=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},S1=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var We,Hr=T(()=>{c();We=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function ix(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new be(n,"bigDecimal"):BigInt(n)}return t}var ax=T(()=>{c();nt()});var ux=I(lx=>{"use strict";c();var Cn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},qr=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Km=()=>{let e=[],t=[],r=!1,n=new Set,o=h=>h.sort((S,y)=>cx[y.step]-cx[S.step]||dx[y.priority||"normal"]-dx[S.priority||"normal"]),s=h=>{let S=!1,y=w=>{let R=Cn(w.name,w.aliases);if(R.includes(h)){S=!0;for(let P of R)n.delete(P);return!1}return!0};return e=e.filter(y),t=t.filter(y),S},i=h=>{let S=!1,y=w=>{if(w.middleware===h){S=!0;for(let R of Cn(w.name,w.aliases))n.delete(R);return!1}return!0};return e=e.filter(y),t=t.filter(y),S},a=h=>(e.forEach(S=>{h.add(S.middleware,{...S})}),t.forEach(S=>{h.addRelativeTo(S.middleware,{...S})}),h.identifyOnResolve?.(m.identifyOnResolve()),h),d=h=>{let S=[];return h.before.forEach(y=>{y.before.length===0&&y.after.length===0?S.push(y):S.push(...d(y))}),S.push(h),h.after.reverse().forEach(y=>{y.before.length===0&&y.after.length===0?S.push(y):S.push(...d(y))}),S},l=(h=!1)=>{let S=[],y=[],w={};return e.forEach(P=>{let N={...P,before:[],after:[]};for(let k of Cn(N.name,N.aliases))w[k]=N;S.push(N)}),t.forEach(P=>{let N={...P,before:[],after:[]};for(let k of Cn(N.name,N.aliases))w[k]=N;y.push(N)}),y.forEach(P=>{if(P.toMiddleware){let N=w[P.toMiddleware];if(N===void 0){if(h)return;throw new Error(`${P.toMiddleware} is not found when adding ${qr(P.name,P.aliases)} middleware ${P.relation} ${P.toMiddleware}`)}P.relation==="after"&&N.after.push(P),P.relation==="before"&&N.before.push(P)}}),o(S).map(d).reduce((P,N)=>(P.push(...N),P),[])},m={add:(h,S={})=>{let{name:y,override:w,aliases:R}=S,P={step:"initialize",priority:"normal",middleware:h,...S},N=Cn(y,R);if(N.length>0){if(N.some(k=>n.has(k))){if(!w)throw new Error(`Duplicate middleware name '${qr(y,R)}'`);for(let k of N){let $=e.findIndex(q=>q.name===k||q.aliases?.some(re=>re===k));if($===-1)continue;let z=e[$];if(z.step!==P.step||P.priority!==z.priority)throw new Error(`"${qr(z.name,z.aliases)}" middleware with ${z.priority} priority in ${z.step} step cannot be overridden by "${qr(y,R)}" middleware with ${P.priority} priority in ${P.step} step.`);e.splice($,1)}}for(let k of N)n.add(k)}e.push(P)},addRelativeTo:(h,S)=>{let{name:y,override:w,aliases:R}=S,P={middleware:h,...S},N=Cn(y,R);if(N.length>0){if(N.some(k=>n.has(k))){if(!w)throw new Error(`Duplicate middleware name '${qr(y,R)}'`);for(let k of N){let $=t.findIndex(q=>q.name===k||q.aliases?.some(re=>re===k));if($===-1)continue;let z=t[$];if(z.toMiddleware!==P.toMiddleware||z.relation!==P.relation)throw new Error(`"${qr(z.name,z.aliases)}" middleware ${z.relation} "${z.toMiddleware}" middleware cannot be overridden by "${qr(y,R)}" middleware ${P.relation} "${P.toMiddleware}" middleware.`);t.splice($,1)}}for(let k of N)n.add(k)}t.push(P)},clone:()=>a(Km()),use:h=>{h.applyToStack(m)},remove:h=>typeof h=="string"?s(h):i(h),removeByTag:h=>{let S=!1,y=w=>{let{tags:R,name:P,aliases:N}=w;if(R&&R.includes(h)){let k=Cn(P,N);for(let $ of k)n.delete($);return S=!0,!1}return!0};return e=e.filter(y),t=t.filter(y),S},concat:h=>{let S=a(Km());return S.use(h),S.identifyOnResolve(r||S.identifyOnResolve()||(h.identifyOnResolve?.()??!1)),S},applyToStack:a,identify:()=>l(!0).map(h=>{let S=h.step??h.relation+" "+h.toMiddleware;return qr(h.name,h.aliases)+" - "+S}),identifyOnResolve(h){return typeof h=="boolean"&&(r=h),r},resolve:(h,S)=>{for(let y of l().map(w=>w.middleware).reverse())h=y(h,S);return r&&console.log(m.identify()),h}};return m},cx={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},dx={high:3,normal:2,low:1};lx.constructStack=Km});var K=I(ce=>{"use strict";c();var px=ux(),np=(lt(),Y(p_)),Jm=br(),E1=(Te(),Y(iE)),fx=(nt(),Y(ZE)),Xm=class{config;middlewareStack=px.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let d=this.handlers;d.has(t.constructor)?a=d.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),d.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(t).then(d=>s(null,d.output),d=>s(d)).catch(()=>{});else return a(t).then(d=>d.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Ym="***SensitiveInformation***";function Qm(e,t){if(t==null)return t;let r=E1.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Ym;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Ym}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Ym}else if(r.isStructSchema()&&typeof t=="object"){let n=t,o={};for(let[s,i]of r.structIterator())n[s]!=null&&(o[s]=Qm(i,n[s]));return o}return t}var ja=class{middlewareStack=px.constructStack();schema;static classBuilder(){return new Zm}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,smithyContext:l,additionalContext:m,CommandCtor:h}){for(let P of o.bind(this)(h,t,r,n))this.middlewareStack.use(P);let S=t.concat(this.middlewareStack),{logger:y}=r,w={logger:y,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,[Jm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...m},{requestHandler:R}=r;return S.resolve(P=>R.handle(P.request,n||{}),w)}},Zm=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends ja{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,o,s){return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(t._operationSchema?Qm.bind(null,t._operationSchema.input):i=>i),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(t._operationSchema?Qm.bind(null,t._operationSchema.output):i=>i),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},_1="***SensitiveInformation***",w1=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,d){let l=new n(i);if(typeof a=="function")this.send(l,a);else if(typeof d=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},d)}else return this.send(l,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},ep=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},hx=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},gx=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=b1(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw hx(i,t)},x1=e=>({output:t,parsedBody:r,errorCode:n})=>{gx({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},b1=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),C1=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},mx=!1,T1=e=>{e&&!mx&&parseInt(e.substring(1,e.indexOf(".")))<16&&(mx=!0)},v1=e=>{let t=[];for(let r in Jm.AlgorithmId){let n=Jm.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},A1=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},R1=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),I1=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},yx=e=>Object.assign(v1(e),R1(e)),P1=yx,O1=e=>Object.assign(A1(e),I1(e)),N1=e=>Array.isArray(e)?e:[e],Sx=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Sx(e[r]));return e},D1=e=>e!=null,tp=class{trace(){}debug(){}info(){}warn(){}error(){}};function Ex(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,L1(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}_x(n,null,s,i)}return n}var k1=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},M1=(e,t)=>{let r={};for(let n in t)_x(r,e,t,n);return r},L1=(e,t,r)=>Ex(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),_x=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=F1,d=B1,l=n]=i;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=d(t[l]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,d=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:d&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},F1=e=>e!=null,B1=e=>e,U1=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},$1=e=>e.toISOString().replace(".000Z","Z"),rp=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(rp);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=rp(e[r]));return t}return e};Object.defineProperty(ce,"collectBody",{enumerable:!0,get:function(){return np.collectBody}});Object.defineProperty(ce,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return np.extendedEncodeURIComponent}});Object.defineProperty(ce,"resolvedPath",{enumerable:!0,get:function(){return np.resolvedPath}});ce.Client=Xm;ce.Command=ja;ce.NoOpLogger=tp;ce.SENSITIVE_STRING=_1;ce.ServiceException=ep;ce._json=rp;ce.convertMap=k1;ce.createAggregatedClient=w1;ce.decorateServiceException=hx;ce.emitWarningIfUnsupportedVersion=T1;ce.getArrayIfSingleItem=N1;ce.getDefaultClientConfiguration=P1;ce.getDefaultExtensionConfiguration=yx;ce.getValueFromTextNode=Sx;ce.isSerializableHeaderValue=D1;ce.loadConfigsForDefaultMode=C1;ce.map=Ex;ce.resolveDefaultRuntimeConfig=O1;ce.serializeDateTime=$1;ce.serializeFloat=U1;ce.take=M1;ce.throwDefaultError=gx;ce.withBaseException=x1;Object.keys(fx).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ce,e)&&Object.defineProperty(ce,e,{enumerable:!0,get:function(){return fx[e]}})})});var wx,xx,za,op=T(()=>{c();wx=v(K()),xx=v(Le()),za=(e,t)=>(0,wx.collectBody)(e,t).then(r=>(t?.utf8Encoder??xx.toUtf8)(r))});var uo,sp,Tn,Es=T(()=>{c();op();uo=(e,t)=>za(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),sp=async(e,t)=>{let r=await uo(e,t);return r.message=r.message??r.Message,r},Tn=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var bx,_s,ip=T(()=>{c();lt();Te();nt();bx=v(Fe());Hr();ax();Es();_s=class extends We{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,ix):await uo(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",o=U.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],d=!!o.getMergedTraits().sparse;for(let l of r)(d||l!=null)&&a.push(this._read(i,l));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},d=!!o.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(d||m!=null)&&(a[l]=this._read(i,m));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,d]of o.structIterator()){let l=this.settings.jsonName?d.getMergedTraits().jsonName??a:a,m=this._read(d,r[l]);m!=null&&(i[a]=m)}return i}if(o.isBlobSchema()&&typeof r=="string")return(0,bx.fromBase64)(r);let s=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r=="string"&&s&&(s==="application/json"||s.endsWith("+json")))return Qe.from(r);if(o.isTimestampSchema()&&r!=null)switch(dt(o,this.settings)){case 5:return If(r);case 6:return Pf(r);case 7:return Of(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null){if(r instanceof be)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new be(i.string,i.type):new be(String(r),"bigDecimal")}if(o.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,d]of Object.entries(r))d instanceof be?i[a]=d:i[a]=this._read(o,d);return i}else return structuredClone(r);return r}}});var Cx,Va,Tx=T(()=>{c();nt();Cx="\u039D",Va=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof be){let n=`${Cx+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${Cx+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var vx,ws,ap=T(()=>{c();lt();Te();nt();vx=v(Fe());Hr();Tx();ws=class extends We{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=U.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=U.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new Va;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,n){let o=r!==null&&typeof r=="object",s=U.of(t);if(s.isListSchema()&&Array.isArray(r)){let i=s.getValueSchema(),a=[],d=!!s.getMergedTraits().sparse;for(let l of r)(d||l!=null)&&a.push(this._write(i,l));return a}else if(s.isMapSchema()&&o){let i=s.getValueSchema(),a={},d=!!s.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(d||m!=null)&&(a[l]=this._write(i,m));return a}else if(s.isStructSchema()&&o){let i={};for(let[a,d]of s.structIterator()){let l=this.settings.jsonName?d.getMergedTraits().jsonName??a:a,m=this._write(d,r[a],s);m!==void 0&&(i[l]=m)}return i}if(!(r===null&&n?.isStructSchema())){if(s.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||s.isDocumentSchema()&&r instanceof Uint8Array)return s===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,vx.toBase64)(r);if((s.isTimestampSchema()||s.isDocumentSchema())&&r instanceof Date)switch(dt(s,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return is(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(s.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(s.isStringSchema()){if(typeof r>"u"&&s.isIdempotencyToken())return(0,Dt.v4)();let i=s.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return Qe.from(r)}if(s.isDocumentSchema())if(o){let i=Array.isArray(r)?[]:{};for(let[a,d]of Object.entries(r))d instanceof be?i[a]=d:i[a]=this._write(s,d);return i}else return structuredClone(r);return r}}}});var vn,Ga=T(()=>{c();Hr();ip();ap();vn=class extends We{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new ws(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new _s(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var An,Wa=T(()=>{c();lt();Te();lo();Ga();Es();An=class extends nr{serializer;deserializer;serviceTarget;codec;mixin=new ht;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new vn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${U.of(t).getName()}`}),this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),(pt(t.input)==="unit"||!o.body)&&(o.body="{}"),o}getPayloadCodec(){return this.codec}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=Tn(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m),y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(R,o[P])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,y),Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}}});var cp,Ax=T(()=>{c();Wa();cp=class extends An{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var dp,Rx=T(()=>{c();Wa();dp=class extends An{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var lp,Ix=T(()=>{c();lt();Te();lo();Ga();Es();lp=class extends mn{serializer;deserializer;codec;mixin=new ht;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new vn(r),this.serializer=new gn(this.codec.createSerializer(),r),this.deserializer=new hn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=U.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return o.headers["content-type"]&&!o.body&&(o.body="{}"),o}async handleError(t,r,n,o,s){let i=Tn(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m);await this.deserializeHttpMessage(a,r,n,o);let y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(R,o[P])}throw Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}getDefaultContentType(){return"application/json"}}});var Px,H1,Ox=T(()=>{c();Px=v(K()),H1=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,Px.expectUnion)(e)}});var Dx=I((uQ,Nx)=>{c();(()=>{"use strict";var e={d:(u,f)=>{for(var _ in f)e.o(f,_)&&!e.o(u,_)&&Object.defineProperty(u,_,{enumerable:!0,get:f[_]})},o:(u,f)=>Object.prototype.hasOwnProperty.call(u,f),r:u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>wr,XMLParser:()=>vO,XMLValidator:()=>kO});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function o(u,f){let _=[],C=f.exec(u);for(;C;){let x=[];x.startIndex=f.lastIndex-C[0].length;let b=C.length;for(let O=0;O<b;O++)x.push(C[O]);_.push(x),C=f.exec(u)}return _}let s=function(u){return n.exec(u)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(u,f){f=Object.assign({},i,f);let _=[],C=!1,x=!1;u[0]==="\uFEFF"&&(u=u.substr(1));for(let b=0;b<u.length;b++)if(u[b]==="<"&&u[b+1]==="?"){if(b+=2,b=l(u,b),b.err)return b}else{if(u[b]!=="<"){if(d(u[b]))continue;return N("InvalidChar","char '"+u[b]+"' is not expected.",$(u,b))}{let O=b;if(b++,u[b]==="!"){b=m(u,b);continue}{let A=!1;u[b]==="/"&&(A=!0,b++);let D="";for(;b<u.length&&u[b]!==">"&&u[b]!==" "&&u[b]!=="	"&&u[b]!==`
`&&u[b]!=="\r";b++)D+=u[b];if(D=D.trim(),D[D.length-1]==="/"&&(D=D.substring(0,D.length-1),b--),!s(D)){let j;return j=D.trim().length===0?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",N("InvalidTag",j,$(u,b))}let L=y(u,b);if(L===!1)return N("InvalidAttr","Attributes for '"+D+"' have open quote.",$(u,b));let G=L.value;if(b=L.index,G[G.length-1]==="/"){let j=b-G.length;G=G.substring(0,G.length-1);let ne=R(G,f);if(ne!==!0)return N(ne.err.code,ne.err.msg,$(u,j+ne.err.line));C=!0}else if(A){if(!L.tagClosed)return N("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",$(u,b));if(G.trim().length>0)return N("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",$(u,O));if(_.length===0)return N("InvalidTag","Closing tag '"+D+"' has not been opened.",$(u,O));{let j=_.pop();if(D!==j.tagName){let ne=$(u,j.tagStartPos);return N("InvalidTag","Expected closing tag '"+j.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+D+"'.",$(u,O))}_.length==0&&(x=!0)}}else{let j=R(G,f);if(j!==!0)return N(j.err.code,j.err.msg,$(u,b-G.length+j.err.line));if(x===!0)return N("InvalidXml","Multiple possible root nodes found.",$(u,b));f.unpairedTags.indexOf(D)!==-1||_.push({tagName:D,tagStartPos:O}),C=!0}for(b++;b<u.length;b++)if(u[b]==="<"){if(u[b+1]==="!"){b++,b=m(u,b);continue}if(u[b+1]!=="?")break;if(b=l(u,++b),b.err)return b}else if(u[b]==="&"){let j=P(u,b);if(j==-1)return N("InvalidChar","char '&' is not expected.",$(u,b));b=j}else if(x===!0&&!d(u[b]))return N("InvalidXml","Extra text at the end",$(u,b));u[b]==="<"&&b--}}}return C?_.length==1?N("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",$(u,_[0].tagStartPos)):!(_.length>0)||N("InvalidXml","Invalid '"+JSON.stringify(_.map((b=>b.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):N("InvalidXml","Start tag expected.",1)}function d(u){return u===" "||u==="	"||u===`
`||u==="\r"}function l(u,f){let _=f;for(;f<u.length;f++)if(!(u[f]!="?"&&u[f]!=" ")){let C=u.substr(_,f-_);if(f>5&&C==="xml")return N("InvalidXml","XML declaration allowed only at the start of the document.",$(u,f));if(u[f]=="?"&&u[f+1]==">"){f++;break}}return f}function m(u,f){if(u.length>f+5&&u[f+1]==="-"&&u[f+2]==="-"){for(f+=3;f<u.length;f++)if(u[f]==="-"&&u[f+1]==="-"&&u[f+2]===">"){f+=2;break}}else if(u.length>f+8&&u[f+1]==="D"&&u[f+2]==="O"&&u[f+3]==="C"&&u[f+4]==="T"&&u[f+5]==="Y"&&u[f+6]==="P"&&u[f+7]==="E"){let _=1;for(f+=8;f<u.length;f++)if(u[f]==="<")_++;else if(u[f]===">"&&(_--,_===0))break}else if(u.length>f+9&&u[f+1]==="["&&u[f+2]==="C"&&u[f+3]==="D"&&u[f+4]==="A"&&u[f+5]==="T"&&u[f+6]==="A"&&u[f+7]==="["){for(f+=8;f<u.length;f++)if(u[f]==="]"&&u[f+1]==="]"&&u[f+2]===">"){f+=2;break}}return f}let h='"',S="'";function y(u,f){let _="",C="",x=!1;for(;f<u.length;f++){if(u[f]===h||u[f]===S)C===""?C=u[f]:C!==u[f]||(C="");else if(u[f]===">"&&C===""){x=!0;break}_+=u[f]}return C===""&&{value:_,index:f,tagClosed:x}}let w=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function R(u,f){let _=o(u,w),C={};for(let x=0;x<_.length;x++){if(_[x][1].length===0)return N("InvalidAttr","Attribute '"+_[x][2]+"' has no space in starting.",z(_[x]));if(_[x][3]!==void 0&&_[x][4]===void 0)return N("InvalidAttr","Attribute '"+_[x][2]+"' is without value.",z(_[x]));if(_[x][3]===void 0&&!f.allowBooleanAttributes)return N("InvalidAttr","boolean attribute '"+_[x][2]+"' is not allowed.",z(_[x]));let b=_[x][2];if(!k(b))return N("InvalidAttr","Attribute '"+b+"' is an invalid name.",z(_[x]));if(C.hasOwnProperty(b))return N("InvalidAttr","Attribute '"+b+"' is repeated.",z(_[x]));C[b]=1}return!0}function P(u,f){if(u[++f]===";")return-1;if(u[f]==="#")return(function(C,x){let b=/\d/;for(C[x]==="x"&&(x++,b=/[\da-fA-F]/);x<C.length;x++){if(C[x]===";")return x;if(!C[x].match(b))break}return-1})(u,++f);let _=0;for(;f<u.length;f++,_++)if(!(u[f].match(/\w/)&&_<20)){if(u[f]===";")break;return-1}return f}function N(u,f,_){return{err:{code:u,msg:f,line:_.line||_,col:_.col}}}function k(u){return s(u)}function $(u,f){let _=u.substring(0,f).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function z(u){return u.startIndex+u[1].length}let q={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,f){return f},attributeValueProcessor:function(u,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,f,_){return u},captureMetaData:!1},re;re=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class ze{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,_){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:_})}addChild(f,_){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),_!==void 0&&(this.child[this.child.length-1][re]={startIndex:_})}static getMetaDataSymbol(){return re}}function tt(u,f){let _={};if(u[f+3]!=="O"||u[f+4]!=="C"||u[f+5]!=="T"||u[f+6]!=="Y"||u[f+7]!=="P"||u[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let C=1,x=!1,b=!1,O="";for(;f<u.length;f++)if(u[f]!=="<"||b)if(u[f]===">"){if(b?u[f-1]==="-"&&u[f-2]==="-"&&(b=!1,C--):C--,C===0)break}else u[f]==="["?x=!0:O+=u[f];else{if(x&&dn(u,"!ENTITY",f)){let A,D;f+=7,[A,D,f]=de(u,f+1),D.indexOf("&")===-1&&(_[A]={regx:RegExp(`&${A};`,"g"),val:D})}else if(x&&dn(u,"!ELEMENT",f)){f+=8;let{index:A}=sO(u,f+1);f=A}else if(x&&dn(u,"!ATTLIST",f))f+=8;else if(x&&dn(u,"!NOTATION",f)){f+=9;let{index:A}=Oe(u,f+1);f=A}else{if(!dn(u,"!--",f))throw new Error("Invalid DOCTYPE");b=!0}C++,O=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:f}}let _e=(u,f)=>{for(;f<u.length&&/\s/.test(u[f]);)f++;return f};function de(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f])&&u[f]!=='"'&&u[f]!=="'";)_+=u[f],f++;if(gu(_),f=_e(u,f),u.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(u[f]==="%")throw new Error("Parameter entities are not supported");let C="";return[f,C]=jn(u,f,"entity"),[_,C,--f]}function Oe(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f]);)_+=u[f],f++;gu(_),f=_e(u,f);let C=u.substring(f,f+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);f+=C.length,f=_e(u,f);let x=null,b=null;if(C==="PUBLIC")[f,x]=jn(u,f,"publicIdentifier"),u[f=_e(u,f)]!=='"'&&u[f]!=="'"||([f,b]=jn(u,f,"systemIdentifier"));else if(C==="SYSTEM"&&([f,b]=jn(u,f,"systemIdentifier"),!b))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:x,systemIdentifier:b,index:--f}}function jn(u,f,_){let C="",x=u[f];if(x!=='"'&&x!=="'")throw new Error(`Expected quoted string, found "${x}"`);for(f++;f<u.length&&u[f]!==x;)C+=u[f],f++;if(u[f]!==x)throw new Error(`Unterminated ${_} value`);return[++f,C]}function sO(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f]);)_+=u[f],f++;if(!gu(_))throw new Error(`Invalid element name: "${_}"`);let C="";if(u[f=_e(u,f)]==="E"&&dn(u,"MPTY",f))f+=4;else if(u[f]==="A"&&dn(u,"NY",f))f+=2;else{if(u[f]!=="(")throw new Error(`Invalid Element Expression, found "${u[f]}"`);for(f++;f<u.length&&u[f]!==")";)C+=u[f],f++;if(u[f]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:C.trim(),index:f}}function dn(u,f,_){for(let C=0;C<f.length;C++)if(f[C]!==u[_+C+1])return!1;return!0}function gu(u){if(s(u))return u;throw new Error(`Invalid entity name ${u}`)}let iO=/^[-+]?0x[a-fA-F0-9]+$/,aO=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,cO={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},dO=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Jg(u){return typeof u=="function"?u:Array.isArray(u)?f=>{for(let _ of u)if(typeof _=="string"&&f===_||_ instanceof RegExp&&_.test(f))return!0}:()=>!1}class lO{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=uO,this.parseXml=gO,this.parseTextData=fO,this.resolveNameSpace=mO,this.buildAttributesMap=hO,this.isItStopNode=_O,this.replaceEntitiesValue=SO,this.readStopNodeData=wO,this.saveTextToParentTag=EO,this.addChild=yO,this.ignoreAttributesFn=Jg(this.options.ignoreAttributes)}}function uO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:u[C]}}}function fO(u,f,_,C,x,b,O){if(u!==void 0&&(this.options.trimValues&&!C&&(u=u.trim()),u.length>0)){O||(u=this.replaceEntitiesValue(u));let A=this.options.tagValueProcessor(f,u,_,x,b);return A==null?u:typeof A!=typeof u||A!==u?A:this.options.trimValues||u.trim()===u?Xg(u,this.options.parseTagValue,this.options.numberParseOptions):u}}function mO(u){if(this.options.removeNSPrefix){let f=u.split(":"),_=u.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(u=_+f[1])}return u}let pO=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function hO(u,f,_){if(this.options.ignoreAttributes!==!0&&typeof u=="string"){let C=o(u,pO),x=C.length,b={};for(let O=0;O<x;O++){let A=this.resolveNameSpace(C[O][1]);if(this.ignoreAttributesFn(A,f))continue;let D=C[O][4],L=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&(L=this.options.transformAttributeName(L)),L==="__proto__"&&(L="#__proto__"),D!==void 0){this.options.trimValues&&(D=D.trim()),D=this.replaceEntitiesValue(D);let G=this.options.attributeValueProcessor(A,D,f);b[L]=G==null?D:typeof G!=typeof D||G!==D?G:Xg(D,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(b[L]=!0)}if(!Object.keys(b).length)return;if(this.options.attributesGroupName){let O={};return O[this.options.attributesGroupName]=b,O}return b}}let gO=function(u){u=u.replace(/\r\n?/g,`
`);let f=new ze("!xml"),_=f,C="",x="";for(let b=0;b<u.length;b++)if(u[b]==="<")if(u[b+1]==="/"){let O=ln(u,">",b,"Closing Tag is not closed."),A=u.substring(b+2,O).trim();if(this.options.removeNSPrefix){let G=A.indexOf(":");G!==-1&&(A=A.substr(G+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&(C=this.saveTextToParentTag(C,_,x));let D=x.substring(x.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let L=0;D&&this.options.unpairedTags.indexOf(D)!==-1?(L=x.lastIndexOf(".",x.lastIndexOf(".")-1),this.tagsNodeStack.pop()):L=x.lastIndexOf("."),x=x.substring(0,L),_=this.tagsNodeStack.pop(),C="",b=O}else if(u[b+1]==="?"){let O=yu(u,b,!1,"?>");if(!O)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,_,x),!(this.options.ignoreDeclaration&&O.tagName==="?xml"||this.options.ignorePiTags)){let A=new ze(O.tagName);A.add(this.options.textNodeName,""),O.tagName!==O.tagExp&&O.attrExpPresent&&(A[":@"]=this.buildAttributesMap(O.tagExp,x,O.tagName)),this.addChild(_,A,x,b)}b=O.closeIndex+1}else if(u.substr(b+1,3)==="!--"){let O=ln(u,"-->",b+4,"Comment is not closed.");if(this.options.commentPropName){let A=u.substring(b+4,O-2);C=this.saveTextToParentTag(C,_,x),_.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}b=O}else if(u.substr(b+1,2)==="!D"){let O=tt(u,b);this.docTypeEntities=O.entities,b=O.i}else if(u.substr(b+1,2)==="!["){let O=ln(u,"]]>",b,"CDATA is not closed.")-2,A=u.substring(b+9,O);C=this.saveTextToParentTag(C,_,x);let D=this.parseTextData(A,_.tagname,x,!0,!1,!0,!0);D==null&&(D=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):_.add(this.options.textNodeName,D),b=O+2}else{let O=yu(u,b,this.options.removeNSPrefix),A=O.tagName,D=O.rawTagName,L=O.tagExp,G=O.attrExpPresent,j=O.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&C&&_.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,_,x,!1));let ne=_;ne&&this.options.unpairedTags.indexOf(ne.tagname)!==-1&&(_=this.tagsNodeStack.pop(),x=x.substring(0,x.lastIndexOf("."))),A!==f.tagname&&(x+=x?"."+A:A);let ae=b;if(this.isItStopNode(this.options.stopNodes,x,A)){let oe="";if(L.length>0&&L.lastIndexOf("/")===L.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),x=x.substr(0,x.length-1),L=A):L=L.substr(0,L.length-1),b=O.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)b=O.closeIndex;else{let Pt=this.readStopNodeData(u,D,j+1);if(!Pt)throw new Error(`Unexpected end of ${D}`);b=Pt.i,oe=Pt.tagContent}let ke=new ze(A);A!==L&&G&&(ke[":@"]=this.buildAttributesMap(L,x,A)),oe&&(oe=this.parseTextData(oe,A,x,!0,G,!0,!0)),x=x.substr(0,x.lastIndexOf(".")),ke.add(this.options.textNodeName,oe),this.addChild(_,ke,x,ae)}else{if(L.length>0&&L.lastIndexOf("/")===L.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),x=x.substr(0,x.length-1),L=A):L=L.substr(0,L.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let oe=new ze(A);A!==L&&G&&(oe[":@"]=this.buildAttributesMap(L,x,A)),this.addChild(_,oe,x,ae),x=x.substr(0,x.lastIndexOf("."))}else{let oe=new ze(A);this.tagsNodeStack.push(_),A!==L&&G&&(oe[":@"]=this.buildAttributesMap(L,x,A)),this.addChild(_,oe,x,ae),_=oe}C="",b=j}}else C+=u[b];return f.child};function yO(u,f,_,C){this.options.captureMetaData||(C=void 0);let x=this.options.updateTag(f.tagname,_,f[":@"]);x===!1||(typeof x=="string"&&(f.tagname=x),u.addChild(f,C))}let SO=function(u){if(this.options.processEntities){for(let f in this.docTypeEntities){let _=this.docTypeEntities[f];u=u.replace(_.regx,_.val)}for(let f in this.lastEntities){let _=this.lastEntities[f];u=u.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let _=this.htmlEntities[f];u=u.replace(_.regex,_.val)}u=u.replace(this.ampEntity.regex,this.ampEntity.val)}return u};function EO(u,f,_,C){return u&&(C===void 0&&(C=f.child.length===0),(u=this.parseTextData(u,f.tagname,_,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,C))!==void 0&&u!==""&&f.add(this.options.textNodeName,u),u=""),u}function _O(u,f,_){let C="*."+_;for(let x in u){let b=u[x];if(C===b||f===b)return!0}return!1}function ln(u,f,_,C){let x=u.indexOf(f,_);if(x===-1)throw new Error(C);return x+f.length-1}function yu(u,f,_,C=">"){let x=(function(j,ne,ae=">"){let oe,ke="";for(let Pt=ne;Pt<j.length;Pt++){let xr=j[Pt];if(oe)xr===oe&&(oe="");else if(xr==='"'||xr==="'")oe=xr;else if(xr===ae[0]){if(!ae[1])return{data:ke,index:Pt};if(j[Pt+1]===ae[1])return{data:ke,index:Pt}}else xr==="	"&&(xr=" ");ke+=xr}})(u,f+1,C);if(!x)return;let b=x.data,O=x.index,A=b.search(/\s/),D=b,L=!0;A!==-1&&(D=b.substring(0,A),b=b.substring(A+1).trimStart());let G=D;if(_){let j=D.indexOf(":");j!==-1&&(D=D.substr(j+1),L=D!==x.data.substr(j+1))}return{tagName:D,tagExp:b,closeIndex:O,attrExpPresent:L,rawTagName:G}}function wO(u,f,_){let C=_,x=1;for(;_<u.length;_++)if(u[_]==="<")if(u[_+1]==="/"){let b=ln(u,">",_,`${f} is not closed`);if(u.substring(_+2,b).trim()===f&&(x--,x===0))return{tagContent:u.substring(C,_),i:b};_=b}else if(u[_+1]==="?")_=ln(u,"?>",_+1,"StopNode is not closed.");else if(u.substr(_+1,3)==="!--")_=ln(u,"-->",_+3,"StopNode is not closed.");else if(u.substr(_+1,2)==="![")_=ln(u,"]]>",_,"StopNode is not closed.")-2;else{let b=yu(u,_,">");b&&((b&&b.tagName)===f&&b.tagExp[b.tagExp.length-1]!=="/"&&x++,_=b.closeIndex)}}function Xg(u,f,_){if(f&&typeof u=="string"){let C=u.trim();return C==="true"||C!=="false"&&(function(x,b={}){if(b=Object.assign({},cO,b),!x||typeof x!="string")return x;let O=x.trim();if(b.skipLike!==void 0&&b.skipLike.test(O))return x;if(x==="0")return 0;if(b.hex&&iO.test(O))return(function(D){if(parseInt)return parseInt(D,16);if(Number.parseInt)return Number.parseInt(D,16);if(window&&window.parseInt)return window.parseInt(D,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(O);if(O.search(/.+[eE].+/)!==-1)return(function(D,L,G){if(!G.eNotation)return D;let j=L.match(dO);if(j){let ne=j[1]||"",ae=j[3].indexOf("e")===-1?"E":"e",oe=j[2],ke=ne?D[oe.length+1]===ae:D[oe.length]===ae;return oe.length>1&&ke?D:oe.length!==1||!j[3].startsWith(`.${ae}`)&&j[3][0]!==ae?G.leadingZeros&&!ke?(L=(j[1]||"")+j[3],Number(L)):D:Number(L)}return D})(x,O,b);{let D=aO.exec(O);if(D){let L=D[1]||"",G=D[2],j=((A=D[3])&&A.indexOf(".")!==-1&&((A=A.replace(/0+$/,""))==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substring(0,A.length-1))),A),ne=L?x[G.length+1]===".":x[G.length]===".";if(!b.leadingZeros&&(G.length>1||G.length===1&&!ne))return x;{let ae=Number(O),oe=String(ae);if(ae===0||ae===-0)return ae;if(oe.search(/[eE]/)!==-1)return b.eNotation?ae:x;if(O.indexOf(".")!==-1)return oe==="0"||oe===j||oe===`${L}${j}`?ae:x;let ke=G?j:O;return G?ke===oe||L+ke===oe?ae:x:ke===oe||ke===L+oe?ae:x}}return x}var A})(u,_)}return u!==void 0?u:""}let Su=ze.getMetaDataSymbol();function xO(u,f){return Qg(u,f)}function Qg(u,f,_){let C,x={};for(let b=0;b<u.length;b++){let O=u[b],A=bO(O),D="";if(D=_===void 0?A:_+"."+A,A===f.textNodeName)C===void 0?C=O[A]:C+=""+O[A];else{if(A===void 0)continue;if(O[A]){let L=Qg(O[A],f,D),G=TO(L,f);O[Su]!==void 0&&(L[Su]=O[Su]),O[":@"]?CO(L,O[":@"],D,f):Object.keys(L).length!==1||L[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(L).length===0&&(f.alwaysCreateTextNode?L[f.textNodeName]="":L=""):L=L[f.textNodeName],x[A]!==void 0&&x.hasOwnProperty(A)?(Array.isArray(x[A])||(x[A]=[x[A]]),x[A].push(L)):f.isArray(A,D,G)?x[A]=[L]:x[A]=L}}}return typeof C=="string"?C.length>0&&(x[f.textNodeName]=C):C!==void 0&&(x[f.textNodeName]=C),x}function bO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];if(C!==":@")return C}}function CO(u,f,_,C){if(f){let x=Object.keys(f),b=x.length;for(let O=0;O<b;O++){let A=x[O];C.isArray(A,_+"."+A,!0,!0)?u[A]=[f[A]]:u[A]=f[A]}}}function TO(u,f){let{textNodeName:_}=f,C=Object.keys(u).length;return C===0||!(C!==1||!u[_]&&typeof u[_]!="boolean"&&u[_]!==0)}class vO{constructor(f){this.externalEntities={},this.options=(function(_){return Object.assign({},q,_)})(f)}parse(f,_){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(_){_===!0&&(_={});let b=a(f,_);if(b!==!0)throw Error(`${b.err.msg}:${b.err.line}:${b.err.col}`)}let C=new lO(this.options);C.addExternalEntities(this.externalEntities);let x=C.parseXml(f);return this.options.preserveOrder||x===void 0?x:xO(x,this.options)}addEntity(f,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=_}static getMetaDataSymbol(){return ze.getMetaDataSymbol()}}function AO(u,f){let _="";return f.format&&f.indentBy.length>0&&(_=`
`),Zg(u,f,"",_)}function Zg(u,f,_,C){let x="",b=!1;for(let O=0;O<u.length;O++){let A=u[O],D=RO(A);if(D===void 0)continue;let L="";if(L=_.length===0?D:`${_}.${D}`,D===f.textNodeName){let ae=A[D];IO(L,f)||(ae=f.tagValueProcessor(D,ae),ae=ty(ae,f)),b&&(x+=C),x+=ae,b=!1;continue}if(D===f.cdataPropName){b&&(x+=C),x+=`<![CDATA[${A[D][0][f.textNodeName]}]]>`,b=!1;continue}if(D===f.commentPropName){x+=C+`<!--${A[D][0][f.textNodeName]}-->`,b=!0;continue}if(D[0]==="?"){let ae=ey(A[":@"],f),oe=D==="?xml"?"":C,ke=A[D][0][f.textNodeName];ke=ke.length!==0?" "+ke:"",x+=oe+`<${D}${ke}${ae}?>`,b=!0;continue}let G=C;G!==""&&(G+=f.indentBy);let j=C+`<${D}${ey(A[":@"],f)}`,ne=Zg(A[D],f,L,G);f.unpairedTags.indexOf(D)!==-1?f.suppressUnpairedNode?x+=j+">":x+=j+"/>":ne&&ne.length!==0||!f.suppressEmptyNode?ne&&ne.endsWith(">")?x+=j+`>${ne}${C}</${D}>`:(x+=j+">",ne&&C!==""&&(ne.includes("/>")||ne.includes("</"))?x+=C+f.indentBy+ne+C:x+=ne,x+=`</${D}>`):x+=j+"/>",b=!0}return x}function RO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];if(u.hasOwnProperty(C)&&C!==":@")return C}}function ey(u,f){let _="";if(u&&!f.ignoreAttributes)for(let C in u){if(!u.hasOwnProperty(C))continue;let x=f.attributeValueProcessor(C,u[C]);x=ty(x,f),x===!0&&f.suppressBooleanAttributes?_+=` ${C.substr(f.attributeNamePrefix.length)}`:_+=` ${C.substr(f.attributeNamePrefix.length)}="${x}"`}return _}function IO(u,f){let _=(u=u.substr(0,u.length-f.textNodeName.length-1)).substr(u.lastIndexOf(".")+1);for(let C in f.stopNodes)if(f.stopNodes[C]===u||f.stopNodes[C]==="*."+_)return!0;return!1}function ty(u,f){if(u&&u.length>0&&f.processEntities)for(let _=0;_<f.entities.length;_++){let C=f.entities[_];u=u.replace(C.regex,C.val)}return u}let PO={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(u,f){return f},attributeValueProcessor:function(u,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function wr(u){this.options=Object.assign({},PO,u),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Jg(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=DO),this.processTextOrObjNode=OO,this.options.format?(this.indentate=NO,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function OO(u,f,_,C){let x=this.j2x(u,_+1,C.concat(f));return u[this.options.textNodeName]!==void 0&&Object.keys(u).length===1?this.buildTextValNode(u[this.options.textNodeName],f,x.attrStr,_):this.buildObjectNode(x.val,f,x.attrStr,_)}function NO(u){return this.options.indentBy.repeat(u)}function DO(u){return!(!u.startsWith(this.options.attributeNamePrefix)||u===this.options.textNodeName)&&u.substr(this.attrPrefixLen)}wr.prototype.build=function(u){return this.options.preserveOrder?AO(u,this.options):(Array.isArray(u)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(u={[this.options.arrayNodeName]:u}),this.j2x(u,0,[]).val)},wr.prototype.j2x=function(u,f,_){let C="",x="",b=_.join(".");for(let O in u)if(Object.prototype.hasOwnProperty.call(u,O))if(u[O]===void 0)this.isAttribute(O)&&(x+="");else if(u[O]===null)this.isAttribute(O)||O===this.options.cdataPropName?x+="":O[0]==="?"?x+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(u[O]instanceof Date)x+=this.buildTextValNode(u[O],O,"",f);else if(typeof u[O]!="object"){let A=this.isAttribute(O);if(A&&!this.ignoreAttributesFn(A,b))C+=this.buildAttrPairStr(A,""+u[O]);else if(!A)if(O===this.options.textNodeName){let D=this.options.tagValueProcessor(O,""+u[O]);x+=this.replaceEntitiesValue(D)}else x+=this.buildTextValNode(u[O],O,"",f)}else if(Array.isArray(u[O])){let A=u[O].length,D="",L="";for(let G=0;G<A;G++){let j=u[O][G];if(j!==void 0)if(j===null)O[0]==="?"?x+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(typeof j=="object")if(this.options.oneListGroup){let ne=this.j2x(j,f+1,_.concat(O));D+=ne.val,this.options.attributesGroupName&&j.hasOwnProperty(this.options.attributesGroupName)&&(L+=ne.attrStr)}else D+=this.processTextOrObjNode(j,O,f,_);else if(this.options.oneListGroup){let ne=this.options.tagValueProcessor(O,j);ne=this.replaceEntitiesValue(ne),D+=ne}else D+=this.buildTextValNode(j,O,"",f)}this.options.oneListGroup&&(D=this.buildObjectNode(D,O,L,f)),x+=D}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){let A=Object.keys(u[O]),D=A.length;for(let L=0;L<D;L++)C+=this.buildAttrPairStr(A[L],""+u[O][A[L]])}else x+=this.processTextOrObjNode(u[O],O,f,_);return{attrStr:C,val:x}},wr.prototype.buildAttrPairStr=function(u,f){return f=this.options.attributeValueProcessor(u,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+u:" "+u+'="'+f+'"'},wr.prototype.buildObjectNode=function(u,f,_,C){if(u==="")return f[0]==="?"?this.indentate(C)+"<"+f+_+"?"+this.tagEndChar:this.indentate(C)+"<"+f+_+this.closeTag(f)+this.tagEndChar;{let x="</"+f+this.tagEndChar,b="";return f[0]==="?"&&(b="?",x=""),!_&&_!==""||u.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&b.length===0?this.indentate(C)+`<!--${u}-->`+this.newLine:this.indentate(C)+"<"+f+_+b+this.tagEndChar+u+this.indentate(C)+x:this.indentate(C)+"<"+f+_+b+">"+u+x}},wr.prototype.closeTag=function(u){let f="";return this.options.unpairedTags.indexOf(u)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${u}`,f},wr.prototype.buildTextValNode=function(u,f,_,C){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${u}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(C)+`<!--${u}-->`+this.newLine;if(f[0]==="?")return this.indentate(C)+"<"+f+_+"?"+this.tagEndChar;{let x=this.options.tagValueProcessor(f,u);return x=this.replaceEntitiesValue(x),x===""?this.indentate(C)+"<"+f+_+this.closeTag(f)+this.tagEndChar:this.indentate(C)+"<"+f+_+">"+x+"</"+f+this.tagEndChar}},wr.prototype.replaceEntitiesValue=function(u){if(u&&u.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let _=this.options.entities[f];u=u.replace(_.regex,_.val)}return u};let kO={validate:a};Nx.exports=t})()});var kx=I(fp=>{"use strict";c();Object.defineProperty(fp,"__esModule",{value:!0});fp.parseXML=j1;var q1=Dx(),up=new q1.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});up.addEntity("#xD","\r");up.addEntity("#10",`
`);function j1(e){return up.parse(e,!0)}});var Xa=I((hQ,Ux)=>{"use strict";c();var Ya=Object.defineProperty,z1=Object.getOwnPropertyDescriptor,V1=Object.getOwnPropertyNames,G1=Object.prototype.hasOwnProperty,Ja=(e,t)=>Ya(e,"name",{value:t,configurable:!0}),W1=(e,t)=>{for(var r in t)Ya(e,r,{get:t[r],enumerable:!0})},K1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of V1(t))!G1.call(e,o)&&o!==r&&Ya(e,o,{get:()=>t[o],enumerable:!(n=z1(t,o))||n.enumerable});return e},Y1=e=>K1(Ya({},"__esModule",{value:!0}),e),Mx={};W1(Mx,{XmlNode:()=>J1,XmlText:()=>Bx,parseXML:()=>X1.parseXML});Ux.exports=Y1(Mx);function Lx(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Ja(Lx,"escapeAttribute");function Fx(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}Ja(Fx,"escapeElement");var Bx=class{constructor(e){this.value=e}static{Ja(this,"XmlText")}toString(){return Fx(""+this.value)}},J1=class Ka{constructor(t,r=[]){this.name=t,this.children=r}static{Ja(this,"XmlNode")}attributes={};static of(t,r,n){let o=new Ka(t);return r!==void 0&&o.addChildNode(new Bx(r)),n!==void 0&&o.withName(n),o}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=Ka.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new Ka(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${Lx(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}},X1=kx()});var $x,Hx,qx,Rn,Qa=T(()=>{c();$x=v(Xa());lt();Te();Hx=v(K()),qx=v(Le());Hr();Rn=class extends We{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new pn(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let o=U.of(t),s=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(s).find(l=>!!l.getMemberTraits().eventPayload)){let l={},m=Object.keys(s)[0];return s[m].isBlobSchema()?l[m]=r:l[m]=this.read(s[m],r),l}let a=(this.serdeContext?.utf8Encoder??qx.toUtf8)(r),d=this.parseXml(a);return this.readSchema(t,n?d[n]:d)}readSchema(t,r){let n=U.of(t);if(n.isUnitSchema())return;let o=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!o.sparse,i=!!o.xmlFlattened;if(n.isListSchema()){let d=n.getValueSchema(),l=[],m=d.getMergedTraits().xmlName??"member",h=i?r:(r[0]??r)[m],S=Array.isArray(h)?h:[h];for(let y of S)(y!=null||s)&&l.push(this.readSchema(d,y));return l}let a={};if(n.isMapSchema()){let d=n.getKeySchema(),l=n.getValueSchema(),m;i?m=Array.isArray(r)?r:[r]:m=Array.isArray(r.entry)?r.entry:[r.entry];let h=d.getMergedTraits().xmlName??"key",S=l.getMergedTraits().xmlName??"value";for(let y of m){let w=y[h],R=y[S];(R!=null||s)&&(a[w]=this.readSchema(l,R))}return a}if(n.isStructSchema()){for(let[d,l]of n.structIterator()){let m=l.getMergedTraits(),h=m.httpPayload?m.xmlName??l.getName():l.getMemberTraits().xmlName??d;r[h]!=null&&(a[d]=this.readSchema(l,r[h]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,$x.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let n="#text",o=Object.keys(r)[0],s=r[o];return s[n]&&(s[o]=s[n],delete s[n]),(0,Hx.getValueFromTextNode)(s)}return{}}}});var jx,zx,Za,Vx=T(()=>{c();lt();Te();nt();jx=v(K()),zx=v(Fe());Hr();Za=class extends We{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let o=U.of(t);if(n&&!n.endsWith(".")&&(n+="."),o.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??zx.toBase64)(r)));else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):o.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Dt.v4)()));else if(o.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(o.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof be?r.string:String(r)));else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),dt(o,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,jx.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(o.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${o.getName(!0)}`);if(o.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let s=o.getValueSchema(),i=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,a=1;for(let d of r){if(d==null)continue;let l=this.getKey("member",s.getMergedTraits().xmlName),m=i?`${n}${a}`:`${n}${l}.${a}`;this.write(s,d,m),++a}}}else if(o.isMapSchema()){if(r&&typeof r=="object"){let s=o.getKeySchema(),i=o.getValueSchema(),a=o.getMergedTraits().xmlFlattened,d=1;for(let[l,m]of Object.entries(r)){if(m==null)continue;let h=this.getKey("key",s.getMergedTraits().xmlName),S=a?`${n}${d}.${h}`:`${n}entry.${d}.${h}`,y=this.getKey("value",i.getMergedTraits().xmlName),w=a?`${n}${d}.${y}`:`${n}entry.${d}.${y}`;this.write(s,l,S),this.write(i,m,w),++d}}}else if(o.isStructSchema()){if(r&&typeof r=="object")for(let[s,i]of o.structIterator()){if(r[s]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(s,i.getMergedTraits().xmlName),d=`${n}${a}`;this.write(i,r[s],d)}}else if(!o.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Ot(t)}=`}writeValue(t){this.buffer+=Ot(t)}}});var xs,mp=T(()=>{c();lt();Te();lo();Qa();Vx();xs=class extends nr{options;serializer;deserializer;mixin=new ht;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Za(r),this.deserializer=new Rn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),(pt(t.input)==="unit"||!o.body)&&(o.body="");let s=t.name.split("#")[1]??t.name;return o.body=`Action=${s}&Version=${this.options.version}`+o.body,o.body.endsWith("&")&&(o.body=o.body.slice(-1)),o}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let h=await Tt(n.body,r);h.byteLength>0&&Object.assign(i,await o.read(15,h)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let h in n.headers){let S=n.headers[h];delete n.headers[h],n.headers[h.toLowerCase()]=S}let a=t.name.split("#")[1]??t.name,d=s.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await Tt(n.body,r);return l.byteLength>0&&Object.assign(i,await o.read(s,l,d)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,o,s){let i=this.loadQueryErrorCode(n,o)??"Unknown",a=this.loadQueryError(o),d=this.loadQueryErrorMessage(o);a.message=d,a.Error={Type:a.Type,Code:a.Code,Message:d};let{errorSchema:l,errorMetadata:m}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,s,(R,P)=>R.find(N=>U.of(N).getMergedTraits().awsQueryError?.[0]===P)),h=U.of(l),S=Ne.for(l.namespace).getErrorCtor(l)??Error,y=new S(d),w={Error:a.Error};for(let[R,P]of h.structIterator()){let N=P.getMergedTraits().xmlName??R,k=a[N]??o[N];w[R]=this.deserializer.readSchema(P,k)}throw Object.assign(y,m,{$fault:h.getMergedTraits().error,message:d},w)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var pp,Gx=T(()=>{c();mp();pp=class extends xs{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var Wx,Kx,bs,hp,gp,yp=T(()=>{c();Wx=v(Xa()),Kx=v(K());op();bs=(e,t)=>za(e,t).then(r=>{if(r.length){let n;try{n=(0,Wx.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,Kx.getValueFromTextNode)(i)}return{}}),hp=async(e,t)=>{let r=await bs(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},gp=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var gt,Sp,ec,Cs,Ep=T(()=>{c();gt=v(Xa());lt();Te();nt();Sp=v(K()),ec=v(Fe());Hr();Cs=class extends We{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=U.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??ec.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let o=n.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let o=t.getMergedTraits(),s=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!s||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=gt.XmlNode.of(s),[a,d]=this.getXmlnsAttribute(t,n);for(let[l,m]of t.structIterator()){let h=r[l];if(h!=null||m.isIdempotencyToken()){if(m.getMergedTraits().xmlAttribute){i.addAttribute(m.getMergedTraits().xmlName??l,this.writeSimple(m,h));continue}if(m.isListSchema())this.writeList(m,h,i,d);else if(m.isMapSchema())this.writeMap(m,h,i,d);else if(m.isStructSchema())i.addChildNode(this.writeStruct(m,h,d));else{let S=gt.XmlNode.of(m.getMergedTraits().xmlName??m.getMemberName());this.writeSimpleInto(m,h,S,d),i.addChildNode(S)}}}return d&&i.addAttribute(a,d),i}writeList(t,r,n,o){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let s=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),d=!!a.sparse,l=!!s.xmlFlattened,[m,h]=this.getXmlnsAttribute(t,o),S=(y,w)=>{if(i.isListSchema())this.writeList(i,Array.isArray(w)?w:[w],y,h);else if(i.isMapSchema())this.writeMap(i,w,y,h);else if(i.isStructSchema()){let R=this.writeStruct(i,w,h);y.addChildNode(R.withName(l?s.xmlName??t.getMemberName():a.xmlName??"member"))}else{let R=gt.XmlNode.of(l?s.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,w,R,h),y.addChildNode(R)}};if(l)for(let y of r)(d||y!=null)&&S(n,y);else{let y=gt.XmlNode.of(s.xmlName??t.getMemberName());h&&y.addAttribute(m,h);for(let w of r)(d||w!=null)&&S(y,w);n.addChildNode(y)}}writeMap(t,r,n,o,s=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),l=a.getMergedTraits().xmlName??"key",m=t.getValueSchema(),h=m.getMergedTraits(),S=h.xmlName??"value",y=!!h.sparse,w=!!i.xmlFlattened,[R,P]=this.getXmlnsAttribute(t,o),N=(k,$,z)=>{let q=gt.XmlNode.of(l,$),[re,ze]=this.getXmlnsAttribute(a,P);ze&&q.addAttribute(re,ze),k.addChildNode(q);let tt=gt.XmlNode.of(S);m.isListSchema()?this.writeList(m,z,tt,P):m.isMapSchema()?this.writeMap(m,z,tt,P,!0):m.isStructSchema()?tt=this.writeStruct(m,z,P):this.writeSimpleInto(m,z,tt,P),k.addChildNode(tt)};if(w){for(let[k,$]of Object.entries(r))if(y||$!=null){let z=gt.XmlNode.of(i.xmlName??t.getMemberName());N(z,k,$),n.addChildNode(z)}}else{let k;s||(k=gt.XmlNode.of(i.xmlName??t.getMemberName()),P&&k.addAttribute(R,P),n.addChildNode(k));for(let[$,z]of Object.entries(r))if(y||z!=null){let q=gt.XmlNode.of("entry");N(q,$,z),(s?n:k).addChildNode(q)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=U.of(t),o=null;if(r&&typeof r=="object")if(n.isBlobSchema())o=(this.serdeContext?.base64Encoder??ec.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(dt(n,this.settings)){case 5:o=r.toISOString().replace(".000Z","Z");break;case 6:o=(0,Sp.dateToUtcString)(r);break;case 7:o=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),o=(0,Sp.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof be?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(o=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?o=(0,Dt.v4)():o=String(r)),o===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,n,o){let s=this.writeSimple(t,r),i=U.of(t),a=new gt.XmlText(s),[d,l]=this.getXmlnsAttribute(i,o);l&&n.addAttribute(d,l),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[o,s]=n.xmlNamespace??[];return s&&s!==r?[o?`xmlns:${o}`:"xmlns",s]:[void 0,void 0]}}});var Ts,_p=T(()=>{c();Hr();Qa();Ep();Ts=class extends We{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Cs(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Rn(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var wp,Yx=T(()=>{c();lt();Te();lo();yp();_p();wp=class extends mn{codec;serializer;deserializer;mixin=new ht;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new Ts(r),this.serializer=new gn(this.codec.createSerializer(),r),this.deserializer=new hn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=U.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return o.headers["content-type"]===this.getDefaultContentType()&&typeof o.body=="string"&&(o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body),o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=gp(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m);await this.deserializeHttpMessage(a,r,n,o);let y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().xmlName??w,N=o.Error?.[P]??o[P];y[w]=this.codec.createDeserializer().readSchema(R,N)}throw Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}getDefaultContentType(){return"application/xml"}}});var Jx=T(()=>{c();ox();sx();Ax();Rx();Wa();Ix();Ga();ip();ap();Ox();Es();Gx();mp();Yx();_p();Qa();Ep();yp()});var st={};Ct(st,{AWSSDKSigV4Signer:()=>um,AwsEc2QueryProtocol:()=>pp,AwsJson1_0Protocol:()=>cp,AwsJson1_1Protocol:()=>dp,AwsJsonRpcProtocol:()=>An,AwsQueryProtocol:()=>xs,AwsRestJsonProtocol:()=>lp,AwsRestXmlProtocol:()=>wp,AwsSdkSigV4ASigner:()=>ps,AwsSdkSigV4Signer:()=>ot,AwsSmithyRpcV2CborProtocol:()=>Wm,JsonCodec:()=>vn,JsonShapeDeserializer:()=>_s,JsonShapeSerializer:()=>ws,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>so,NODE_SIGV4A_CONFIG_OPTIONS:()=>pw,XmlCodec:()=>Ts,XmlShapeDeserializer:()=>Rn,XmlShapeSerializer:()=>Cs,_toBool:()=>y1,_toNum:()=>S1,_toStr:()=>g1,awsExpectUnion:()=>H1,emitWarningIfUnsupportedVersion:()=>ro,getBearerTokenEnvKey:()=>va,loadRestJsonErrorCode:()=>Tn,loadRestXmlErrorCode:()=>gp,parseJsonBody:()=>uo,parseJsonErrorBody:()=>sp,parseXmlBody:()=>bs,parseXmlErrorBody:()=>hp,resolveAWSSDKSigV4Config:()=>$w,resolveAwsSdkSigV4AConfig:()=>mw,resolveAwsSdkSigV4Config:()=>bn,setCredentialFeature:()=>kr,setFeature:()=>X_,setTokenFeature:()=>Z_,state:()=>Ta,validateSigningProperties:()=>oo});var ve=T(()=>{c();vt();Pm();Jx()});var In=I(fo=>{"use strict";c();var Q1=(Ue(),Y(kt)),Z1=_n(),eL=ie(),Lt=(ve(),Y(st)),eb=void 0;function tL(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function rL(e){let t=Q1.normalizeProvider(e.userAgentAppId??eb),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!tL(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var nL=/\d{12}\.ddb/;async function oL(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Lt.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?Lt.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Lt.setFeature(e,"RETRY_MODE_STANDARD","E"):Lt.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(nL)&&Lt.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Lt.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Lt.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Lt.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&Lt.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))Lt.setFeature(e,i,a)}}var Xx="user-agent",xp="x-amz-user-agent",Qx=" ",bp="/",sL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,iL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Zx="-",aL=1024;function cL(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=aL){t.length?t+=","+n:t+=n;continue}break}return t}var tb=e=>(t,r)=>async n=>{let{request:o}=n;if(!eL.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(tc)||[],a=(await e.defaultUserAgentProvider()).map(tc);await oL(r,e,n);let d=r;a.push(`m/${cL(Object.assign({},r.__smithy_context?.features,d.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(tc)||[],m=await e.userAgentAppId();m&&a.push(tc([`app/${m}`]));let h=Z1.getUserAgentPrefix(),S=(h?[h]:[]).concat([...a,...i,...l]).join(Qx),y=[...a.filter(w=>w.startsWith("aws-sdk-")),...l].join(Qx);return e.runtime!=="browser"?(y&&(s[xp]=s[xp]?`${s[Xx]} ${y}`:y),s[Xx]=S):s[xp]=S,t({...n,request:o})},tc=e=>{let t=e[0].split(bp).map(i=>i.replace(sL,Zx)).join(bp),r=e[1]?.replace(iL,Zx),n=t.indexOf(bp),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,d)=>{switch(d){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},rb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},dL=e=>({applyToStack:t=>{t.add(tb(e),rb)}});fo.DEFAULT_UA_APP_ID=eb;fo.getUserAgentMiddlewareOptions=rb;fo.getUserAgentPlugin=dL;fo.resolveUserAgentConfig=rL;fo.userAgentMiddleware=tb});var sb=I((NZ,ob)=>{c();var rc=Object.defineProperty,lL=Object.getOwnPropertyDescriptor,uL=Object.getOwnPropertyNames,fL=Object.prototype.hasOwnProperty,mL=(e,t)=>rc(e,"name",{value:t,configurable:!0}),pL=(e,t)=>{for(var r in t)rc(e,r,{get:t[r],enumerable:!0})},hL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uL(t))!fL.call(e,o)&&o!==r&&rc(e,o,{get:()=>t[o],enumerable:!(n=lL(t,o))||n.enumerable});return e},gL=e=>hL(rc({},"__esModule",{value:!0}),e),nb={};pL(nb,{isArrayBuffer:()=>yL});ob.exports=gL(nb);var yL=mL(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var db=I((kZ,cb)=>{c();var nc=Object.defineProperty,SL=Object.getOwnPropertyDescriptor,EL=Object.getOwnPropertyNames,_L=Object.prototype.hasOwnProperty,ib=(e,t)=>nc(e,"name",{value:t,configurable:!0}),wL=(e,t)=>{for(var r in t)nc(e,r,{get:t[r],enumerable:!0})},xL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of EL(t))!_L.call(e,o)&&o!==r&&nc(e,o,{get:()=>t[o],enumerable:!(n=SL(t,o))||n.enumerable});return e},bL=e=>xL(nc({},"__esModule",{value:!0}),e),ab={};wL(ab,{fromArrayBuffer:()=>TL,fromString:()=>vL});cb.exports=bL(ab);var CL=sb(),Cp=ee("buffer"),TL=ib((e,t=0,r=e.byteLength-t)=>{if(!(0,CL.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Cp.Buffer.from(e,t,r)},"fromArrayBuffer"),vL=ib((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Cp.Buffer.from(e,t):Cp.Buffer.from(e)},"fromString")});var pb=I((LZ,mb)=>{c();var oc=Object.defineProperty,AL=Object.getOwnPropertyDescriptor,RL=Object.getOwnPropertyNames,IL=Object.prototype.hasOwnProperty,Tp=(e,t)=>oc(e,"name",{value:t,configurable:!0}),PL=(e,t)=>{for(var r in t)oc(e,r,{get:t[r],enumerable:!0})},OL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RL(t))!IL.call(e,o)&&o!==r&&oc(e,o,{get:()=>t[o],enumerable:!(n=AL(t,o))||n.enumerable});return e},NL=e=>OL(oc({},"__esModule",{value:!0}),e),lb={};PL(lb,{fromUtf8:()=>fb,toUint8Array:()=>DL,toUtf8:()=>kL});mb.exports=NL(lb);var ub=db(),fb=Tp(e=>{let t=(0,ub.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),DL=Tp(e=>typeof e=="string"?fb(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),kL=Tp(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,ub.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var hb=I(sc=>{"use strict";c();Object.defineProperty(sc,"__esModule",{value:!0});sc.convertToBuffer=void 0;var ML=pb(),LL=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:ML.fromUtf8;function FL(e){return e instanceof Uint8Array?e:typeof e=="string"?LL(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}sc.convertToBuffer=FL});var gb=I(ic=>{"use strict";c();Object.defineProperty(ic,"__esModule",{value:!0});ic.isEmptyData=void 0;function BL(e){return typeof e=="string"?e.length===0:e.byteLength===0}ic.isEmptyData=BL});var yb=I(ac=>{"use strict";c();Object.defineProperty(ac,"__esModule",{value:!0});ac.numToUint8=void 0;function UL(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}ac.numToUint8=UL});var Sb=I(cc=>{"use strict";c();Object.defineProperty(cc,"__esModule",{value:!0});cc.uint32ArrayFrom=void 0;function $L(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}cc.uint32ArrayFrom=$L});var vp=I(Ft=>{"use strict";c();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.uint32ArrayFrom=Ft.numToUint8=Ft.isEmptyData=Ft.convertToBuffer=void 0;var HL=hb();Object.defineProperty(Ft,"convertToBuffer",{enumerable:!0,get:function(){return HL.convertToBuffer}});var qL=gb();Object.defineProperty(Ft,"isEmptyData",{enumerable:!0,get:function(){return qL.isEmptyData}});var jL=yb();Object.defineProperty(Ft,"numToUint8",{enumerable:!0,get:function(){return jL.numToUint8}});var zL=Sb();Object.defineProperty(Ft,"uint32ArrayFrom",{enumerable:!0,get:function(){return zL.uint32ArrayFrom}})});var wb=I(dc=>{"use strict";c();Object.defineProperty(dc,"__esModule",{value:!0});dc.AwsCrc32=void 0;var Eb=(Or(),Y(Pr)),Ap=vp(),_b=Rp(),VL=(function(){function e(){this.crc32=new _b.Crc32}return e.prototype.update=function(t){(0,Ap.isEmptyData)(t)||this.crc32.update((0,Ap.convertToBuffer)(t))},e.prototype.digest=function(){return Eb.__awaiter(this,void 0,void 0,function(){return Eb.__generator(this,function(t){return[2,(0,Ap.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new _b.Crc32},e})();dc.AwsCrc32=VL});var Rp=I(jr=>{"use strict";c();Object.defineProperty(jr,"__esModule",{value:!0});jr.AwsCrc32=jr.Crc32=jr.crc32=void 0;var GL=(Or(),Y(Pr)),WL=vp();function KL(e){return new xb().update(e).digest()}jr.crc32=KL;var xb=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=GL.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^JL[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();jr.Crc32=xb;var YL=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],JL=(0,WL.uint32ArrayFrom)(YL),XL=wb();Object.defineProperty(jr,"AwsCrc32",{enumerable:!0,get:function(){return XL.AwsCrc32}})});var uc=I(Vr=>{"use strict";c();var Tb=Rp(),Pn=Zo(),mo=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&bb(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&bb(t),parseInt(Pn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function bb(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var lc=class{toUtf8;fromUtf8;constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(mo.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!iF.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let h=new Uint8Array(17);return h[0]=9,h.set(Pn.fromHex(t.value.replace(/\-/g,"")),1),h}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:Cb,value:!0};break;case 1:r[s]={type:Cb,value:!1};break;case 2:r[s]={type:QL,value:t.getInt8(n++)};break;case 3:r[s]={type:ZL,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:eF,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:tF,value:new mo(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:rF,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:nF,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:oF,value:new Date(new mo(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let d=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:sF,value:`${Pn.toHex(d.subarray(0,4))}-${Pn.toHex(d.subarray(4,6))}-${Pn.toHex(d.subarray(6,8))}-${Pn.toHex(d.subarray(8,10))}-${Pn.toHex(d.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Cb="boolean",QL="byte",ZL="short",eF="integer",tF="long",rF="binary",nF="string",oF="timestamp",sF="uuid",iF=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,vb=4,zr=vb*2,On=4,aF=zr+On*2;function cF({byteLength:e,byteOffset:t,buffer:r}){if(e<aF)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(vb,!1),i=n.getUint32(zr,!1),a=n.getUint32(e-On,!1),d=new Tb.Crc32().update(new Uint8Array(r,t,zr));if(i!==d.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${d.digest()})`);if(d.update(new Uint8Array(r,t+zr,e-(zr+On))),a!==d.digest())throw new Error(`The message checksum (${d.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+zr+On,s),body:new Uint8Array(r,t+zr+On+s,o-s-(zr+On+On))}}var Ip=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(t,r){this.headerMarshaller=new lc(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new Tb.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=cF(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},Pp=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},Op=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},Np=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},Dp=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};Vr.EventStreamCodec=Ip;Vr.HeaderMarshaller=lc;Vr.Int64=mo;Vr.MessageDecoderStream=Pp;Vr.MessageEncoderStream=Op;Vr.SmithyMessageDecoderStream=Np;Vr.SmithyMessageEncoderStream=Dp});var Pb=I((eee,Ib)=>{"use strict";c();var fc=Object.defineProperty,dF=Object.getOwnPropertyDescriptor,lF=Object.getOwnPropertyNames,uF=Object.prototype.hasOwnProperty,fF=(e,t)=>fc(e,"name",{value:t,configurable:!0}),mF=(e,t)=>{for(var r in t)fc(e,r,{get:t[r],enumerable:!0})},pF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of lF(t))!uF.call(e,o)&&o!==r&&fc(e,o,{get:()=>t[o],enumerable:!(n=dF(t,o))||n.enumerable});return e},hF=e=>pF(fc({},"__esModule",{value:!0}),e),Ab={};mF(Ab,{formatUrl:()=>Rb});Ib.exports=hF(Ab);var gF=Xi();function Rb(e){let{port:t,query:r}=e,{protocol:n,path:o,hostname:s}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(s+=`:${t}`),o&&o.charAt(0)!=="/"&&(o=`/${o}`);let i=r?(0,gF.buildQueryString)(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(e.username!=null||e.password!=null){let l=e.username??"",m=e.password??"";a=`${l}:${m}@`}let d="";return e.fragment&&(d=`#${e.fragment}`),`${n}//${a}${s}${o}${i}${d}`}fF(Rb,"formatUrl")});var Mp=I(kp=>{"use strict";c();var vs=uc();function yF(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:d,done:l}=await a.next();if(l){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let m=d.length,h=0;for(;h<m;){if(!n){let y=m-h;o||(o=new Uint8Array(4));let w=Math.min(4-r,y);if(o.set(d.slice(h,h+w),r),r+=w,h+=w,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let S=Math.min(t-r,m-h);n.set(d.slice(h,h+S),r),r+=S,h+=S,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function SF(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var mc=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new vs.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=yF(t);return new vs.SmithyMessageDecoderStream({messageStream:new vs.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:SF(r,this.utfEncoder)})}serialize(t,r){return new vs.MessageEncoderStream({messageStream:new vs.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},EF=e=>new mc(e);kp.EventStreamMarshaller=mc;kp.eventStreamSerdeProvider=EF});var Db=I(As=>{"use strict";c();var _F=Mp(),Ob=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),Nb=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})},pc=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new _F.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=wF(t)?Ob(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?Nb(n):n}},wF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,xF=e=>new pc(e);As.EventStreamMarshaller=pc;As.eventStreamSerdeProvider=xF;As.iterableToReadableStream=Nb;As.readableStreamtoIterable=Ob});var Fb=I(Rs=>{"use strict";c();var bF=uc(),CF=Zo(),Up=ie(),TF=Pb(),Mb=Db(),kb=af(),vF=(e,t,r,n)=>{let o=e,s={start(){},async transform(i,a){try{let d=new Date(Date.now()+await n()),l={":date":{type:"timestamp",value:d}},m=await t.sign({message:{body:i,headers:l},priorSignature:o},{signingDate:d});o=m.signature;let h=r.encode({headers:{...l,":chunk-signature":{type:"binary",value:CF.fromHex(m.signature)}},body:i});a.enqueue(h)}catch(d){a.error(d)}}};return new TransformStream({...s})},Lp=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(t){this.messageSigner=t.messageSigner,this.eventStreamCodec=new bF.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,headers:i,query:a}=o;if(!(s instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let d=new TransformStream;o.body=d.readable;let l;try{l=await t(r)}catch(w){throw o.body.cancel(),w}let h=((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",S=vF(h,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return s.pipeThrough(S).pipeThrough(d),l}},AF=e=>new Lp(e),RF=()=>e=>async t=>{let r={...t.input},n=await e(t),o=n.output;return r.SessionId&&o.SessionId==null&&(o.SessionId=r.SessionId),n},IF={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},PF=(e,t)=>r=>n=>{let{request:o}=n;if(Up.HttpRequest.isInstance(o)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){o.protocol="wss:",o.method="GET",o.path=`${o.path}-websocket`;let{headers:s}=o;delete s["content-type"],delete s["x-amz-content-sha256"];for(let i of Object.keys(s))if(i.indexOf(t.headerPrefix)===0){let a=i.replace(t.headerPrefix,"");o.query[a]=s[i]}s["x-amz-user-agent"]&&(o.query["user-agent"]=s["x-amz-user-agent"]),o.headers={host:s.host??o.hostname}}return r(n)},OF={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},NF=(e,t)=>({applyToStack:r=>{r.addRelativeTo(PF(e,t),OF),r.add(RF(),IF)}}),Lb=e=>e.protocol==="ws:"||e.protocol==="wss:",Fp=class{signer;constructor(t){this.signer=t.signer}presign(t,r={}){return this.signer.presign(t,r)}async sign(t,r){return Up.HttpRequest.isInstance(t)&&Lb(t)?{...await this.signer.presign({...t,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(t.headers).filter(o=>o!=="host"))}),body:t.body}:this.signer.sign(t,r)}},DF=e=>{let{signer:t}=e;return Object.assign(e,{signer:async r=>{let n=await t(r);if(kF(n))return new Fp({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},kF=e=>!!e,MF=2e3,Bp=class e{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(t,r=new kb.FetchHttpHandler){return typeof t?.handle=="function"?t:new e(t,r)}constructor(t,r=new kb.FetchHttpHandler){this.httpHandler=r,typeof t=="function"?(this.config={},this.configPromise=t().then(n=>this.config=n??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[t,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!Lb(t))return this.httpHandler.handle(t);let r=TF.formatUrl(t),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:o=MF}=this.config;await this.waitForReady(n,o);let{body:s}=t,i=LF(s),a=this.connect(n,i),d=FF(a);return{response:new Up.HttpResponse({statusCode:200,body:d})}}updateHttpClientConfig(t,r){this.configPromise=this.configPromise.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(t,r){return new Promise((n,o)=>{let s=setTimeout(()=>{this.removeNotUsableSockets(t.url),o({$metadata:{httpStatusCode:500}})},r);t.onopen=()=>{clearTimeout(s),n()}})}connect(t,r){let n,o=!1,s=()=>{},i=()=>{};t.onmessage=l=>{i({done:!1,value:new Uint8Array(l.data)})},t.onerror=l=>{o=!0,t.close(),s(l)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!o&&(n?s(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((l,m)=>{i=l,s=m})})};return(async()=>{try{for await(let l of r)t.send(l)}catch(l){n=l}finally{t.close(1e3)}})(),a}},LF=e=>e[Symbol.asyncIterator]?e:BF(e)?Mb.readableStreamtoIterable(e):{[Symbol.asyncIterator]:async function*(){yield e}},FF=e=>typeof ReadableStream=="function"?Mb.iterableToReadableStream(e):e,BF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;Rs.WebSocketFetchHandler=Bp;Rs.eventStreamPayloadHandlerProvider=AF;Rs.getWebSocketPlugin=NF;Rs.resolveWebSocketConfig=DF});var Bb=I(po=>{"use strict";c();var UF=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},$F=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};po.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(po.SelectorType||(po.SelectorType={}));po.booleanSelector=UF;po.numberSelector=$F});var yt=I(He=>{"use strict";c();var Gr=Bb(),hc=Xe(),Hb="AWS_USE_DUALSTACK_ENDPOINT",qb="use_dualstack_endpoint",HF=!1,qF={environmentVariableSelector:e=>Gr.booleanSelector(e,Hb,Gr.SelectorType.ENV),configFileSelector:e=>Gr.booleanSelector(e,qb,Gr.SelectorType.CONFIG),default:!1},jb="AWS_USE_FIPS_ENDPOINT",zb="use_fips_endpoint",jF=!1,zF={environmentVariableSelector:e=>Gr.booleanSelector(e,jb,Gr.SelectorType.ENV),configFileSelector:e=>Gr.booleanSelector(e,zb,Gr.SelectorType.CONFIG),default:!1},VF=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:hc.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:hc.normalizeProvider(o??!1)})},GF=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},WF=e=>{let t=hc.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?hc.normalizeProvider(typeof r=="string"?o(r):r):()=>GF({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},Vb="AWS_REGION",Gb="region",KF={environmentVariableSelector:e=>e[Vb],configFileSelector:e=>e[Gb],default:()=>{throw new Error("Region is missing")}},YF={preferredFile:"credentials"},Wb=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Ub=e=>Wb(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,JF=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t=="string")return Ub(t);let n=await t();return Ub(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Wb(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},$b=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,XF=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),QF=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",ZF=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},eB=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=QF(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,d={useFipsEndpoint:t,useDualstackEndpoint:r},l=$b(o[a]?.variants,d),m=$b(s[i]?.variants,d),h=XF(a,{regionHostname:l,partitionHostname:m});if(h===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let S=ZF(h,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:h,...S&&{signingRegion:S},...o[a]?.signingService&&{signingService:o[a].signingService}}};He.CONFIG_USE_DUALSTACK_ENDPOINT=qb;He.CONFIG_USE_FIPS_ENDPOINT=zb;He.DEFAULT_USE_DUALSTACK_ENDPOINT=HF;He.DEFAULT_USE_FIPS_ENDPOINT=jF;He.ENV_USE_DUALSTACK_ENDPOINT=Hb;He.ENV_USE_FIPS_ENDPOINT=jb;He.NODE_REGION_CONFIG_FILE_OPTIONS=YF;He.NODE_REGION_CONFIG_OPTIONS=KF;He.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=qF;He.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=zF;He.REGION_ENV_NAME=Vb;He.REGION_INI_NAME=Gb;He.getRegionInfo=eB;He.resolveCustomEndpointsConfig=VF;He.resolveEndpointsConfig=WF;He.resolveRegionConfig=JF});var Yb=I(Kb=>{"use strict";c();var tB=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});Kb.resolveEventStreamSerdeConfig=tB});var ho=I(gc=>{"use strict";c();var rB=ie(),Jb="content-length";function Xb(e){return t=>async r=>{let n=r.request;if(rB.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Jb)===-1)try{let i=e(o);n.headers={...n.headers,[Jb]:String(i)}}catch{}}return t({...r,request:n})}}var Qb={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},nB=e=>({applyToStack:t=>{t.add(Xb(e.bodyLengthChecker),Qb)}});gc.contentLengthMiddleware=Xb;gc.contentLengthMiddlewareOptions=Qb;gc.getContentLengthPlugin=nB});var Hp=I(yc=>{"use strict";c();Object.defineProperty(yc,"__esModule",{value:!0});yc.getHomeDir=void 0;var oB=ee("os"),sB=ee("path"),$p={},iB=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",aB=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${sB.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=iB();return $p[o]||($p[o]=(0,oB.homedir)()),$p[o]};yc.getHomeDir=aB});var qp=I(Sc=>{"use strict";c();Object.defineProperty(Sc,"__esModule",{value:!0});Sc.getSSOTokenFilepath=void 0;var cB=ee("crypto"),dB=ee("path"),lB=Hp(),uB=e=>{let r=(0,cB.createHash)("sha1").update(e).digest("hex");return(0,dB.join)((0,lB.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Sc.getSSOTokenFilepath=uB});var Zb=I(Wr=>{"use strict";c();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getSSOTokenFromFile=Wr.tokenIntercept=void 0;var fB=ee("fs"),mB=qp(),{readFile:pB}=fB.promises;Wr.tokenIntercept={};var hB=async e=>{if(Wr.tokenIntercept[e])return Wr.tokenIntercept[e];let t=(0,mB.getSSOTokenFilepath)(e),r=await pB(t,"utf8");return JSON.parse(r)};Wr.getSSOTokenFromFile=hB});var eC=I(ut=>{"use strict";c();Object.defineProperty(ut,"__esModule",{value:!0});ut.slurpFile=ut.fileIntercept=ut.filePromisesHash=void 0;var gB=ee("fs"),{readFile:yB}=gB.promises;ut.filePromisesHash={};ut.fileIntercept={};var SB=(e,t)=>ut.fileIntercept[e]!==void 0?ut.fileIntercept[e]:((!ut.filePromisesHash[e]||t?.ignoreCache)&&(ut.filePromisesHash[e]=yB(e,"utf8")),ut.filePromisesHash[e]);ut.slurpFile=SB});var ur=I(it=>{"use strict";c();var Is=Hp(),tC=qp(),jp=Zb(),Ec=ee("path"),_c=br(),Ps=eC(),nC="AWS_PROFILE",oC="default",EB=e=>e.profile||process.env[nC]||oC,_B=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Nn);return r===-1?!1:Object.values(_c.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(Nn),s=r.substring(0,o)===_c.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),wB="AWS_CONFIG_FILE",sC=()=>process.env[wB]||Ec.join(Is.getHomeDir(),".aws","config"),xB="AWS_SHARED_CREDENTIALS_FILE",bB=()=>process.env[xB]||Ec.join(Is.getHomeDir(),".aws","credentials"),CB=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,TB=["__proto__","profile __proto__"],zp=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),d=CB.exec(a);if(d){let[,l,,m]=d;Object.values(_c.IniSectionType).includes(l)&&(r=[l,m].join(Nn))}else r=a;if(TB.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[d,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(l==="")n=d;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let m=n?[n,d].join(Nn):d;t[r][m]=l}}}}return t},rC=()=>({}),Nn=".",iC=async(e={})=>{let{filepath:t=bB(),configFilepath:r=sC()}=e,n=Is.getHomeDir(),o="~/",s=t;t.startsWith(o)&&(s=Ec.join(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=Ec.join(n,r.slice(2)));let a=await Promise.all([Ps.slurpFile(i,{ignoreCache:e.ignoreCache}).then(zp).then(_B).catch(rC),Ps.slurpFile(s,{ignoreCache:e.ignoreCache}).then(zp).catch(rC)]);return{configFile:a[0],credentialsFile:a[1]}},vB=e=>Object.entries(e).filter(([t])=>t.startsWith(_c.IniSectionType.SSO_SESSION+Nn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Nn)+1)]:n}),{}),AB=()=>({}),RB=async(e={})=>Ps.slurpFile(e.configFilepath??sC()).then(zp).then(vB).catch(AB),IB=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},PB=async e=>{let t=await iC(e);return IB(t.configFile,t.credentialsFile)},OB={getFileRecord(){return Ps.fileIntercept},interceptFile(e,t){Ps.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return jp.tokenIntercept},interceptToken(e,t){jp.tokenIntercept[e]=t}};Object.defineProperty(it,"getSSOTokenFromFile",{enumerable:!0,get:function(){return jp.getSSOTokenFromFile}});it.CONFIG_PREFIX_SEPARATOR=Nn;it.DEFAULT_PROFILE=oC;it.ENV_PROFILE=nC;it.externalDataInterceptor=OB;it.getProfileName=EB;it.loadSharedConfigFiles=iC;it.loadSsoSessionData=RB;it.parseKnownFiles=PB;Object.keys(Is).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return Is[e]}})});Object.keys(tC).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return tC[e]}})})});var fr=I(dC=>{"use strict";c();var Os=Ze(),aC=ur();function cC(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var NB=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Os.CredentialsProviderError(r.message||`Not found in ENV: ${cC(e.toString())}`,{logger:t?.logger})}},DB=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=aC.getProfileName(r),{configFile:o,credentialsFile:s}=await aC.loadSharedConfigFiles(r),i=s[n]||{},a=o[n]||{},d=t==="config"?{...i,...a}:{...a,...i};try{let m=e(d,t==="config"?o:s);if(m===void 0)throw new Error;return m}catch(l){throw new Os.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${cC(e.toString())}`,{logger:r.logger})}},kB=e=>typeof e=="function",MB=e=>kB(e)?async()=>await e():Os.fromStatic(e),LB=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return Os.memoize(Os.chain(NB(e,i),DB(t,n),MB(r)))};dC.loadConfig=LB});var mC=I(wc=>{"use strict";c();Object.defineProperty(wc,"__esModule",{value:!0});wc.getEndpointUrlConfig=void 0;var lC=ur(),uC="AWS_ENDPOINT_URL",fC="endpoint_url",FB=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[uC,...r].join("_")];if(n)return n;let o=t[uC];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(lC.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),fC].join(lC.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[fC];if(n)return n},default:void 0});wc.getEndpointUrlConfig=FB});var pC=I(xc=>{"use strict";c();Object.defineProperty(xc,"__esModule",{value:!0});xc.getEndpointFromConfig=void 0;var BB=fr(),UB=mC(),$B=async e=>(0,BB.loadConfig)((0,UB.getEndpointUrlConfig)(e??""))();xc.getEndpointFromConfig=$B});var pr=I(mr=>{"use strict";c();var gC=pC(),hC=sr(),HB=(Ue(),Y(kt)),bc=Xe(),qB=Qt(),jB=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),KB(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!WB(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},zB=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,VB=/(\d+\.){3}\d+/,GB=/\.\./,WB=e=>zB.test(e)&&!VB.test(e)&&!GB.test(e),KB=e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},YB=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:d}=o;return`${s}//${i}${a?":"+a:""}${d}`}}return o}:n},Vp=e=>typeof e=="object"?"url"in e?hC.parseUrl(e.url):e:hC.parseUrl(e),yC=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await gC.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Vp(i)),r.isCustomEndpoint=!0)}let o=await SC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},SC=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await YB(i.name,s,r)();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await jB(n),n},EC=({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&HB.setFeature(n,"ENDPOINT_OVERRIDE","N");let s=await yC(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let d=bc.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},_C={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:qB.serializerMiddlewareOption.name},JB=(e,t)=>({applyToStack:r=>{r.addRelativeTo(EC({config:e,instructions:t}),_C)}}),XB=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>Vp(await bc.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:bc.normalizeProvider(n??!1),useFipsEndpoint:bc.normalizeProvider(o??!1)}),d;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!d&&(d=gC.getEndpointFromConfig(e.serviceId)),d),a},QB=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};mr.endpointMiddleware=EC;mr.endpointMiddlewareOptions=_C;mr.getEndpointFromInstructions=yC;mr.getEndpointPlugin=JB;mr.resolveEndpointConfig=XB;mr.resolveEndpointRequiredConfig=QB;mr.resolveParams=SC;mr.toEndpointV1=Vp});var Wp=I(Kr=>{"use strict";c();var ZB=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],eU=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],tU=["TimeoutError","RequestTimeout","RequestTimeoutException"],rU=[500,502,503,504],nU=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],oU=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],wC=e=>e?.$retryable!==void 0,sU=e=>ZB.includes(e.name),xC=e=>e.$metadata?.clockSkewCorrected,bC=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},iU=e=>e.$metadata?.httpStatusCode===429||eU.includes(e.name)||e.$retryable?.throttling==!0,Gp=(e,t=0)=>wC(e)||xC(e)||tU.includes(e.name)||nU.includes(e?.code||"")||oU.includes(e?.code||"")||rU.includes(e.$metadata?.httpStatusCode||0)||bC(e)||e.cause!==void 0&&t<=10&&Gp(e.cause,t+1),aU=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Gp(e)}return!1};Kr.isBrowserNetworkError=bC;Kr.isClockSkewCorrectedError=xC;Kr.isClockSkewError=sU;Kr.isRetryableByTrait=wC;Kr.isServerError=aU;Kr.isThrottlingError=iU;Kr.isTransientError=Gp});var Dn=I(Ae=>{"use strict";c();var cU=Wp();Ae.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ae.RETRY_MODES||(Ae.RETRY_MODES={}));var Kp=3,dU=Ae.RETRY_MODES.STANDARD,Cc=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),cU.isThrottlingError(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Ns=100,Qp=20*1e3,TC=500,Yp=500,vC=5,AC=10,RC=1,lU="amz-sdk-invocation-id",uU="amz-sdk-request",fU=()=>{let e=Ns;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Qp,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},CC=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Qp,e),getRetryCost:()=>r}),Ds=class{maxAttempts;mode=Ae.RETRY_MODES.STANDARD;capacity=Yp;retryBackoffStrategy=fU();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return CC({retryDelay:Ns,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?TC:Ns);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,CC({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Yp,this.capacity+(t.getRetryCost()??RC))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Kp}`),Kp}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?AC:vC}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Jp=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ae.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Cc,this.standardRetryStrategy=new Ds(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Xp=class extends Ds{computeNextBackoffDelay;constructor(t,r=Ns){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ae.AdaptiveRetryStrategy=Jp;Ae.ConfiguredRetryStrategy=Xp;Ae.DEFAULT_MAX_ATTEMPTS=Kp;Ae.DEFAULT_RETRY_DELAY_BASE=Ns;Ae.DEFAULT_RETRY_MODE=dU;Ae.DefaultRateLimiter=Cc;Ae.INITIAL_RETRY_TOKENS=Yp;Ae.INVOCATION_ID_HEADER=lU;Ae.MAXIMUM_RETRY_DELAY=Qp;Ae.NO_RETRY_INCREMENT=RC;Ae.REQUEST_HEADER=uU;Ae.RETRY_COST=vC;Ae.StandardRetryStrategy=Ds;Ae.THROTTLING_RETRY_DELAY_BASE=TC;Ae.TIMEOUT_RETRY_COST=AC});var IC=I(Tc=>{"use strict";c();Object.defineProperty(Tc,"__esModule",{value:!0});Tc.isStreamingPayload=void 0;var mU=ee("stream"),pU=e=>e?.body instanceof mU.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Tc.isStreamingPayload=pU});var At=I(Me=>{"use strict";c();var Ce=Dn(),go=ie(),Yr=Wp(),OC=as(),PC=Xe(),hU=K(),gU=IC(),yU=(e,t)=>{let r=e,n=Ce.NO_RETRY_INCREMENT,o=Ce.RETRY_COST,s=Ce.TIMEOUT_RETRY_COST,i=e,a=h=>h.name==="TimeoutError"?s:o,d=h=>a(h)<=i;return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:h=>{if(!d(h))throw new Error("No retry token available");let S=a(h);return i-=S,S},releaseRetryTokens:h=>{i+=h??n,i=Math.min(i,r)}})},NC=(e,t)=>Math.floor(Math.min(Ce.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),DC=e=>e?Yr.isRetryableByTrait(e)||Yr.isClockSkewError(e)||Yr.isThrottlingError(e)||Yr.isTransientError(e):!1,kC=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),vc=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ce.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??DC,this.delayDecider=r?.delayDecider??NC,this.retryQuota=r?.retryQuota??yU(Ce.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ce.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let o,s=0,i=0,a=await this.getMaxAttempts(),{request:d}=r;for(go.HttpRequest.isInstance(d)&&(d.headers[Ce.INVOCATION_ID_HEADER]=OC.v4());;)try{go.HttpRequest.isInstance(d)&&(d.headers[Ce.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:m}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(o),m.$metadata.attempts=s+1,m.$metadata.totalRetryDelay=i,{response:l,output:m}}catch(l){let m=kC(l);if(s++,this.shouldRetry(m,s,a)){o=this.retryQuota.retrieveRetryTokens(m);let h=this.delayDecider(Yr.isThrottlingError(m)?Ce.THROTTLING_RETRY_DELAY_BASE:Ce.DEFAULT_RETRY_DELAY_BASE,s),S=SU(m.$response),y=Math.max(S||0,h);i+=y,await new Promise(w=>setTimeout(w,y));continue}throw m.$metadata||(m.$metadata={}),m.$metadata.attempts=s,m.$metadata.totalRetryDelay=i,m}}},SU=e=>{if(!go.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},Zp=class extends vc{rateLimiter;constructor(t,r){let{rateLimiter:n,...o}=r??{};super(t,o),this.rateLimiter=n??new Ce.DefaultRateLimiter,this.mode=Ce.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},eh="AWS_MAX_ATTEMPTS",th="max_attempts",EU={environmentVariableSelector:e=>{let t=e[eh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${eh} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[th];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${th} mast be a number, got "${t}"`);return r},default:Ce.DEFAULT_MAX_ATTEMPTS},_U=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=PC.normalizeProvider(n??Ce.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await PC.normalizeProvider(r)()===Ce.RETRY_MODES.ADAPTIVE?new Ce.AdaptiveRetryStrategy(o):new Ce.StandardRetryStrategy(o))})},MC="AWS_RETRY_MODE",LC="retry_mode",wU={environmentVariableSelector:e=>e[MC],configFileSelector:e=>e[LC],default:Ce.DEFAULT_RETRY_MODE},FC=()=>e=>async t=>{let{request:r}=t;return go.HttpRequest.isInstance(r)&&(delete r.headers[Ce.INVOCATION_ID_HEADER],delete r.headers[Ce.REQUEST_HEADER]),e(t)},BC={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},xU=e=>({applyToStack:t=>{t.addRelativeTo(FC(),BC)}}),UC=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(bU(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,d=0,l=0,{request:m}=n,h=go.HttpRequest.isInstance(m);for(h&&(m.headers[Ce.INVOCATION_ID_HEADER]=OC.v4());;)try{h&&(m.headers[Ce.REQUEST_HEADER]=`attempt=${d+1}; max=${s}`);let{response:S,output:y}=await t(n);return o.recordSuccess(i),y.$metadata.attempts=d+1,y.$metadata.totalRetryDelay=l,{response:S,output:y}}catch(S){let y=CU(S);if(a=kC(S),h&&gU.isStreamingPayload(m))throw(r.logger instanceof hU.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,y)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=l,a}d=i.getRetryCount();let w=i.getRetryDelay();l+=w,await new Promise(R=>setTimeout(R,w))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},bU=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",CU=e=>{let t={error:e,errorType:TU(e)},r=HC(e.$response);return r&&(t.retryAfterHint=r),t},TU=e=>Yr.isThrottlingError(e)?"THROTTLING":Yr.isTransientError(e)?"TRANSIENT":Yr.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",$C={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},vU=e=>({applyToStack:t=>{t.add(UC(e),$C)}}),HC=e=>{if(!go.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Me.AdaptiveRetryStrategy=Zp;Me.CONFIG_MAX_ATTEMPTS=th;Me.CONFIG_RETRY_MODE=LC;Me.ENV_MAX_ATTEMPTS=eh;Me.ENV_RETRY_MODE=MC;Me.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=EU;Me.NODE_RETRY_MODE_CONFIG_OPTIONS=wU;Me.StandardRetryStrategy=vc;Me.defaultDelayDecider=NC;Me.defaultRetryDecider=DC;Me.getOmitRetryHeadersPlugin=xU;Me.getRetryAfterHint=HC;Me.getRetryPlugin=vU;Me.omitRetryHeadersMiddleware=FC;Me.omitRetryHeadersMiddlewareOptions=BC;Me.resolveRetryConfig=_U;Me.retryMiddleware=UC;Me.retryMiddlewareOptions=$C});var oh=I(Jr=>{"use strict";c();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveHttpAuthSchemeConfig=Jr.defaultBedrockRuntimeHttpAuthSchemeProvider=Jr.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var AU=(ve(),Y(st)),rh=(Ue(),Y(kt)),nh=Xe(),RU=async(e,t,r)=>({operation:(0,nh.getSmithyContext)(t).operation,region:await(0,nh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Jr.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=RU;function IU(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function PU(e){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:t,filepath:r,configFilepath:n,ignoreCache:o},s)=>({identityProperties:{profile:t,filepath:r,configFilepath:n,ignoreCache:o}})}}var OU=e=>{let t=[];switch(e.operation){default:t.push(IU(e)),t.push(PU(e))}return t};Jr.defaultBedrockRuntimeHttpAuthSchemeProvider=OU;var NU=e=>{let t=(0,rh.memoizeIdentityProvider)(e.token,rh.isIdentityExpired,rh.doesIdentityRequireRefresh),r=(0,AU.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,nh.normalizeProvider)(e.authSchemePreference??[]),token:t})};Jr.resolveHttpAuthSchemeConfig=NU});var qC=I((zee,DU)=>{DU.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/credential-provider-node":"3.908.0","@aws-sdk/eventstream-handler-node":"3.901.0","@aws-sdk/middleware-eventstream":"3.901.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/middleware-websocket":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/token-providers":"3.908.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/eventstream-serde-browser":"^4.2.0","@smithy/eventstream-serde-config-resolver":"^4.3.0","@smithy/eventstream-serde-node":"^4.2.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-stream":"^4.5.0","@smithy/util-utf8":"^4.2.0","@smithy/uuid":"^1.1.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var sh=I(Xr=>{"use strict";c();var kU=(vt(),Y(Mr)),MU=Ze(),jC="AWS_ACCESS_KEY_ID",zC="AWS_SECRET_ACCESS_KEY",VC="AWS_SESSION_TOKEN",GC="AWS_CREDENTIAL_EXPIRATION",WC="AWS_CREDENTIAL_SCOPE",KC="AWS_ACCOUNT_ID",LU=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[jC],r=process.env[zC],n=process.env[VC],o=process.env[GC],s=process.env[WC],i=process.env[KC];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return kU.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new MU.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Xr.ENV_ACCOUNT_ID=KC;Xr.ENV_CREDENTIAL_SCOPE=WC;Xr.ENV_EXPIRATION=GC;Xr.ENV_KEY=jC;Xr.ENV_SECRET=zC;Xr.ENV_SESSION=VC;Xr.fromEnv=LU});var Ms=I(Ke=>{"use strict";c();var Bt=Ze(),FU=ee("url"),BU=ee("buffer"),UU=ee("http"),lh=fr(),$U=sr();function ks(e){return new Promise((t,r)=>{let n=UU.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Bt.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Bt.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Bt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(BU.Buffer.concat(i)),n.destroy()})}),n.end()})}var QC=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",ZC=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),eT=1e3,tT=0,uh=({maxRetries:e=tT,timeout:t=eT})=>({maxRetries:e,timeout:t}),ah=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},Ac="AWS_CONTAINER_CREDENTIALS_FULL_URI",Rc="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",ch="AWS_CONTAINER_AUTHORIZATION_TOKEN",HU=(e={})=>{let{timeout:t,maxRetries:r}=uh(e);return()=>ah(async()=>{let n=await GU({logger:e.logger}),o=JSON.parse(await qU(t,n));if(!QC(o))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return ZC(o)},r)},qU=async(e,t)=>(process.env[ch]&&(t.headers={...t.headers,Authorization:process.env[ch]}),(await ks({...t,timeout:e})).toString()),jU="169.254.170.2",zU={localhost:!0,"127.0.0.1":!0},VU={"http:":!0,"https:":!0},GU=async({logger:e})=>{if(process.env[Rc])return{hostname:jU,path:process.env[Rc]};if(process.env[Ac]){let t=FU.parse(process.env[Ac]);if(!t.hostname||!(t.hostname in zU))throw new Bt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in VU))throw new Bt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Bt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Rc} or ${Ac} environment variable is set`,{tryNextLink:!1,logger:e})},dh=class e extends Bt.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Ke.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Ke.Endpoint||(Ke.Endpoint={}));var WU="AWS_EC2_METADATA_SERVICE_ENDPOINT",KU="ec2_metadata_service_endpoint",YU={environmentVariableSelector:e=>e[WU],configFileSelector:e=>e[KU],default:void 0},yo;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(yo||(yo={}));var JU="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",XU="ec2_metadata_service_endpoint_mode",QU={environmentVariableSelector:e=>e[JU],configFileSelector:e=>e[XU],default:yo.IPv4},rT=async()=>$U.parseUrl(await ZU()||await e$()),ZU=async()=>lh.loadConfig(YU)(),e$=async()=>{let e=await lh.loadConfig(QU)();switch(e){case yo.IPv4:return Ke.Endpoint.IPv4;case yo.IPv6:return Ke.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(yo)}`)}},t$=300,r$=300,n$="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",YC=(e,t)=>{let r=t$+Math.floor(Math.random()*r$),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+n$);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},o$=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=YC(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=YC(n,r);else throw s}return n=o,o}},nT="/latest/meta-data/iam/security-credentials/",s$="/latest/api/token",ih="AWS_EC2_METADATA_V1_DISABLED",JC="ec2_metadata_v1_disabled",XC="x-aws-ec2-metadata-token",i$=(e={})=>o$(a$(e),{logger:e.logger}),a$=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=uh(e),i=async(a,d)=>{if(t||d.headers?.[XC]==null){let h=!1,S=!1,y=await lh.loadConfig({environmentVariableSelector:w=>{let R=w[ih];if(S=!!R&&R!=="false",R===void 0)throw new Bt.CredentialsProviderError(`${ih} not set in env, checking config file next.`,{logger:e.logger});return S},configFileSelector:w=>{let R=w[JC];return h=!!R&&R!=="false",h},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||y){let w=[];throw e.ec2MetadataV1Disabled&&w.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),h&&w.push(`config file profile (${JC})`),S&&w.push(`process environment variable (${ih})`),new dh(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${w.join(", ")}].`)}}let m=(await ah(async()=>{let h;try{h=await d$(d)}catch(S){throw S.statusCode===401&&(t=!1),S}return h},a)).trim();return ah(async()=>{let h;try{h=await l$(m,d,e)}catch(S){throw S.statusCode===401&&(t=!1),S}return h},a)};return async()=>{let a=await rT();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let d;try{d=(await c$({...a,timeout:o})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[XC]:d},timeout:o})}}},c$=async e=>ks({...e,path:s$,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),d$=async e=>(await ks({...e,path:nT})).toString(),l$=async(e,t,r)=>{let n=JSON.parse((await ks({...t,path:nT+e})).toString());if(!QC(n))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return ZC(n)};Ke.DEFAULT_MAX_RETRIES=tT;Ke.DEFAULT_TIMEOUT=eT;Ke.ENV_CMDS_AUTH_TOKEN=ch;Ke.ENV_CMDS_FULL_URI=Ac;Ke.ENV_CMDS_RELATIVE_URI=Rc;Ke.fromContainerMetadata=HU;Ke.fromInstanceMetadata=i$;Ke.getInstanceMetadataEndpoint=rT;Ke.httpRequest=ks;Ke.providerConfigFromInit=uh});var oT=I(Ic=>{"use strict";c();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.checkUrl=void 0;var u$=Ze(),f$="169.254.170.2",m$="169.254.170.23",p$="[fd00:ec2::23]",h$=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===f$||e.hostname===m$||e.hostname===p$)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new u$.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Ic.checkUrl=h$});var sT=I(Pc=>{"use strict";c();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createGetRequest=E$;Pc.getCredentials=_$;var fh=Ze(),g$=ie(),y$=K(),S$=ra();function E$(e){return new g$.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function _$(e,t){let n=await(0,S$.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new fh.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,y$.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new fh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new fh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var iT=I(Oc=>{"use strict";c();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.retryWrapper=void 0;var w$=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};Oc.retryWrapper=w$});var dT=I(Nc=>{"use strict";c();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.fromHttp=void 0;var x$=(Or(),Y(Pr)),b$=(vt(),Y(Mr)),C$=Ar(),aT=Ze(),T$=x$.__importDefault(ee("fs/promises")),v$=oT(),cT=sT(),A$=iT(),R$="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",I$="http://169.254.170.2",P$="AWS_CONTAINER_CREDENTIALS_FULL_URI",O$="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",N$="AWS_CONTAINER_AUTHORIZATION_TOKEN",D$=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[R$],n=e.awsContainerCredentialsFullUri??process.env[P$],o=e.awsContainerAuthorizationToken??process.env[N$],s=e.awsContainerAuthorizationTokenFile??process.env[O$],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${I$}${r}`;else throw new aT.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,v$.checkUrl)(a,e.logger);let d=C$.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,A$.retryWrapper)(async()=>{let l=(0,cT.createGetRequest)(a);o?l.headers.Authorization=o:s&&(l.headers.Authorization=(await T$.default.readFile(s)).toString());try{let m=await d.handle(l);return(0,cT.getCredentials)(m.response).then(h=>(0,b$.setCredentialFeature)(h,"CREDENTIALS_HTTP","z"))}catch(m){throw new aT.CredentialsProviderError(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};Nc.fromHttp=D$});var mh=I(Dc=>{"use strict";c();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.fromHttp=void 0;var k$=dT();Object.defineProperty(Dc,"fromHttp",{enumerable:!0,get:function(){return k$.fromHttp}})});function M$(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function L$(e){return{schemeId:"smithy.api#noAuth"}}var Ls,lT,uT,fT,ph=T(()=>{c();ve();Ls=v(Xe()),lT=async(e,t,r)=>({operation:(0,Ls.getSmithyContext)(t).operation,region:await(0,Ls.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});uT=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(L$(e));break}default:t.push(M$(e))}return t},fT=e=>{let t=bn(e);return Object.assign(t,{authSchemePreference:(0,Ls.normalizeProvider)(e.authSchemePreference??[])})}});var mT,pT,hh=T(()=>{c();mT=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),pT={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var kc,gh=T(()=>{kc={name:"@aws-sdk/nested-clients",version:"3.908.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var So=I(kn=>{"use strict";c();var hT=ee("os"),yh=ee("process"),B$=In(),gT={isCrtAvailable:!1},U$=()=>gT.isCrtAvailable?["md/crt-avail"]:null,yT=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${hT.platform()}`,hT.release()],["lang/js"],["md/nodejs",`${yh.versions.node}`]],o=U$();o&&n.push(o),e&&n.push([`api/${e}`,t]),yh.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${yh.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},$$=yT,ST="AWS_SDK_UA_APP_ID",ET="sdk_ua_app_id",H$="sdk-ua-app-id",q$={environmentVariableSelector:e=>e[ST],configFileSelector:e=>e[ET]??e[H$],default:B$.DEFAULT_UA_APP_ID};kn.NODE_APP_ID_CONFIG_OPTIONS=q$;kn.UA_APP_ID_ENV_NAME=ST;kn.UA_APP_ID_INI_NAME=ET;kn.createDefaultUserAgentProvider=yT;kn.crtAvailability=gT;kn.defaultUserAgent=$$});var Eo=I(xT=>{"use strict";c();var Sh=Kn(),j$=Le(),z$=ee("buffer"),_T=ee("crypto"),Eh=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(j$.toUint8Array(wT(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?_T.createHmac(this.algorithmIdentifier,wT(this.secret)):_T.createHash(this.algorithmIdentifier)}};function wT(e,t){return z$.Buffer.isBuffer(e)?e:typeof e=="string"?Sh.fromString(e,t):ArrayBuffer.isView(e)?Sh.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):Sh.fromArrayBuffer(e)}xT.Hash=Eh});var _o=I(bT=>{"use strict";c();var _h=ee("node:fs"),V$=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof _h.ReadStream){if(e.path!=null)return _h.lstatSync(e.path).size;if(typeof e.fd=="number")return _h.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};bT.calculateBodyLength=V$});var DT,Et,CT,Fs,wo,xo,hr,wh,xh,TT,vT,AT,kT,MT,St,RT,LT,IT,PT,OT,NT,G$,FT,BT=T(()=>{c();DT="required",Et="argv",CT="isSet",Fs="booleanEquals",wo="error",xo="endpoint",hr="tree",wh="PartitionResult",xh="getAttr",TT={[DT]:!1,type:"String"},vT={[DT]:!0,default:!1,type:"Boolean"},AT={ref:"Endpoint"},kT={fn:Fs,[Et]:[{ref:"UseFIPS"},!0]},MT={fn:Fs,[Et]:[{ref:"UseDualStack"},!0]},St={},RT={fn:xh,[Et]:[{ref:wh},"supportsFIPS"]},LT={ref:wh},IT={fn:Fs,[Et]:[!0,{fn:xh,[Et]:[LT,"supportsDualStack"]}]},PT=[kT],OT=[MT],NT=[{ref:"Region"}],G$={version:"1.0",parameters:{Region:TT,UseDualStack:vT,UseFIPS:vT,Endpoint:TT},rules:[{conditions:[{fn:CT,[Et]:[AT]}],rules:[{conditions:PT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:wo},{conditions:OT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:wo},{endpoint:{url:AT,properties:St,headers:St},type:xo}],type:hr},{conditions:[{fn:CT,[Et]:NT}],rules:[{conditions:[{fn:"aws.partition",[Et]:NT,assign:wh}],rules:[{conditions:[kT,MT],rules:[{conditions:[{fn:Fs,[Et]:[!0,RT]},IT],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:xo}],type:hr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:wo}],type:hr},{conditions:PT,rules:[{conditions:[{fn:Fs,[Et]:[RT,!0]}],rules:[{conditions:[{fn:"stringEquals",[Et]:[{fn:xh,[Et]:[LT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:St,headers:St},type:xo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:xo}],type:hr},{error:"FIPS is enabled but this partition does not support FIPS",type:wo}],type:hr},{conditions:OT,rules:[{conditions:[IT],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:xo}],type:hr},{error:"DualStack is enabled but this partition does not support DualStack",type:wo}],type:hr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:xo}],type:hr}],type:hr},{error:"Invalid Configuration: Missing Region",type:wo}]},FT=G$});var UT,bo,W$,$T,HT=T(()=>{c();UT=v(_n()),bo=v(En());BT();W$=new bo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),$T=(e,t={})=>W$.get(e,()=>(0,bo.resolveEndpoint)(FT,{endpointParams:e,logger:t.logger}));bo.customEndpointFunctions.aws=UT.awsEndpointFunctions});var qT,jT,Mc,Lc,zT,VT=T(()=>{c();ve();Ue();qT=v(K()),jT=v(sr()),Mc=v(Fe()),Lc=v(Le());ph();HT();zT=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Mc.fromBase64,base64Encoder:e?.base64Encoder??Mc.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??$T,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??uT,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],logger:e?.logger??new qT.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??jT.parseUrl,utf8Decoder:e?.utf8Decoder??Lc.fromUtf8,utf8Encoder:e?.utf8Encoder??Lc.toUtf8})});var Co=I(YT=>{"use strict";c();var K$=yt(),GT=fr(),Y$=Ze(),J$="AWS_EXECUTION_ENV",WT="AWS_REGION",KT="AWS_DEFAULT_REGION",X$="AWS_EC2_METADATA_DISABLED",Q$=["in-region","cross-region","mobile","standard","legacy"],Z$="/latest/meta-data/placement/region",eH="AWS_DEFAULTS_MODE",tH="defaults_mode",rH={environmentVariableSelector:e=>e[eH],configFileSelector:e=>e[tH],default:"legacy"},nH=({region:e=GT.loadConfig(K$.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=GT.loadConfig(rH)}={})=>Y$.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return oH(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Q$.join(", ")}, got ${r}`)}}),oH=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await sH();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},sH=async()=>{if(process.env[J$]&&(process.env[WT]||process.env[KT]))return process.env[WT]??process.env[KT];if(!process.env[X$])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>v(Ms())),r=await e();return(await t({...r,path:Z$})).toString()}catch{}};YT.resolveDefaultsModeConfig=nH});var Fc,Zr,JT,Bc,Qr,Uc,XT,QT,ZT,ev,tv,rv,nv=T(()=>{c();gh();ve();Fc=v(So()),Zr=v(yt()),JT=v(Eo()),Bc=v(At()),Qr=v(fr()),Uc=v(Ar()),XT=v(_o()),QT=v(Dn());VT();ZT=v(K()),ev=v(Co()),tv=v(K()),rv=e=>{(0,tv.emitWarningIfUnsupportedVersion)(process.version);let t=(0,ev.resolveDefaultsModeConfig)(e),r=()=>t().then(ZT.loadConfigsForDefaultMode),n=zT(e);ro(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Qr.loadConfig)(so,o),bodyLengthChecker:e?.bodyLengthChecker??XT.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Fc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:kc.version}),maxAttempts:e?.maxAttempts??(0,Qr.loadConfig)(Bc.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Qr.loadConfig)(Zr.NODE_REGION_CONFIG_OPTIONS,{...Zr.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:Uc.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Qr.loadConfig)({...Bc.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||QT.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??JT.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Uc.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Qr.loadConfig)(Zr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Qr.loadConfig)(Zr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Qr.loadConfig)(Fc.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var To=I((Mte,dv)=>{"use strict";c();var $c=Object.defineProperty,iH=Object.getOwnPropertyDescriptor,aH=Object.getOwnPropertyNames,cH=Object.prototype.hasOwnProperty,Ut=(e,t)=>$c(e,"name",{value:t,configurable:!0}),dH=(e,t)=>{for(var r in t)$c(e,r,{get:t[r],enumerable:!0})},lH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of aH(t))!cH.call(e,o)&&o!==r&&$c(e,o,{get:()=>t[o],enumerable:!(n=iH(t,o))||n.enumerable});return e},uH=e=>lH($c({},"__esModule",{value:!0}),e),sv={};dH(sv,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>hH,NODE_REGION_CONFIG_OPTIONS:()=>pH,REGION_ENV_NAME:()=>iv,REGION_INI_NAME:()=>av,getAwsRegionExtensionConfiguration:()=>fH,resolveAwsRegionExtensionConfiguration:()=>mH,resolveRegionConfig:()=>gH});dv.exports=uH(sv);var fH=Ut(e=>({setRegion(t){e.region=t},region(){return e.region}}),"getAwsRegionExtensionConfiguration"),mH=Ut(e=>({region:e.region()}),"resolveAwsRegionExtensionConfiguration"),iv="AWS_REGION",av="region",pH={environmentVariableSelector:Ut(e=>e[iv],"environmentVariableSelector"),configFileSelector:Ut(e=>e[av],"configFileSelector"),default:Ut(()=>{throw new Error("Region is missing")},"default")},hH={preferredFile:"credentials"},cv=Ut(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),ov=Ut(e=>cv(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),gH=Ut(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:Ut(async()=>{if(typeof t=="string")return ov(t);let n=await t();return ov(n)},"region"),useFipsEndpoint:Ut(async()=>{let n=typeof t=="string"?t:await t();return cv(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()},"useFipsEndpoint")})},"resolveRegionConfig")});var lv,uv,fv=T(()=>{c();lv=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},uv=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Hc,qc,jc,mv,pv=T(()=>{c();Hc=v(To()),qc=v(ie()),jc=v(K());fv();mv=(e,t)=>{let r=Object.assign((0,Hc.getAwsRegionExtensionConfiguration)(e),(0,jc.getDefaultExtensionConfiguration)(e),(0,qc.getHttpHandlerExtensionConfiguration)(e),lv(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Hc.resolveAwsRegionExtensionConfiguration)(r),(0,jc.resolveDefaultRuntimeConfig)(r),(0,qc.resolveHttpHandlerRuntimeConfig)(r),uv(r))}});var zc,hv,gv,Vc,yv,Sv,Ev,Gc,bh,Bs,Ch=T(()=>{c();zc=v(zn()),hv=v(Vn()),gv=v(Gn()),Vc=v(In()),yv=v(yt());Ue();Sv=v(ho()),Ev=v(pr()),Gc=v(At()),bh=v(K());ph();hh();nv();pv();Bs=class extends bh.Client{config;constructor(...[t]){let r=rv(t||{});super(r),this.initConfig=r;let n=mT(r),o=(0,Vc.resolveUserAgentConfig)(n),s=(0,Gc.resolveRetryConfig)(o),i=(0,yv.resolveRegionConfig)(s),a=(0,zc.resolveHostHeaderConfig)(i),d=(0,Ev.resolveEndpointConfig)(a),l=fT(d),m=mv(l,t?.extensions||[]);this.config=m,this.middlewareStack.use((0,Vc.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Gc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Sv.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,zc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hv.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,gv.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Yo(this.config,{httpAuthSchemeParametersProvider:lT,identityProviderConfigProvider:async h=>new yn({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Jo(this.config))}destroy(){super.destroy()}}});var _v,$e,Wc=T(()=>{c();_v=v(K()),$e=class e extends _v.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Mn,yH,Us,$s,Th,vh,Hs,qs,js,zs,SH,Vs,Gs,Ws,Ks,Ys,Kc=T(()=>{c();Mn=v(K());Wc();yH={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Us=class e extends $e{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},$s=class e extends $e{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Th=e=>({...e,...e.clientSecret&&{clientSecret:Mn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Mn.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:Mn.SENSITIVE_STRING}}),vh=e=>({...e,...e.accessToken&&{accessToken:Mn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Mn.SENSITIVE_STRING},...e.idToken&&{idToken:Mn.SENSITIVE_STRING}}),Hs=class e extends $e{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},qs=class e extends $e{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},js=class e extends $e{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},zs=class e extends $e{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},SH={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Vs=class e extends $e{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Gs=class e extends $e{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ws=class e extends $e{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ks=class e extends $e{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ys=class e extends $e{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var M,wv,xv,EH,_H,wH,xH,bH,CH,TH,vH,AH,RH,IH,PH,OH,_t,bv=T(()=>{c();ve();Ue();M=v(K());Kc();Wc();wv=async(e,t)=>{let r=ls(e,t),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify((0,M.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>(0,M._json)(s)})),r.m("POST").h(n).b(o),r.build()},xv=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return EH(e,t);let r=(0,M.map)({$metadata:_t(e)}),n=(0,M.expectNonNull)((0,M.expectObject)(await uo(e.body,t)),"body"),o=(0,M.take)(n,{accessToken:M.expectString,expiresIn:M.expectInt32,idToken:M.expectString,refreshToken:M.expectString,tokenType:M.expectString});return Object.assign(r,o),r},EH=async(e,t)=>{let r={...e,body:await sp(e.body,t)},n=Tn(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await wH(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await xH(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await bH(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await CH(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await TH(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await vH(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await AH(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await RH(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await IH(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await PH(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await OH(r,t);default:let o=r.body;return _H({output:e,parsedBody:o,errorCode:n})}},_H=(0,M.withBaseException)($e),wH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,o);let s=new Us({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},xH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new $s({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},bH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Hs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},CH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new qs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},TH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new js({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},vH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new zs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},AH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,o);let s=new Vs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},RH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Gs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},IH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ws({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},PH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ks({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},OH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ys({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},_t=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var Cv,Tv,Ah,Js,Rh=T(()=>{c();Cv=v(pr()),Tv=v(Qt()),Ah=v(K());hh();Kc();bv();Js=class extends Ah.Command.classBuilder().ep(pT).m(function(t,r,n,o){return[(0,Tv.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Cv.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(Th,vh).ser(wv).de(xv).build(){}});var vv,NH,Yc,Av=T(()=>{c();vv=v(K());Rh();Ch();NH={CreateTokenCommand:Js},Yc=class extends Bs{};(0,vv.createAggregatedClient)(NH,Yc)});var Rv=T(()=>{c();Rh()});var Iv=T(()=>{c();Kc()});var Ih={};Ct(Ih,{$Command:()=>Ah.Command,AccessDeniedException:()=>Us,AccessDeniedExceptionReason:()=>yH,AuthorizationPendingException:()=>$s,CreateTokenCommand:()=>Js,CreateTokenRequestFilterSensitiveLog:()=>Th,CreateTokenResponseFilterSensitiveLog:()=>vh,ExpiredTokenException:()=>Hs,InternalServerException:()=>qs,InvalidClientException:()=>js,InvalidGrantException:()=>zs,InvalidRequestException:()=>Vs,InvalidRequestExceptionReason:()=>SH,InvalidScopeException:()=>Gs,SSOOIDC:()=>Yc,SSOOIDCClient:()=>Bs,SSOOIDCServiceException:()=>$e,SlowDownException:()=>Ws,UnauthorizedClientException:()=>Ks,UnsupportedGrantTypeException:()=>Ys,__Client:()=>bh.Client});var Ph=T(()=>{c();Ch();Av();Rv();Iv();Wc()});var Nh=I(Qs=>{"use strict";c();var DH=(vt(),Y(Mr)),kH=(Pm(),Y(jw)),ft=Ze(),Xs=ur(),MH=ee("fs"),LH=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new ft.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=kH.getBearerTokenEnvKey(t);if(!(r in process.env))throw new ft.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return DH.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},FH=300*1e3,Oh="To refresh this SSO session run 'aws sso login' with the corresponding profile.",BH=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Ph(),Ih));return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:t.clientConfig?.logger??t.parentClientConfig?.logger}))},UH=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Ph(),Ih));return(await BH(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},Pv=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ft.TokenProviderError(`Token is expired. ${Oh}`,!1)},Ln=(e,t,r=!1)=>{if(typeof t>"u")throw new ft.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Oh}`,!1)},{writeFile:$H}=MH.promises,HH=(e,t)=>{let r=Xs.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return $H(r,n)},Ov=new Date(0),Nv=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await Xs.parseKnownFiles(r),o=Xs.getProfileName({profile:r.profile??t?.profile}),s=n[o];if(s){if(!s.sso_session)throw new ft.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new ft.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let i=s.sso_session,d=(await Xs.loadSsoSessionData(r))[i];if(!d)throw new ft.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let w of["sso_start_url","sso_region"])if(!d[w])throw new ft.TokenProviderError(`Sso session '${i}' is missing required property '${w}'.`,!1);d.sso_start_url;let l=d.sso_region,m;try{m=await Xs.getSSOTokenFromFile(i)}catch{throw new ft.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${Oh}`,!1)}Ln("accessToken",m.accessToken),Ln("expiresAt",m.expiresAt);let{accessToken:h,expiresAt:S}=m,y={token:h,expiration:new Date(S)};if(y.expiration.getTime()-Date.now()>FH)return y;if(Date.now()-Ov.getTime()<30*1e3)return Pv(y),y;Ln("clientId",m.clientId,!0),Ln("clientSecret",m.clientSecret,!0),Ln("refreshToken",m.refreshToken,!0);try{Ov.setTime(Date.now());let w=await UH(m,l,r);Ln("accessToken",w.accessToken),Ln("expiresIn",w.expiresIn);let R=new Date(Date.now()+w.expiresIn*1e3);try{await HH(i,{...m,accessToken:w.accessToken,expiresAt:R.toISOString(),refreshToken:w.refreshToken})}catch{}return{token:w.accessToken,expiration:R}}catch{return Pv(y),y}},qH=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new ft.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},jH=(e={})=>ft.memoize(ft.chain(Nv(e),async()=>{throw new ft.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Qs.fromEnvSigningName=LH;Qs.fromSso=Nv;Qs.fromStatic=qH;Qs.nodeProvider=jH});var kh=I(en=>{"use strict";c();Object.defineProperty(en,"__esModule",{value:!0});en.resolveHttpAuthSchemeConfig=en.defaultSSOHttpAuthSchemeProvider=en.defaultSSOHttpAuthSchemeParametersProvider=void 0;var zH=(ve(),Y(st)),Dh=Xe(),VH=async(e,t,r)=>({operation:(0,Dh.getSmithyContext)(t).operation,region:await(0,Dh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});en.defaultSSOHttpAuthSchemeParametersProvider=VH;function GH(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Jc(e){return{schemeId:"smithy.api#noAuth"}}var WH=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Jc(e));break}case"ListAccountRoles":{t.push(Jc(e));break}case"ListAccounts":{t.push(Jc(e));break}case"Logout":{t.push(Jc(e));break}default:t.push(GH(e))}return t};en.defaultSSOHttpAuthSchemeProvider=WH;var KH=e=>{let t=(0,zH.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Dh.normalizeProvider)(e.authSchemePreference??[])})};en.resolveHttpAuthSchemeConfig=KH});var Dv=I((Ore,YH)=>{YH.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Kv=I(Xc=>{"use strict";c();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.ruleSet=void 0;var zv="required",xt="fn",bt="argv",Ro="ref",kv=!0,Mv="isSet",Zs="booleanEquals",vo="error",Ao="endpoint",gr="tree",Mh="PartitionResult",Lh="getAttr",Lv={[zv]:!1,type:"String"},Fv={[zv]:!0,default:!1,type:"Boolean"},Bv={[Ro]:"Endpoint"},Vv={[xt]:Zs,[bt]:[{[Ro]:"UseFIPS"},!0]},Gv={[xt]:Zs,[bt]:[{[Ro]:"UseDualStack"},!0]},wt={},Uv={[xt]:Lh,[bt]:[{[Ro]:Mh},"supportsFIPS"]},Wv={[Ro]:Mh},$v={[xt]:Zs,[bt]:[!0,{[xt]:Lh,[bt]:[Wv,"supportsDualStack"]}]},Hv=[Vv],qv=[Gv],jv=[{[Ro]:"Region"}],JH={version:"1.0",parameters:{Region:Lv,UseDualStack:Fv,UseFIPS:Fv,Endpoint:Lv},rules:[{conditions:[{[xt]:Mv,[bt]:[Bv]}],rules:[{conditions:Hv,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vo},{conditions:qv,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vo},{endpoint:{url:Bv,properties:wt,headers:wt},type:Ao}],type:gr},{conditions:[{[xt]:Mv,[bt]:jv}],rules:[{conditions:[{[xt]:"aws.partition",[bt]:jv,assign:Mh}],rules:[{conditions:[Vv,Gv],rules:[{conditions:[{[xt]:Zs,[bt]:[kv,Uv]},$v],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:Ao}],type:gr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vo}],type:gr},{conditions:Hv,rules:[{conditions:[{[xt]:Zs,[bt]:[Uv,kv]}],rules:[{conditions:[{[xt]:"stringEquals",[bt]:[{[xt]:Lh,[bt]:[Wv,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:wt,headers:wt},type:Ao},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:Ao}],type:gr},{error:"FIPS is enabled but this partition does not support FIPS",type:vo}],type:gr},{conditions:qv,rules:[{conditions:[$v],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:Ao}],type:gr},{error:"DualStack is enabled but this partition does not support DualStack",type:vo}],type:gr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:Ao}],type:gr}],type:gr},{error:"Invalid Configuration: Missing Region",type:vo}]};Xc.ruleSet=JH});var Yv=I(Qc=>{"use strict";c();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.defaultEndpointResolver=void 0;var XH=_n(),Fh=En(),QH=Kv(),ZH=new Fh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),eq=(e,t={})=>ZH.get(e,()=>(0,Fh.resolveEndpoint)(QH.ruleSet,{endpointParams:e,logger:t.logger}));Qc.defaultEndpointResolver=eq;Fh.customEndpointFunctions.aws=XH.awsEndpointFunctions});var Qv=I(Zc=>{"use strict";c();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.getRuntimeConfig=void 0;var tq=(ve(),Y(st)),rq=(Ue(),Y(kt)),nq=K(),oq=sr(),Jv=Fe(),Xv=Le(),sq=kh(),iq=Yv(),aq=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Jv.fromBase64,base64Encoder:e?.base64Encoder??Jv.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??iq.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??sq.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new tq.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new rq.NoAuthSigner}],logger:e?.logger??new nq.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??oq.parseUrl,utf8Decoder:e?.utf8Decoder??Xv.fromUtf8,utf8Encoder:e?.utf8Encoder??Xv.toUtf8});Zc.getRuntimeConfig=aq});var nA=I(td=>{"use strict";c();Object.defineProperty(td,"__esModule",{value:!0});td.getRuntimeConfig=void 0;var cq=(Or(),Y(Pr)),dq=cq.__importDefault(Dv()),Zv=(ve(),Y(st)),eA=So(),ed=yt(),lq=Eo(),tA=At(),Fn=fr(),rA=Ar(),uq=_o(),fq=Dn(),mq=Qv(),pq=K(),hq=Co(),gq=K(),yq=e=>{(0,gq.emitWarningIfUnsupportedVersion)(process.version);let t=(0,hq.resolveDefaultsModeConfig)(e),r=()=>t().then(pq.loadConfigsForDefaultMode),n=(0,mq.getRuntimeConfig)(e);(0,Zv.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Fn.loadConfig)(Zv.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??uq.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,eA.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:dq.default.version}),maxAttempts:e?.maxAttempts??(0,Fn.loadConfig)(tA.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Fn.loadConfig)(ed.NODE_REGION_CONFIG_OPTIONS,{...ed.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:rA.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Fn.loadConfig)({...tA.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||fq.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??lq.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??rA.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Fn.loadConfig)(ed.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Fn.loadConfig)(ed.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Fn.loadConfig)(eA.NODE_APP_ID_CONFIG_OPTIONS,o)}};td.getRuntimeConfig=yq});var xA=I(Re=>{"use strict";c();var oA=zn(),Sq=Vn(),Eq=Gn(),sA=In(),_q=yt(),yr=(Ue(),Y(kt)),wq=ho(),ni=pr(),iA=At(),F=K(),aA=kh(),xq=nA(),cA=To(),dA=ie(),dd=Qt(),ei=(ve(),Y(st)),bq=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),ld={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Cq=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},Tq=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),vq=(e,t)=>{let r=Object.assign(cA.getAwsRegionExtensionConfiguration(e),F.getDefaultExtensionConfiguration(e),dA.getHttpHandlerExtensionConfiguration(e),Cq(e));return t.forEach(n=>n.configure(r)),Object.assign(e,cA.resolveAwsRegionExtensionConfiguration(r),F.resolveDefaultRuntimeConfig(r),dA.resolveHttpHandlerRuntimeConfig(r),Tq(r))},Io=class extends F.Client{config;constructor(...[t]){let r=xq.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=bq(r),o=sA.resolveUserAgentConfig(n),s=iA.resolveRetryConfig(o),i=_q.resolveRegionConfig(s),a=oA.resolveHostHeaderConfig(i),d=ni.resolveEndpointConfig(a),l=aA.resolveHttpAuthSchemeConfig(d),m=vq(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(sA.getUserAgentPlugin(this.config)),this.middlewareStack.use(iA.getRetryPlugin(this.config)),this.middlewareStack.use(wq.getContentLengthPlugin(this.config)),this.middlewareStack.use(oA.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Sq.getLoggerPlugin(this.config)),this.middlewareStack.use(Eq.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(yr.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:aA.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new yr.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(yr.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},tn=class e extends F.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},rd=class e extends tn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},nd=class e extends tn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},od=class e extends tn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sd=class e extends tn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},lA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),uA=e=>({...e,...e.secretAccessKey&&{secretAccessKey:F.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:F.SENSITIVE_STRING}}),fA=e=>({...e,...e.roleCredentials&&{roleCredentials:uA(e.roleCredentials)}}),mA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),pA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),hA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),Aq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[md]:e[fd]});r.bp("/federation/credentials");let o=F.map({[Hq]:[,F.expectNonNull(e[$q],"roleName")],[yA]:[,F.expectNonNull(e[gA],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Rq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[md]:e[fd]});r.bp("/assignment/roles");let o=F.map({[wA]:[,e[_A]],[EA]:[()=>e.maxResults!==void 0,()=>e[SA].toString()],[yA]:[,F.expectNonNull(e[gA],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Iq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[md]:e[fd]});r.bp("/assignment/accounts");let o=F.map({[wA]:[,e[_A]],[EA]:[()=>e.maxResults!==void 0,()=>e[SA].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Pq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[md]:e[fd]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},Oq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ud(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ei.parseJsonBody(e.body,t)),"body"),o=F.take(n,{roleCredentials:F._json});return Object.assign(r,o),r},Nq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ud(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ei.parseJsonBody(e.body,t)),"body"),o=F.take(n,{nextToken:F.expectString,roleList:F._json});return Object.assign(r,o),r},Dq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ud(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ei.parseJsonBody(e.body,t)),"body"),o=F.take(n,{accountList:F._json,nextToken:F.expectString});return Object.assign(r,o),r},kq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ud(e,t);let r=F.map({$metadata:rn(e)});return await F.collectBody(e.body,t),r},ud=async(e,t)=>{let r={...e,body:await ei.parseJsonErrorBody(e.body,t)},n=ei.loadRestJsonErrorCode(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Lq(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Fq(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Bq(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Uq(r);default:let o=r.body;return Mq({output:e,parsedBody:o,errorCode:n})}},Mq=F.withBaseException(tn),Lq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new rd({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},Fq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new nd({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},Bq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new od({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},Uq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new sd({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},rn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),gA="accountId",fd="accessToken",yA="account_id",SA="maxResults",EA="max_result",_A="nextToken",wA="next_token",$q="roleName",Hq="role_name",md="x-amz-sso_bearer_token",id=class extends F.Command.classBuilder().ep(ld).m(function(t,r,n,o){return[dd.getSerdePlugin(n,this.serialize,this.deserialize),ni.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(lA,fA).ser(Aq).de(Oq).build(){},ti=class extends F.Command.classBuilder().ep(ld).m(function(t,r,n,o){return[dd.getSerdePlugin(n,this.serialize,this.deserialize),ni.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(mA,void 0).ser(Rq).de(Nq).build(){},ri=class extends F.Command.classBuilder().ep(ld).m(function(t,r,n,o){return[dd.getSerdePlugin(n,this.serialize,this.deserialize),ni.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(pA,void 0).ser(Iq).de(Dq).build(){},ad=class extends F.Command.classBuilder().ep(ld).m(function(t,r,n,o){return[dd.getSerdePlugin(n,this.serialize,this.deserialize),ni.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(hA,void 0).ser(Pq).de(kq).build(){},qq={GetRoleCredentialsCommand:id,ListAccountRolesCommand:ti,ListAccountsCommand:ri,LogoutCommand:ad},cd=class extends Io{};F.createAggregatedClient(qq,cd);var jq=yr.createPaginator(Io,ti,"nextToken","nextToken","maxResults"),zq=yr.createPaginator(Io,ri,"nextToken","nextToken","maxResults");Object.defineProperty(Re,"$Command",{enumerable:!0,get:function(){return F.Command}});Object.defineProperty(Re,"__Client",{enumerable:!0,get:function(){return F.Client}});Re.GetRoleCredentialsCommand=id;Re.GetRoleCredentialsRequestFilterSensitiveLog=lA;Re.GetRoleCredentialsResponseFilterSensitiveLog=fA;Re.InvalidRequestException=rd;Re.ListAccountRolesCommand=ti;Re.ListAccountRolesRequestFilterSensitiveLog=mA;Re.ListAccountsCommand=ri;Re.ListAccountsRequestFilterSensitiveLog=pA;Re.LogoutCommand=ad;Re.LogoutRequestFilterSensitiveLog=hA;Re.ResourceNotFoundException=nd;Re.RoleCredentialsFilterSensitiveLog=uA;Re.SSO=cd;Re.SSOClient=Io;Re.SSOServiceException=tn;Re.TooManyRequestsException=od;Re.UnauthorizedException=sd;Re.paginateListAccountRoles=jq;Re.paginateListAccounts=zq});var CA=I(Bh=>{"use strict";c();var bA=xA();Object.defineProperty(Bh,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return bA.GetRoleCredentialsCommand}});Object.defineProperty(Bh,"SSOClient",{enumerable:!0,get:function(){return bA.SSOClient}})});var Uh=I(hd=>{"use strict";c();var Rt=Ze(),pd=ur(),TA=(vt(),Y(Mr)),Vq=Nh(),AA=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),oi=!1,vA=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,profile:d,filepath:l,configFilepath:m,ignoreCache:h,logger:S})=>{let y,w="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Oe=await Vq.fromSso({profile:d,filepath:l,configFilepath:m,ignoreCache:h})();y={accessToken:Oe.token,expiresAt:new Date(Oe.expiration).toISOString()}}catch(Oe){throw new Rt.CredentialsProviderError(Oe.message,{tryNextLink:oi,logger:S})}else try{y=await pd.getSSOTokenFromFile(e)}catch{throw new Rt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${w}`,{tryNextLink:oi,logger:S})}if(new Date(y.expiresAt).getTime()-Date.now()<=0)throw new Rt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${w}`,{tryNextLink:oi,logger:S});let{accessToken:R}=y,{SSOClient:P,GetRoleCredentialsCommand:N}=await Promise.resolve().then(function(){return CA()}),k=s||new P(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n})),$;try{$=await k.send(new N({accountId:r,roleName:o,accessToken:R}))}catch(Oe){throw new Rt.CredentialsProviderError(Oe,{tryNextLink:oi,logger:S})}let{roleCredentials:{accessKeyId:z,secretAccessKey:q,sessionToken:re,expiration:ze,credentialScope:tt,accountId:_e}={}}=$;if(!z||!q||!re||!ze)throw new Rt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:oi,logger:S});let de={accessKeyId:z,secretAccessKey:q,sessionToken:re,expiration:new Date(ze),...tt&&{credentialScope:tt},..._e&&{accountId:_e}};return t?TA.setCredentialFeature(de,"CREDENTIALS_SSO","s"):TA.setCredentialFeature(de,"CREDENTIALS_SSO_LEGACY","u"),de},RA=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new Rt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},Gq=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,d=pd.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let m=(await pd.parseKnownFiles(e))[d];if(!m)throw new Rt.CredentialsProviderError(`Profile ${d} was not found.`,{logger:e.logger});if(!AA(m))throw new Rt.CredentialsProviderError(`Profile ${d} is not configured with SSO credentials.`,{logger:e.logger});if(m?.sso_session){let N=(await pd.loadSsoSessionData(e))[m.sso_session],k=` configurations in profile ${d} and sso-session ${m.sso_session}`;if(o&&o!==N.sso_region)throw new Rt.CredentialsProviderError("Conflicting SSO region"+k,{tryNextLink:!1,logger:e.logger});if(r&&r!==N.sso_start_url)throw new Rt.CredentialsProviderError("Conflicting SSO start_url"+k,{tryNextLink:!1,logger:e.logger});m.sso_region=N.sso_region,m.sso_start_url=N.sso_start_url}let{sso_start_url:h,sso_account_id:S,sso_region:y,sso_role_name:w,sso_session:R}=RA(m,e.logger);return vA({ssoStartUrl:h,ssoSession:R,ssoAccountId:S,ssoRegion:y,ssoRoleName:w,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:d,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!o||!s)throw new Rt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return vA({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:d,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};hd.fromSSO=Gq;hd.isSsoProfile=AA;hd.validateSsoProfile=RA});function Wq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Kq(e){return{schemeId:"smithy.api#noAuth"}}var si,IA,PA,Yq,OA,$h=T(()=>{c();ve();si=v(Xe());ii();IA=async(e,t,r)=>({operation:(0,si.getSmithyContext)(t).operation,region:await(0,si.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});PA=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(Kq(e));break}default:t.push(Wq(e))}return t},Yq=e=>Object.assign(e,{stsClientCtor:$t}),OA=e=>{let t=Yq(e),r=bn(t);return Object.assign(r,{authSchemePreference:(0,si.normalizeProvider)(e.authSchemePreference??[])})}});var NA,gd,yd=T(()=>{c();NA=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),gd={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var jA,J,se,nn,qe,zA,VA,we,DA,Ht,Po,qh,kA,Hh,GA,MA,je,LA,WA,KA,Ye,mt,FA,YA,JA,BA,XA,UA,$A,HA,qA,Jq,QA,ZA=T(()=>{c();jA="required",J="type",se="argv",nn="booleanEquals",qe="stringEquals",zA="sigv4",VA="us-east-1",we="endpoint",DA="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ht="tree",Po="error",qh="getAttr",kA={[jA]:!1,[J]:"String"},Hh={[jA]:!0,default:!1,[J]:"Boolean"},GA={ref:"Endpoint"},MA={fn:"isSet",[se]:[{ref:"Region"}]},je={ref:"Region"},LA={fn:"aws.partition",[se]:[je],assign:"PartitionResult"},WA={ref:"UseFIPS"},KA={ref:"UseDualStack"},Ye={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:zA,signingName:"sts",signingRegion:VA}]},headers:{}},mt={},FA={conditions:[{fn:qe,[se]:[je,"aws-global"]}],[we]:Ye,[J]:we},YA={fn:nn,[se]:[WA,!0]},JA={fn:nn,[se]:[KA,!0]},BA={fn:qh,[se]:[{ref:"PartitionResult"},"supportsFIPS"]},XA={ref:"PartitionResult"},UA={fn:nn,[se]:[!0,{fn:qh,[se]:[XA,"supportsDualStack"]}]},$A=[{fn:"isSet",[se]:[GA]}],HA=[YA],qA=[JA],Jq={version:"1.0",parameters:{Region:kA,UseDualStack:Hh,UseFIPS:Hh,Endpoint:kA,UseGlobalEndpoint:Hh},rules:[{conditions:[{fn:nn,[se]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[se]:$A},MA,LA,{fn:nn,[se]:[WA,!1]},{fn:nn,[se]:[KA,!1]}],rules:[{conditions:[{fn:qe,[se]:[je,"ap-northeast-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-south-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-southeast-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-southeast-2"]}],endpoint:Ye,[J]:we},FA,{conditions:[{fn:qe,[se]:[je,"ca-central-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-central-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-north-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-2"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-3"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"sa-east-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,VA]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-east-2"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-west-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-west-2"]}],endpoint:Ye,[J]:we},{endpoint:{url:DA,properties:{authSchemes:[{name:zA,signingName:"sts",signingRegion:"{Region}"}]},headers:mt},[J]:we}],[J]:Ht},{conditions:$A,rules:[{conditions:HA,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[J]:Po},{conditions:qA,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[J]:Po},{endpoint:{url:GA,properties:mt,headers:mt},[J]:we}],[J]:Ht},{conditions:[MA],rules:[{conditions:[LA],rules:[{conditions:[YA,JA],rules:[{conditions:[{fn:nn,[se]:[!0,BA]},UA],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[J]:Po}],[J]:Ht},{conditions:HA,rules:[{conditions:[{fn:nn,[se]:[BA,!0]}],rules:[{conditions:[{fn:qe,[se]:[{fn:qh,[se]:[XA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:mt,headers:mt},[J]:we},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"FIPS is enabled but this partition does not support FIPS",[J]:Po}],[J]:Ht},{conditions:qA,rules:[{conditions:[UA],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"DualStack is enabled but this partition does not support DualStack",[J]:Po}],[J]:Ht},FA,{endpoint:{url:DA,properties:mt,headers:mt},[J]:we}],[J]:Ht}],[J]:Ht},{error:"Invalid Configuration: Missing Region",[J]:Po}]},QA=Jq});var e0,Oo,Xq,t0,r0=T(()=>{c();e0=v(_n()),Oo=v(En());ZA();Xq=new Oo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),t0=(e,t={})=>Xq.get(e,()=>(0,Oo.resolveEndpoint)(QA,{endpointParams:e,logger:t.logger}));Oo.customEndpointFunctions.aws=e0.awsEndpointFunctions});var n0,o0,Sd,Ed,s0,i0=T(()=>{c();ve();Ue();n0=v(K()),o0=v(sr()),Sd=v(Fe()),Ed=v(Le());$h();r0();s0=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Sd.fromBase64,base64Encoder:e?.base64Encoder??Sd.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??t0,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??PA,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],logger:e?.logger??new n0.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??o0.parseUrl,utf8Decoder:e?.utf8Decoder??Ed.fromUtf8,utf8Encoder:e?.utf8Encoder??Ed.toUtf8})});var _d,sn,a0,wd,on,xd,c0,d0,l0,u0,f0,m0,p0=T(()=>{c();gh();ve();_d=v(So()),sn=v(yt());Ue();a0=v(Eo()),wd=v(At()),on=v(fr()),xd=v(Ar()),c0=v(_o()),d0=v(Dn());i0();l0=v(K()),u0=v(Co()),f0=v(K()),m0=e=>{(0,f0.emitWarningIfUnsupportedVersion)(process.version);let t=(0,u0.resolveDefaultsModeConfig)(e),r=()=>t().then(l0.loadConfigsForDefaultMode),n=s0(e);ro(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,on.loadConfig)(so,o),bodyLengthChecker:e?.bodyLengthChecker??c0.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,_d.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:kc.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],maxAttempts:e?.maxAttempts??(0,on.loadConfig)(wd.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,on.loadConfig)(sn.NODE_REGION_CONFIG_OPTIONS,{...sn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:xd.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,on.loadConfig)({...wd.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||d0.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??a0.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??xd.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,on.loadConfig)(sn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,on.loadConfig)(sn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,on.loadConfig)(_d.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var h0,g0,y0=T(()=>{c();h0=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},g0=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var bd,Cd,Td,S0,E0=T(()=>{c();bd=v(To()),Cd=v(ie()),Td=v(K());y0();S0=(e,t)=>{let r=Object.assign((0,bd.getAwsRegionExtensionConfiguration)(e),(0,Td.getDefaultExtensionConfiguration)(e),(0,Cd.getHttpHandlerExtensionConfiguration)(e),h0(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,bd.resolveAwsRegionExtensionConfiguration)(r),(0,Td.resolveDefaultRuntimeConfig)(r),(0,Cd.resolveHttpHandlerRuntimeConfig)(r),g0(r))}});var vd,_0,w0,Ad,x0,b0,C0,Rd,jh,$t,ii=T(()=>{c();vd=v(zn()),_0=v(Vn()),w0=v(Gn()),Ad=v(In()),x0=v(yt());Ue();b0=v(ho()),C0=v(pr()),Rd=v(At()),jh=v(K());$h();yd();p0();E0();$t=class extends jh.Client{config;constructor(...[t]){let r=m0(t||{});super(r),this.initConfig=r;let n=NA(r),o=(0,Ad.resolveUserAgentConfig)(n),s=(0,Rd.resolveRetryConfig)(o),i=(0,x0.resolveRegionConfig)(s),a=(0,vd.resolveHostHeaderConfig)(i),d=(0,C0.resolveEndpointConfig)(a),l=OA(d),m=S0(l,t?.extensions||[]);this.config=m,this.middlewareStack.use((0,Ad.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Rd.getRetryPlugin)(this.config)),this.middlewareStack.use((0,b0.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,vd.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,_0.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,w0.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Yo(this.config,{httpAuthSchemeParametersProvider:IA,identityProviderConfigProvider:async h=>new yn({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Jo(this.config))}destroy(){super.destroy()}}});var T0,at,Id=T(()=>{c();T0=v(K()),at=class e extends T0.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var zh,Vh,Gh,ai,ci,di,li,ui,fi,Wh,Kh,mi,pi=T(()=>{c();zh=v(K());Id();Vh=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:zh.SENSITIVE_STRING}}),Gh=e=>({...e,...e.Credentials&&{Credentials:Vh(e.Credentials)}}),ai=class e extends at{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ci=class e extends at{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},di=class e extends at{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},li=class e extends at{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ui=class e extends at{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fi=class e extends at{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wh=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:zh.SENSITIVE_STRING}}),Kh=e=>({...e,...e.Credentials&&{Credentials:Vh(e.Credentials)}}),mi=class e extends at{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var v0,Q,A0,R0,I0,P0,O0,Qq,Zq,e2,t2,r2,n2,o2,s2,i2,N0,a2,c2,d2,l2,u2,f2,D0,m2,p2,k0,h2,g2,y2,S2,E2,_2,w2,Er,x2,M0,L0,F0,B0,Yh,b2,Jh,No,C2,Xh,Qh,Do,Zh,ko,eg,tg,rg,Mo,Lo,ng,og,sg,Fo,ig,Bo,Uo,ag,cg,Sr,dg,lg,ug,fg,mg,U0,pg,hg,gg,De,$0,T2,yg=T(()=>{c();ve();v0=v(ie()),Q=v(K());pi();Id();A0=async(e,t)=>{let r=L0,n;return n=$0({...s2(e,t),[B0]:b2,[U0]:F0}),M0(t,r,"/",void 0,n)},R0=async(e,t)=>{let r=L0,n;return n=$0({...i2(e,t),[B0]:C2,[U0]:F0}),M0(t,r,"/",void 0,n)},I0=async(e,t)=>{if(e.statusCode>=300)return O0(e,t);let r=await bs(e.body,t),n={};return n=m2(r.AssumeRoleResult,t),{$metadata:Er(e),...n}},P0=async(e,t)=>{if(e.statusCode>=300)return O0(e,t);let r=await bs(e.body,t),n={};return n=p2(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Er(e),...n}},O0=async(e,t)=>{let r={...e,body:await hp(e.body,t)},n=T2(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Qq(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await r2(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await n2(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await o2(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Zq(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await e2(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await t2(r,t);default:let o=r.body;return x2({output:e,parsedBody:o.Error,errorCode:n})}},Qq=async(e,t)=>{let r=e.body,n=h2(r.Error,t),o=new ai({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},Zq=async(e,t)=>{let r=e.body,n=g2(r.Error,t),o=new mi({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},e2=async(e,t)=>{let r=e.body,n=y2(r.Error,t),o=new ui({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},t2=async(e,t)=>{let r=e.body,n=S2(r.Error,t),o=new fi({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},r2=async(e,t)=>{let r=e.body,n=E2(r.Error,t),o=new ci({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},n2=async(e,t)=>{let r=e.body,n=_2(r.Error,t),o=new di({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},o2=async(e,t)=>{let r=e.body,n=w2(r.Error,t),o=new li({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},s2=(e,t)=>{let r={};if(e[Bo]!=null&&(r[Bo]=e[Bo]),e[Uo]!=null&&(r[Uo]=e[Uo]),e[Lo]!=null){let n=N0(e[Lo],t);e[Lo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[Mo]!=null&&(r[Mo]=e[Mo]),e[ko]!=null&&(r[ko]=e[ko]),e[ug]!=null){let n=f2(e[ug],t);e[ug]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e[mg]!=null){let n=u2(e[mg],t);e[mg]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e[tg]!=null&&(r[tg]=e[tg]),e[dg]!=null&&(r[dg]=e[dg]),e[fg]!=null&&(r[fg]=e[fg]),e[Sr]!=null&&(r[Sr]=e[Sr]),e[og]!=null){let n=d2(e[og],t);e[og]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r},i2=(e,t)=>{let r={};if(e[Bo]!=null&&(r[Bo]=e[Bo]),e[Uo]!=null&&(r[Uo]=e[Uo]),e[hg]!=null&&(r[hg]=e[hg]),e[sg]!=null&&(r[sg]=e[sg]),e[Lo]!=null){let n=N0(e[Lo],t);e[Lo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[Mo]!=null&&(r[Mo]=e[Mo]),e[ko]!=null&&(r[ko]=e[ko]),r},N0=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=a2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},a2=(e,t)=>{let r={};return e[gg]!=null&&(r[gg]=e[gg]),r},c2=(e,t)=>{let r={};return e[ng]!=null&&(r[ng]=e[ng]),e[Zh]!=null&&(r[Zh]=e[Zh]),r},d2=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=c2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},l2=(e,t)=>{let r={};return e[rg]!=null&&(r[rg]=e[rg]),e[pg]!=null&&(r[pg]=e[pg]),r},u2=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},f2=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=l2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},D0=(e,t)=>{let r={};return e[Jh]!=null&&(r[Jh]=(0,Q.expectString)(e[Jh])),e[Xh]!=null&&(r[Xh]=(0,Q.expectString)(e[Xh])),r},m2=(e,t)=>{let r={};return e[Do]!=null&&(r[Do]=k0(e[Do],t)),e[No]!=null&&(r[No]=D0(e[No],t)),e[Fo]!=null&&(r[Fo]=(0,Q.strictParseInt32)(e[Fo])),e[Sr]!=null&&(r[Sr]=(0,Q.expectString)(e[Sr])),r},p2=(e,t)=>{let r={};return e[Do]!=null&&(r[Do]=k0(e[Do],t)),e[cg]!=null&&(r[cg]=(0,Q.expectString)(e[cg])),e[No]!=null&&(r[No]=D0(e[No],t)),e[Fo]!=null&&(r[Fo]=(0,Q.strictParseInt32)(e[Fo])),e[ig]!=null&&(r[ig]=(0,Q.expectString)(e[ig])),e[Qh]!=null&&(r[Qh]=(0,Q.expectString)(e[Qh])),e[Sr]!=null&&(r[Sr]=(0,Q.expectString)(e[Sr])),r},k0=(e,t)=>{let r={};return e[Yh]!=null&&(r[Yh]=(0,Q.expectString)(e[Yh])),e[ag]!=null&&(r[ag]=(0,Q.expectString)(e[ag])),e[lg]!=null&&(r[lg]=(0,Q.expectString)(e[lg])),e[eg]!=null&&(r[eg]=(0,Q.expectNonNull)((0,Q.parseRfc3339DateTimeWithOffset)(e[eg]))),r},h2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},g2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},y2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},S2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},E2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},_2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},w2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},Er=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),x2=(0,Q.withBaseException)(at),M0=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return n!==void 0&&(l.hostname=n),o!==void 0&&(l.body=o),new v0.HttpRequest(l)},L0={"content-type":"application/x-www-form-urlencoded"},F0="2011-06-15",B0="Action",Yh="AccessKeyId",b2="AssumeRole",Jh="AssumedRoleId",No="AssumedRoleUser",C2="AssumeRoleWithWebIdentity",Xh="Arn",Qh="Audience",Do="Credentials",Zh="ContextAssertion",ko="DurationSeconds",eg="Expiration",tg="ExternalId",rg="Key",Mo="Policy",Lo="PolicyArns",ng="ProviderArn",og="ProvidedContexts",sg="ProviderId",Fo="PackedPolicySize",ig="Provider",Bo="RoleArn",Uo="RoleSessionName",ag="SecretAccessKey",cg="SubjectFromWebIdentityToken",Sr="SourceIdentity",dg="SerialNumber",lg="SessionToken",ug="Tags",fg="TokenCode",mg="TransitiveTagKeys",U0="Version",pg="Value",hg="WebIdentityToken",gg="arn",De="message",$0=e=>Object.entries(e).map(([t,r])=>(0,Q.extendedEncodeURIComponent)(t)+"="+(0,Q.extendedEncodeURIComponent)(r)).join("&"),T2=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var H0,q0,j0,Bn,Pd=T(()=>{c();H0=v(pr()),q0=v(Qt()),j0=v(K());yd();pi();yg();Bn=class extends j0.Command.classBuilder().ep(gd).m(function(t,r,n,o){return[(0,q0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,H0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Gh).ser(A0).de(I0).build(){}});var z0,V0,G0,Un,Od=T(()=>{c();z0=v(pr()),V0=v(Qt()),G0=v(K());yd();pi();yg();Un=class extends G0.Command.classBuilder().ep(gd).m(function(t,r,n,o){return[(0,V0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,z0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Wh,Kh).ser(R0).de(P0).build(){}});var W0,v2,Nd,K0=T(()=>{c();W0=v(K());Pd();Od();ii();v2={AssumeRoleCommand:Bn,AssumeRoleWithWebIdentityCommand:Un},Nd=class extends $t{};(0,W0.createAggregatedClient)(v2,Nd)});var Y0=T(()=>{c();Pd();Od()});var J0=T(()=>{c();pi()});var X0,Q0,Z0,eR,tR,rR,nR=T(()=>{c();vt();Pd();Od();X0="us-east-1",Q0=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},Z0=async(e,t,r)=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${X0} (STS default)`),n??o??X0},eR=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:m=e?.parentClientConfig?.logger,region:h,requestHandler:S=e?.parentClientConfig?.requestHandler,credentialProviderLogger:y}=e,w=await Z0(h,e?.parentClientConfig?.region,y),R=!rR(S);r=new t({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>n,region:w,requestHandler:R?S:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Bn(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let d=Q0(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...d&&{accountId:d}};return kr(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},tR=(e,t)=>{let r;return async n=>{if(!r){let{logger:d=e?.parentClientConfig?.logger,region:l,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=e,S=await Z0(l,e?.parentClientConfig?.region,h),y=!rR(m);r=new t({profile:e?.parentClientConfig?.profile,region:S,requestHandler:y?m:void 0,logger:d})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new Un(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=Q0(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&kr(a,"RESOLVED_ACCOUNT_ID","T"),kr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},rR=e=>e?.metadata?.handlerProtocol==="h2"});var oR,sR,iR,A2,aR=T(()=>{c();nR();ii();oR=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,sR=(e={},t)=>eR(e,oR($t,t)),iR=(e={},t)=>tR(e,oR($t,t)),A2=e=>t=>e({roleAssumer:sR(t),roleAssumerWithWebIdentity:iR(t),...t})});var Sg={};Ct(Sg,{AssumeRoleCommand:()=>Bn,AssumeRoleResponseFilterSensitiveLog:()=>Gh,AssumeRoleWithWebIdentityCommand:()=>Un,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Wh,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Kh,CredentialsFilterSensitiveLog:()=>Vh,ExpiredTokenException:()=>ai,IDPCommunicationErrorException:()=>mi,IDPRejectedClaimException:()=>ui,InvalidIdentityTokenException:()=>fi,MalformedPolicyDocumentException:()=>ci,PackedPolicyTooLargeException:()=>di,RegionDisabledException:()=>li,STS:()=>Nd,STSClient:()=>$t,STSServiceException:()=>at,__Client:()=>jh.Client,decorateDefaultCredentialProvider:()=>A2,getDefaultRoleAssumer:()=>sR,getDefaultRoleAssumerWithWebIdentity:()=>iR});var Eg=T(()=>{c();ii();K0();Y0();J0();aR();Id()});var xg=I(cR=>{"use strict";c();var wg=ur(),_g=Ze(),R2=ee("child_process"),I2=ee("util"),P2=(vt(),Y(Mr)),O2=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return P2.setCredentialFeature(o,"CREDENTIALS_PROCESS","w"),o},N2=async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=I2.promisify(wg.externalDataInterceptor?.getTokenRecord?.().exec??R2.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return O2(e,a,t)}catch(i){throw new _g.CredentialsProviderError(i.message,{logger:r})}}else throw new _g.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new _g.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},D2=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await wg.parseKnownFiles(e);return N2(wg.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};cR.fromProcess=D2});var bg=I(qt=>{"use strict";c();var k2=qt&&qt.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),M2=qt&&qt.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),L2=qt&&qt.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&k2(r,t,n[o]);return M2(r,t),r}})();Object.defineProperty(qt,"__esModule",{value:!0});qt.fromWebToken=void 0;var F2=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:d}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:m}=await Promise.resolve().then(()=>L2((Eg(),Y(Sg))));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:d})};qt.fromWebToken=F2});var lR=I(Dd=>{"use strict";c();Object.defineProperty(Dd,"__esModule",{value:!0});Dd.fromTokenFile=void 0;var B2=(vt(),Y(Mr)),U2=Ze(),$2=ur(),H2=ee("fs"),q2=bg(),dR="AWS_WEB_IDENTITY_TOKEN_FILE",j2="AWS_ROLE_ARN",z2="AWS_ROLE_SESSION_NAME",V2=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=e?.webIdentityTokenFile??process.env[dR],r=e?.roleArn??process.env[j2],n=e?.roleSessionName??process.env[z2];if(!t||!r)throw new U2.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,q2.fromWebToken)({...e,webIdentityToken:$2.externalDataInterceptor?.getTokenRecord?.()[t]??(0,H2.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[dR]&&(0,B2.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};Dd.fromTokenFile=V2});var Cg=I(hi=>{"use strict";c();var uR=lR(),fR=bg();Object.keys(uR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(hi,e)&&Object.defineProperty(hi,e,{enumerable:!0,get:function(){return uR[e]}})});Object.keys(fR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(hi,e)&&Object.defineProperty(hi,e,{enumerable:!0,get:function(){return fR[e]}})})});var SR=I(yR=>{"use strict";c();var vg=ur(),gi=Ze(),an=(vt(),Y(Mr)),G2=(e,t,r)=>{let n={EcsContainer:async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>v(mh())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>v(Ms()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>gi.chain(s(o??{}),i(o))().then(Tg)},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>v(Ms()));return async()=>s(o)().then(Tg)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>v(sh()));return async()=>s(o)().then(Tg)}};if(e in n)return n[e];throw new gi.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},Tg=e=>an.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),W2=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(K2(e,{profile:t,logger:r})||Y2(e,{profile:t,logger:r})),K2=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},Y2=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},J2=async(e,t,r,n={})=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:s,region:i}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(Eg(),Sg));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:i??r?.parentClientConfig?.region}},r.clientPlugins)}if(s&&s in n)throw new gi.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${vg.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${s?`source_profile=[${s}]`:`profile=[${e}]`}`);let a=s?gR(s,t,r,{...n,[s]:!0},mR(t[s]??{})):(await G2(o.credential_source,e,r.logger)(r))();if(mR(o))return a.then(d=>an.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new gi.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let m=await a;return r.roleAssumer(m,d).then(h=>an.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},mR=e=>!e.role_arn&&!!e.credential_source,X2=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Q2=async(e,t)=>Promise.resolve().then(()=>v(xg())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>an.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),Z2=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>v(Uh()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(o=>t.sso_session?an.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):an.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},ej=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),pR=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,hR=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return an.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},tj=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,rj=async(e,t)=>Promise.resolve().then(()=>v(Cg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>an.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),gR=async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&pR(s))return hR(s,r);if(o||W2(s,{profile:e,logger:r.logger}))return J2(e,t,r,n);if(pR(s))return hR(s,r);if(tj(s))return rj(s,r);if(X2(s))return Q2(r,e);if(ej(s))return await Z2(e,s,r);throw new gi.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},nj=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await vg.parseKnownFiles(r);return gR(vg.getProfileName({profile:e.profile??t?.profile}),n,r)};yR.fromIni=nj});var Rg=I(kd=>{"use strict";c();var Ag=sh(),$n=Ze(),oj=ur(),ER="AWS_EC2_METADATA_DISABLED",sj=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>v(Ms()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>v(mh()));return $n.chain(s(e),n(e))}return process.env[ER]&&process.env[ER]!=="false"?async()=>{throw new $n.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))},_R=!1,ij=(e={})=>$n.memoize($n.chain(async()=>{if(e.profile??process.env[oj.ENV_PROFILE])throw process.env[Ag.ENV_KEY]&&process.env[Ag.ENV_SECRET]&&(_R||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),_R=!0)),new $n.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Ag.fromEnv(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e;if(!t&&!r&&!n&&!o&&!s)throw new $n.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:i}=await Promise.resolve().then(()=>v(Uh()));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>v(SR()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>v(xg()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>v(Cg()));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await sj(e))()),async()=>{throw new $n.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),xR,wR),wR=e=>e?.expiration!==void 0,xR=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;kd.credentialsTreatedAsExpired=xR;kd.credentialsWillNeedRefresh=wR;kd.defaultProvider=ij});var vR=I((koe,TR)=>{"use strict";c();var Ld=Object.defineProperty,aj=Object.getOwnPropertyDescriptor,cj=Object.getOwnPropertyNames,dj=Object.prototype.hasOwnProperty,Fd=(e,t)=>Ld(e,"name",{value:t,configurable:!0}),lj=(e,t)=>{for(var r in t)Ld(e,r,{get:t[r],enumerable:!0})},uj=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cj(t))!dj.call(e,o)&&o!==r&&Ld(e,o,{get:()=>t[o],enumerable:!(n=aj(t,o))||n.enumerable});return e},fj=e=>uj(Ld({},"__esModule",{value:!0}),e),bR={};lj(bR,{eventStreamPayloadHandlerProvider:()=>gj});TR.exports=fj(bR);var mj=uc(),Md=ee("stream"),pj=class extends Md.Transform{static{Fd(this,"EventSigningStream")}priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...e}),this.priorSignature=e.priorSignature,this.eventStreamCodec=e.eventStreamCodec,this.messageSigner=e.messageSigner,this.systemClockOffsetProvider=e.systemClockOffsetProvider}async _transform(e,t,r){try{let n=new Date(Date.now()+await this.systemClockOffsetProvider()),o={":date":{type:"timestamp",value:n}},s=await this.messageSigner.sign({message:{body:e,headers:o},priorSignature:this.priorSignature},{signingDate:n});this.priorSignature=s.signature;let i=this.eventStreamCodec.encode({headers:{...o,":chunk-signature":{type:"binary",value:CR(s.signature)}},body:e});return this.push(i),r()}catch(n){r(n)}}};function CR(e){let t=Buffer.from(e,"hex");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}Fd(CR,"getSignatureBinary");var hj=class{static{Fd(this,"EventStreamPayloadHandler")}messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new mj.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,t,r={}){let n=t.request,{body:o,query:s}=n;if(!(o instanceof Md.Readable))throw new Error("Eventstream payload must be a Readable stream.");let i=o;n.body=new Md.PassThrough({objectMode:!0});let d=n.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??s?.["X-Amz-Signature"]??"",l=new pj({priorSignature:d,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});(0,Md.pipeline)(i,l,n.body,h=>{if(h)throw h});let m;try{m=await e(t)}catch(h){throw n.body.end(),h}return m}},gj=Fd(e=>new hj(e),"eventStreamPayloadHandlerProvider")});var AR=I(Ig=>{"use strict";c();var yj=Mp(),Sj=ee("stream");async function*Ej(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Bd=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new yj.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:Ej(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return Sj.Readable.from(this.universalMarshaller.serialize(t,r))}},_j=e=>new Bd(e);Ig.EventStreamMarshaller=Bd;Ig.eventStreamSerdeProvider=_j});var HR=I(Ud=>{"use strict";c();Object.defineProperty(Ud,"__esModule",{value:!0});Ud.ruleSet=void 0;var BR="required",zt="fn",Vt="argv",Ho="ref",RR=!0,IR="isSet",Si="booleanEquals",$o="error",yi="endpoint",et="tree",Pg="PartitionResult",PR={[BR]:!1,type:"String"},OR={[BR]:!0,default:!1,type:"Boolean"},NR={[Ho]:"Endpoint"},UR={[zt]:Si,[Vt]:[{[Ho]:"UseFIPS"},!0]},$R={[zt]:Si,[Vt]:[{[Ho]:"UseDualStack"},!0]},jt={},DR={[zt]:"getAttr",[Vt]:[{[Ho]:Pg},"supportsFIPS"]},kR={[zt]:Si,[Vt]:[!0,{[zt]:"getAttr",[Vt]:[{[Ho]:Pg},"supportsDualStack"]}]},MR=[UR],LR=[$R],FR=[{[Ho]:"Region"}],wj={version:"1.0",parameters:{Region:PR,UseDualStack:OR,UseFIPS:OR,Endpoint:PR},rules:[{conditions:[{[zt]:IR,[Vt]:[NR]}],rules:[{conditions:MR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:$o},{rules:[{conditions:LR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:$o},{endpoint:{url:NR,properties:jt,headers:jt},type:yi}],type:et}],type:et},{rules:[{conditions:[{[zt]:IR,[Vt]:FR}],rules:[{conditions:[{[zt]:"aws.partition",[Vt]:FR,assign:Pg}],rules:[{conditions:[UR,$R],rules:[{conditions:[{[zt]:Si,[Vt]:[RR,DR]},kR],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:yi}],type:et}],type:et},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:$o}],type:et},{conditions:MR,rules:[{conditions:[{[zt]:Si,[Vt]:[DR,RR]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:yi}],type:et}],type:et},{error:"FIPS is enabled but this partition does not support FIPS",type:$o}],type:et},{conditions:LR,rules:[{conditions:[kR],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:yi}],type:et}],type:et},{error:"DualStack is enabled but this partition does not support DualStack",type:$o}],type:et},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:yi}],type:et}],type:et}],type:et},{error:"Invalid Configuration: Missing Region",type:$o}],type:et}]};Ud.ruleSet=wj});var qR=I($d=>{"use strict";c();Object.defineProperty($d,"__esModule",{value:!0});$d.defaultEndpointResolver=void 0;var xj=_n(),Og=En(),bj=HR(),Cj=new Og.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Tj=(e,t={})=>Cj.get(e,()=>(0,Og.resolveEndpoint)(bj.ruleSet,{endpointParams:e,logger:t.logger}));$d.defaultEndpointResolver=Tj;Og.customEndpointFunctions.aws=xj.awsEndpointFunctions});var VR=I(Hd=>{"use strict";c();Object.defineProperty(Hd,"__esModule",{value:!0});Hd.getRuntimeConfig=void 0;var vj=(ve(),Y(st)),Aj=(Ue(),Y(kt)),Rj=K(),Ij=sr(),jR=Fe(),zR=Le(),Pj=oh(),Oj=qR(),Nj=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??jR.fromBase64,base64Encoder:e?.base64Encoder??jR.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Oj.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Pj.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new vj.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new Aj.HttpBearerAuthSigner}],logger:e?.logger??new Rj.NoOpLogger,serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??Ij.parseUrl,utf8Decoder:e?.utf8Decoder??zR.fromUtf8,utf8Encoder:e?.utf8Encoder??zR.toUtf8});Hd.getRuntimeConfig=Nj});var JR=I(jd=>{"use strict";c();Object.defineProperty(jd,"__esModule",{value:!0});jd.getRuntimeConfig=void 0;var Dj=(Or(),Y(Pr)),kj=Dj.__importDefault(qC()),Ng=(ve(),Y(st)),Mj=Rg(),Lj=vR(),GR=Nh(),WR=So(),qd=yt(),Fj=(Ue(),Y(kt)),Bj=AR(),Uj=Eo(),KR=At(),Hn=fr(),YR=Ar(),$j=_o(),Hj=Dn(),qj=VR(),jj=K(),zj=Co(),Vj=K(),Gj=e=>{(0,Vj.emitWarningIfUnsupportedVersion)(process.version);let t=(0,zj.resolveDefaultsModeConfig)(e),r=()=>t().then(jj.loadConfigsForDefaultMode),n=(0,qj.getRuntimeConfig)(e);(0,Ng.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Hn.loadConfig)(Ng.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??$j.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??Mj.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,WR.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:kj.default.version}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??Lj.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Bj.eventStreamSerdeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new Ng.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,GR.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,GR.nodeProvider)(i)(i)}}),signer:new Fj.HttpBearerAuthSigner}],maxAttempts:e?.maxAttempts??(0,Hn.loadConfig)(KR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Hn.loadConfig)(qd.NODE_REGION_CONFIG_OPTIONS,{...qd.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:YR.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,Hn.loadConfig)({...KR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Hj.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Uj.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??YR.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Hn.loadConfig)(qd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Hn.loadConfig)(qd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Hn.loadConfig)(WR.NODE_APP_ID_CONFIG_OPTIONS,o)}};jd.getRuntimeConfig=Gj});var SP=I(E=>{"use strict";c();var lI=uy(),XR=zn(),Wj=Vn(),Kj=Gn(),QR=In(),uI=Fb(),Yj=yt(),ct=(Ue(),Y(kt)),Jj=Yb(),Xj=ho(),It=pr(),ZR=At(),p=K(),eI=oh(),Qj=JR(),tI=To(),rI=ie(),Gt=Qt(),te=(ve(),Y(st)),Zj=as(),ez=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),Wt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},tz=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials,o=e.token;return{setHttpAuthScheme(s){let i=t.findIndex(a=>a.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n},setToken(s){o=s},token(){return o}}},rz=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials(),token:e.token()}),nz=(e,t)=>{let r=Object.assign(tI.getAwsRegionExtensionConfiguration(e),p.getDefaultExtensionConfiguration(e),rI.getHttpHandlerExtensionConfiguration(e),tz(e));return t.forEach(n=>n.configure(r)),Object.assign(e,tI.resolveAwsRegionExtensionConfiguration(r),p.resolveDefaultRuntimeConfig(r),rI.resolveHttpHandlerRuntimeConfig(r),rz(r))},Ei=class extends p.Client{config;constructor(...[t]){let r=Qj.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=ez(r),o=QR.resolveUserAgentConfig(n),s=ZR.resolveRetryConfig(o),i=Yj.resolveRegionConfig(s),a=XR.resolveHostHeaderConfig(i),d=It.resolveEndpointConfig(a),l=Jj.resolveEventStreamSerdeConfig(d),m=eI.resolveHttpAuthSchemeConfig(l),h=lI.resolveEventStreamConfig(m),S=uI.resolveWebSocketConfig(h),y=nz(S,t?.extensions||[]);this.config=y,this.middlewareStack.use(QR.getUserAgentPlugin(this.config)),this.middlewareStack.use(ZR.getRetryPlugin(this.config)),this.middlewareStack.use(Xj.getContentLengthPlugin(this.config)),this.middlewareStack.use(XR.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Wj.getLoggerPlugin(this.config)),this.middlewareStack.use(Kj.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ct.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:eI.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async w=>new ct.DefaultIdentityProviderConfig({"aws.auth#sigv4":w.credentials,"smithy.api#httpBearerAuth":w.token})})),this.middlewareStack.use(ct.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Je=class e extends p.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},zd=class e extends Je{name="AccessDeniedException";$fault="client";constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};E.AsyncInvokeOutputDataConfig=void 0;(function(e){e.visit=(t,r)=>t.s3OutputDataConfig!==void 0?r.s3OutputDataConfig(t.s3OutputDataConfig):r._(t.$unknown[0],t.$unknown[1])})(E.AsyncInvokeOutputDataConfig||(E.AsyncInvokeOutputDataConfig={}));var oz={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},Vd=class e extends Je{name="InternalServerException";$fault="server";constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},Gd=class e extends Je{name="ThrottlingException";$fault="client";constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Wd=class e extends Je{name="ValidationException";$fault="client";constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sz={SUBMISSION_TIME:"SubmissionTime"},iz={ASCENDING:"Ascending",DESCENDING:"Descending"},Kd=class e extends Je{name="ConflictException";$fault="client";constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Yd=class e extends Je{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jd=class e extends Je{name="ServiceQuotaExceededException";$fault="client";constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xd=class e extends Je{name="ServiceUnavailableException";$fault="server";constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},az={JPEG:"jpeg",PNG:"png"};E.GuardrailImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailImageSource||(E.GuardrailImageSource={}));var cz={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"};E.GuardrailContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailContentBlock||(E.GuardrailContentBlock={}));var dz={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},lz={INPUT:"INPUT",OUTPUT:"OUTPUT"},uz={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},fz={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"};E.GuardrailAutomatedReasoningFinding=void 0;(function(e){e.visit=(t,r)=>t.valid!==void 0?r.valid(t.valid):t.invalid!==void 0?r.invalid(t.invalid):t.satisfiable!==void 0?r.satisfiable(t.satisfiable):t.impossible!==void 0?r.impossible(t.impossible):t.translationAmbiguous!==void 0?r.translationAmbiguous(t.translationAmbiguous):t.tooComplex!==void 0?r.tooComplex(t.tooComplex):t.noTranslations!==void 0?r.noTranslations(t.noTranslations):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailAutomatedReasoningFinding||(E.GuardrailAutomatedReasoningFinding={}));var mz={BLOCKED:"BLOCKED",NONE:"NONE"},pz={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},hz={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},gz={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},yz={BLOCKED:"BLOCKED",NONE:"NONE"},Sz={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},Ez={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},_z={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},wz={BLOCKED:"BLOCKED",NONE:"NONE"},xz={DENY:"DENY"},bz={BLOCKED:"BLOCKED",NONE:"NONE"},Cz={PROFANITY:"PROFANITY"},Tz={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},vz={DEFAULT:"default"};E.CitationLocation=void 0;(function(e){e.visit=(t,r)=>t.documentChar!==void 0?r.documentChar(t.documentChar):t.documentPage!==void 0?r.documentPage(t.documentPage):t.documentChunk!==void 0?r.documentChunk(t.documentChunk):r._(t.$unknown[0],t.$unknown[1])})(E.CitationLocation||(E.CitationLocation={}));E.CitationSourceContent=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.CitationSourceContent||(E.CitationSourceContent={}));E.CitationGeneratedContent=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.CitationGeneratedContent||(E.CitationGeneratedContent={}));var Az={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"};E.DocumentContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.DocumentContentBlock||(E.DocumentContentBlock={}));E.DocumentSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):t.text!==void 0?r.text(t.text):t.content!==void 0?r.content(t.content):r._(t.$unknown[0],t.$unknown[1])})(E.DocumentSource||(E.DocumentSource={}));var Rz={JPEG:"jpeg",PNG:"png"};E.GuardrailConverseImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailConverseImageSource||(E.GuardrailConverseImageSource={}));var Iz={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"};E.GuardrailConverseContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailConverseContentBlock||(E.GuardrailConverseContentBlock={}));var Pz={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"};E.ImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1])})(E.ImageSource||(E.ImageSource={}));E.ReasoningContentBlock=void 0;(function(e){e.visit=(t,r)=>t.reasoningText!==void 0?r.reasoningText(t.reasoningText):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):r._(t.$unknown[0],t.$unknown[1])})(E.ReasoningContentBlock||(E.ReasoningContentBlock={}));var Oz={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"};E.VideoSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1])})(E.VideoSource||(E.VideoSource={}));E.ToolResultContentBlock=void 0;(function(e){e.visit=(t,r)=>t.json!==void 0?r.json(t.json):t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):r._(t.$unknown[0],t.$unknown[1])})(E.ToolResultContentBlock||(E.ToolResultContentBlock={}));var Nz={ERROR:"error",SUCCESS:"success"};E.ContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):t.toolUse!==void 0?r.toolUse(t.toolUse):t.toolResult!==void 0?r.toolResult(t.toolResult):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citationsContent!==void 0?r.citationsContent(t.citationsContent):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlock||(E.ContentBlock={}));var Dz={ASSISTANT:"assistant",USER:"user"},kz={OPTIMIZED:"optimized",STANDARD:"standard"};E.PromptVariableValues=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.PromptVariableValues||(E.PromptVariableValues={}));E.SystemContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1])})(E.SystemContentBlock||(E.SystemContentBlock={}));E.ToolChoice=void 0;(function(e){e.visit=(t,r)=>t.auto!==void 0?r.auto(t.auto):t.any!==void 0?r.any(t.any):t.tool!==void 0?r.tool(t.tool):r._(t.$unknown[0],t.$unknown[1])})(E.ToolChoice||(E.ToolChoice={}));E.ToolInputSchema=void 0;(function(e){e.visit=(t,r)=>t.json!==void 0?r.json(t.json):r._(t.$unknown[0],t.$unknown[1])})(E.ToolInputSchema||(E.ToolInputSchema={}));E.Tool=void 0;(function(e){e.visit=(t,r)=>t.toolSpec!==void 0?r.toolSpec(t.toolSpec):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1])})(E.Tool||(E.Tool={}));E.ConverseOutput=void 0;(function(e){e.visit=(t,r)=>t.message!==void 0?r.message(t.message):r._(t.$unknown[0],t.$unknown[1])})(E.ConverseOutput||(E.ConverseOutput={}));var Mz={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},Qd=class e extends Je{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(t){super({name:"ModelErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.resourceName=t.resourceName}},Zd=class e extends Je{name="ModelNotReadyException";$fault="client";$retryable={};constructor(t){super({name:"ModelNotReadyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},el=class e extends Je{name="ModelTimeoutException";$fault="client";constructor(t){super({name:"ModelTimeoutException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Lz={ASYNC:"async",SYNC:"sync"};E.ReasoningContentBlockDelta=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):t.signature!==void 0?r.signature(t.signature):r._(t.$unknown[0],t.$unknown[1])})(E.ReasoningContentBlockDelta||(E.ReasoningContentBlockDelta={}));E.ContentBlockDelta=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.toolUse!==void 0?r.toolUse(t.toolUse):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citation!==void 0?r.citation(t.citation):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlockDelta||(E.ContentBlockDelta={}));E.ContentBlockStart=void 0;(function(e){e.visit=(t,r)=>t.toolUse!==void 0?r.toolUse(t.toolUse):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlockStart||(E.ContentBlockStart={}));var tl=class e extends Je{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(t){super({name:"ModelStreamErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.originalMessage=t.originalMessage}};E.ConverseStreamOutput=void 0;(function(e){e.visit=(t,r)=>t.messageStart!==void 0?r.messageStart(t.messageStart):t.contentBlockStart!==void 0?r.contentBlockStart(t.contentBlockStart):t.contentBlockDelta!==void 0?r.contentBlockDelta(t.contentBlockDelta):t.contentBlockStop!==void 0?r.contentBlockStop(t.contentBlockStop):t.messageStop!==void 0?r.messageStop(t.messageStop):t.metadata!==void 0?r.metadata(t.metadata):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.ConverseStreamOutput||(E.ConverseStreamOutput={}));var Fz={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};E.InvokeModelWithBidirectionalStreamInput=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):r._(t.$unknown[0],t.$unknown[1])})(E.InvokeModelWithBidirectionalStreamInput||(E.InvokeModelWithBidirectionalStreamInput={}));E.InvokeModelWithBidirectionalStreamOutput=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.InvokeModelWithBidirectionalStreamOutput||(E.InvokeModelWithBidirectionalStreamOutput={}));E.ResponseStream=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.ResponseStream||(E.ResponseStream={}));E.CountTokensInput=void 0;(function(e){e.visit=(t,r)=>t.invokeModel!==void 0?r.invokeModel(t.invokeModel):t.converse!==void 0?r.converse(t.converse):r._(t.$unknown[0],t.$unknown[1])})(E.CountTokensInput||(E.CountTokensInput={}));var fI=e=>({...e,...e.failureMessage&&{failureMessage:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),mI=e=>({...e,...e.failureMessage&&{failureMessage:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),pI=e=>({...e,...e.asyncInvokeSummaries&&{asyncInvokeSummaries:e.asyncInvokeSummaries.map(t=>mI(t))}}),hI=e=>({...e,...e.modelInput&&{modelInput:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),Bz=e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},Uz=e=>({...e,...e.source&&{source:p.SENSITIVE_STRING}}),gI=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},yI=e=>({...e,...e.content&&{content:e.content.map(t=>gI(t))}}),qo=e=>({...e,...e.logic&&{logic:p.SENSITIVE_STRING},...e.naturalLanguage&&{naturalLanguage:p.SENSITIVE_STRING}}),wi=e=>({...e,...e.premises&&{premises:e.premises.map(t=>qo(t))},...e.claims&&{claims:e.claims.map(t=>qo(t))}}),Dg=e=>({...e,...e.text&&{text:p.SENSITIVE_STRING}}),xi=e=>({...e,...e.premises&&{premises:e.premises.map(t=>qo(t))},...e.claims&&{claims:e.claims.map(t=>qo(t))},...e.untranslatedPremises&&{untranslatedPremises:e.untranslatedPremises.map(t=>Dg(t))},...e.untranslatedClaims&&{untranslatedClaims:e.untranslatedClaims.map(t=>Dg(t))}}),SI=e=>({...e,...e.translation&&{translation:xi(e.translation)},...e.logicWarning&&{logicWarning:wi(e.logicWarning)}}),EI=e=>({...e,...e.translation&&{translation:xi(e.translation)},...e.logicWarning&&{logicWarning:wi(e.logicWarning)}}),rl=e=>({...e,...e.statements&&{statements:e.statements.map(t=>qo(t))}}),_I=e=>({...e,...e.translation&&{translation:xi(e.translation)},...e.claimsTrueScenario&&{claimsTrueScenario:rl(e.claimsTrueScenario)},...e.claimsFalseScenario&&{claimsFalseScenario:rl(e.claimsFalseScenario)},...e.logicWarning&&{logicWarning:wi(e.logicWarning)}}),$z=e=>({...e}),wI=e=>({...e}),xI=e=>({...e,...e.translation&&{translation:xi(e.translation)},...e.claimsTrueScenario&&{claimsTrueScenario:rl(e.claimsTrueScenario)},...e.logicWarning&&{logicWarning:wi(e.logicWarning)}}),bI=e=>{if(e.valid!==void 0)return{valid:xI(e.valid)};if(e.invalid!==void 0)return{invalid:EI(e.invalid)};if(e.satisfiable!==void 0)return{satisfiable:_I(e.satisfiable)};if(e.impossible!==void 0)return{impossible:SI(e.impossible)};if(e.translationAmbiguous!==void 0)return{translationAmbiguous:wI(e.translationAmbiguous)};if(e.tooComplex!==void 0)return{tooComplex:e.tooComplex};if(e.noTranslations!==void 0)return{noTranslations:e.noTranslations};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},CI=e=>({...e,...e.findings&&{findings:e.findings.map(t=>bI(t))}}),nl=e=>({...e,...e.automatedReasoningPolicy&&{automatedReasoningPolicy:CI(e.automatedReasoningPolicy)}}),TI=e=>({...e,...e.assessments&&{assessments:e.assessments.map(t=>nl(t))}}),Hz=e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},qz=e=>({...e,...e.source&&{source:p.SENSITIVE_STRING}}),Mg=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},jz=e=>({...e}),zz=e=>{if(e.reasoningText!==void 0)return{reasoningText:p.SENSITIVE_STRING};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},vI=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:e.image};if(e.document!==void 0)return{document:e.document};if(e.video!==void 0)return{video:e.video};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.toolResult!==void 0)return{toolResult:e.toolResult};if(e.guardContent!==void 0)return{guardContent:Mg(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.reasoningContent!==void 0)return{reasoningContent:p.SENSITIVE_STRING};if(e.citationsContent!==void 0)return{citationsContent:e.citationsContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},bi=e=>({...e,...e.content&&{content:e.content.map(t=>vI(t))}}),pl=e=>{if(e.text!==void 0)return{text:e.text};if(e.guardContent!==void 0)return{guardContent:Mg(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},AI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>bi(t))},...e.system&&{system:e.system.map(t=>pl(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:p.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:p.SENSITIVE_STRING}}),RI=e=>{if(e.message!==void 0)return{message:bi(e.message)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},Lg=e=>({...e,...e.inputAssessment&&{inputAssessment:Object.entries(e.inputAssessment).reduce((t,[r,n])=>(t[r]=nl(n),t),{})},...e.outputAssessments&&{outputAssessments:Object.entries(e.outputAssessments).reduce((t,[r,n])=>(t[r]=n.map(o=>nl(o)),t),{})}}),II=e=>({...e,...e.guardrail&&{guardrail:Lg(e.guardrail)}}),PI=e=>({...e,...e.output&&{output:RI(e.output)},...e.trace&&{trace:II(e.trace)}}),OI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>bi(t))},...e.system&&{system:e.system.map(t=>pl(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:p.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:p.SENSITIVE_STRING}}),Vz=e=>{if(e.text!==void 0)return{text:e.text};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.signature!==void 0)return{signature:e.signature};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},NI=e=>{if(e.text!==void 0)return{text:e.text};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.reasoningContent!==void 0)return{reasoningContent:p.SENSITIVE_STRING};if(e.citation!==void 0)return{citation:e.citation};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},DI=e=>({...e,...e.delta&&{delta:NI(e.delta)}}),kI=e=>({...e,...e.guardrail&&{guardrail:Lg(e.guardrail)}}),MI=e=>({...e,...e.trace&&{trace:kI(e.trace)}}),Gz=e=>{if(e.messageStart!==void 0)return{messageStart:e.messageStart};if(e.contentBlockStart!==void 0)return{contentBlockStart:e.contentBlockStart};if(e.contentBlockDelta!==void 0)return{contentBlockDelta:DI(e.contentBlockDelta)};if(e.contentBlockStop!==void 0)return{contentBlockStop:e.contentBlockStop};if(e.messageStop!==void 0)return{messageStop:e.messageStop};if(e.metadata!==void 0)return{metadata:MI(e.metadata)};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},LI=e=>({...e,...e.stream&&{stream:"STREAMING_CONTENT"}}),FI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),BI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),Wz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Kz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},UI=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),Yz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Jz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},$I=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),HI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),Xz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Qz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},qI=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),jI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>bi(t))},...e.system&&{system:e.system.map(t=>pl(t))}}),zI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),VI=e=>{if(e.invokeModel!==void 0)return{invokeModel:zI(e.invokeModel)};if(e.converse!==void 0)return{converse:jI(e.converse)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},GI=e=>({...e,...e.input&&{input:VI(e.input)}}),Zz=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply"),r.p("guardrailIdentifier",()=>e.guardrailIdentifier,"{guardrailIdentifier}",!1),r.p("guardrailVersion",()=>e.guardrailVersion,"{guardrailVersion}",!1);let o;return o=JSON.stringify(p.take(e,{content:s=>G3(s,t),outputScope:[],source:[]})),r.m("POST").h(n).b(o),r.build()},e3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{additionalModelRequestFields:s=>Ci(s),additionalModelResponseFieldPaths:s=>p._json(s),guardrailConfig:s=>p._json(s),inferenceConfig:s=>nP(s),messages:s=>qg(s,t),performanceConfig:s=>p._json(s),promptVariables:s=>p._json(s),requestMetadata:s=>p._json(s),system:s=>jg(s,t),toolConfig:s=>oP(s)})),r.m("POST").h(n).b(o),r.build()},t3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{additionalModelRequestFields:s=>Ci(s),additionalModelResponseFieldPaths:s=>p._json(s),guardrailConfig:s=>p._json(s),inferenceConfig:s=>nP(s),messages:s=>qg(s,t),performanceConfig:s=>p._json(s),promptVariables:s=>p._json(s),requestMetadata:s=>p._json(s),system:s=>jg(s,t),toolConfig:s=>oP(s)})),r.m("POST").h(n).b(o),r.build()},r3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/count-tokens"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{input:s=>j3(s,t)})),r.m("POST").h(n).b(o),r.build()},n3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={};return r.bp("/async-invoke/{invocationArn}"),r.p("invocationArn",()=>e.invocationArn,"{invocationArn}",!1),r.m("GET").h(n).b(void 0),r.build()},o3=async(e,t)=>{let r=ct.requestBuilder(e,t),n=p.map({},p.isSerializableHeaderValue,{[zg]:e[gl]||"application/octet-stream",[kg]:e[kg],[yP]:e[pP],[hP]:e[fP],[gP]:e[mP],[Sl]:e[yl]});r.bp("/model/{modelId}/invoke"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},s3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/invoke-with-bidirectional-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=v3(e.body,t)),r.m("POST").h(n).b(o),r.build()},i3=async(e,t)=>{let r=ct.requestBuilder(e,t),n=p.map({},p.isSerializableHeaderValue,{[zg]:e[gl]||"application/octet-stream",[eG]:e[kg],[yP]:e[pP],[hP]:e[fP],[gP]:e[mP],[Sl]:e[yl]});r.bp("/model/{modelId}/invoke-with-response-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},a3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={};r.bp("/async-invoke");let o=p.map({[cI]:[()=>e.submitTimeAfter!==void 0,()=>p.serializeDateTime(e[cI]).toString()],[dI]:[()=>e.submitTimeBefore!==void 0,()=>p.serializeDateTime(e[dI]).toString()],[iI]:[,e[iI]],[nI]:[()=>e.maxResults!==void 0,()=>e[nI].toString()],[oI]:[,e[oI]],[sI]:[,e[sI]],[aI]:[,e[aI]]});return r.m("GET").h(n).q(o).b(void 0),r.build()},c3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/async-invoke");let o;return o=JSON.stringify(p.take(e,{clientRequestToken:[!0,s=>s??Zj.v4()],modelId:[],modelInput:s=>eV(s),outputDataConfig:s=>p._json(s),tags:s=>p._json(s)})),r.m("POST").h(n).b(o),r.build()},d3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{action:p.expectString,actionReason:p.expectString,assessments:s=>cP(s),guardrailCoverage:p._json,outputs:p._json,usage:p._json});return Object.assign(r,o),r},l3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{additionalModelResponseFields:s=>hl(s),metrics:p._json,output:s=>EV(te.awsExpectUnion(s),t),performanceConfig:p._json,stopReason:p.expectString,trace:s=>xV(s),usage:p._json});return Object.assign(r,o),r},u3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=e.body;return r.stream=R3(n,t),r},f3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{inputTokens:p.expectInt32});return Object.assign(r,o),r},m3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{clientRequestToken:p.expectString,endTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s)),failureMessage:p.expectString,invocationArn:p.expectString,lastModifiedTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s)),modelArn:p.expectString,outputDataConfig:s=>p._json(te.awsExpectUnion(s)),status:p.expectString,submitTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s))});return Object.assign(r,o),r},p3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e),[gl]:[,e.headers[zg]],[yl]:[,e.headers[Sl]]}),n=await p.collectBody(e.body,t);return r.body=n,r},h3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=e.body;return r.body=I3(n,t),r},g3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e),[gl]:[,e.headers[tG]],[yl]:[,e.headers[Sl]]}),n=e.body;return r.body=P3(n,t),r},y3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{asyncInvokeSummaries:s=>fV(s),nextToken:p.expectString});return Object.assign(r,o),r},S3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{invocationArn:p.expectString});return Object.assign(r,o),r},Kt=async(e,t)=>{let r={...e,body:await te.parseJsonErrorBody(e.body,t)},n=te.loadRestJsonErrorCode(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await _3(r);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await WI(r);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await C3(r);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await T3(r);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await JI(r);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await XI(r);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await QI(r);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await x3(r);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await b3(r);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await YI(r);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await KI(r);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await w3(r);default:let o=r.body;return E3({output:e,parsedBody:o,errorCode:n})}},E3=p.withBaseException(Je),_3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new zd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},w3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Kd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},WI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Vd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},x3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString,originalStatusCode:p.expectInt32,resourceName:p.expectString});Object.assign(r,o);let s=new Qd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},b3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Zd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},KI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString,originalMessage:p.expectString,originalStatusCode:p.expectInt32});Object.assign(r,o);let s=new tl({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},YI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new el({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},C3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Yd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},T3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Jd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},JI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Xd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},XI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Gd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},QI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Wd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},v3=(e,t)=>{let r=n=>E.InvokeModelWithBidirectionalStreamInput.visit(n,{chunk:o=>A3(o,t),_:o=>o});return t.eventStreamMarshaller.serialize(e,r)},A3=(e,t)=>{let r={":event-type":{type:"string",value:"chunk"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}},n=new Uint8Array;return n=U3(e,t),n=t.utf8Decoder(JSON.stringify(n)),{headers:r,body:n}},R3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.messageStart!=null?{messageStart:await L3(r.messageStart,t)}:r.contentBlockStart!=null?{contentBlockStart:await D3(r.contentBlockStart,t)}:r.contentBlockDelta!=null?{contentBlockDelta:await N3(r.contentBlockDelta,t)}:r.contentBlockStop!=null?{contentBlockStop:await k3(r.contentBlockStop,t)}:r.messageStop!=null?{messageStop:await F3(r.messageStop,t)}:r.metadata!=null?{metadata:await M3(r.metadata,t)}:r.internalServerException!=null?{internalServerException:await Fg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Bg(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Hg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await $g(r.throttlingException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Ug(r.serviceUnavailableException,t)}:{$unknown:r}),I3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await O3(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await Fg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Bg(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Hg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await $g(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await ZI(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Ug(r.serviceUnavailableException,t)}:{$unknown:r}),P3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await B3(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await Fg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Bg(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await Hg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await $g(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await ZI(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await Ug(r.serviceUnavailableException,t)}:{$unknown:r}),O3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,pV(n,t)),r},N3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,yV(n,t)),r},D3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},k3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},M3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,_V(n)),r},Fg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return WI(r)},L3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},F3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,VV(n)),r},Bg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return KI(r)},ZI=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return YI(r)},B3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,GV(n,t)),r},Ug=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return JI(r)},$g=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return XI(r)},Hg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return QI(r)},U3=(e,t)=>p.take(e,{bytes:t.base64Encoder}),$3=(e,t)=>E.ContentBlock.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),citationsContent:r=>({citationsContent:p._json(r)}),document:r=>({document:eP(r,t)}),guardContent:r=>({guardContent:tP(r,t)}),image:r=>({image:rP(r,t)}),reasoningContent:r=>({reasoningContent:tV(r,t)}),text:r=>({text:r}),toolResult:r=>({toolResult:sV(r,t)}),toolUse:r=>({toolUse:lV(r)}),video:r=>({video:sP(r,t)}),_:(r,n)=>({[r]:n})}),H3=(e,t)=>e.filter(r=>r!=null).map(r=>$3(r,t)),q3=(e,t)=>p.take(e,{messages:r=>qg(r,t),system:r=>jg(r,t)}),j3=(e,t)=>E.CountTokensInput.visit(e,{converse:r=>({converse:q3(r,t)}),invokeModel:r=>({invokeModel:Q3(r,t)}),_:(r,n)=>({[r]:n})}),eP=(e,t)=>p.take(e,{citations:p._json,context:[],format:[],name:[],source:r=>z3(r,t)}),z3=(e,t)=>E.DocumentSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),content:r=>({content:p._json(r)}),s3Location:r=>({s3Location:p._json(r)}),text:r=>({text:r}),_:(r,n)=>({[r]:n})}),V3=(e,t)=>E.GuardrailContentBlock.visit(e,{image:r=>({image:Y3(r,t)}),text:r=>({text:p._json(r)}),_:(r,n)=>({[r]:n})}),G3=(e,t)=>e.filter(r=>r!=null).map(r=>V3(r,t)),tP=(e,t)=>E.GuardrailConverseContentBlock.visit(e,{image:r=>({image:W3(r,t)}),text:r=>({text:p._json(r)}),_:(r,n)=>({[r]:n})}),W3=(e,t)=>p.take(e,{format:[],source:r=>K3(r,t)}),K3=(e,t)=>E.GuardrailConverseImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),Y3=(e,t)=>p.take(e,{format:[],source:r=>J3(r,t)}),J3=(e,t)=>E.GuardrailImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),rP=(e,t)=>p.take(e,{format:[],source:r=>X3(r,t)}),X3=(e,t)=>E.ImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),s3Location:r=>({s3Location:p._json(r)}),_:(r,n)=>({[r]:n})}),nP=(e,t)=>p.take(e,{maxTokens:[],stopSequences:p._json,temperature:p.serializeFloat,topP:p.serializeFloat}),Q3=(e,t)=>p.take(e,{body:t.base64Encoder}),Z3=(e,t)=>p.take(e,{content:r=>H3(r,t),role:[]}),qg=(e,t)=>e.filter(r=>r!=null).map(r=>Z3(r,t)),eV=(e,t)=>e,tV=(e,t)=>E.ReasoningContentBlock.visit(e,{reasoningText:r=>({reasoningText:p._json(r)}),redactedContent:r=>({redactedContent:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),rV=(e,t)=>E.SystemContentBlock.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),guardContent:r=>({guardContent:tP(r,t)}),text:r=>({text:r}),_:(r,n)=>({[r]:n})}),jg=(e,t)=>e.filter(r=>r!=null).map(r=>rV(r,t)),nV=(e,t)=>E.Tool.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),toolSpec:r=>({toolSpec:dV(r)}),_:(r,n)=>({[r]:n})}),oP=(e,t)=>p.take(e,{toolChoice:p._json,tools:r=>cV(r)}),oV=(e,t)=>E.ToolInputSchema.visit(e,{json:r=>({json:Ci(r)}),_:(r,n)=>({[r]:n})}),sV=(e,t)=>p.take(e,{content:r=>aV(r,t),status:[],toolUseId:[]}),iV=(e,t)=>E.ToolResultContentBlock.visit(e,{document:r=>({document:eP(r,t)}),image:r=>({image:rP(r,t)}),json:r=>({json:Ci(r)}),text:r=>({text:r}),video:r=>({video:sP(r,t)}),_:(r,n)=>({[r]:n})}),aV=(e,t)=>e.filter(r=>r!=null).map(r=>iV(r,t)),cV=(e,t)=>e.filter(r=>r!=null).map(r=>nV(r)),dV=(e,t)=>p.take(e,{description:[],inputSchema:r=>oV(r),name:[]}),lV=(e,t)=>p.take(e,{input:r=>Ci(r),name:[],toolUseId:[]}),sP=(e,t)=>p.take(e,{format:[],source:r=>uV(r,t)}),uV=(e,t)=>E.VideoSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),s3Location:r=>({s3Location:p._json(r)}),_:(r,n)=>({[r]:n})}),Ci=(e,t)=>e,fV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>mV(n)),mV=(e,t)=>p.take(e,{clientRequestToken:p.expectString,endTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r)),failureMessage:p.expectString,invocationArn:p.expectString,lastModifiedTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r)),modelArn:p.expectString,outputDataConfig:r=>p._json(te.awsExpectUnion(r)),status:p.expectString,submitTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r))}),pV=(e,t)=>p.take(e,{bytes:t.base64Decoder}),hV=(e,t)=>e.cachePoint!=null?{cachePoint:p._json(e.cachePoint)}:e.citationsContent!=null?{citationsContent:p._json(e.citationsContent)}:e.document!=null?{document:iP(e.document,t)}:e.guardContent!=null?{guardContent:$V(te.awsExpectUnion(e.guardContent),t)}:e.image!=null?{image:lP(e.image,t)}:e.reasoningContent!=null?{reasoningContent:WV(te.awsExpectUnion(e.reasoningContent),t)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.toolResult!=null?{toolResult:YV(e.toolResult,t)}:e.toolUse!=null?{toolUse:QV(e.toolUse)}:e.video!=null?{video:uP(e.video,t)}:{$unknown:Object.entries(e)[0]},gV=(e,t)=>e.citation!=null?{citation:p._json(e.citation)}:e.reasoningContent!=null?{reasoningContent:KV(te.awsExpectUnion(e.reasoningContent),t)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.toolUse!=null?{toolUse:p._json(e.toolUse)}:{$unknown:Object.entries(e)[0]},yV=(e,t)=>p.take(e,{contentBlockIndex:p.expectInt32,delta:r=>gV(te.awsExpectUnion(r),t)}),SV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>hV(te.awsExpectUnion(n),t)),EV=(e,t)=>e.message!=null?{message:zV(e.message,t)}:{$unknown:Object.entries(e)[0]},_V=(e,t)=>p.take(e,{metrics:p._json,performanceConfig:p._json,trace:r=>wV(r),usage:p._json}),wV=(e,t)=>p.take(e,{guardrail:r=>dP(r),promptRouter:p._json}),xV=(e,t)=>p.take(e,{guardrail:r=>dP(r),promptRouter:p._json}),iP=(e,t)=>p.take(e,{citations:p._json,context:p.expectString,format:p.expectString,name:p.expectString,source:r=>bV(te.awsExpectUnion(r),t)}),bV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.content!=null?{content:p._json(e.content)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:{$unknown:Object.entries(e)[0]},aP=(e,t)=>p.take(e,{automatedReasoningPolicy:r=>PV(r),contentPolicy:p._json,contextualGroundingPolicy:r=>UV(r),invocationMetrics:p._json,sensitiveInformationPolicy:p._json,topicPolicy:p._json,wordPolicy:p._json}),cP=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>aP(n)),CV=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=cP(o)),r),{}),TV=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=aP(o)),r),{}),vV=(e,t)=>e.impossible!=null?{impossible:RV(e.impossible)}:e.invalid!=null?{invalid:IV(e.invalid)}:e.noTranslations!=null?{noTranslations:p._json(e.noTranslations)}:e.satisfiable!=null?{satisfiable:OV(e.satisfiable)}:e.tooComplex!=null?{tooComplex:p._json(e.tooComplex)}:e.translationAmbiguous!=null?{translationAmbiguous:NV(e.translationAmbiguous)}:e.valid!=null?{valid:LV(e.valid)}:{$unknown:Object.entries(e)[0]},AV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>vV(te.awsExpectUnion(n))),RV=(e,t)=>p.take(e,{contradictingRules:p._json,logicWarning:p._json,translation:r=>Ti(r)}),IV=(e,t)=>p.take(e,{contradictingRules:p._json,logicWarning:p._json,translation:r=>Ti(r)}),PV=(e,t)=>p.take(e,{findings:r=>AV(r)}),OV=(e,t)=>p.take(e,{claimsFalseScenario:p._json,claimsTrueScenario:p._json,logicWarning:p._json,translation:r=>Ti(r)}),Ti=(e,t)=>p.take(e,{claims:p._json,confidence:p.limitedParseDouble,premises:p._json,untranslatedClaims:p._json,untranslatedPremises:p._json}),NV=(e,t)=>p.take(e,{differenceScenarios:p._json,options:r=>MV(r)}),DV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>Ti(n)),kV=(e,t)=>p.take(e,{translations:r=>DV(r)}),MV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>kV(n)),LV=(e,t)=>p.take(e,{claimsTrueScenario:p._json,logicWarning:p._json,supportingRules:p._json,translation:r=>Ti(r)}),FV=(e,t)=>p.take(e,{action:p.expectString,detected:p.expectBoolean,score:p.limitedParseDouble,threshold:p.limitedParseDouble,type:p.expectString}),BV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>FV(n)),UV=(e,t)=>p.take(e,{filters:r=>BV(r)}),$V=(e,t)=>e.image!=null?{image:HV(e.image,t)}:e.text!=null?{text:p._json(e.text)}:{$unknown:Object.entries(e)[0]},HV=(e,t)=>p.take(e,{format:p.expectString,source:r=>qV(te.awsExpectUnion(r),t)}),qV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:{$unknown:Object.entries(e)[0]},dP=(e,t)=>p.take(e,{actionReason:p.expectString,inputAssessment:r=>TV(r),modelOutput:p._json,outputAssessments:r=>CV(r)}),lP=(e,t)=>p.take(e,{format:p.expectString,source:r=>jV(te.awsExpectUnion(r),t)}),jV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:{$unknown:Object.entries(e)[0]},zV=(e,t)=>p.take(e,{content:r=>SV(r,t),role:p.expectString}),VV=(e,t)=>p.take(e,{additionalModelResponseFields:r=>hl(r),stopReason:p.expectString}),GV=(e,t)=>p.take(e,{bytes:t.base64Decoder}),WV=(e,t)=>e.reasoningText!=null?{reasoningText:p._json(e.reasoningText)}:e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:{$unknown:Object.entries(e)[0]},KV=(e,t)=>e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:p.expectString(e.signature)!==void 0?{signature:p.expectString(e.signature)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:{$unknown:Object.entries(e)[0]},YV=(e,t)=>p.take(e,{content:r=>XV(r,t),status:p.expectString,toolUseId:p.expectString}),JV=(e,t)=>e.document!=null?{document:iP(e.document,t)}:e.image!=null?{image:lP(e.image,t)}:e.json!=null?{json:hl(e.json)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.video!=null?{video:uP(e.video,t)}:{$unknown:Object.entries(e)[0]},XV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>JV(te.awsExpectUnion(n),t)),QV=(e,t)=>p.take(e,{input:r=>hl(r),name:p.expectString,toolUseId:p.expectString}),uP=(e,t)=>p.take(e,{format:p.expectString,source:r=>ZV(te.awsExpectUnion(r),t)}),ZV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:{$unknown:Object.entries(e)[0]},hl=(e,t)=>e,Ie=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),kg="accept",gl="contentType",zg="content-type",fP="guardrailIdentifier",mP="guardrailVersion",nI="maxResults",oI="nextToken",yl="performanceConfigLatency",sI="sortBy",iI="statusEquals",aI="sortOrder",cI="submitTimeAfter",dI="submitTimeBefore",pP="trace",eG="x-amzn-bedrock-accept",tG="x-amzn-bedrock-content-type",hP="x-amzn-bedrock-guardrailidentifier",gP="x-amzn-bedrock-guardrailversion",Sl="x-amzn-bedrock-performanceconfig-latency",yP="x-amzn-bedrock-trace",ol=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").f(yI,TI).ser(Zz).de(d3).build(){},sl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").f(AI,PI).ser(e3).de(l3).build(){},il=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").f(OI,LI).ser(t3).de(u3).build(){},al=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").f(GI,void 0).ser(r3).de(f3).build(){},cl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").f(void 0,fI).ser(n3).de(m3).build(){},dl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").f(FI,BI).ser(o3).de(p3).build(){},ll=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions()),lI.getEventStreamPlugin(n),uI.getWebSocketPlugin(n,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").f(UI,$I).ser(s3).de(h3).build(){},ul=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f(HI,qI).ser(i3).de(g3).build(){},_i=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").f(void 0,pI).ser(a3).de(y3).build(){},fl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").f(hI,void 0).ser(c3).de(S3).build(){},rG={ApplyGuardrailCommand:ol,ConverseCommand:sl,ConverseStreamCommand:il,CountTokensCommand:al,GetAsyncInvokeCommand:cl,InvokeModelCommand:dl,InvokeModelWithBidirectionalStreamCommand:ll,InvokeModelWithResponseStreamCommand:ul,ListAsyncInvokesCommand:_i,StartAsyncInvokeCommand:fl},ml=class extends Ei{};p.createAggregatedClient(rG,ml);var nG=ct.createPaginator(Ei,_i,"nextToken","nextToken","maxResults");Object.defineProperty(E,"$Command",{enumerable:!0,get:function(){return p.Command}});Object.defineProperty(E,"__Client",{enumerable:!0,get:function(){return p.Client}});E.AccessDeniedException=zd;E.ApplyGuardrailCommand=ol;E.ApplyGuardrailRequestFilterSensitiveLog=yI;E.ApplyGuardrailResponseFilterSensitiveLog=TI;E.AsyncInvokeStatus=oz;E.AsyncInvokeSummaryFilterSensitiveLog=mI;E.BedrockRuntime=ml;E.BedrockRuntimeClient=Ei;E.BedrockRuntimeServiceException=Je;E.BidirectionalInputPayloadPartFilterSensitiveLog=Wz;E.BidirectionalOutputPayloadPartFilterSensitiveLog=Yz;E.CachePointType=vz;E.ConflictException=Kd;E.ContentBlockDeltaEventFilterSensitiveLog=DI;E.ContentBlockDeltaFilterSensitiveLog=NI;E.ContentBlockFilterSensitiveLog=vI;E.ConversationRole=Dz;E.ConverseCommand=sl;E.ConverseOutputFilterSensitiveLog=RI;E.ConverseRequestFilterSensitiveLog=AI;E.ConverseResponseFilterSensitiveLog=PI;E.ConverseStreamCommand=il;E.ConverseStreamMetadataEventFilterSensitiveLog=MI;E.ConverseStreamOutputFilterSensitiveLog=Gz;E.ConverseStreamRequestFilterSensitiveLog=OI;E.ConverseStreamResponseFilterSensitiveLog=LI;E.ConverseStreamTraceFilterSensitiveLog=kI;E.ConverseTokensRequestFilterSensitiveLog=jI;E.ConverseTraceFilterSensitiveLog=II;E.CountTokensCommand=al;E.CountTokensInputFilterSensitiveLog=VI;E.CountTokensRequestFilterSensitiveLog=GI;E.DocumentFormat=Az;E.GetAsyncInvokeCommand=cl;E.GetAsyncInvokeResponseFilterSensitiveLog=fI;E.GuardrailAction=uz;E.GuardrailAssessmentFilterSensitiveLog=nl;E.GuardrailAutomatedReasoningFindingFilterSensitiveLog=bI;E.GuardrailAutomatedReasoningImpossibleFindingFilterSensitiveLog=SI;E.GuardrailAutomatedReasoningInputTextReferenceFilterSensitiveLog=Dg;E.GuardrailAutomatedReasoningInvalidFindingFilterSensitiveLog=EI;E.GuardrailAutomatedReasoningLogicWarningFilterSensitiveLog=wi;E.GuardrailAutomatedReasoningLogicWarningType=fz;E.GuardrailAutomatedReasoningPolicyAssessmentFilterSensitiveLog=CI;E.GuardrailAutomatedReasoningSatisfiableFindingFilterSensitiveLog=_I;E.GuardrailAutomatedReasoningScenarioFilterSensitiveLog=rl;E.GuardrailAutomatedReasoningStatementFilterSensitiveLog=qo;E.GuardrailAutomatedReasoningTranslationAmbiguousFindingFilterSensitiveLog=wI;E.GuardrailAutomatedReasoningTranslationFilterSensitiveLog=xi;E.GuardrailAutomatedReasoningTranslationOptionFilterSensitiveLog=$z;E.GuardrailAutomatedReasoningValidFindingFilterSensitiveLog=xI;E.GuardrailContentBlockFilterSensitiveLog=gI;E.GuardrailContentFilterConfidence=pz;E.GuardrailContentFilterStrength=hz;E.GuardrailContentFilterType=gz;E.GuardrailContentPolicyAction=mz;E.GuardrailContentQualifier=cz;E.GuardrailContentSource=lz;E.GuardrailContextualGroundingFilterType=Sz;E.GuardrailContextualGroundingPolicyAction=yz;E.GuardrailConverseContentBlockFilterSensitiveLog=Mg;E.GuardrailConverseContentQualifier=Iz;E.GuardrailConverseImageBlockFilterSensitiveLog=qz;E.GuardrailConverseImageFormat=Rz;E.GuardrailConverseImageSourceFilterSensitiveLog=Hz;E.GuardrailImageBlockFilterSensitiveLog=Uz;E.GuardrailImageFormat=az;E.GuardrailImageSourceFilterSensitiveLog=Bz;E.GuardrailManagedWordType=Cz;E.GuardrailOutputScope=dz;E.GuardrailPiiEntityType=_z;E.GuardrailSensitiveInformationPolicyAction=Ez;E.GuardrailStreamProcessingMode=Lz;E.GuardrailTopicPolicyAction=wz;E.GuardrailTopicType=xz;E.GuardrailTrace=Tz;E.GuardrailTraceAssessmentFilterSensitiveLog=Lg;E.GuardrailWordPolicyAction=bz;E.ImageFormat=Pz;E.InternalServerException=Vd;E.InvokeModelCommand=dl;E.InvokeModelRequestFilterSensitiveLog=FI;E.InvokeModelResponseFilterSensitiveLog=BI;E.InvokeModelTokensRequestFilterSensitiveLog=zI;E.InvokeModelWithBidirectionalStreamCommand=ll;E.InvokeModelWithBidirectionalStreamInputFilterSensitiveLog=Kz;E.InvokeModelWithBidirectionalStreamOutputFilterSensitiveLog=Jz;E.InvokeModelWithBidirectionalStreamRequestFilterSensitiveLog=UI;E.InvokeModelWithBidirectionalStreamResponseFilterSensitiveLog=$I;E.InvokeModelWithResponseStreamCommand=ul;E.InvokeModelWithResponseStreamRequestFilterSensitiveLog=HI;E.InvokeModelWithResponseStreamResponseFilterSensitiveLog=qI;E.ListAsyncInvokesCommand=_i;E.ListAsyncInvokesResponseFilterSensitiveLog=pI;E.MessageFilterSensitiveLog=bi;E.ModelErrorException=Qd;E.ModelNotReadyException=Zd;E.ModelStreamErrorException=tl;E.ModelTimeoutException=el;E.PayloadPartFilterSensitiveLog=Xz;E.PerformanceConfigLatency=kz;E.ReasoningContentBlockDeltaFilterSensitiveLog=Vz;E.ReasoningContentBlockFilterSensitiveLog=zz;E.ReasoningTextBlockFilterSensitiveLog=jz;E.ResourceNotFoundException=Yd;E.ResponseStreamFilterSensitiveLog=Qz;E.ServiceQuotaExceededException=Jd;E.ServiceUnavailableException=Xd;E.SortAsyncInvocationBy=sz;E.SortOrder=iz;E.StartAsyncInvokeCommand=fl;E.StartAsyncInvokeRequestFilterSensitiveLog=hI;E.StopReason=Mz;E.SystemContentBlockFilterSensitiveLog=pl;E.ThrottlingException=Gd;E.ToolResultStatus=Nz;E.Trace=Fz;E.ValidationException=Wd;E.VideoFormat=Oz;E.paginateListAsyncInvokes=nG});var Gg=I(cn=>{"use strict";c();Object.defineProperty(cn,"__esModule",{value:!0});cn.resolveHttpAuthSchemeConfig=cn.defaultTextractHttpAuthSchemeProvider=cn.defaultTextractHttpAuthSchemeParametersProvider=void 0;var oG=(ve(),Y(st)),Vg=Xe(),sG=async(e,t,r)=>({operation:(0,Vg.getSmithyContext)(t).operation,region:await(0,Vg.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});cn.defaultTextractHttpAuthSchemeParametersProvider=sG;function iG(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"textract",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var aG=e=>{let t=[];switch(e.operation){default:t.push(iG(e))}return t};cn.defaultTextractHttpAuthSchemeProvider=aG;var cG=e=>{let t=(0,oG.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Vg.normalizeProvider)(e.authSchemePreference??[])})};cn.resolveHttpAuthSchemeConfig=cG});var EP=I((Qoe,dG)=>{dG.exports={name:"@aws-sdk/client-textract",description:"AWS SDK for JavaScript Textract Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-textract","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo textract"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/credential-provider-node":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0","@smithy/uuid":"^1.1.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-textract",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-textract"}}});var DP=I(El=>{"use strict";c();Object.defineProperty(El,"__esModule",{value:!0});El.ruleSet=void 0;var PP="required",Jt="fn",Xt="argv",zo="ref",_P=!0,wP="isSet",Ai="booleanEquals",jo="error",vi="endpoint",_r="tree",Wg="PartitionResult",xP={[PP]:!1,type:"String"},bP={[PP]:!0,default:!1,type:"Boolean"},CP={[zo]:"Endpoint"},OP={[Jt]:Ai,[Xt]:[{[zo]:"UseFIPS"},!0]},NP={[Jt]:Ai,[Xt]:[{[zo]:"UseDualStack"},!0]},Yt={},TP={[Jt]:"getAttr",[Xt]:[{[zo]:Wg},"supportsFIPS"]},vP={[Jt]:Ai,[Xt]:[!0,{[Jt]:"getAttr",[Xt]:[{[zo]:Wg},"supportsDualStack"]}]},AP=[OP],RP=[NP],IP=[{[zo]:"Region"}],lG={version:"1.0",parameters:{Region:xP,UseDualStack:bP,UseFIPS:bP,Endpoint:xP},rules:[{conditions:[{[Jt]:wP,[Xt]:[CP]}],rules:[{conditions:AP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:jo},{conditions:RP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:jo},{endpoint:{url:CP,properties:Yt,headers:Yt},type:vi}],type:_r},{conditions:[{[Jt]:wP,[Xt]:IP}],rules:[{conditions:[{[Jt]:"aws.partition",[Xt]:IP,assign:Wg}],rules:[{conditions:[OP,NP],rules:[{conditions:[{[Jt]:Ai,[Xt]:[_P,TP]},vP],rules:[{endpoint:{url:"https://textract-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:vi}],type:_r},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:jo}],type:_r},{conditions:AP,rules:[{conditions:[{[Jt]:Ai,[Xt]:[TP,_P]}],rules:[{endpoint:{url:"https://textract-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:vi}],type:_r},{error:"FIPS is enabled but this partition does not support FIPS",type:jo}],type:_r},{conditions:RP,rules:[{conditions:[vP],rules:[{endpoint:{url:"https://textract.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:vi}],type:_r},{error:"DualStack is enabled but this partition does not support DualStack",type:jo}],type:_r},{endpoint:{url:"https://textract.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:vi}],type:_r}],type:_r},{error:"Invalid Configuration: Missing Region",type:jo}]};El.ruleSet=lG});var kP=I(_l=>{"use strict";c();Object.defineProperty(_l,"__esModule",{value:!0});_l.defaultEndpointResolver=void 0;var uG=_n(),Kg=En(),fG=DP(),mG=new Kg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),pG=(e,t={})=>mG.get(e,()=>(0,Kg.resolveEndpoint)(fG.ruleSet,{endpointParams:e,logger:t.logger}));_l.defaultEndpointResolver=pG;Kg.customEndpointFunctions.aws=uG.awsEndpointFunctions});var FP=I(wl=>{"use strict";c();Object.defineProperty(wl,"__esModule",{value:!0});wl.getRuntimeConfig=void 0;var hG=(ve(),Y(st)),gG=K(),yG=sr(),MP=Fe(),LP=Le(),SG=Gg(),EG=kP(),_G=e=>({apiVersion:"2018-06-27",base64Decoder:e?.base64Decoder??MP.fromBase64,base64Encoder:e?.base64Encoder??MP.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??EG.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??SG.defaultTextractHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new hG.AwsSdkSigV4Signer}],logger:e?.logger??new gG.NoOpLogger,serviceId:e?.serviceId??"Textract",urlParser:e?.urlParser??yG.parseUrl,utf8Decoder:e?.utf8Decoder??LP.fromUtf8,utf8Encoder:e?.utf8Encoder??LP.toUtf8});wl.getRuntimeConfig=_G});var qP=I(bl=>{"use strict";c();Object.defineProperty(bl,"__esModule",{value:!0});bl.getRuntimeConfig=void 0;var wG=(Or(),Y(Pr)),xG=wG.__importDefault(EP()),BP=(ve(),Y(st)),bG=Rg(),UP=So(),xl=yt(),CG=Eo(),$P=At(),qn=fr(),HP=Ar(),TG=_o(),vG=Dn(),AG=FP(),RG=K(),IG=Co(),PG=K(),OG=e=>{(0,PG.emitWarningIfUnsupportedVersion)(process.version);let t=(0,IG.resolveDefaultsModeConfig)(e),r=()=>t().then(RG.loadConfigsForDefaultMode),n=(0,AG.getRuntimeConfig)(e);(0,BP.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,qn.loadConfig)(BP.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??TG.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??bG.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,UP.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:xG.default.version}),maxAttempts:e?.maxAttempts??(0,qn.loadConfig)($P.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,qn.loadConfig)(xl.NODE_REGION_CONFIG_OPTIONS,{...xl.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:HP.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,qn.loadConfig)({...$P.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||vG.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??CG.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??HP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,qn.loadConfig)(xl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,qn.loadConfig)(xl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,qn.loadConfig)(UP.NODE_APP_ID_CONFIG_OPTIONS,o)}};bl.getRuntimeConfig=OG});var oO=I(B=>{"use strict";c();var jP=zn(),NG=Vn(),DG=Gn(),zP=In(),kG=yt(),Ri=(Ue(),Y(kt)),MG=ho(),pe=pr(),VP=At(),g=K(),GP=Gg(),LG=qP(),WP=To(),Yg=ie(),he=Qt(),fe=(ve(),Y(st)),QP=as(),FG=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"textract"}),ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},BG=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},UG=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),$G=(e,t)=>{let r=Object.assign(WP.getAwsRegionExtensionConfiguration(e),g.getDefaultExtensionConfiguration(e),Yg.getHttpHandlerExtensionConfiguration(e),BG(e));return t.forEach(n=>n.configure(r)),Object.assign(e,WP.resolveAwsRegionExtensionConfiguration(r),g.resolveDefaultRuntimeConfig(r),Yg.resolveHttpHandlerRuntimeConfig(r),UG(r))},Vo=class extends g.Client{config;constructor(...[t]){let r=LG.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=FG(r),o=zP.resolveUserAgentConfig(n),s=VP.resolveRetryConfig(o),i=kG.resolveRegionConfig(s),a=jP.resolveHostHeaderConfig(i),d=pe.resolveEndpointConfig(a),l=GP.resolveHttpAuthSchemeConfig(d),m=$G(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(zP.getUserAgentPlugin(this.config)),this.middlewareStack.use(VP.getRetryPlugin(this.config)),this.middlewareStack.use(MG.getContentLengthPlugin(this.config)),this.middlewareStack.use(jP.getHostHeaderPlugin(this.config)),this.middlewareStack.use(NG.getLoggerPlugin(this.config)),this.middlewareStack.use(DG.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Ri.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:GP.defaultTextractHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new Ri.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Ri.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Pe=class e extends g.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Cl=class e extends Pe{name="AccessDeniedException";$fault="client";Message;Code;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},HG={FORMS:"FORMS",LAYOUT:"LAYOUT",QUERIES:"QUERIES",SIGNATURES:"SIGNATURES",TABLES:"TABLES"},qG={ACTIVE:"ACTIVE",AT_RISK:"AT_RISK",CREATION_ERROR:"CREATION_ERROR",CREATION_IN_PROGRESS:"CREATION_IN_PROGRESS",DEPRECATED:"DEPRECATED"},jG={FREE_OF_ADULT_CONTENT:"FreeOfAdultContent",FREE_OF_PERSONALLY_IDENTIFIABLE_INFORMATION:"FreeOfPersonallyIdentifiableInformation"},zG={CELL:"CELL",KEY_VALUE_SET:"KEY_VALUE_SET",LAYOUT_FIGURE:"LAYOUT_FIGURE",LAYOUT_FOOTER:"LAYOUT_FOOTER",LAYOUT_HEADER:"LAYOUT_HEADER",LAYOUT_KEY_VALUE:"LAYOUT_KEY_VALUE",LAYOUT_LIST:"LAYOUT_LIST",LAYOUT_PAGE_NUMBER:"LAYOUT_PAGE_NUMBER",LAYOUT_SECTION_HEADER:"LAYOUT_SECTION_HEADER",LAYOUT_TABLE:"LAYOUT_TABLE",LAYOUT_TEXT:"LAYOUT_TEXT",LAYOUT_TITLE:"LAYOUT_TITLE",LINE:"LINE",MERGED_CELL:"MERGED_CELL",PAGE:"PAGE",QUERY:"QUERY",QUERY_RESULT:"QUERY_RESULT",SELECTION_ELEMENT:"SELECTION_ELEMENT",SIGNATURE:"SIGNATURE",TABLE:"TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_TITLE:"TABLE_TITLE",TITLE:"TITLE",WORD:"WORD"},VG={COLUMN_HEADER:"COLUMN_HEADER",KEY:"KEY",SEMI_STRUCTURED_TABLE:"SEMI_STRUCTURED_TABLE",STRUCTURED_TABLE:"STRUCTURED_TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_SECTION_TITLE:"TABLE_SECTION_TITLE",TABLE_SUMMARY:"TABLE_SUMMARY",TABLE_TITLE:"TABLE_TITLE",VALUE:"VALUE"},GG={ANSWER:"ANSWER",CHILD:"CHILD",COMPLEX_FEATURES:"COMPLEX_FEATURES",MERGED_CELL:"MERGED_CELL",TABLE:"TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_TITLE:"TABLE_TITLE",TITLE:"TITLE",VALUE:"VALUE"},WG={NOT_SELECTED:"NOT_SELECTED",SELECTED:"SELECTED"},KG={HANDWRITING:"HANDWRITING",PRINTED:"PRINTED"},Tl=class e extends Pe{name="BadDocumentException";$fault="client";Message;Code;constructor(t){super({name:"BadDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},vl=class e extends Pe{name="DocumentTooLargeException";$fault="client";Message;Code;constructor(t){super({name:"DocumentTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Al=class e extends Pe{name="HumanLoopQuotaExceededException";$fault="client";ResourceType;QuotaCode;ServiceCode;Message;Code;constructor(t){super({name:"HumanLoopQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ResourceType=t.ResourceType,this.QuotaCode=t.QuotaCode,this.ServiceCode=t.ServiceCode,this.Message=t.Message,this.Code=t.Code}},Rl=class e extends Pe{name="InternalServerError";$fault="server";Message;Code;constructor(t){super({name:"InternalServerError",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Il=class e extends Pe{name="InvalidParameterException";$fault="client";Message;Code;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Pl=class e extends Pe{name="InvalidS3ObjectException";$fault="client";Message;Code;constructor(t){super({name:"InvalidS3ObjectException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ol=class e extends Pe{name="ProvisionedThroughputExceededException";$fault="client";Message;Code;constructor(t){super({name:"ProvisionedThroughputExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Nl=class e extends Pe{name="ThrottlingException";$fault="server";Message;Code;constructor(t){super({name:"ThrottlingException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Dl=class e extends Pe{name="UnsupportedDocumentException";$fault="client";Message;Code;constructor(t){super({name:"UnsupportedDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},YG={DATE:"DATE"},JG={DISABLED:"DISABLED",ENABLED:"ENABLED"},kl=class e extends Pe{name="ConflictException";$fault="client";Message;Code;constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ml=class e extends Pe{name="IdempotentParameterMismatchException";$fault="client";Message;Code;constructor(t){super({name:"IdempotentParameterMismatchException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ll=class e extends Pe{name="LimitExceededException";$fault="client";Message;Code;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Fl=class e extends Pe{name="ServiceQuotaExceededException";$fault="client";Message;Code;constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Bl=class e extends Pe{name="ValidationException";$fault="client";Message;Code;constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ul=class e extends Pe{name="InvalidKMSKeyException";$fault="client";Message;Code;constructor(t){super({name:"InvalidKMSKeyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},$l=class e extends Pe{name="ResourceNotFoundException";$fault="client";Message;Code;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},XG={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PARTIAL_SUCCESS:"PARTIAL_SUCCESS",SUCCEEDED:"SUCCEEDED"},Hl=class e extends Pe{name="InvalidJobIdException";$fault="client";Message;Code;constructor(t){super({name:"InvalidJobIdException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},QG=async(e,t)=>{let r=Ee("AnalyzeDocument"),n;return n=JSON.stringify(f6(e,t)),Se(t,r,"/",void 0,n)},ZG=async(e,t)=>{let r=Ee("AnalyzeExpense"),n;return n=JSON.stringify(m6(e,t)),Se(t,r,"/",void 0,n)},e4=async(e,t)=>{let r=Ee("AnalyzeID"),n;return n=JSON.stringify(p6(e,t)),Se(t,r,"/",void 0,n)},t4=async(e,t)=>{let r=Ee("CreateAdapter"),n;return n=JSON.stringify(h6(e)),Se(t,r,"/",void 0,n)},r4=async(e,t)=>{let r=Ee("CreateAdapterVersion"),n;return n=JSON.stringify(g6(e)),Se(t,r,"/",void 0,n)},n4=async(e,t)=>{let r=Ee("DeleteAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},o4=async(e,t)=>{let r=Ee("DeleteAdapterVersion"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},s4=async(e,t)=>{let r=Ee("DetectDocumentText"),n;return n=JSON.stringify(y6(e,t)),Se(t,r,"/",void 0,n)},i4=async(e,t)=>{let r=Ee("GetAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},a4=async(e,t)=>{let r=Ee("GetAdapterVersion"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},c4=async(e,t)=>{let r=Ee("GetDocumentAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},d4=async(e,t)=>{let r=Ee("GetDocumentTextDetection"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},l4=async(e,t)=>{let r=Ee("GetExpenseAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},u4=async(e,t)=>{let r=Ee("GetLendingAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},f4=async(e,t)=>{let r=Ee("GetLendingAnalysisSummary"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},m4=async(e,t)=>{let r=Ee("ListAdapters"),n;return n=JSON.stringify(E6(e)),Se(t,r,"/",void 0,n)},p4=async(e,t)=>{let r=Ee("ListAdapterVersions"),n;return n=JSON.stringify(_6(e)),Se(t,r,"/",void 0,n)},h4=async(e,t)=>{let r=Ee("ListTagsForResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},g4=async(e,t)=>{let r=Ee("StartDocumentAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},y4=async(e,t)=>{let r=Ee("StartDocumentTextDetection"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},S4=async(e,t)=>{let r=Ee("StartExpenseAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},E4=async(e,t)=>{let r=Ee("StartLendingAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},_4=async(e,t)=>{let r=Ee("TagResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},w4=async(e,t)=>{let r=Ee("UntagResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},x4=async(e,t)=>{let r=Ee("UpdateAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},b4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=A6(r),{$metadata:W(e),...n}},C4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=R6(r),{$metadata:W(e),...n}},T4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=I6(r),{$metadata:W(e),...n}},v4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},A4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},R4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},I4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},P4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=N6(r),{$metadata:W(e),...n}},O4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=B6(r),{$metadata:W(e),...n}},N4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=U6(r),{$metadata:W(e),...n}},D4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=$6(r),{$metadata:W(e),...n}},k4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=H6(r),{$metadata:W(e),...n}},M4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=q6(r),{$metadata:W(e),...n}},L4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=j6(r),{$metadata:W(e),...n}},F4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},B4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=o8(r),{$metadata:W(e),...n}},U4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=s8(r),{$metadata:W(e),...n}},$4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},H4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},q4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},j4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},z4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},V4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},G4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},W4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=f8(r),{$metadata:W(e),...n}},ye=async(e,t)=>{let r={...e,body:await fe.parseJsonErrorBody(e.body,t)},n=fe.loadRestJsonErrorCode(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.textract#AccessDeniedException":throw await K4(r);case"BadDocumentException":case"com.amazonaws.textract#BadDocumentException":throw await Y4(r);case"DocumentTooLargeException":case"com.amazonaws.textract#DocumentTooLargeException":throw await X4(r);case"HumanLoopQuotaExceededException":case"com.amazonaws.textract#HumanLoopQuotaExceededException":throw await Q4(r);case"InternalServerError":case"com.amazonaws.textract#InternalServerError":throw await e6(r);case"InvalidParameterException":case"com.amazonaws.textract#InvalidParameterException":throw await n6(r);case"InvalidS3ObjectException":case"com.amazonaws.textract#InvalidS3ObjectException":throw await o6(r);case"ProvisionedThroughputExceededException":case"com.amazonaws.textract#ProvisionedThroughputExceededException":throw await i6(r);case"ThrottlingException":case"com.amazonaws.textract#ThrottlingException":throw await d6(r);case"UnsupportedDocumentException":case"com.amazonaws.textract#UnsupportedDocumentException":throw await l6(r);case"ConflictException":case"com.amazonaws.textract#ConflictException":throw await J4(r);case"IdempotentParameterMismatchException":case"com.amazonaws.textract#IdempotentParameterMismatchException":throw await Z4(r);case"LimitExceededException":case"com.amazonaws.textract#LimitExceededException":throw await s6(r);case"ServiceQuotaExceededException":case"com.amazonaws.textract#ServiceQuotaExceededException":throw await c6(r);case"ValidationException":case"com.amazonaws.textract#ValidationException":throw await u6(r);case"InvalidKMSKeyException":case"com.amazonaws.textract#InvalidKMSKeyException":throw await r6(r);case"ResourceNotFoundException":case"com.amazonaws.textract#ResourceNotFoundException":throw await a6(r);case"InvalidJobIdException":case"com.amazonaws.textract#InvalidJobIdException":throw await t6(r);default:let o=r.body;return m8({output:e,parsedBody:o,errorCode:n})}},K4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Cl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},Y4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Tl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},J4=async(e,t)=>{let r=e.body,n=g._json(r),o=new kl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},X4=async(e,t)=>{let r=e.body,n=g._json(r),o=new vl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},Q4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Al({$metadata:W(e),...n});return g.decorateServiceException(o,r)},Z4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ml({$metadata:W(e),...n});return g.decorateServiceException(o,r)},e6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Rl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},t6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Hl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},r6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ul({$metadata:W(e),...n});return g.decorateServiceException(o,r)},n6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Il({$metadata:W(e),...n});return g.decorateServiceException(o,r)},o6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Pl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},s6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ll({$metadata:W(e),...n});return g.decorateServiceException(o,r)},i6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ol({$metadata:W(e),...n});return g.decorateServiceException(o,r)},a6=async(e,t)=>{let r=e.body,n=g._json(r),o=new $l({$metadata:W(e),...n});return g.decorateServiceException(o,r)},c6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Fl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},d6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Nl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},l6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Dl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},u6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Bl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},f6=(e,t)=>g.take(e,{AdaptersConfig:g._json,Document:r=>fu(r,t),FeatureTypes:g._json,HumanLoopConfig:g._json,QueriesConfig:g._json}),m6=(e,t)=>g.take(e,{Document:r=>fu(r,t)}),p6=(e,t)=>g.take(e,{DocumentPages:r=>S6(r,t)}),h6=(e,t)=>g.take(e,{AdapterName:[],AutoUpdate:[],ClientRequestToken:[!0,r=>r??QP.v4()],Description:[],FeatureTypes:g._json,Tags:g._json}),g6=(e,t)=>g.take(e,{AdapterId:[],ClientRequestToken:[!0,r=>r??QP.v4()],DatasetConfig:g._json,KMSKeyId:[],OutputConfig:g._json,Tags:g._json}),y6=(e,t)=>g.take(e,{Document:r=>fu(r,t)}),fu=(e,t)=>g.take(e,{Bytes:t.base64Encoder,S3Object:g._json}),S6=(e,t)=>e.filter(r=>r!=null).map(r=>fu(r,t)),E6=(e,t)=>g.take(e,{AfterCreationTime:r=>r.getTime()/1e3,BeforeCreationTime:r=>r.getTime()/1e3,MaxResults:[],NextToken:[]}),_6=(e,t)=>g.take(e,{AdapterId:[],AfterCreationTime:r=>r.getTime()/1e3,BeforeCreationTime:r=>r.getTime()/1e3,MaxResults:[],NextToken:[]}),w6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>x6(n)),x6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),FeatureTypes:g._json}),b6=(e,t)=>g.take(e,{AdapterVersion:r=>YP(r),Baseline:r=>YP(r),FeatureType:g.expectString}),C6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>b6(n)),T6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>v6(n)),v6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterVersion:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),FeatureTypes:g._json,Status:g.expectString,StatusMessage:g.expectString}),A6=(e,t)=>g.take(e,{AnalyzeDocumentModelVersion:g.expectString,Blocks:r=>Go(r),DocumentMetadata:g._json,HumanLoopActivationOutput:r=>z6(r)}),R6=(e,t)=>g.take(e,{DocumentMetadata:g._json,ExpenseDocuments:r=>eO(r)}),KP=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,NormalizedValue:g._json,Text:g.expectString}),I6=(e,t)=>g.take(e,{AnalyzeIDModelVersion:g.expectString,DocumentMetadata:g._json,IdentityDocuments:r=>W6(r)}),P6=(e,t)=>g.take(e,{BlockType:g.expectString,ColumnIndex:g.expectInt32,ColumnSpan:g.expectInt32,Confidence:g.limitedParseFloat32,EntityTypes:g._json,Geometry:r=>mu(r),Id:g.expectString,Page:g.expectInt32,Query:g._json,Relationships:g._json,RowIndex:g.expectInt32,RowSpan:g.expectInt32,SelectionStatus:g.expectString,Text:g.expectString,TextType:g.expectString}),Go=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>P6(n)),O6=(e,t)=>g.take(e,{Height:g.limitedParseFloat32,Left:g.limitedParseFloat32,Top:g.limitedParseFloat32,Width:g.limitedParseFloat32}),N6=(e,t)=>g.take(e,{Blocks:r=>Go(r),DetectDocumentTextModelVersion:g.expectString,DocumentMetadata:g._json}),YP=(e,t)=>g.take(e,{F1Score:g.limitedParseFloat32,Precision:g.limitedParseFloat32,Recall:g.limitedParseFloat32}),D6=(e,t)=>g.take(e,{Code:g.expectString,Confidence:g.limitedParseFloat32}),JP=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>mu(r),Text:g.expectString}),ZP=(e,t)=>g.take(e,{Blocks:r=>Go(r),ExpenseIndex:g.expectInt32,LineItemGroups:r=>r8(r),SummaryFields:r=>tO(r)}),eO=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>ZP(n)),k6=(e,t)=>g.take(e,{Currency:r=>D6(r),GroupProperties:g._json,LabelDetection:r=>JP(r),PageNumber:g.expectInt32,Type:r=>M6(r),ValueDetection:r=>JP(r)}),tO=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>k6(n)),M6=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Text:g.expectString}),L6=(e,t)=>g.take(e,{ExpenseDocument:r=>ZP(r),IdentityDocument:r=>rO(r),LendingDocument:r=>Y6(r)}),F6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>L6(n)),mu=(e,t)=>g.take(e,{BoundingBox:r=>O6(r),Polygon:r=>c8(r),RotationAngle:g.limitedParseFloat32}),B6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,AutoUpdate:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),Description:g.expectString,FeatureTypes:g._json,Tags:g._json}),U6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterVersion:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),DatasetConfig:g._json,EvaluationMetrics:r=>C6(r),FeatureTypes:g._json,KMSKeyId:g.expectString,OutputConfig:g._json,Status:g.expectString,StatusMessage:g.expectString,Tags:g._json}),$6=(e,t)=>g.take(e,{AnalyzeDocumentModelVersion:g.expectString,Blocks:r=>Go(r),DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),H6=(e,t)=>g.take(e,{Blocks:r=>Go(r),DetectDocumentTextModelVersion:g.expectString,DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),q6=(e,t)=>g.take(e,{AnalyzeExpenseModelVersion:g.expectString,DocumentMetadata:g._json,ExpenseDocuments:r=>eO(r),JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),j6=(e,t)=>g.take(e,{AnalyzeLendingModelVersion:g.expectString,DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,Results:r=>Z6(r),StatusMessage:g.expectString,Warnings:g._json}),z6=(e,t)=>g.take(e,{HumanLoopActivationConditionsEvaluationResults:g.LazyJsonString.from,HumanLoopActivationReasons:g._json,HumanLoopArn:g.expectString}),rO=(e,t)=>g.take(e,{Blocks:r=>Go(r),DocumentIndex:g.expectInt32,IdentityDocumentFields:r=>G6(r)}),V6=(e,t)=>g.take(e,{Type:r=>KP(r),ValueDetection:r=>KP(r)}),G6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>V6(n)),W6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>rO(n)),nO=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>mu(r),SelectionStatus:g.expectString,Text:g.expectString}),K6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>nO(n)),Y6=(e,t)=>g.take(e,{LendingFields:r=>X6(r),SignatureDetections:r=>u8(r)}),J6=(e,t)=>g.take(e,{KeyDetection:r=>nO(r),Type:g.expectString,ValueDetections:r=>K6(r)}),X6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>J6(n)),Q6=(e,t)=>g.take(e,{Extractions:r=>F6(r),Page:g.expectInt32,PageClassification:r=>i8(r)}),Z6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>Q6(n)),e8=(e,t)=>g.take(e,{LineItemExpenseFields:r=>tO(r)}),t8=(e,t)=>g.take(e,{LineItemGroupIndex:g.expectInt32,LineItems:r=>n8(r)}),r8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>t8(n)),n8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>e8(n)),o8=(e,t)=>g.take(e,{Adapters:r=>w6(r),NextToken:g.expectString}),s8=(e,t)=>g.take(e,{AdapterVersions:r=>T6(r),NextToken:g.expectString}),i8=(e,t)=>g.take(e,{PageNumber:r=>XP(r),PageType:r=>XP(r)}),a8=(e,t)=>g.take(e,{X:g.limitedParseFloat32,Y:g.limitedParseFloat32}),c8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>a8(n)),d8=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Value:g.expectString}),XP=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>d8(n)),l8=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>mu(r)}),u8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>l8(n)),f8=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,AutoUpdate:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),Description:g.expectString,FeatureTypes:g._json}),W=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),m8=g.withBaseException(Pe),Se=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return o!==void 0&&(l.body=o),new Yg.HttpRequest(l)};function Ee(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`Textract.${e}`}}var ql=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeDocument",{}).n("TextractClient","AnalyzeDocumentCommand").f(void 0,void 0).ser(QG).de(b4).build(){},jl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeExpense",{}).n("TextractClient","AnalyzeExpenseCommand").f(void 0,void 0).ser(ZG).de(C4).build(){},zl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeID",{}).n("TextractClient","AnalyzeIDCommand").f(void 0,void 0).ser(e4).de(T4).build(){},Vl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","CreateAdapter",{}).n("TextractClient","CreateAdapterCommand").f(void 0,void 0).ser(t4).de(v4).build(){},Gl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","CreateAdapterVersion",{}).n("TextractClient","CreateAdapterVersionCommand").f(void 0,void 0).ser(r4).de(A4).build(){},Wl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DeleteAdapter",{}).n("TextractClient","DeleteAdapterCommand").f(void 0,void 0).ser(n4).de(R4).build(){},Kl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DeleteAdapterVersion",{}).n("TextractClient","DeleteAdapterVersionCommand").f(void 0,void 0).ser(o4).de(I4).build(){},Yl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DetectDocumentText",{}).n("TextractClient","DetectDocumentTextCommand").f(void 0,void 0).ser(s4).de(P4).build(){},Jl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetAdapter",{}).n("TextractClient","GetAdapterCommand").f(void 0,void 0).ser(i4).de(O4).build(){},Xl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetAdapterVersion",{}).n("TextractClient","GetAdapterVersionCommand").f(void 0,void 0).ser(a4).de(N4).build(){},Ql=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetDocumentAnalysis",{}).n("TextractClient","GetDocumentAnalysisCommand").f(void 0,void 0).ser(c4).de(D4).build(){},Zl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetDocumentTextDetection",{}).n("TextractClient","GetDocumentTextDetectionCommand").f(void 0,void 0).ser(d4).de(k4).build(){},eu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetExpenseAnalysis",{}).n("TextractClient","GetExpenseAnalysisCommand").f(void 0,void 0).ser(l4).de(M4).build(){},tu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetLendingAnalysis",{}).n("TextractClient","GetLendingAnalysisCommand").f(void 0,void 0).ser(u4).de(L4).build(){},ru=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetLendingAnalysisSummary",{}).n("TextractClient","GetLendingAnalysisSummaryCommand").f(void 0,void 0).ser(f4).de(F4).build(){},Ii=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListAdapters",{}).n("TextractClient","ListAdaptersCommand").f(void 0,void 0).ser(m4).de(B4).build(){},Pi=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListAdapterVersions",{}).n("TextractClient","ListAdapterVersionsCommand").f(void 0,void 0).ser(p4).de(U4).build(){},nu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListTagsForResource",{}).n("TextractClient","ListTagsForResourceCommand").f(void 0,void 0).ser(h4).de($4).build(){},ou=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartDocumentAnalysis",{}).n("TextractClient","StartDocumentAnalysisCommand").f(void 0,void 0).ser(g4).de(H4).build(){},su=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartDocumentTextDetection",{}).n("TextractClient","StartDocumentTextDetectionCommand").f(void 0,void 0).ser(y4).de(q4).build(){},iu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartExpenseAnalysis",{}).n("TextractClient","StartExpenseAnalysisCommand").f(void 0,void 0).ser(S4).de(j4).build(){},au=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartLendingAnalysis",{}).n("TextractClient","StartLendingAnalysisCommand").f(void 0,void 0).ser(E4).de(z4).build(){},cu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","TagResource",{}).n("TextractClient","TagResourceCommand").f(void 0,void 0).ser(_4).de(V4).build(){},du=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","UntagResource",{}).n("TextractClient","UntagResourceCommand").f(void 0,void 0).ser(w4).de(G4).build(){},lu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","UpdateAdapter",{}).n("TextractClient","UpdateAdapterCommand").f(void 0,void 0).ser(x4).de(W4).build(){},p8={AnalyzeDocumentCommand:ql,AnalyzeExpenseCommand:jl,AnalyzeIDCommand:zl,CreateAdapterCommand:Vl,CreateAdapterVersionCommand:Gl,DeleteAdapterCommand:Wl,DeleteAdapterVersionCommand:Kl,DetectDocumentTextCommand:Yl,GetAdapterCommand:Jl,GetAdapterVersionCommand:Xl,GetDocumentAnalysisCommand:Ql,GetDocumentTextDetectionCommand:Zl,GetExpenseAnalysisCommand:eu,GetLendingAnalysisCommand:tu,GetLendingAnalysisSummaryCommand:ru,ListAdaptersCommand:Ii,ListAdapterVersionsCommand:Pi,ListTagsForResourceCommand:nu,StartDocumentAnalysisCommand:ou,StartDocumentTextDetectionCommand:su,StartExpenseAnalysisCommand:iu,StartLendingAnalysisCommand:au,TagResourceCommand:cu,UntagResourceCommand:du,UpdateAdapterCommand:lu},uu=class extends Vo{};g.createAggregatedClient(p8,uu);var h8=Ri.createPaginator(Vo,Pi,"NextToken","NextToken","MaxResults"),g8=Ri.createPaginator(Vo,Ii,"NextToken","NextToken","MaxResults");Object.defineProperty(B,"$Command",{enumerable:!0,get:function(){return g.Command}});Object.defineProperty(B,"__Client",{enumerable:!0,get:function(){return g.Client}});B.AccessDeniedException=Cl;B.AdapterVersionStatus=qG;B.AnalyzeDocumentCommand=ql;B.AnalyzeExpenseCommand=jl;B.AnalyzeIDCommand=zl;B.AutoUpdate=JG;B.BadDocumentException=Tl;B.BlockType=zG;B.ConflictException=kl;B.ContentClassifier=jG;B.CreateAdapterCommand=Vl;B.CreateAdapterVersionCommand=Gl;B.DeleteAdapterCommand=Wl;B.DeleteAdapterVersionCommand=Kl;B.DetectDocumentTextCommand=Yl;B.DocumentTooLargeException=vl;B.EntityType=VG;B.FeatureType=HG;B.GetAdapterCommand=Jl;B.GetAdapterVersionCommand=Xl;B.GetDocumentAnalysisCommand=Ql;B.GetDocumentTextDetectionCommand=Zl;B.GetExpenseAnalysisCommand=eu;B.GetLendingAnalysisCommand=tu;B.GetLendingAnalysisSummaryCommand=ru;B.HumanLoopQuotaExceededException=Al;B.IdempotentParameterMismatchException=Ml;B.InternalServerError=Rl;B.InvalidJobIdException=Hl;B.InvalidKMSKeyException=Ul;B.InvalidParameterException=Il;B.InvalidS3ObjectException=Pl;B.JobStatus=XG;B.LimitExceededException=Ll;B.ListAdapterVersionsCommand=Pi;B.ListAdaptersCommand=Ii;B.ListTagsForResourceCommand=nu;B.ProvisionedThroughputExceededException=Ol;B.RelationshipType=GG;B.ResourceNotFoundException=$l;B.SelectionStatus=WG;B.ServiceQuotaExceededException=Fl;B.StartDocumentAnalysisCommand=ou;B.StartDocumentTextDetectionCommand=su;B.StartExpenseAnalysisCommand=iu;B.StartLendingAnalysisCommand=au;B.TagResourceCommand=cu;B.TextType=KG;B.Textract=uu;B.TextractClient=Vo;B.TextractServiceException=Pe;B.ThrottlingException=Nl;B.UnsupportedDocumentException=Dl;B.UntagResourceCommand=du;B.UpdateAdapterCommand=lu;B.ValidationException=Bl;B.ValueType=YG;B.paginateListAdapterVersions=h8;B.paginateListAdapters=g8});c();var pu=v(SP(),1),hu=v(oO(),1),y8=new pu.BedrockRuntimeClient({region:process.env.BEDROCK_REGION||"us-east-1"}),S8=new hu.TextractClient({region:process.env.BEDROCK_REGION||"us-east-1"}),dse=async e=>{try{let{documentContent:t,documentType:r="text"}=JSON.parse(e.body||"{}"),n="";r==="image"||r==="scanned-pdf"?n=(await S8.send(new hu.DetectDocumentTextCommand({Document:{Bytes:Buffer.from(t,"base64")}}))).Blocks?.filter(l=>l.BlockType==="LINE").map(l=>l.Text).join(`
`)||"":n=t;let o=`
Extract and structure the following resume content into JSON format:

${n}

Return a JSON object with the following structure:
{
  "personalInfo": {
    "name": "",
    "email": "",
    "phone": "",
    "location": "",
    "linkedin": "",
    "github": "",
    "website": ""
  },
  "summary": "",
  "experience": [
    {
      "company": "",
      "position": "",
      "duration": "",
      "location": "",
      "responsibilities": []
    }
  ],
  "education": [
    {
      "institution": "",
      "degree": "",
      "field": "",
      "graduationDate": "",
      "gpa": ""
    }
  ],
  "skills": [],
  "certifications": [],
  "projects": [
    {
      "name": "",
      "description": "",
      "technologies": [],
      "link": ""
    }
  ]
}`,s=await y8.send(new pu.InvokeModelCommand({modelId:"anthropic.claude-3-sonnet-20240229-v1:0",body:JSON.stringify({anthropic_version:"bedrock-2023-05-31",max_tokens:4e3,messages:[{role:"user",content:o}]}),contentType:"application/json"})),i=JSON.parse(new TextDecoder().decode(s.body)),a=JSON.parse(i.content[0].text);return{statusCode:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({success:!0,data:a,extractedText:n})}}catch(t){return console.error("Resume parsing error:",t),{statusCode:500,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({success:!1,error:"Failed to parse resume",message:t instanceof Error?t.message:"Unknown error"})}}};export{dse as handler};
//# sourceMappingURL=index.mjs.map
