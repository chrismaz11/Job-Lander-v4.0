/** * Reads SSM environment context from a known Amplify environment variable, * fetches values from SSM and places those values in the corresponding environment variables */export const internalAmplifyFunctionResolveSsmParams = async (client) => {    const envPathObject = JSON.parse(process.env.AMPLIFY_SSM_ENV_CONFIG ?? '{}');    const paths = Object.values(envPathObject).map((paths) => paths.path);    if (paths.length === 0) {        return;    }    let actualSsmClient;    if (client) {        actualSsmClient = client;    }    else {        const ssmSdk = await import('@aws-sdk/client-ssm');        actualSsmClient = new ssmSdk.SSM();    }    const chunkArray = (array, chunkSize) => {        const chunks = [];        for (let i = 0; i < array.length; i += chunkSize) {            chunks.push(array.slice(i, i + chunkSize));        }        return chunks;    };    const resolveSecrets = async (paths) => {        const response = (await Promise.all(chunkArray(paths, 10).map(async (chunkedPaths) => await actualSsmClient.getParameters({            Names: chunkedPaths,            WithDecryption: true,        })))).reduce((accumulator, res) => {            accumulator.Parameters?.push(...(res.Parameters ?? []));            accumulator.InvalidParameters?.push(...(res.InvalidParameters ?? []));            return accumulator;        }, {            Parameters: [],            InvalidParameters: [],        });        if (response.Parameters && response.Parameters.length > 0) {            for (const parameter of response.Parameters) {                if (parameter.Name) {                    const envKey = Object.keys(envPathObject).find((key) => envPathObject[key].sharedPath === parameter.Name ||                        envPathObject[key].path === parameter.Name);                    if (envKey) {                        process.env[envKey] = parameter.Value;                    }                }            }        }        return response;    };    const response = await resolveSecrets(paths);    const sharedPaths = (response?.InvalidParameters || [])        .map((invalidParam) => Object.values(envPathObject).find((paths) => paths.path === invalidParam)?.sharedPath)        .filter((sharedParam) => !!sharedParam);     if (sharedPaths.length > 0) {        await resolveSecrets(sharedPaths);    }};await internalAmplifyFunctionResolveSsmParams();const SSM_PARAMETER_REFRESH_MS = 1000 * 60;setInterval(async () => {    try {        await internalAmplifyFunctionResolveSsmParams();    }    catch (error) {        try {                        console.debug(error);                    }        catch {                    }    }}, SSM_PARAMETER_REFRESH_MS);export {};
var LO=Object.create;var Ni=Object.defineProperty;var FO=Object.getOwnPropertyDescriptor;var BO=Object.getOwnPropertyNames;var UO=Object.getPrototypeOf,$O=Object.prototype.hasOwnProperty;var ee=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var T=(e,t)=>()=>(e&&(t=e(e=0)),t);var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ct=(e,t)=>{for(var r in t)Ni(e,r,{get:t[r],enumerable:!0})},ny=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of BO(t))!$O.call(e,o)&&o!==r&&Ni(e,o,{get:()=>t[o],enumerable:!(n=FO(t,o))||n.enumerable});return e};var v=(e,t,r)=>(r=e!=null?LO(UO(e)):{},ny(t||!e||!e.__esModule?Ni(r,"default",{value:e,enumerable:!0}):r,e)),Y=e=>ny(Ni({},"__esModule",{value:!0}),e);import{createRequire as HO}from"node:module";import qO from"node:path";import jO from"node:url";var c=T(()=>{global.require=HO(import.meta.url);global.__filename=jO.fileURLToPath(import.meta.url);global.__dirname=qO.dirname(__filename)});var br=I(ue=>{"use strict";c();ue.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpAuthLocation||(ue.HttpAuthLocation={}));ue.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(ue.HttpApiKeyAuthLocation||(ue.HttpApiKeyAuthLocation={}));ue.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(ue.EndpointURLScheme||(ue.EndpointURLScheme={}));ue.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(ue.AlgorithmId||(ue.AlgorithmId={}));var zO=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>ue.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>ue.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},VO=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},GO=e=>zO(e),WO=e=>VO(e);ue.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ue.FieldPosition||(ue.FieldPosition={}));var KO="__smithy_context";ue.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(ue.IniSectionType||(ue.IniSectionType={}));ue.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ue.RequestHandlerProtocol||(ue.RequestHandlerProtocol={}));ue.SMITHY_CONTEXT_KEY=KO;ue.getDefaultClientConfiguration=GO;ue.resolveDefaultRuntimeConfig=WO});var ie=I(Cr=>{"use strict";c();var YO=br(),JO=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),XO=e=>({httpHandler:e.httpHandler()}),_u=class{name;kind;values;constructor({name:t,kind:r=YO.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},wu=class{entries={};encoding;constructor({fields:t=[],encoding:r="utf-8"}){t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},xu=class e{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=QO(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function QO(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var bu=class{statusCode;reason;headers;body;constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function ZO(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Cr.Field=_u;Cr.Fields=wu;Cr.HttpRequest=xu;Cr.HttpResponse=bu;Cr.getHttpHandlerExtensionConfiguration=JO;Cr.isValidHostname=ZO;Cr.resolveHttpHandlerRuntimeConfig=XO});var fy=I((P8,uy)=>{"use strict";c();var Di=Object.defineProperty,eN=Object.getOwnPropertyDescriptor,tN=Object.getOwnPropertyNames,rN=Object.prototype.hasOwnProperty,Ko=(e,t)=>Di(e,"name",{value:t,configurable:!0}),nN=(e,t)=>{for(var r in t)Di(e,r,{get:t[r],enumerable:!0})},oN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tN(t))!rN.call(e,o)&&o!==r&&Di(e,o,{get:()=>t[o],enumerable:!(n=eN(t,o))||n.enumerable});return e},sN=e=>oN(Di({},"__esModule",{value:!0}),e),oy={};nN(oy,{eventStreamHandlingMiddleware:()=>ay,eventStreamHandlingMiddlewareOptions:()=>cy,eventStreamHeaderMiddleware:()=>dy,eventStreamHeaderMiddlewareOptions:()=>ly,getEventStreamPlugin:()=>iN,resolveEventStreamConfig:()=>sy});uy.exports=sN(oy);function sy(e){let t=e.signer,r=e.signer,n=Object.assign(e,{eventSigner:t,messageSigner:r}),o=n.eventStreamPayloadHandlerProvider(n);return Object.assign(n,{eventStreamPayloadHandler:o})}Ko(sy,"resolveEventStreamConfig");var iy=ie(),ay=Ko(e=>(t,r)=>async n=>{let{request:o}=n;return iy.HttpRequest.isInstance(o)?e.eventStreamPayloadHandler.handle(t,n,r):t(n)},"eventStreamHandlingMiddleware"),cy={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},dy=Ko(e=>async t=>{let{request:r}=t;return iy.HttpRequest.isInstance(r)?(r.headers={...r.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:r})):e(t)},"eventStreamHeaderMiddleware"),ly={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},iN=Ko(e=>({applyToStack:Ko(t=>{t.addRelativeTo(ay(e),cy),t.add(dy,ly)},"applyToStack")}),"getEventStreamPlugin")});var Vn=I((N8,yy)=>{"use strict";c();var Mi=Object.defineProperty,aN=Object.getOwnPropertyDescriptor,cN=Object.getOwnPropertyNames,dN=Object.prototype.hasOwnProperty,ki=(e,t)=>Mi(e,"name",{value:t,configurable:!0}),lN=(e,t)=>{for(var r in t)Mi(e,r,{get:t[r],enumerable:!0})},uN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cN(t))!dN.call(e,o)&&o!==r&&Mi(e,o,{get:()=>t[o],enumerable:!(n=aN(t,o))||n.enumerable});return e},fN=e=>uN(Mi({},"__esModule",{value:!0}),e),my={};lN(my,{getHostHeaderPlugin:()=>pN,hostHeaderMiddleware:()=>hy,hostHeaderMiddlewareOptions:()=>gy,resolveHostHeaderConfig:()=>py});yy.exports=fN(my);var mN=ie();function py(e){return e}ki(py,"resolveHostHeaderConfig");var hy=ki(e=>t=>async r=>{if(!mN.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},"hostHeaderMiddleware"),gy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},pN=ki(e=>({applyToStack:ki(t=>{t.add(hy(e),gy)},"applyToStack")}),"getHostHeaderPlugin")});var Gn=I((k8,wy)=>{"use strict";c();var Li=Object.defineProperty,hN=Object.getOwnPropertyDescriptor,gN=Object.getOwnPropertyNames,yN=Object.prototype.hasOwnProperty,Cu=(e,t)=>Li(e,"name",{value:t,configurable:!0}),SN=(e,t)=>{for(var r in t)Li(e,r,{get:t[r],enumerable:!0})},EN=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of gN(t))!yN.call(e,o)&&o!==r&&Li(e,o,{get:()=>t[o],enumerable:!(n=hN(t,o))||n.enumerable});return e},_N=e=>EN(Li({},"__esModule",{value:!0}),e),Sy={};SN(Sy,{getLoggerPlugin:()=>wN,loggerMiddleware:()=>Ey,loggerMiddlewareOptions:()=>_y});wy.exports=_N(Sy);var Ey=Cu(()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:l}=a,m=d??t.inputFilterSensitiveLog,h=l??t.outputFilterSensitiveLog,{$metadata:S,...y}=n.output;return i?.info?.({clientName:o,commandName:s,input:m(r.input),output:h(y),metadata:S}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:d}=a,l=d??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:l(r.input),error:n,metadata:n.$metadata}),n}},"loggerMiddleware"),_y={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},wN=Cu(e=>({applyToStack:Cu(t=>{t.add(Ey(),_y)},"applyToStack")}),"getLoggerPlugin")});var xy=I(Bi=>{"use strict";c();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.InvokeStore=void 0;var xN=ee("async_hooks"),Tu=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Tu||(globalThis.awslambda=globalThis.awslambda||{});var bN={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},vu=class{static storage=new xN.AsyncLocalStorage;static PROTECTED_KEYS=bN;static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}},Fi;!Tu&&globalThis.awslambda?.InvokeStore?Fi=globalThis.awslambda.InvokeStore:(Fi=vu,!Tu&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=Fi));Bi.InvokeStore=Fi});var Ru=I(Ui=>{"use strict";c();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.recursionDetectionMiddleware=void 0;var CN=xy(),TN=ie(),Au="X-Amzn-Trace-Id",vN="AWS_LAMBDA_FUNCTION_NAME",AN="_X_AMZN_TRACE_ID",RN=()=>e=>async t=>{let{request:r}=t;if(!TN.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(l=>l.toLowerCase()===Au.toLowerCase())??Au;if(r.headers.hasOwnProperty(n))return e(t);let o=process.env[vN],s=process.env[AN],a=CN.InvokeStore.getXRayTraceId()??s,d=l=>typeof l=="string"&&l.length>0;return d(o)&&d(a)&&(r.headers[Au]=a),e({...t,request:r})};Ui.recursionDetectionMiddleware=RN});var Wn=I(($8,Ou)=>{"use strict";c();var $i=Object.defineProperty,IN=Object.getOwnPropertyDescriptor,PN=Object.getOwnPropertyNames,ON=Object.prototype.hasOwnProperty,by=(e,t)=>$i(e,"name",{value:t,configurable:!0}),NN=(e,t)=>{for(var r in t)$i(e,r,{get:t[r],enumerable:!0})},Iu=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of PN(t))!ON.call(e,o)&&o!==r&&$i(e,o,{get:()=>t[o],enumerable:!(n=IN(t,o))||n.enumerable});return e},DN=(e,t,r)=>(Iu(e,t,"default"),r&&Iu(r,t,"default")),kN=e=>Iu($i({},"__esModule",{value:!0}),e),Pu={};NN(Pu,{getRecursionDetectionPlugin:()=>FN});Ou.exports=kN(Pu);var MN={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},LN=Ru(),FN=by(e=>({applyToStack:by(t=>{t.add((0,LN.recursionDetectionMiddleware)(),MN)},"applyToStack")}),"getRecursionDetectionPlugin");DN(Pu,Ru(),Ou.exports)});var Nu,BN,Cy=T(()=>{c();Nu=v(br()),BN=e=>e[Nu.SMITHY_CONTEXT_KEY]||(e[Nu.SMITHY_CONTEXT_KEY]={})});var Xe=I(Du=>{"use strict";c();var Ty=br(),UN=e=>e[Ty.SMITHY_CONTEXT_KEY]||(e[Ty.SMITHY_CONTEXT_KEY]={}),$N=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};Du.getSmithyContext=UN;Du.normalizeProvider=$N});var vy,Ay=T(()=>{c();vy=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function HN(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Ry,Yo,Hi=T(()=>{c();Ry=v(Xe());Ay();Yo=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=vy(s,i),d=HN(e.httpAuthSchemes),l=(0,Ry.getSmithyContext)(n),m=[];for(let h of a){let S=d.get(h.schemeId);if(!S){m.push(`HttpAuthScheme \`${h.schemeId}\` was not enabled for this service.`);continue}let y=S.identityProvider(await t.identityProviderConfigProvider(e));if(!y){m.push(`HttpAuthScheme \`${h.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:w={},signingProperties:R={}}=h.propertiesExtractor?.(e,n)||{};h.identityProperties=Object.assign(h.identityProperties||{},w),h.signingProperties=Object.assign(h.signingProperties||{},R),l.selectedHttpAuthScheme={httpAuthOption:h,identity:await y(h.identityProperties),signer:S.signer};break}if(!l.selectedHttpAuthScheme)throw new Error(m.join(`
`));return r(o)}});var Iy,Jo,Py=T(()=>{c();Hi();Iy={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Jo=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Yo(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Iy)}})});var Qt=I(Kn=>{"use strict";c();var qN=ie(),Oy=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(qN.HttpResponse.isInstance(s)){let{headers:d={}}=s,l=Object.entries(d);i.$metadata={httpStatusCode:s.statusCode,requestId:ku(/^x-[\w-]+-request-?id$/,l),extendedRequestId:ku(/^x-[\w-]+-id-2$/,l),cfId:ku(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},ku=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],Ny=(e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},Dy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},ky={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function jN(e,t,r){return{applyToStack:n=>{n.add(Oy(e,r),Dy),n.add(Ny(e,t),ky)}}}Kn.deserializerMiddleware=Oy;Kn.deserializerMiddlewareOption=Dy;Kn.getSerdePlugin=jN;Kn.serializerMiddleware=Ny;Kn.serializerMiddlewareOption=ky});var My,Ly,zN,Fy=T(()=>{c();My=v(Qt());Hi();Ly={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:My.serializerMiddlewareOption.name},zN=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Yo(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Ly)}})});var By=T(()=>{c();Hi();Py();Fy()});var Uy,$y,VN,GN,Mu,Lu=T(()=>{c();Uy=v(ie()),$y=v(Xe()),VN=e=>t=>{throw t},GN=(e,t)=>{},Mu=e=>(t,r)=>async n=>{if(!Uy.HttpRequest.isInstance(n.request))return t(n);let s=(0,$y.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:d}=s,l=await t({...n,request:await d.sign(n.request,a,i)}).catch((d.errorHandler||VN)(i));return(d.successHandler||GN)(l.response,i),l}});var Hy,Xo,qy=T(()=>{c();Lu();Hy={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Xo=e=>({applyToStack:t=>{t.addRelativeTo(Mu(e),Hy)}})});var jy=T(()=>{c();Lu();qy()});var Tr,zy=T(()=>{c();Tr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function Vy(e,t,r,n,o){return async function*(i,a,...d){let l=a,m=i.startingToken??l[r],h=!0,S;for(;h;){if(l[r]=m,o&&(l[o]=l[o]??i.pageSize),i.client instanceof e)S=await WN(t,i.client,a,i.withCommand,...d);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield S;let y=m;m=KN(S,n),h=!!(m&&(!i.stopOnSameToken||m!==y))}return void 0}}var WN,KN,Gy=T(()=>{c();WN=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};KN=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var Fu=I(Wy=>{"use strict";c();var YN=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";Wy.isArrayBuffer=YN});var Yn=I(Uu=>{"use strict";c();var JN=Fu(),Bu=ee("buffer"),XN=(e,t=0,r=e.byteLength-t)=>{if(!JN.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Bu.Buffer.from(e,t,r)},QN=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Bu.Buffer.from(e,t):Bu.Buffer.from(e)};Uu.fromArrayBuffer=XN;Uu.fromString=QN});var Ky=I(qi=>{"use strict";c();Object.defineProperty(qi,"__esModule",{value:!0});qi.fromBase64=void 0;var ZN=Yn(),eD=/^[A-Za-z0-9+/]*={0,2}$/,tD=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!eD.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,ZN.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};qi.fromBase64=tD});var Le=I(ji=>{"use strict";c();var Yy=Yn(),Jy=e=>{let t=Yy.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},rD=e=>typeof e=="string"?Jy(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),nD=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return Yy.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};ji.fromUtf8=Jy;ji.toUint8Array=rD;ji.toUtf8=nD});var Xy=I(zi=>{"use strict";c();Object.defineProperty(zi,"__esModule",{value:!0});zi.toBase64=void 0;var oD=Yn(),sD=Le(),iD=e=>{let t;if(typeof e=="string"?t=(0,sD.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,oD.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};zi.toBase64=iD});var Fe=I(Qo=>{"use strict";c();var Qy=Ky(),Zy=Xy();Object.keys(Qy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Qo,e)&&Object.defineProperty(Qo,e,{enumerable:!0,get:function(){return Qy[e]}})});Object.keys(Zy).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Qo,e)&&Object.defineProperty(Qo,e,{enumerable:!0,get:function(){return Zy[e]}})})});var Hu=I(Vi=>{"use strict";c();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ChecksumStream=void 0;var aD=Fe(),cD=ee("stream"),$u=class extends cD.Duplex{expectedChecksum;checksumSourceLocation;checksum;source;base64Encoder;constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:o,base64Encoder:s}){if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${n?.constructor?.name??n} in ChecksumStream.`);this.base64Encoder=s??aD.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(o){return n(o)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Vi.ChecksumStream=$u});var vr=I(Jn=>{"use strict";c();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.isBlob=Jn.isReadableStream=void 0;var dD=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Jn.isReadableStream=dD;var lD=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Jn.isBlob=lD});var eS=I(Gi=>{"use strict";c();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.ChecksumStream=void 0;var uD=typeof ReadableStream=="function"?ReadableStream:function(){},qu=class extends uD{};Gi.ChecksumStream=qu});var tS=I(Wi=>{"use strict";c();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createChecksumStream=void 0;var fD=Fe(),mD=vr(),pD=eS(),hD=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!(0,mD.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let s=o??fD.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let i=new TransformStream({start(){},async transform(d,l){t.update(d),l.enqueue(d)},async flush(d){let l=await t.digest(),m=s(l);if(e!==m){let h=new Error(`Checksum mismatch: expected "${e}" but received "${m}" in response header "${n}".`);d.error(h)}else d.terminate()}});r.pipeThrough(i);let a=i.readable;return Object.setPrototypeOf(a,pD.ChecksumStream.prototype),a};Wi.createChecksumStream=hD});var rS=I(ju=>{"use strict";c();Object.defineProperty(ju,"__esModule",{value:!0});ju.createChecksumStream=ED;var gD=vr(),yD=Hu(),SD=tS();function ED(e){return typeof ReadableStream=="function"&&(0,gD.isReadableStream)(e.source)?(0,SD.createChecksumStream)(e):new yD.ChecksumStream(e)}});var Vu=I(Ki=>{"use strict";c();Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ByteArrayCollector=void 0;var zu=class{allocByteArray;byteLength=0;byteArrays=[];constructor(t){this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Ki.ByteArrayCollector=zu});var iS=I(Zt=>{"use strict";c();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.createBufferedReadable=void 0;Zt.createBufferedReadableStream=nS;Zt.merge=oS;Zt.flush=Yi;Zt.sizeOf=Xn;Zt.modeOf=sS;var _D=Vu();function nS(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new _D.ByteArrayCollector(l=>new Uint8Array(l))],a=-1,d=async l=>{let{value:m,done:h}=await n.read(),S=m;if(h){if(a!==-1){let y=Yi(i,a);Xn(y)>0&&l.enqueue(y)}l.close()}else{let y=sS(S,!1);if(a!==y&&(a>=0&&l.enqueue(Yi(i,a)),a=y),a===-1){l.enqueue(S);return}let w=Xn(S);s+=w;let R=Xn(i[a]);if(w>=t&&R===0)l.enqueue(S);else{let P=oS(i,a,S);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${w} is below threshold of ${t}, automatically buffering.`)),P>=t?l.enqueue(Yi(i,a)):await d(l)}}};return new ReadableStream({pull:d})}Zt.createBufferedReadable=nS;function oS(e,t,r){switch(t){case 0:return e[0]+=r,Xn(e[0]);case 1:case 2:return e[t].push(r),Xn(e[t])}}function Yi(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Xn(e){return e?.byteLength??e?.length??0}function sS(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var cS=I(Gu=>{"use strict";c();Object.defineProperty(Gu,"__esModule",{value:!0});Gu.createBufferedReadable=bD;var wD=ee("node:stream"),aS=Vu(),er=iS(),xD=vr();function bD(e,t,r){if((0,xD.isReadableStream)(e))return(0,er.createBufferedReadableStream)(e,t,r);let n=new wD.Readable({read(){}}),o=!1,s=0,i=["",new aS.ByteArrayCollector(d=>new Uint8Array(d)),new aS.ByteArrayCollector(d=>Buffer.from(new Uint8Array(d)))],a=-1;return e.on("data",d=>{let l=(0,er.modeOf)(d,!0);if(a!==l&&(a>=0&&n.push((0,er.flush)(i,a)),a=l),a===-1){n.push(d);return}let m=(0,er.sizeOf)(d);s+=m;let h=(0,er.sizeOf)(i[a]);if(m>=t&&h===0)n.push(d);else{let S=(0,er.merge)(i,a,d);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${t}, automatically buffering.`)),S>=t&&n.push((0,er.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let d=(0,er.flush)(i,a);(0,er.sizeOf)(d)>0&&n.push(d)}n.push(null)}),n}});var dS=I(Ji=>{"use strict";c();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.getAwsChunkedEncodingStream=void 0;var CD=ee("stream"),TD=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,d=a?i(o,e):void 0,l=new CD.Readable({read:()=>{}});return e.on("data",m=>{let h=n(m)||0;l.push(`${h.toString(16)}\r
`),l.push(m),l.push(`\r
`)}),e.on("end",async()=>{if(l.push(`0\r
`),a){let m=r(await d);l.push(`${s}:${m}\r
`),l.push(`\r
`)}l.push(null)}),l};Ji.getAwsChunkedEncodingStream=TD});var lS=I(Wu=>{"use strict";c();Object.defineProperty(Wu,"__esModule",{value:!0});Wu.headStream=vD;async function vD(e,t){let r=0,n=[],o=e.getReader(),s=!1;for(;!s;){let{done:d,value:l}=await o.read();if(l&&(n.push(l),r+=l?.byteLength??0),r>=t)break;s=d}o.releaseLock();let i=new Uint8Array(Math.min(t,r)),a=0;for(let d of n){if(d.byteLength>i.byteLength-a){i.set(d.subarray(0,i.byteLength-a),a);break}else i.set(d,a);a+=d.length}return i}});var uS=I(Xi=>{"use strict";c();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.headStream=void 0;var AD=ee("stream"),RD=lS(),ID=vr(),PD=(e,t)=>(0,ID.isReadableStream)(e)?(0,RD.headStream)(e,t):new Promise((r,n)=>{let o=new Ku;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});Xi.headStream=PD;var Ku=class extends AD.Writable{buffers=[];limit=1/0;bytesBuffered=0;_write(t,r,n){if(this.buffers.push(t),this.bytesBuffered+=t.byteLength??0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}});var Ju=I(Yu=>{"use strict";c();var fS=e=>encodeURIComponent(e).replace(/[!'()*]/g,OD),OD=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,ND=e=>e.split("/").map(fS).join("/");Yu.escapeUri=fS;Yu.escapeUriPath=ND});var Qi=I(mS=>{"use strict";c();var Xu=Ju();function DD(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Xu.escapeUri(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Xu.escapeUri(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Xu.escapeUri(n)}`),t.push(o)}}return t.join("&")}mS.buildQueryString=DD});var Ar=I(Zo=>{"use strict";c();var yS=ie(),SS=Qi(),Qu=ee("http"),Zu=ee("https"),ES=ee("stream"),ef=ee("http2"),kD=["ECONNRESET","EPIPE","ETIMEDOUT"],_S=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},rt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},pS=1e3,MD=(e,t,r=0)=>{if(!r)return-1;let n=o=>{let s=rt.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),i=a=>{a?.connecting?a.on("connect",()=>{rt.clearTimeout(s)}):rt.clearTimeout(s)};e.socket?i(e.socket):e.on("socket",i)};return r<2e3?(n(0),0):rt.setTimeout(n.bind(null,pS),pS)},LD=3e3,FD=(e,{keepAlive:t,keepAliveMsecs:r},n=LD)=>{if(t!==!0)return-1;let o=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})};return n===0?(o(),0):rt.setTimeout(o,n)},hS=3e3,BD=(e,t,r=xS)=>{let n=o=>{let s=r-o,i=()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)};return 0<r&&r<6e3?(n(0),0):rt.setTimeout(n.bind(null,r===0?0:hS),hS)},gS=6e3;async function wS(e,t,r=gS){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!0;o==="100-continue"&&(i=await Promise.race([new Promise(a=>{s=Number(rt.setTimeout(()=>a(!0),Math.max(gS,r)))}),new Promise(a=>{e.on("continue",()=>{rt.clearTimeout(s),a(!0)}),e.on("response",()=>{rt.clearTimeout(s),a(!1)}),e.on("error",()=>{rt.clearTimeout(s),a(!1)})})])),i&&UD(e,t.body)}function UD(e,t){if(t instanceof ES.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var xS=0,tf=class e{config;configProvider;socketWarningTimestamp=0;metadata={handlerProtocol:"http/1.1"};static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let d in o){let l=o[d]?.length??0,m=s[d]?.length??0;if(l>=i&&m>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${l} and ${m} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a}=t||{},d=!0,l=50;return{connectionTimeout:n,requestTimeout:r??o,socketAcquisitionWarningTimeout:s,httpAgent:i instanceof Qu.Agent||typeof i?.destroy=="function"?i:new Qu.Agent({keepAlive:d,maxSockets:l,...i}),httpsAgent:a instanceof Zu.Agent||typeof a?.destroy=="function"?a:new Zu.Agent({keepAlive:d,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i,a=[],d=async q=>{await i,a.forEach(rt.clearTimeout),o(q)},l=async q=>{await i,a.forEach(rt.clearTimeout),s(q)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let q=new Error("Request aborted");q.name="AbortError",l(q);return}let m=t.protocol==="https:",h=m?this.config.httpsAgent:this.config.httpAgent;a.push(rt.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(h,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let S=SS.buildQueryString(t.query||{}),y;if(t.username!=null||t.password!=null){let q=t.username??"",re=t.password??"";y=`${q}:${re}`}let w=t.path;S&&(w+=`?${S}`),t.fragment&&(w+=`#${t.fragment}`);let R=t.hostname??"";R[0]==="["&&R.endsWith("]")?R=t.hostname.slice(1,-1):R=t.hostname;let P={headers:t.headers,host:R,method:t.method,path:w,port:t.port,agent:h,auth:y},k=(m?Zu.request:Qu.request)(P,q=>{let re=new yS.HttpResponse({statusCode:q.statusCode||-1,reason:q.statusMessage,headers:_S(q.headers),body:q});d({response:re})});if(k.on("error",q=>{kD.includes(q.code)?l(Object.assign(q,{name:"TimeoutError"})):l(q)}),r){let q=()=>{k.destroy();let re=new Error("Request aborted");re.name="AbortError",l(re)};if(typeof r.addEventListener=="function"){let re=r;re.addEventListener("abort",q,{once:!0}),k.once("close",()=>re.removeEventListener("abort",q))}else r.onabort=q}let $=n??this.config.requestTimeout;a.push(MD(k,l,this.config.connectionTimeout)),a.push(BD(k,l,$));let z=P.agent;typeof z=="object"&&"keepAlive"in z&&a.push(FD(k,{keepAlive:z.keepAlive,keepAliveMsecs:z.keepAliveMsecs})),i=wS(k,t,$).catch(q=>(a.forEach(rt.clearTimeout),s(q)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},rf=class{sessions=[];constructor(t){this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},nf=class{constructor(t){if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}config;sessionCache=new Map;lease(t,r){let n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){let d=o.poll();if(d&&!this.config.disableConcurrency)return d}let s=ef.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},d=>{if(d)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();let i=()=>{s.destroy(),this.deleteSession(n,s)};s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new rf;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},of=class e{config;configProvider;metadata={handlerProtocol:"h2"};connectionManager=new nf({});static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,d)=>{let l=!1,m,h=async de=>{await m,a(de)},S=async de=>{await m,d(de)};if(r?.aborted){l=!0;let de=new Error("Request aborted");de.name="AbortError",S(de);return}let{hostname:y,method:w,port:R,protocol:P,query:N}=t,k="";if(t.username!=null||t.password!=null){let de=t.username??"",Oe=t.password??"";k=`${de}:${Oe}@`}let $=`${P}//${k}${y}${R?`:${R}`:""}`,z={destination:new URL($)},q=this.connectionManager.lease(z,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),re=de=>{s&&this.destroySession(q),l=!0,S(de)},ze=SS.buildQueryString(N||{}),tt=t.path;ze&&(tt+=`?${ze}`),t.fragment&&(tt+=`#${t.fragment}`);let _e=q.request({...t.headers,[ef.constants.HTTP2_HEADER_PATH]:tt,[ef.constants.HTTP2_HEADER_METHOD]:w});if(q.ref(),_e.on("response",de=>{let Oe=new yS.HttpResponse({statusCode:de[":status"]||-1,headers:_S(de),body:_e});l=!0,h({response:Oe}),s&&(q.close(),this.connectionManager.deleteSession($,q))}),i&&_e.setTimeout(i,()=>{_e.close();let de=new Error(`Stream timed out because of no activity for ${i} ms`);de.name="TimeoutError",re(de)}),r){let de=()=>{_e.close();let Oe=new Error("Request aborted");Oe.name="AbortError",re(Oe)};if(typeof r.addEventListener=="function"){let Oe=r;Oe.addEventListener("abort",de,{once:!0}),_e.once("close",()=>Oe.removeEventListener("abort",de))}else r.onabort=de}_e.on("frameError",(de,Oe,zn)=>{re(new Error(`Frame type id ${de} in stream id ${zn} has failed with code ${Oe}.`))}),_e.on("error",re),_e.on("aborted",()=>{re(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${_e.rstCode}.`))}),_e.on("close",()=>{q.unref(),s&&q.destroy(),l||re(new Error("Unexpected error: http2 request did not get a response"))}),m=wS(_e,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},sf=class extends ES.Writable{bufferedBytes=[];_write(t,r,n){this.bufferedBytes.push(t),n()}},$D=e=>HD(e)?qD(e):new Promise((t,r)=>{let n=new sf;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),HD=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function qD(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(t.push(d),o+=d.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}Zo.DEFAULT_REQUEST_TIMEOUT=xS;Zo.NodeHttp2Handler=of;Zo.NodeHttpHandler=tf;Zo.streamCollector=$D});var cf=I(ea=>{"use strict";c();var bS=ie(),jD=Qi(),zD=Fe();function CS(e,t){return new Request(e,t)}function VD(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var Zi={supported:void 0},af=class e{config;configProvider;static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Zi.supported===void 0&&(Zi.supported=typeof Request<"u"&&"keepalive"in CS("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let k=new Error("Request aborted");return k.name="AbortError",Promise.reject(k)}let a=t.path,d=jD.buildQueryString(t.query||{});d&&(a+=`?${d}`),t.fragment&&(a+=`#${t.fragment}`);let l="";if(t.username!=null||t.password!=null){let k=t.username??"",$=t.password??"";l=`${k}:${$}@`}let{port:m,method:h}=t,S=`${t.protocol}//${l}${t.hostname}${m?`:${m}`:""}${a}`,y=h==="GET"||h==="HEAD"?void 0:t.body,w={body:y,headers:new Headers(t.headers),method:h,credentials:i};this.config?.cache&&(w.cache=this.config.cache),y&&(w.duplex="half"),typeof AbortController<"u"&&(w.signal=r),Zi.supported&&(w.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(w,this.config.requestInit(t));let R=()=>{},P=CS(S,w),N=[fetch(P).then(k=>{let $=k.headers,z={};for(let re of $.entries())z[re[0]]=re[1];return k.body!=null?{response:new bS.HttpResponse({headers:z,reason:k.statusText,statusCode:k.status,body:k.body})}:k.blob().then(re=>({response:new bS.HttpResponse({headers:z,reason:k.statusText,statusCode:k.status,body:re})}))}),VD(o)];return r&&N.push(new Promise((k,$)=>{let z=()=>{let q=new Error("Request aborted");q.name="AbortError",$(q)};if(typeof r.addEventListener=="function"){let q=r;q.addEventListener("abort",z,{once:!0}),R=()=>q.removeEventListener("abort",z)}else r.onabort=z})),Promise.race(N).finally(R)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},GD=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):WD(e):KD(e);async function WD(e){let t=await YD(e),r=zD.fromBase64(t);return new Uint8Array(r)}async function KD(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(t.push(d),o+=d.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}function YD(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}ea.FetchHttpHandler=af;ea.keepAliveSupport=Zi;ea.streamCollector=GD});var es=I(lf=>{"use strict";c();var TS={},df={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),TS[e]=t,df[t]=e}function JD(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in df)t[r/2]=df[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function XD(e){let t="";for(let r=0;r<e.byteLength;r++)t+=TS[e[r]];return t}lf.fromHex=JD;lf.toHex=XD});var IS=I(ta=>{"use strict";c();Object.defineProperty(ta,"__esModule",{value:!0});ta.sdkStreamMixin=void 0;var QD=cf(),ZD=Fe(),ek=es(),tk=Le(),vS=vr(),AS="The stream has already been transformed.",rk=e=>{if(!RS(e)&&!(0,vS.isReadableStream)(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(AS);return t=!0,await(0,QD.streamCollector)(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let s=await r();if(o==="base64")return(0,ZD.toBase64)(s);if(o==="hex")return(0,ek.toHex)(s);if(o===void 0||o==="utf8"||o==="utf-8")return(0,tk.toUtf8)(s);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(s);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(AS);if(t=!0,RS(e))return n(e);if((0,vS.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};ta.sdkStreamMixin=rk;var RS=e=>typeof Blob=="function"&&e instanceof Blob});var OS=I(ra=>{"use strict";c();Object.defineProperty(ra,"__esModule",{value:!0});ra.sdkStreamMixin=void 0;var nk=Ar(),ok=Yn(),uf=ee("stream"),sk=IS(),PS="The stream has already been transformed.",ik=e=>{if(!(e instanceof uf.Readable))try{return(0,sk.sdkStreamMixin)(e)}catch{let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(PS);return t=!0,await(0,nk.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?(0,ok.fromArrayBuffer)(o.buffer,o.byteOffset,o.byteLength).toString(n):new TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(PS);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof uf.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,uf.Readable.toWeb(e)}})};ra.sdkStreamMixin=ik});var NS=I(ff=>{"use strict";c();Object.defineProperty(ff,"__esModule",{value:!0});ff.splitStream=ak;async function ak(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var MS=I(mf=>{"use strict";c();Object.defineProperty(mf,"__esModule",{value:!0});mf.splitStream=dk;var DS=ee("stream"),ck=NS(),kS=vr();async function dk(e){if((0,kS.isReadableStream)(e)||(0,kS.isBlob)(e))return(0,ck.splitStream)(e);let t=new DS.PassThrough,r=new DS.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var na=I(Be=>{"use strict";c();var zS=Fe(),VS=Le(),LS=Hu(),FS=rS(),BS=cS(),US=dS(),$S=uS(),HS=OS(),qS=MS(),jS=vr();function lk(e,t="utf-8"){return t==="base64"?zS.toBase64(e):VS.toUtf8(e)}function uk(e,t){return t==="base64"?ts.mutate(zS.fromBase64(e)):ts.mutate(VS.fromUtf8(e))}var ts=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return uk(t,r);throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return lk(this,t)}};Be.Uint8ArrayBlobAdapter=ts;Object.keys(LS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return LS[e]}})});Object.keys(FS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return FS[e]}})});Object.keys(BS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return BS[e]}})});Object.keys(US).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return US[e]}})});Object.keys($S).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return $S[e]}})});Object.keys(HS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return HS[e]}})});Object.keys(qS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return qS[e]}})});Object.keys(jS).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Be,e)&&Object.defineProperty(Be,e,{enumerable:!0,get:function(){return jS[e]}})})});var oa,Tt,sa=T(()=>{c();oa=v(na()),Tt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return oa.Uint8ArrayBlobAdapter.mutate(e);if(!e)return oa.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return oa.Uint8ArrayBlobAdapter.mutate(await r)}});function Ot(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var ia=T(()=>{c()});var pt,pf=T(()=>{c();pt=e=>typeof e=="function"?e():e});var GS,WS,KS,hf,YS=T(()=>{c();GS=v(ie()),WS=v(Xe()),KS=e=>(t,r)=>async n=>{let{response:o}=await t(n),{operationSchema:s}=(0,WS.getSmithyContext)(r);try{let i=await e.protocol.deserializeResponse(s,{...e,...r},o);return{response:o,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:o}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(GS.HttpResponse.isInstance(o)){let{headers:d={}}=o,l=Object.entries(d);i.$metadata={httpStatusCode:o.statusCode,requestId:hf(/^x-[\w-]+-request-?id$/,l),extendedRequestId:hf(/^x-[\w-]+-id-2$/,l),cfId:hf(/^x-[\w-]+-cf-id$/,l)}}}catch{}}throw i}},hf=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var JS,XS,QS=T(()=>{c();JS=v(Xe()),XS=e=>(t,r)=>async n=>{let{operationSchema:o}=(0,JS.getSmithyContext)(r),s=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,i=await e.protocol.serializeRequest(o,n.input,{...e,...r,endpoint:s});return t({...n,request:i})}});function fk(e){return{applyToStack:t=>{t.add(XS(e),eE),t.add(KS(e),ZS),e.protocol.setSerdeContext(e)}}}var ZS,eE,tE=T(()=>{c();YS();QS();ZS={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},eE={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ne,gf=T(()=>{c();Ne=class e{namespace;schemas;exceptions;static registries=new Map;constructor(t,r=new Map,n=new Map){this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);this.schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){this.exceptions.set(t,r)}getErrorCtor(t){return this.exceptions.get(t)}getBaseException(){for(let[t,r]of this.schemas.entries())if(t.startsWith("smithy.ts.sdk.synthetic.")&&t.endsWith("ServiceException"))return r}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}getNamespace(t){return this.normalizeShapeId(t).split("#")[0]}}});var xe,tr=T(()=>{c();gf();xe=class{name;namespace;traits;static assign(t,r){let n=Object.assign(t,r);return Ne.for(n.namespace).register(n.name,n),n}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Qn,mk,yf=T(()=>{c();tr();Qn=class e extends xe{static symbol=Symbol.for("@smithy/lis");name;traits;valueSchema;symbol=e.symbol},mk=(e,t,r,n)=>xe.assign(new Qn,{name:t,namespace:e,traits:r,valueSchema:n})});var Zn,pk,Sf=T(()=>{c();tr();Zn=class e extends xe{static symbol=Symbol.for("@smithy/map");name;traits;keySchema;valueSchema;symbol=e.symbol},pk=(e,t,r,n,o)=>xe.assign(new Zn,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:o})});var aa,hk,rE=T(()=>{c();tr();aa=class e extends xe{static symbol=Symbol.for("@smithy/ope");name;traits;input;output;symbol=e.symbol},hk=(e,t,r,n,o)=>xe.assign(new aa,{name:t,namespace:e,traits:r,input:n,output:o})});var Rr,gk,ca=T(()=>{c();tr();Rr=class e extends xe{static symbol=Symbol.for("@smithy/str");name;traits;memberNames;memberList;symbol=e.symbol},gk=(e,t,r,n,o)=>xe.assign(new Rr,{name:t,namespace:e,traits:r,memberNames:n,memberList:o})});var da,yk,nE=T(()=>{c();tr();ca();da=class e extends Rr{static symbol=Symbol.for("@smithy/err");ctor;symbol=e.symbol},yk=(e,t,r,n,o,s)=>xe.assign(new da,{name:t,namespace:e,traits:r,memberNames:n,memberList:o,ctor:null})});function Ir(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var Ef=T(()=>{c()});function rs(e,t){if(e instanceof U)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=U;return new r(e,t)}var U,oE=T(()=>{c();pf();yf();Sf();tr();ca();Ef();U=class e{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=e.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(t,r){this.ref=t,this.memberName=r;let n=[],o=t,s=t;for(this._isMemberSchema=!1;Array.isArray(o);)n.push(o[1]),o=o[0],s=pt(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,Ir(a))}}else this.memberTraits=0;if(s instanceof e){let i=this.memberTraits;Object.assign(this,s),this.memberTraits=Object.assign({},i,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??s.memberName;return}if(this.schema=pt(s),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(this.schema instanceof xe?this.schema.getName?.():void 0)??this.memberName??String(s),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){return xe[Symbol.hasInstance].bind(this)(t)}static of(t){let r=pt(t);if(r instanceof e)return r;if(Array.isArray(r)){let[n,o]=r;if(n instanceof e)return Object.assign(n.getMergedTraits(),Ir(o)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new e(r)}getSchema(){return pt(this.schema?.schemaRef??this.schema)}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t instanceof Qn}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t instanceof Zn}isStructSchema(){let t=this.getSchema();return t!==null&&typeof t=="object"&&"members"in t||t instanceof Rr}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=s=>(s&4)===4||!!s?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:o}=this;return t(r)||t(n)||t(o)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Ir(this.memberTraits)}getOwnTraits(){return Ir(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),o=t?15:n?.keySchema??0;return rs([o,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,o]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||o)?t.valueSchema:r?15:void 0;if(s!=null)return rs([s,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r.memberNames.includes(t)){let n=r.memberNames.indexOf(t),o=r.memberList[n];return rs(Array.isArray(o)?o:[o,0],t)}if(this.isDocumentSchema())return rs([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t.memberNames.length;++r)yield[t.memberNames[r],rs([t.memberList[r],0],t.memberNames[r])]}}});var la,Sk,sE=T(()=>{c();tr();la=class e extends xe{static symbol=Symbol.for("@smithy/sim");name;schemaRef;traits;symbol=e.symbol},Sk=(e,t,r,n)=>xe.assign(new la,{name:t,namespace:e,traits:n,schemaRef:r})});var Ek,iE=T(()=>{c();Ek={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var aE={};Ct(aE,{ErrorSchema:()=>da,ListSchema:()=>Qn,MapSchema:()=>Zn,NormalizedSchema:()=>U,OperationSchema:()=>aa,SCHEMA:()=>Ek,Schema:()=>xe,SimpleSchema:()=>la,StructureSchema:()=>Rr,TypeRegistry:()=>Ne,deref:()=>pt,deserializerMiddlewareOption:()=>ZS,error:()=>yk,getSchemaSerdePlugin:()=>fk,list:()=>mk,map:()=>pk,op:()=>hk,serializerMiddlewareOption:()=>eE,sim:()=>Sk,struct:()=>gk,translateTraits:()=>Ir});var Te=T(()=>{c();pf();tE();yf();Sf();rE();nE();oE();tr();sE();ca();iE();Ef();gf()});var _k,cE=T(()=>{c();_k=(e,t,r=n=>n)=>e});var wk,xk,ns,bk,ua,os,Ck,_f,wf,xf,bf,Tk,vk,dE,Ak,Rk,ma,Ik,Cf,Pk,eo,Tf,Ok,Nk,Dk,lE,uE,kk,Mk,un,vf,fa,ss,Af=T(()=>{c();wk=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},xk=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&ss.warn(fa(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&ss.warn(fa(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},ns=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&ss.warn(fa(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},bk=Math.ceil(34028234663852886e22),ua=e=>{let t=ns(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>bk)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},os=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},Ck=os,_f=e=>bf(e,32),wf=e=>bf(e,16),xf=e=>bf(e,8),bf=(e,t)=>{let r=os(e);if(r!==void 0&&Tk(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Tk=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},vk=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},dE=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},Ak=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return ss.warn(fa(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},Rk=e=>{if(e==null)return;let t=dE(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},ma=e=>ns(typeof e=="string"?eo(e):e),Ik=ma,Cf=e=>ua(typeof e=="string"?eo(e):e),Pk=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,eo=e=>{let t=e.match(Pk);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Tf=e=>typeof e=="string"?lE(e):ns(e),Ok=Tf,Nk=Tf,Dk=e=>typeof e=="string"?lE(e):ua(e),lE=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},uE=e=>os(typeof e=="string"?eo(e):e),kk=uE,Mk=e=>_f(typeof e=="string"?eo(e):e),un=e=>wf(typeof e=="string"?eo(e):e),vf=e=>xf(typeof e=="string"?eo(e):e),fa=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),ss={warn:console.warn}});function as(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),d=o<10?`0${o}`:`${o}`,l=s<10?`0${s}`:`${s}`,m=i<10?`0${i}`:`${i}`,h=a<10?`0${a}`:`${a}`;return`${Lk[n]}, ${d} ${If[r]} ${t} ${l}:${m}:${h} GMT`}var Lk,If,Fk,Bk,Uk,Pf,$k,Hk,qk,Of,Nf,is,jk,zk,Vk,Rf,Gk,Wk,Kk,Nt,Yk,Jk,to,fE=T(()=>{c();Af();Lk=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],If=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Fk=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Bk=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Fk.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,d,l]=t,m=un(to(n)),h=Nt(o,"month",1,12),S=Nt(s,"day",1,31);return is(m,h,S,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l})},Uk=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Pf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=Uk.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,d,l,m]=t,h=un(to(n)),S=Nt(o,"month",1,12),y=Nt(s,"day",1,31),w=is(h,S,y,{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l});return m.toUpperCase()!="Z"&&w.setTime(w.getTime()-Jk(m)),w},$k=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Hk=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),qk=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Of=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=$k.exec(e);if(t){let[r,n,o,s,i,a,d,l]=t;return is(un(to(s)),Rf(o),Nt(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l})}if(t=Hk.exec(e),t){let[r,n,o,s,i,a,d,l]=t;return Vk(is(jk(s),Rf(o),Nt(n,"day",1,31),{hours:i,minutes:a,seconds:d,fractionalMilliseconds:l}))}if(t=qk.exec(e),t){let[r,n,o,s,i,a,d,l]=t;return is(un(to(l)),Rf(n),Nt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")},Nf=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=ma(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},is=(e,t,r,n)=>{let o=t-1;return Wk(e,o,r),new Date(Date.UTC(e,o,r,Nt(n.hours,"hour",0,23),Nt(n.minutes,"minute",0,59),Nt(n.seconds,"seconds",0,60),Yk(n.fractionalMilliseconds)))},jk=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+un(to(e));return r<t?r+100:r},zk=50*365*24*60*60*1e3,Vk=e=>e.getTime()-new Date().getTime()>zk?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Rf=e=>{let t=If.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},Gk=[31,28,31,30,31,30,31,31,30,31,30,31],Wk=(e,t,r)=>{let n=Gk[t];if(t===1&&Kk(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${If[t]} in ${e}: ${r}`)},Kk=e=>e%4===0&&(e%100!==0||e%400===0),Nt=(e,t,r,n)=>{let o=vf(to(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},Yk=e=>e==null?0:Cf("0."+e)*1e3,Jk=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},to=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Pr={};Ct(Pr,{__addDisposableResource:()=>FE,__assign:()=>pa,__asyncDelegator:()=>IE,__asyncGenerator:()=>RE,__asyncValues:()=>PE,__await:()=>ro,__awaiter:()=>xE,__classPrivateFieldGet:()=>kE,__classPrivateFieldIn:()=>LE,__classPrivateFieldSet:()=>ME,__createBinding:()=>ga,__decorate:()=>hE,__disposeResources:()=>BE,__esDecorate:()=>yE,__exportStar:()=>CE,__extends:()=>mE,__generator:()=>bE,__importDefault:()=>DE,__importStar:()=>NE,__makeTemplateObject:()=>OE,__metadata:()=>wE,__param:()=>gE,__propKey:()=>EE,__read:()=>Mf,__rest:()=>pE,__rewriteRelativeImportExtension:()=>UE,__runInitializers:()=>SE,__setFunctionName:()=>_E,__spread:()=>TE,__spreadArray:()=>AE,__spreadArrays:()=>vE,__values:()=>ha,default:()=>Zk});function mE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Df(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function pE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function hE(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function gE(e,t){return function(r,n){t(r,n,e)}}function yE(e,t,r,n,o,s){function i(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var a=n.kind,d=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?n.static?e:e.prototype:null,m=t||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),h,S=!1,y=r.length-1;y>=0;y--){var w={};for(var R in n)w[R]=R==="access"?{}:n[R];for(var R in n.access)w.access[R]=n.access[R];w.addInitializer=function(N){if(S)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(N||null))};var P=(0,r[y])(a==="accessor"?{get:m.get,set:m.set}:m[d],w);if(a==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(h=i(P.get))&&(m.get=h),(h=i(P.set))&&(m.set=h),(h=i(P.init))&&o.unshift(h)}else(h=i(P))&&(a==="field"?o.unshift(h):m[d]=h)}l&&Object.defineProperty(l,n.name,m),S=!0}function SE(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function EE(e){return typeof e=="symbol"?e:"".concat(e)}function _E(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function wE(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function xE(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(m){try{l(n.next(m))}catch(h){i(h)}}function d(m){try{l(n.throw(m))}catch(h){i(h)}}function l(m){m.done?s(m.value):o(m.value).then(a,d)}l((n=n.apply(e,t||[])).next())})}function bE(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(m){return d([l,m])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(n=1,o&&(s=l[0]&2?o.return:l[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,l[1])).done)return s;switch(o=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,o=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(m){l=[6,m],o=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function CE(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ga(t,e,r)}function ha(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function TE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Mf(arguments[t]));return e}function vE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function AE(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function ro(e){return this instanceof ro?(this.v=e,this):new ro(e)}function RE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(y){return function(w){return Promise.resolve(w).then(y,h)}}function a(y,w){n[y]&&(o[y]=function(R){return new Promise(function(P,N){s.push([y,R,P,N])>1||d(y,R)})},w&&(o[y]=w(o[y])))}function d(y,w){try{l(n[y](w))}catch(R){S(s[0][3],R)}}function l(y){y.value instanceof ro?Promise.resolve(y.value.v).then(m,h):S(s[0][2],y)}function m(y){d("next",y)}function h(y){d("throw",y)}function S(y,w){y(w),s.shift(),s.length&&d(s[0][0],s[0][1])}}function IE(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:ro(e[o](i)),done:!1}:s?s(i):i}:s}}function PE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ha=="function"?ha(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,d){i=e[s](i),o(a,d,i.done,i.value)})}}function o(s,i,a,d){Promise.resolve(d).then(function(l){s({value:l,done:a})},i)}}function OE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function NE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=kf(e),n=0;n<r.length;n++)r[n]!=="default"&&ga(t,e,r[n]);return Xk(t,e),t}function DE(e){return e&&e.__esModule?e:{default:e}}function kE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function ME(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function LE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function FE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function BE(e){function t(s){e.error=e.hasError?new Qk(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function UE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Df,pa,ga,Xk,kf,Qk,Zk,Or=T(()=>{c();Df=function(e,t){return Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Df(e,t)};pa=function(){return pa=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},pa.apply(this,arguments)};ga=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});Xk=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},kf=function(e){return kf=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},kf(e)};Qk=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};Zk={__extends:mE,__assign:pa,__rest:pE,__decorate:hE,__param:gE,__esDecorate:yE,__runInitializers:SE,__propKey:EE,__setFunctionName:_E,__metadata:wE,__awaiter:xE,__generator:bE,__createBinding:ga,__exportStar:CE,__values:ha,__read:Mf,__spread:TE,__spreadArrays:vE,__spreadArray:AE,__await:ro,__asyncGenerator:RE,__asyncDelegator:IE,__asyncValues:PE,__makeTemplateObject:OE,__importStar:NE,__importDefault:DE,__classPrivateFieldGet:kE,__classPrivateFieldSet:ME,__classPrivateFieldIn:LE,__addDisposableResource:FE,__disposeResources:BE,__rewriteRelativeImportExtension:UE}});var HE=I(ya=>{"use strict";c();Object.defineProperty(ya,"__esModule",{value:!0});ya.randomUUID=void 0;var eM=(Or(),Y(Pr)),$E=eM.__importDefault(ee("crypto"));ya.randomUUID=$E.default.randomUUID.bind($E.default)});var cs=I(jE=>{"use strict";c();var qE=HE(),Ve=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),tM=()=>{if(qE.randomUUID)return qE.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Ve[e[0]]+Ve[e[1]]+Ve[e[2]]+Ve[e[3]]+"-"+Ve[e[4]]+Ve[e[5]]+"-"+Ve[e[6]]+Ve[e[7]]+"-"+Ve[e[8]]+Ve[e[9]]+"-"+Ve[e[10]]+Ve[e[11]]+Ve[e[12]]+Ve[e[13]]+Ve[e[14]]+Ve[e[15]]};jE.v4=tM});var Dt,zE=T(()=>{c();Dt=v(cs())});var Qe,VE=T(()=>{c();Qe=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Qe.from=e=>e&&typeof e=="object"&&(e instanceof Qe||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Qe(String(e)):Qe(JSON.stringify(e));Qe.fromObject=Qe.from});function Lf(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var GE=T(()=>{c()});function rr(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var Ff,Bf,Uf,WE,KE,rM,nM,oM,sM,iM,ds,$f,Hf,YE=T(()=>{c();Ff="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Bf="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Uf="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",WE="(\\d?\\d)",KE="(\\d{4})",rM=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),nM=new RegExp(`^${Ff}, ${WE} ${Bf} ${KE} ${Uf} GMT$`),oM=new RegExp(`^${Ff}, ${WE}-${Bf}-(\\d\\d) ${Uf} GMT$`),sM=new RegExp(`^${Ff} ${Bf} ( [1-9]|\\d\\d) ${Uf} ${KE}$`),iM=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ds=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},$f=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=rM.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,o,s,i,a,,d,l]=t;rr(n,1,12),rr(o,1,31),rr(s,0,23),rr(i,0,59),rr(a,0,60);let m=new Date;if(m.setUTCFullYear(Number(r),Number(n)-1,Number(o)),m.setUTCHours(Number(s)),m.setUTCMinutes(Number(i)),m.setUTCSeconds(Number(a)),m.setUTCMilliseconds(Number(d)?Math.round(parseFloat(`0.${d}`)*1e3):0),l.toUpperCase()!="Z"){let[,h,S,y]=/([+-])(\d\d):(\d\d)/.exec(l)||[void 0,"+",0,0],w=h==="-"?1:-1;m.setTime(m.getTime()+w*(Number(S)*60*60*1e3+Number(y)*60*1e3))}return m},Hf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,o,s,i,a,d;if((d=nM.exec(e))?[,t,r,n,o,s,i,a]=d:(d=oM.exec(e))?([,t,r,n,o,s,i,a]=d,n=(Number(n)+1900).toString()):(d=sM.exec(e))&&([,r,t,o,s,i,a,n]=d),n&&i){let l=new Date;return l.setUTCFullYear(Number(n)),l.setUTCMonth(iM.indexOf(r)),rr(t,1,31),l.setUTCDate(Number(t)),rr(o,0,23),l.setUTCHours(Number(o)),rr(s,0,59),l.setUTCMinutes(Number(s)),rr(i,0,60),l.setUTCSeconds(Number(i)),l.setUTCMilliseconds(a?Math.round(parseFloat(`0.${a}`)*1e3):0),l}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function qf(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var JE=T(()=>{c()});var ls,XE=T(()=>{c();ls=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function jf(e){return new be(String(e),"bigDecimal")}var QE,be,ZE=T(()=>{c();QE=/^-?\d*(\.\d+)?$/,be=class e{string;type;constructor(t,r){if(this.string=t,this.type=r,!QE.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&QE.test(r.string)}}});var e_={};Ct(e_,{LazyJsonString:()=>Qe,NumericValue:()=>be,_parseEpochTimestamp:()=>ds,_parseRfc3339DateTimeWithOffset:()=>$f,_parseRfc7231DateTime:()=>Hf,copyDocumentWithTransform:()=>_k,dateToUtcString:()=>as,expectBoolean:()=>xk,expectByte:()=>xf,expectFloat32:()=>ua,expectInt:()=>Ck,expectInt32:()=>_f,expectLong:()=>os,expectNonNull:()=>vk,expectNumber:()=>ns,expectObject:()=>dE,expectShort:()=>wf,expectString:()=>Ak,expectUnion:()=>Rk,generateIdempotencyToken:()=>Dt.v4,handleFloat:()=>Ok,limitedParseDouble:()=>Tf,limitedParseFloat:()=>Nk,limitedParseFloat32:()=>Dk,logger:()=>ss,nv:()=>jf,parseBoolean:()=>wk,parseEpochTimestamp:()=>Nf,parseRfc3339DateTime:()=>Bk,parseRfc3339DateTimeWithOffset:()=>Pf,parseRfc7231DateTime:()=>Of,quoteHeader:()=>Lf,splitEvery:()=>qf,splitHeader:()=>ls,strictParseByte:()=>vf,strictParseDouble:()=>ma,strictParseFloat:()=>Ik,strictParseFloat32:()=>Cf,strictParseInt:()=>kk,strictParseInt32:()=>Mk,strictParseLong:()=>uE,strictParseShort:()=>un});var nt=T(()=>{c();cE();fE();zE();VE();Af();GE();YE();JE();XE();ZE()});var t_,zf,r_=T(()=>{c();t_=v(Le()),zf=class{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:o,defaultContentType:s}){this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=o,this.defaultContentType=s}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let o=this.marshaller,s=r.getEventStreamMember(),i=r.getMemberSchema(s),a=i.getMemberSchemas(),d=this.serializer,l=this.defaultContentType,m=Symbol("initialRequestMarker"),h={async*[Symbol.asyncIterator](){if(n){let S={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:l}};d.write(r,n);let y=d.flush();yield{[m]:!0,headers:S,body:y}}for await(let S of t)yield S}};return o.serialize(h,S=>{if(S[m])return{headers:S.headers,body:S.body};let y=Object.keys(S).find($=>$!=="__type")??"",{additionalHeaders:w,body:R,eventType:P,explicitPayloadContentType:N}=this.writeEventBody(y,i,S);return{headers:{":event-type":{type:"string",value:P},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:N??l},...w},body:R}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let o=this.marshaller,s=r.getEventStreamMember(),a=r.getMemberSchema(s).getMemberSchemas(),d=Symbol("initialResponseMarker"),l=o.deserialize(t.body,async S=>{let y=Object.keys(S).find(w=>w!=="__type")??"";if(y==="initial-response"){let w=await this.deserializer.read(r,S[y].body);return delete w[s],{[d]:!0,...w}}else if(y in a){let w=a[y];return{[y]:await this.deserializer.read(w,S[y].body)}}else return{$unknown:S}}),m=l[Symbol.asyncIterator](),h=await m.next();if(h.done)return l;if(h.value?.[d]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[S,y]of Object.entries(h.value))n[S]=y}return{async*[Symbol.asyncIterator](){for(h?.value?.[d]||(yield h.value);;){let{done:S,value:y}=await m.next();if(S)break;yield y}}}}writeEventBody(t,r,n){let o=this.serializer,s=t,i=null,a,d=r.getSchema().memberNames.includes(t),l={};if(d){let S=r.getMemberSchema(t);if(S.isStructSchema()){for(let[y,w]of S.structIterator()){let{eventHeader:R,eventPayload:P}=w.getMergedTraits();if(P){i=y;break}else if(R){let N=n[t][y],k="binary";w.isNumericSchema()?(-2)**31<=N&&N<=2**31-1?k="integer":k="long":w.isTimestampSchema()?k="timestamp":w.isStringSchema()?k="string":w.isBooleanSchema()&&(k="boolean"),N!=null&&(l[y]={type:k,value:N},delete n[t][y])}}if(i!==null){let y=S.getMemberSchema(i);y.isBlobSchema()?a="application/octet-stream":y.isStringSchema()&&(a="text/plain"),o.write(y,n[t][i])}else o.write(S,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[S,y]=n[t];s=S,o.write(15,y)}let m=o.flush();return{body:typeof m=="string"?(this.serdeContext?.utf8Decoder??t_.fromUtf8)(m):m,eventType:s,explicitPayloadContentType:a,additionalHeaders:l}}}});var n_={};Ct(n_,{EventStreamSerde:()=>zf});var o_=T(()=>{c();r_()});var Sa,fn,Ea=T(()=>{c();Te();Sa=v(ie()),fn=class{options;serdeContext;constructor(t){this.options=t}getRequestType(){return Sa.HttpRequest}getResponseType(){return Sa.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0,t.query||(t.query={});for(let[n,o]of r.url.searchParams.entries())t.query[n]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let o=U.of(r),s=U.of(r.input);if(o.getMergedTraits().endpoint){let i=o.getMergedTraits().endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,d])=>d.getMergedTraits().hostLabel);for(let[d]of a){let l=n[d];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${d} in input must be a string as hostLabel.`);i=i.replace(`{${d}}`,l)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){let{EventStreamSerde:t}=await Promise.resolve().then(()=>(o_(),n_));return new t({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(t,r,n,o,s){return[]}getEventStreamMarshaller(){let t=this.serdeContext;if(!t.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return t.eventStreamMarshaller}}});var s_,i_,mn,a_=T(()=>{c();Te();nt();s_=v(ie()),i_=v(na());sa();ia();Ea();mn=class extends fn{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},d=await n.endpoint(),l=U.of(t?.input),m=l.getSchema(),h=!1,S,y=new s_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(d){this.updateServiceEndpoint(y,d),this.setHostPrefix(y,t,o);let w=Ir(t.traits);if(w.http){y.method=w.http[0];let[R,P]=w.http[1].split("?");y.path=="/"?y.path=R:y.path+=R;let N=new URLSearchParams(P??"");Object.assign(i,Object.fromEntries(N))}}for(let[w,R]of l.structIterator()){let P=R.getMergedTraits()??{},N=o[w];if(N!=null)if(P.httpPayload)R.isStreaming()?R.isStructSchema()?o[w]&&(S=await this.serializeEventStream({eventStream:o[w],requestSchema:l})):S=N:(s.write(R,N),S=s.flush()),delete o[w];else if(P.httpLabel){s.write(R,N);let k=s.flush();y.path.includes(`{${w}+}`)?y.path=y.path.replace(`{${w}+}`,k.split("/").map(Ot).join("/")):y.path.includes(`{${w}}`)&&(y.path=y.path.replace(`{${w}}`,Ot(k))),delete o[w]}else if(P.httpHeader)s.write(R,N),a[P.httpHeader.toLowerCase()]=String(s.flush()),delete o[w];else if(typeof P.httpPrefixHeaders=="string"){for(let[k,$]of Object.entries(N)){let z=P.httpPrefixHeaders+k;s.write([R.getValueSchema(),{httpHeader:z}],$),a[z.toLowerCase()]=s.flush()}delete o[w]}else P.httpQuery||P.httpQueryParams?(this.serializeQuery(R,N,i),delete o[w]):h=!0}return h&&o&&(s.write(m,o),S=s.flush()),y.headers=a,y.query=i,y.body=S,y}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))if(!(i in n)){let d=t.getValueSchema();Object.assign(d.getMergedTraits(),{...s,httpQuery:i,httpQueryParams:void 0}),this.serializeQuery(d,a,n)}return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let d of r){o.write([t.getValueSchema(),s],d);let l=o.flush();(i||l!==void 0)&&a.push(l)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let d=await Tt(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(15,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let d=await Tt(n.body,r);if(d.byteLength>0){let l=await o.read(s,d);for(let m of a)i[m]=l[m]}}return i.$metadata=this.deserializeMetadata(n),i}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=this.deserializer,d=U.of(t),l=[];for(let[m,h]of d.structIterator()){let S=h.getMemberTraits();if(S.httpPayload){if(h.isStreaming())h.isStructSchema()?i[m]=await this.deserializeEventStream({response:n,responseSchema:d}):i[m]=(0,i_.sdkStreamMixin)(n.body);else if(n.body){let w=await Tt(n.body,r);w.byteLength>0&&(i[m]=await a.read(h,w))}}else if(S.httpHeader){let y=String(S.httpHeader).toLowerCase(),w=n.headers[y];if(w!=null)if(h.isListSchema()){let R=h.getValueSchema();R.getMergedTraits().httpHeader=y;let P;R.isTimestampSchema()&&R.getSchema()===4?P=qf(w,",",2):P=ls(w);let N=[];for(let k of P)N.push(await a.read(R,k.trim()));i[m]=N}else i[m]=await a.read(h,w)}else if(S.httpPrefixHeaders!==void 0){i[m]={};for(let[y,w]of Object.entries(n.headers))if(y.startsWith(S.httpPrefixHeaders)){let R=h.getValueSchema();R.getMergedTraits().httpHeader=y,i[m][y.slice(S.httpPrefixHeaders.length)]=await a.read(R,w)}}else S.httpResponseCode?i[m]=n.statusCode:l.push(m)}return l}}});var c_,nr,d_=T(()=>{c();Te();c_=v(ie());sa();Ea();nr=class extends fn{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),d=U.of(t?.input),l=d.getSchema(),m,h=new c_.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(h,a),this.setHostPrefix(h,t,r));let S={...r};if(r){let y=d.getEventStreamMember();if(y){if(S[y]){let w={};for(let[R,P]of d.structIterator())R!==y&&S[R]&&(o.write(P,S[R]),w[R]=o.flush());m=await this.serializeEventStream({eventStream:S[y],requestSchema:d,initialRequest:w})}}else o.write(l,S),m=o.flush()}return h.headers=i,h.query=s,h.body=m,h.method="POST",h}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let d=await Tt(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(15,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=s.getEventStreamMember();if(a)i[a]=await this.deserializeEventStream({response:n,responseSchema:s,initialResponseContainer:i});else{let d=await Tt(n.body,r);d.byteLength>0&&Object.assign(i,await o.read(s,d))}return i.$metadata=this.deserializeMetadata(n),i}}});var Vf,Gf=T(()=>{c();ia();Vf=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>Ot(a)).join("/"):Ot(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function us(e,t){return new _a(e,t)}var l_,_a,u_=T(()=>{c();l_=v(ie());Gf();_a=class{input;context;query={};method="";headers={};path="";body=null;hostname="";resolvePathStack=[];constructor(t,r){this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new l_.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=Vf(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function dt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?6:s||r?5:void 0:void 0)??t.timestampFormat.default}var wa=T(()=>{c()});var Wf,f_,pn,Kf=T(()=>{c();Te();nt();Wf=v(Fe()),f_=v(Le());wa();pn=class{settings;serdeContext;constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}read(t,r){let n=U.of(t);if(n.isListSchema())return ls(r).map(o=>this.read(n.getValueSchema(),o));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??Wf.fromBase64)(r);if(n.isTimestampSchema())switch(dt(n,this.settings)){case 5:return $f(r);case 6:return Hf(r);case 7:return ds(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let o=n.getMergedTraits().mediaType,s=r;if(o)return n.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(o==="application/json"||o.endsWith("+json"))&&(s=Qe.from(s)),s}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new be(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??f_.toUtf8)((this.serdeContext?.base64Decoder??Wf.fromBase64)(t))}}});var xa,hn,m_=T(()=>{c();Te();xa=v(Le());Kf();hn=class{codecDeserializer;stringDeserializer;serdeContext;constructor(t,r){this.codecDeserializer=t,this.stringDeserializer=new pn(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=U.of(t),o=n.getMergedTraits(),s=this.serdeContext?.utf8Encoder??xa.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(n,s(r));if(o.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??xa.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(n,r)}}});var Yf,fs,Jf=T(()=>{c();Te();nt();Yf=v(Fe());wa();fs=class{settings;stringBuffer="";serdeContext=void 0;constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}write(t,r){let n=U.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(dt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=as(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??Yf.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let d=this.flush(),l=n.getValueSchema().isTimestampSchema()?d:Lf(d);i!==""&&(i+=", "),i+=l}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=n.getMergedTraits().mediaType,s=r;if(o&&((o==="application/json"||o.endsWith("+json"))&&(s=Qe.from(s)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??Yf.toBase64)(s.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var gn,p_=T(()=>{c();Te();Jf();gn=class{codecSerializer;stringSerializer;buffer;constructor(t,r,n=new fs(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=U.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var h_={};Ct(h_,{FromStringShapeDeserializer:()=>pn,HttpBindingProtocol:()=>mn,HttpInterceptingShapeDeserializer:()=>hn,HttpInterceptingShapeSerializer:()=>gn,HttpProtocol:()=>fn,RequestBuilder:()=>_a,RpcProtocol:()=>nr,ToStringShapeSerializer:()=>fs,collectBody:()=>Tt,determineTimestampFormat:()=>dt,extendedEncodeURIComponent:()=>Ot,requestBuilder:()=>us,resolvedPath:()=>Vf});var lt=T(()=>{c();sa();ia();a_();Ea();d_();u_();Gf();Kf();m_();p_();Jf();wa()});var g_=T(()=>{c();lt()});function aM(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var y_=T(()=>{c()});var yn,S_=T(()=>{c();yn=class{authSchemes=new Map;constructor(t){for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var E_,Xf,Qf,__=T(()=>{c();E_=v(ie()),Xf=v(br()),Qf=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=E_.HttpRequest.clone(t);if(n.in===Xf.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===Xf.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var w_,Zf,x_=T(()=>{c();w_=v(ie()),Zf=class{async sign(t,r,n){let o=w_.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var or,b_=T(()=>{c();or=class{async sign(t,r,n){return t}}});var C_=T(()=>{c();__();x_();b_()});var T_,cM,em,ba,tm,v_=T(()=>{c();T_=e=>function(r){return ba(r)&&r.expiration.getTime()-Date.now()<e},cM=3e5,em=T_(3e5),ba=e=>e.expiration!==void 0,tm=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,d=async l=>{s||(s=n(l));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async l=>((!i||l?.forceRefresh)&&(o=await d(l)),o):async l=>((!i||l?.forceRefresh)&&(o=await d(l)),a?o:r(o)?(t(o)&&await d(l),o):(a=!0,o))}});var A_=T(()=>{c();S_();C_();v_()});var kt={};Ct(kt,{DefaultIdentityProviderConfig:()=>yn,EXPIRATION_MS:()=>cM,HttpApiKeyAuthSigner:()=>Qf,HttpBearerAuthSigner:()=>Zf,NoAuthSigner:()=>or,createIsIdentityExpiredFunction:()=>T_,createPaginator:()=>Vy,doesIdentityRequireRefresh:()=>ba,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Jo,getHttpAuthSchemePlugin:()=>zN,getHttpSigningPlugin:()=>Xo,getSmithyContext:()=>BN,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>Iy,httpAuthSchemeMiddleware:()=>Yo,httpAuthSchemeMiddlewareOptions:()=>Ly,httpSigningMiddleware:()=>Mu,httpSigningMiddlewareOptions:()=>Hy,isIdentityExpired:()=>em,memoizeIdentityProvider:()=>tm,normalizeProvider:()=>Tr,requestBuilder:()=>us,setFeature:()=>aM});var Ue=T(()=>{c();Cy();By();jy();zy();Gy();g_();y_();A_()});var En=I(Sn=>{"use strict";c();var nm=br(),om=class{capacity;data=new Map;parameters=[];constructor({size:t,params:r}){this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:a}=o.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}},dM=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),R_=e=>dM.test(e)||e.startsWith("[")&&e.endsWith("]"),lM=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),im=(e,t=!1)=>{if(!t)return lM.test(e);let r=e.split(".");for(let n of r)if(!im(n))return!1;return!0},sm={},ms="endpoints";function Nr(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Nr(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Nr).join(", ")})`:JSON.stringify(e,null,2)}var Ge=class extends Error{constructor(t){super(t),this.name="EndpointError"}},uM=(e,t)=>e===t,fM=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Ge(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new Ge(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},I_=(e,t)=>fM(t).reduce((r,n)=>{if(typeof r!="object")throw new Ge(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),mM=e=>e!=null,pM=e=>!e,rm={[nm.EndpointURLScheme.HTTP]:80,[nm.EndpointURLScheme.HTTPS]:443},hM=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:S,port:y,protocol:w="",path:R="",query:P={}}=e,N=new URL(`${w}//${S}${y?`:${y}`:""}${R}`);return N.search=Object.entries(P).map(([k,$])=>`${k}=${$}`).join("&"),N}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let d=i.slice(0,-1);if(!Object.values(nm.EndpointURLScheme).includes(d))return null;let l=R_(o),m=r.includes(`${n}:${rm[d]}`)||typeof e=="string"&&e.includes(`${n}:${rm[d]}`),h=`${n}${m?`:${rm[d]}`:""}`;return{scheme:d,authority:h,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:l}},gM=(e,t)=>e===t,yM=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),SM=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),EM={booleanEquals:uM,getAttr:I_,isSet:mM,isValidHostLabel:im,not:pM,parseURL:hM,stringEquals:gM,substring:yM,uriEncode:SM},P_=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[d,l]=a.split("#");r.push(I_(n[d],l))}else r.push(n[a]);o=i+1}return r.join("")},_M=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],Ca=(e,t,r)=>{if(typeof e=="string")return P_(e,r);if(e.fn)return O_(e,r);if(e.ref)return _M(e,r);throw new Ge(`'${t}': ${String(e)} is not a string, function or reference.`)},O_=({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:Ca(s,"arg",r)),o=e.split(".");return o[0]in sm&&o[1]!=null?sm[o[0]][o[1]](...n):EM[e](...n)},wM=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ge(`'${e}' is already defined in Reference Record.`);let n=O_(t,r);return r.logger?.debug?.(`${ms} evaluateCondition: ${Nr(t)} = ${Nr(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},am=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=wM(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${ms} assign: ${s.name} := ${Nr(s.value)}`))}return{result:!0,referenceRecord:r}},xM=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Ca(s,"Header value entry",t);if(typeof i!="string")throw new Ge(`Header '${n}' value '${i}' is not a string`);return i})}),{}),N_=(e,t)=>{if(Array.isArray(e))return e.map(r=>N_(r,t));switch(typeof e){case"string":return P_(e,t);case"object":if(e===null)throw new Ge(`Unexpected endpoint property: ${e}`);return D_(e,t);case"boolean":return e;default:throw new Ge(`Unexpected endpoint property type: ${typeof e}`)}},D_=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:N_(o,t)}),{}),bM=(e,t)=>{let r=Ca(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Ge(`Endpoint URL must be a string, got ${typeof r}`)},CM=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=am(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:d,headers:l}=n;return t.logger?.debug?.(`${ms} Resolving endpoint from template: ${Nr(n)}`),{...l!=null&&{headers:xM(l,i)},...d!=null&&{properties:D_(d,i)},url:bM(a,i)}},TM=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=am(r,t);if(o)throw new Ge(Ca(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},vM=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=am(r,t);if(o)return k_(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},k_=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=CM(r,t);if(n)return n}else if(r.type==="error")TM(r,t);else if(r.type==="tree"){let n=vM(r,t);if(n)return n}else throw new Ge(`Unknown endpoint rule: ${r}`);throw new Ge("Rules evaluation failed")},AM=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${ms} Initial EndpointParams: ${Nr(r)}`);let i=Object.entries(o).filter(([,l])=>l.default!=null).map(([l,m])=>[l,m.default]);if(i.length>0)for(let[l,m]of i)r[l]=r[l]??m;let a=Object.entries(o).filter(([,l])=>l.required).map(([l])=>l);for(let l of a)if(r[l]==null)throw new Ge(`Missing required parameter: '${l}'`);let d=k_(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${ms} Resolved endpoint: ${Nr(d)}`),d};Sn.EndpointCache=om;Sn.EndpointError=Ge;Sn.customEndpointFunctions=sm;Sn.isIpAddress=R_;Sn.isValidHostLabel=im;Sn.resolveEndpoint=AM});var L_=I(M_=>{"use strict";c();function RM(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}M_.parseQueryString=RM});var sr=I(B_=>{"use strict";c();var IM=L_(),F_=e=>{if(typeof e=="string")return F_(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=IM.parseQueryString(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};B_.parseUrl=F_});var _n=I((iJ,Y_)=>{"use strict";c();var Ta=Object.defineProperty,PM=Object.getOwnPropertyDescriptor,OM=Object.getOwnPropertyNames,NM=Object.prototype.hasOwnProperty,Dr=(e,t)=>Ta(e,"name",{value:t,configurable:!0}),DM=(e,t)=>{for(var r in t)Ta(e,r,{get:t[r],enumerable:!0})},kM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of OM(t))!NM.call(e,o)&&o!==r&&Ta(e,o,{get:()=>t[o],enumerable:!(n=PM(t,o))||n.enumerable});return e},MM=e=>kM(Ta({},"__esModule",{value:!0}),e),$_={};DM($_,{ConditionObject:()=>me.ConditionObject,DeprecatedObject:()=>me.DeprecatedObject,EndpointError:()=>me.EndpointError,EndpointObject:()=>me.EndpointObject,EndpointObjectHeaders:()=>me.EndpointObjectHeaders,EndpointObjectProperties:()=>me.EndpointObjectProperties,EndpointParams:()=>me.EndpointParams,EndpointResolverOptions:()=>me.EndpointResolverOptions,EndpointRuleObject:()=>me.EndpointRuleObject,ErrorRuleObject:()=>me.ErrorRuleObject,EvaluateOptions:()=>me.EvaluateOptions,Expression:()=>me.Expression,FunctionArgv:()=>me.FunctionArgv,FunctionObject:()=>me.FunctionObject,FunctionReturn:()=>me.FunctionReturn,ParameterObject:()=>me.ParameterObject,ReferenceObject:()=>me.ReferenceObject,ReferenceRecord:()=>me.ReferenceRecord,RuleSetObject:()=>me.RuleSetObject,RuleSetRules:()=>me.RuleSetRules,TreeRuleObject:()=>me.TreeRuleObject,awsEndpointFunctions:()=>W_,getUserAgentPrefix:()=>UM,isIpAddress:()=>me.isIpAddress,partition:()=>V_,resolveDefaultAwsRegionalEndpointsConfig:()=>HM,resolveEndpoint:()=>me.resolveEndpoint,setPartitionInfo:()=>G_,toEndpointV1:()=>K_,useDefaultPartitionInfo:()=>BM});Y_.exports=MM($_);var me=En(),H_=Dr((e,t=!1)=>{if(t){for(let r of e.split("."))if(!H_(r))return!1;return!0}return!(!(0,me.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,me.isIpAddress)(e))},"isVirtualHostableS3Bucket"),U_=":",LM="/",FM=Dr(e=>{let t=e.split(U_);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(U_)==="")return null;let d=a.map(l=>l.split(LM)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:d}},"parseArn"),q_={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],version:"1.1"},j_=q_,z_="",V_=Dr(e=>{let{partitions:t}=j_;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),G_=Dr((e,t="")=>{j_=e,z_=t},"setPartitionInfo"),BM=Dr(()=>{G_(q_,"")},"useDefaultPartitionInfo"),UM=Dr(()=>z_,"getUserAgentPrefix"),W_={isVirtualHostableS3Bucket:H_,parseArn:FM,partition:V_};me.customEndpointFunctions.aws=W_;var $M=sr(),HM=Dr(e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>K_(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},"resolveDefaultAwsRegionalEndpointsConfig"),K_=Dr(e=>(0,$M.parseUrl)(e.url),"toEndpointV1")});var va,no,J_=T(()=>{c();va={warningEmitted:!1},no=e=>{e&&!va.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(va.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function kr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var X_=T(()=>{c()});function Q_(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Z_=T(()=>{c()});function ew(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var tw=T(()=>{c()});var Mr={};Ct(Mr,{emitWarningIfUnsupportedVersion:()=>no,setCredentialFeature:()=>kr,setFeature:()=>Q_,setTokenFeature:()=>ew,state:()=>va});var vt=T(()=>{c();J_();X_();Z_();tw()});var rw,cm,nw=T(()=>{c();rw=v(ie()),cm=e=>rw.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var oo,dm=T(()=>{c();oo=e=>new Date(Date.now()+e)});var ow,sw=T(()=>{c();dm();ow=(e,t)=>Math.abs(oo(t).getTime()-e)>=3e5});var lm,iw=T(()=>{c();sw();lm=(e,t)=>{let r=Date.parse(e);return ow(r,t)?r-Date.now():t}});var um=T(()=>{c();nw();dm();iw()});var aw,ps,so,ot,fm,mm=T(()=>{c();aw=v(ie());um();ps=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},so=async e=>{let t=ps("context",e.context),r=ps("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await ps("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,d=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:d}},ot=class{async sign(t,r,n){if(!aw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await so(n),{config:s,signer:i}=o,{signingRegion:a,signingName:d}=o,l=n.context;if(l?.authSchemes?.length??!1){let[h,S]=l.authSchemes;h?.name==="sigv4a"&&S?.name==="sigv4"&&(a=S?.signingRegion??a,d=S?.signingName??d)}return await i.sign(t,{signingDate:oo(s.systemClockOffset),signingRegion:a,signingService:d})}errorHandler(t){return r=>{let n=r.ServerTime??cm(r.$response);if(n){let o=ps("config",t.config),s=o.systemClockOffset;o.systemClockOffset=lm(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=cm(t);if(n){let o=ps("config",r.config);o.systemClockOffset=lm(n,o.systemClockOffset)}}},fm=ot});var cw,hs,dw=T(()=>{c();cw=v(ie());um();mm();hs=class extends ot{async sign(t,r,n){if(!cw.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:d}=await so(n),m=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:oo(o.systemClockOffset),signingRegion:m,signingService:d})}}});var pm,lw=T(()=>{c();pm=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var Aa,hm=T(()=>{c();Aa=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var uw,fw,io,mw=T(()=>{c();lw();hm();uw="AWS_AUTH_SCHEME_PREFERENCE",fw="auth_scheme_preference",io={environmentVariableSelector:(e,t)=>{if(t?.signingName&&Aa(t.signingName)in e)return["httpBearerAuth"];if(uw in e)return pm(e[uw])},configFileSelector:e=>{if(fw in e)return pm(e[fw])},default:[]}});var Ze=I(wn=>{"use strict";c();var ao=class e extends Error{name="ProviderError";tryNextLink;constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.tryNextLink=o,Object.setPrototypeOf(this,e.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},gm=class e extends ao{name="CredentialsProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},ym=class e extends ao{name="TokenProviderError";constructor(t,r=!0){super(t,r),Object.setPrototypeOf(this,e.prototype)}},qM=(...e)=>async()=>{if(e.length===0)throw new ao("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},jM=e=>()=>Promise.resolve(e),zM=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async d=>((!s||d?.forceRefresh)&&(n=await a()),n):async d=>((!s||d?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};wn.CredentialsProviderError=gm;wn.ProviderError=ao;wn.TokenProviderError=ym;wn.chain=qM;wn.fromStatic=jM;wn.memoize=zM});var Sm,pw,hw,gw=T(()=>{c();Ue();Sm=v(Ze()),pw=e=>(e.sigv4aSigningRegionSet=Tr(e.sigv4aSigningRegionSet),e),hw={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Sm.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Sm.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var $w=I(X=>{"use strict";c();var Lr=es(),xn=Le(),VM=Fu(),_w=ie(),yw=Xe(),Ra=Ju(),ww="X-Amz-Algorithm",xw="X-Amz-Credential",Cm="X-Amz-Date",bw="X-Amz-SignedHeaders",Cw="X-Amz-Expires",Tm="X-Amz-Signature",vm="X-Amz-Security-Token",GM="X-Amz-Region-Set",Am="authorization",Rm=Cm.toLowerCase(),Tw="date",vw=[Am,Rm,Tw],Aw=Tm.toLowerCase(),Da="x-amz-content-sha256",Rw=vm.toLowerCase(),WM="host",Iw={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Pw=/^proxy-/,Ow=/^sec-/,KM=[/^proxy-/i,/^sec-/i],Ia="AWS4-HMAC-SHA256",YM="AWS4-ECDSA-P256-SHA256",Nw="AWS4-HMAC-SHA256-PAYLOAD",Dw="UNSIGNED-PAYLOAD",kw=50,Im="aws4_request",Mw=3600*24*7,co={},Pa=[],Oa=(e,t,r)=>`${e}/${t}/${r}/${Im}`,Lw=async(e,t,r,n,o)=>{let s=await Sw(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${Lr.toHex(s)}:${t.sessionToken}`;if(i in co)return co[i];for(Pa.push(i);Pa.length>kw;)delete co[Pa.shift()];let a=`AWS4${t.secretAccessKey}`;for(let d of[r,n,o,Im])a=await Sw(e,a,d);return co[i]=a},JM=()=>{Pa.length=0,Object.keys(co).forEach(e=>{delete co[e]})},Sw=(e,t,r)=>{let n=new e(t);return n.update(xn.toUint8Array(r)),n.digest()},Em=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Iw||t?.has(s)||Pw.test(s)||Ow.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},Na=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Da)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||VM.isArrayBuffer(t)){let n=new r;return n.update(xn.toUint8Array(t)),Lr.toHex(await n.digest())}return Dw},_m=class{format(t){let r=[];for(let s of Object.keys(t)){let i=xn.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=xn.fromUtf8(t.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(wm.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!XM.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let h=new Uint8Array(17);return h[0]=9,h.set(Lr.fromHex(t.value.replace(/\-/g,"")),1),h}}},XM=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,wm=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Ew(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Ew(t),parseInt(Lr.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Ew(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Fw=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Bw=(e,t={})=>{let{headers:r,query:n={}}=_w.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},xm=e=>{e=_w.HttpRequest.clone(e);for(let t of Object.keys(e.headers))vw.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},Uw=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===Aw)continue;let o=Ra.escapeUri(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${Ra.escapeUri(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${Ra.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},QM=e=>ZM(e).toISOString().replace(/\.\d{3}Z$/,"Z"),ZM=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,ka=class{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=yw.normalizeProvider(n),this.credentialProvider=yw.normalizeProvider(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Uw(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let s=new this.sha256;s.update(xn.toUint8Array(n));let i=await s.digest();return`${o}
${t}
${r}
${Lr.toHex(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Ra.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=QM(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},bm=class extends ka{headerFormatter=new _m;constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i})}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:d,signingRegion:l,signingService:m}=r,h=await this.credentialProvider();this.validateResolvedCredentials(h);let S=l??await this.regionProvider(),{longDate:y,shortDate:w}=this.formatDate(n);if(o>Mw)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let R=Oa(w,S,m??this.service),P=Bw(xm(t),{unhoistableHeaders:i,hoistableHeaders:d});h.sessionToken&&(P.query[vm]=h.sessionToken),P.query[ww]=Ia,P.query[xw]=`${h.accessKeyId}/${R}`,P.query[Cm]=y,P.query[Cw]=o.toString(10);let N=Em(P,s,a);return P.query[bw]=this.getCanonicalHeaderList(N),P.query[Tm]=await this.getSignature(y,R,this.getSigningKey(h,S,w,m),this.createCanonicalRequest(P,N,await Na(t,this.sha256))),P}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:d,longDate:l}=this.formatDate(n),m=Oa(d,a,i??this.service),h=await Na({headers:{},body:r},this.sha256),S=new this.sha256;S.update(t);let y=Lr.toHex(await S.digest()),w=[Nw,l,m,o,y,h].join(`
`);return this.signString(w,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),d=new this.sha256(await this.getSigningKey(s,i,a,o));return d.update(xn.toUint8Array(t)),Lr.toHex(await d.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=s??await this.regionProvider(),l=xm(t),{longDate:m,shortDate:h}=this.formatDate(r),S=Oa(h,d,i??this.service);l.headers[Rm]=m,a.sessionToken&&(l.headers[Rw]=a.sessionToken);let y=await Na(l,this.sha256);!Fw(Da,l.headers)&&this.applyChecksum&&(l.headers[Da]=y);let w=Em(l,o,n),R=await this.getSignature(m,S,this.getSigningKey(a,d,h,i),this.createCanonicalRequest(l,w,y));return l.headers[Am]=`${Ia} Credential=${a.accessKeyId}/${S}, SignedHeaders=${this.getCanonicalHeaderList(w)}, Signature=${R}`,l}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o,Ia),i=new this.sha256(await n);return i.update(xn.toUint8Array(s)),Lr.toHex(await i.digest())}getSigningKey(t,r,n,o){return Lw(this.sha256,t,n,r,o||this.service)}},e1={SignatureV4a:null};X.ALGORITHM_IDENTIFIER=Ia;X.ALGORITHM_IDENTIFIER_V4A=YM;X.ALGORITHM_QUERY_PARAM=ww;X.ALWAYS_UNSIGNABLE_HEADERS=Iw;X.AMZ_DATE_HEADER=Rm;X.AMZ_DATE_QUERY_PARAM=Cm;X.AUTH_HEADER=Am;X.CREDENTIAL_QUERY_PARAM=xw;X.DATE_HEADER=Tw;X.EVENT_ALGORITHM_IDENTIFIER=Nw;X.EXPIRES_QUERY_PARAM=Cw;X.GENERATED_HEADERS=vw;X.HOST_HEADER=WM;X.KEY_TYPE_IDENTIFIER=Im;X.MAX_CACHE_SIZE=kw;X.MAX_PRESIGNED_TTL=Mw;X.PROXY_HEADER_PATTERN=Pw;X.REGION_SET_PARAM=GM;X.SEC_HEADER_PATTERN=Ow;X.SHA256_HEADER=Da;X.SIGNATURE_HEADER=Aw;X.SIGNATURE_QUERY_PARAM=Tm;X.SIGNED_HEADERS_QUERY_PARAM=bw;X.SignatureV4=bm;X.SignatureV4Base=ka;X.TOKEN_HEADER=Rw;X.TOKEN_QUERY_PARAM=vm;X.UNSIGNABLE_PATTERNS=KM;X.UNSIGNED_PAYLOAD=Dw;X.clearCredentialCache=JM;X.createScope=Oa;X.getCanonicalHeaders=Em;X.getCanonicalQuery=Uw;X.getPayloadHash=Na;X.getSigningKey=Lw;X.hasHeader=Fw;X.moveHeadersToQuery=Bw;X.prepareRequest=xm;X.signatureV4aContainer=e1});function t1(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=tm(t,em,ba):r?n=Tr(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function r1(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var Pm,bn,Hw,qw=T(()=>{c();vt();Ue();Pm=v($w()),bn=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(l){l&&l!==t&&l!==n&&(r=!0),t=l;let m=t1(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),h=r1(e,m);r&&!h.attributed?(n=async S=>h(S).then(y=>kr(y,"CREDENTIALS_CODE","e")),n.memoized=h.memoized,n.configBound=h.configBound,n.attributed=!0):n=h},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=Tr(e.signer):e.regionInfoProvider?a=()=>Tr(e.region)().then(async l=>[await e.regionInfoProvider(l,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},l]).then(([l,m])=>{let{signingRegion:h,signingService:S}=l;e.signingRegion=e.signingRegion||h||m,e.signingName=e.signingName||S||e.serviceId;let y={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},w=e.signerConstructor||Pm.SignatureV4;return new w(y)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Tr(e.region)(),properties:{}},l);let m=l.signingRegion,h=l.signingName;e.signingRegion=e.signingRegion||m,e.signingName=e.signingName||h||e.serviceId;let S={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},y=e.signerConstructor||Pm.SignatureV4;return new y(S)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},Hw=bn});var jw=T(()=>{c();mm();dw();mw();gw();qw()});var zw={};Ct(zw,{AWSSDKSigV4Signer:()=>fm,AwsSdkSigV4ASigner:()=>hs,AwsSdkSigV4Signer:()=>ot,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>io,NODE_SIGV4A_CONFIG_OPTIONS:()=>hw,getBearerTokenEnvKey:()=>Aa,resolveAWSSDKSigV4Config:()=>Hw,resolveAwsSdkSigV4AConfig:()=>pw,resolveAwsSdkSigV4Config:()=>bn,validateSigningProperties:()=>so});var Om=T(()=>{c();jw();hm()});function Fr(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function Ma(e){return e[Nm]=!0,e}var Nm,La=T(()=>{c();Nm=Symbol("@smithy/core/cbor::tagSymbol")});function Ww(e){le=e,ar=new DataView(le.buffer,le.byteOffset,le.byteLength)}function Mt(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(le[e]&224)>>5,n=le[e]&31;switch(r){case 0:case 1:case 6:let o,s;if(n<24)o=n,s=1;else switch(n){case 24:case 25:case 26:case 27:let i=Yw[n],a=i+1;if(s=a,t-e<a)throw new Error(`countLength ${i} greater than remaining buf len.`);let d=e+1;i===1?o=le[d]:i===2?o=ar.getUint16(d):i===4?o=ar.getUint32(d):o=ar.getBigUint64(d);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return Z=s,Dm(o);if(r===1){let i;return typeof o=="bigint"?i=BigInt(-1)-o:i=-1-o,Z=s,Dm(i)}else if(n===2||n===3){let i=Es(e+s,t),a=BigInt(0),d=e+s+Z;for(let l=d;l<d+i;++l)a=a<<BigInt(8)|BigInt(le[l]);return Z=s+Z+i,n===3?-a-BigInt(1):a}else if(n===4){let i=Mt(e+s,t),[a,d]=i,l=d<0?-1:1,m="0".repeat(Math.abs(a)+1)+String(BigInt(l)*BigInt(d)),h,S=d<0?"-":"";return h=a===0?m:m.slice(0,m.length+a)+"."+m.slice(a),h=h.replace(/^0+/g,""),h===""&&(h="0"),h[0]==="."&&(h="0"+h),h=S+h,Z=s+Z,jf(h)}else{let i=Mt(e+s,t);return Z=s+Z,Ma({tag:Dm(o),value:i})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return d1(e,t);case 5:return p1(e,t);case 4:return f1(e,t);case 2:return l1(e,t)}else switch(r){case 3:return c1(e,t);case 5:return m1(e,t);case 4:return u1(e,t);case 2:return Um(e,t)}default:return h1(e,t)}}function Kw(e,t,r){return s1&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):Vw?Vw.decode(e.subarray(t,r)):(0,Gw.toUtf8)(e.subarray(t,r))}function i1(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function a1(e,t){let r=e>>7,n=(e&124)>>2,o=(e&3)<<8|t,s=r===0?1:-1,i,a;if(n===0){if(o===0)return 0;i=Math.pow(2,-14),a=0}else{if(n===31)return o===0?s*(1/0):NaN;i=Math.pow(2,n-15),a=1}return a+=o/1024,s*(i*a)}function Es(e,t){let r=le[e]&31;if(r<24)return Z=1,r;if(r===24||r===25||r===26||r===27){let n=Yw[r];if(Z=n+1,t-e<Z)throw new Error(`countLength ${n} greater than remaining buf len.`);let o=e+1;return n===1?le[o]:n===2?ar.getUint16(o):n===4?ar.getUint32(o):i1(ar.getBigUint64(o))}throw new Error(`unexpected minor value ${r}.`)}function c1(e,t){let r=Es(e,t),n=Z;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let o=Kw(le,e,e+r);return Z=n+r,o}function d1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255){let d=Fr(r.length);return d.set(r,0),Z=e-n+2,Kw(d,0,d.length)}let o=(le[e]&224)>>5,s=le[e]&31;if(o!==3)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=Um(e,t);e+=Z;for(let d=0;d<i.length;++d)r.push(i[d])}throw new Error("expected break marker.")}function Um(e,t){let r=Es(e,t),n=Z;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let o=le.subarray(e,e+r);return Z=n+r,o}function l1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255){let d=Fr(r.length);return d.set(r,0),Z=e-n+2,d}let o=(le[e]&224)>>5,s=le[e]&31;if(o!==2)throw new Error(`unexpected major type ${o} in indefinite string.`);if(s===31)throw new Error("nested indefinite string.");let i=Um(e,t);e+=Z;for(let d=0;d<i.length;++d)r.push(i[d])}throw new Error("expected break marker.")}function u1(e,t){let r=Es(e,t),n=Z;e+=n;let o=e,s=Array(r);for(let i=0;i<r;++i){let a=Mt(e,t),d=Z;s[i]=a,e+=d}return Z=n+(e-o),s}function f1(e,t){e+=1;let r=[];for(let n=e;e<t;){if(le[e]===255)return Z=e-n+2,r;let o=Mt(e,t);e+=Z,r.push(o)}throw new Error("expected break marker.")}function m1(e,t){let r=Es(e,t),n=Z;e+=n;let o=e,s={};for(let i=0;i<r;++i){if(e>=t)throw new Error("unexpected end of map payload.");let a=(le[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let d=Mt(e,t);e+=Z;let l=Mt(e,t);e+=Z,s[d]=l}return Z=n+(e-o),s}function p1(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(le[e]===255)return Z=e-r+2,n;let o=(le[e]&224)>>5;if(o!==3)throw new Error(`unexpected major type ${o} for map key.`);let s=Mt(e,t);e+=Z;let i=Mt(e,t);e+=Z,n[s]=i}throw new Error("expected break marker.")}function h1(e,t){let r=le[e]&31;switch(r){case 21:case 20:return Z=1,r===21;case 22:return Z=1,null;case 23:return Z=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return Z=3,a1(le[e+1],le[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return Z=5,ar.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return Z=9,ar.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function Dm(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var Gw,o1,s1,le,ar,Vw,Z,Yw,Jw=T(()=>{c();nt();Gw=v(Le());La();o1=typeof TextDecoder<"u",s1=typeof Buffer<"u",le=Fr(0),ar=new DataView(le.buffer,le.byteOffset,le.byteLength),Vw=o1?new TextDecoder:null,Z=0;Yw={24:1,25:2,26:4,27:8}});function Hm(e){V.byteLength-H<e&&(H<16e6?Ba(Math.max(V.byteLength*4,V.byteLength+e)):Ba(V.byteLength+e+16e6))}function qm(){let e=Fr(H);return e.set(V.subarray(0,H),0),H=0,e}function Ba(e){let t=V;V=Fr(e),t&&(t.copy?t.copy(V,0,0,t.byteLength):V.set(t,0)),lr=new DataView(V.buffer,V.byteOffset,V.byteLength)}function dr(e,t){t<24?V[H++]=e<<5|t:t<256?(V[H++]=e<<5|24,V[H++]=t):t<65536?(V[H++]=e<<5|25,lr.setUint16(H,t),H+=2):t<2**32?(V[H++]=e<<5|26,lr.setUint32(H,t),H+=4):(V[H++]=e<<5|27,lr.setBigUint64(H,typeof t=="bigint"?t:BigInt(t)),H+=8)}function Zw(e){let t=[e];for(;t.length;){let r=t.pop();if(Hm(typeof r=="string"?r.length*4:64),typeof r=="string"){if(Xw)dr(3,Buffer.byteLength(r)),H+=V.write(r,H);else{let n=(0,Qw.fromUtf8)(r);dr(3,n.byteLength),V.set(n,H),H+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,o=n?0:1,s=n?r:-r-1;s<24?V[H++]=o<<5|s:s<256?(V[H++]=o<<5|24,V[H++]=s):s<65536?(V[H++]=o<<5|25,V[H++]=s>>8,V[H++]=s):s<4294967296?(V[H++]=o<<5|26,lr.setUint32(H,s),H+=4):(V[H++]=o<<5|27,lr.setBigUint64(H,BigInt(s)),H+=8);continue}V[H++]=251,lr.setFloat64(H,r),H+=8;continue}else if(typeof r=="bigint"){let n=r>=0,o=n?0:1,s=n?r:-r-BigInt(1),i=Number(s);if(i<24)V[H++]=o<<5|i;else if(i<256)V[H++]=o<<5|24,V[H++]=i;else if(i<65536)V[H++]=o<<5|25,V[H++]=i>>8,V[H++]=i&255;else if(i<4294967296)V[H++]=o<<5|26,lr.setUint32(H,i),H+=4;else if(s<BigInt("18446744073709551616"))V[H++]=o<<5|27,lr.setBigUint64(H,s),H+=8;else{let a=s.toString(2),d=new Uint8Array(Math.ceil(a.length/8)),l=s,m=0;for(;d.byteLength-++m>=0;)d[d.byteLength-m]=Number(l&BigInt(255)),l>>=BigInt(8);Hm(d.byteLength*2),V[H++]=n?194:195,Xw?dr(2,Buffer.byteLength(d)):dr(2,d.byteLength),V.set(d,H),H+=d.byteLength}continue}else if(r===null){V[H++]=246;continue}else if(typeof r=="boolean"){V[H++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);dr(4,r.length);continue}else if(typeof r.byteLength=="number"){Hm(r.length*2),dr(2,r.length),V.set(r,H),H+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof be){let o=r.string.indexOf("."),s=o===-1?0:o-r.string.length+1,i=BigInt(r.string.replace(".",""));V[H++]=196,t.push(i),t.push(s),dr(4,2);continue}if(r[Nm])if("tag"in r&&"value"in r){t.push(r.value),dr(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let o=n.length-1;o>=0;--o){let s=n[o];t.push(r[s]),t.push(s)}dr(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var Qw,Xw,g1,V,lr,H,ex=T(()=>{c();nt();Qw=v(Le());La();Xw=typeof Buffer<"u",g1=2048,V=Fr(g1),lr=new DataView(V.buffer,V.byteOffset,V.byteLength),H=0});var jm,tx=T(()=>{c();Jw();ex();jm={deserialize(e){return Ww(e),Mt(0,e.length)},serialize(e){try{return Zw(e),qm()}catch(t){throw qm(),t}},resizeEncodingBuffer(e){Ba(e)}}});var Ua,$a,Ha=T(()=>{c();La();Ua=e=>Ma({tag:1,value:e.getTime()/1e3}),$a=(e,t)=>{let r=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(o=>o.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var Gm,qa,zm,Vm,Wm=T(()=>{c();Te();nt();Gm=v(Fe());tx();Ha();qa=class{serdeContext;createSerializer(){let t=new zm;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Vm;return t.setSerdeContext(this.serdeContext),t}setSerdeContext(t){this.serdeContext=t}},zm=class{serdeContext;value;setSerdeContext(t){this.serdeContext=t}write(t,r){this.value=this.serialize(t,r)}serialize(t,r){let n=U.of(t);if(r==null)return n.isIdempotencyToken()?(0,Dt.v4)():r;if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Gm.fromBase64)(r):r;if(n.isTimestampSchema())return typeof r=="number"||typeof r=="bigint"?Ua(new Date(Number(r)/1e3|0)):Ua(r);if(typeof r=="function"||typeof r=="object"){let o=r;if(n.isListSchema()&&Array.isArray(o)){let i=!!n.getMergedTraits().sparse,a=[],d=0;for(let l of o){let m=this.serialize(n.getValueSchema(),l);(m!=null||i)&&(a[d++]=m)}return a}if(o instanceof Date)return Ua(o);let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse;for(let a of Object.keys(o)){let d=this.serialize(n.getValueSchema(),o[a]);(d!=null||i)&&(s[a]=d)}}else if(n.isStructSchema())for(let[i,a]of n.structIterator()){let d=this.serialize(a,o[i]);d!=null&&(s[i]=d)}else if(n.isDocumentSchema())for(let i of Object.keys(o))s[i]=this.serialize(n.getValueSchema(),o[i]);return s}return r}flush(){let t=jm.serialize(this.value);return this.value=void 0,t}},Vm=class{serdeContext;setSerdeContext(t){this.serdeContext=t}read(t,r){let n=jm.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=U.of(t);if(n.isTimestampSchema()&&typeof r=="number")return ds(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??Gm.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let s=[],i=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let d of r){let l=this.readValue(i,d);(l!=null||a)&&s.push(l)}return s}let o={};if(n.isMapSchema()){let s=!!n.getMergedTraits().sparse,i=n.getValueSchema();for(let a of Object.keys(r)){let d=this.readValue(i,r[a]);(d!=null||s)&&(o[a]=d)}}else if(n.isStructSchema())for(let[s,i]of n.structIterator())o[s]=this.readValue(i,r[s]);return o}else return r}}});var rx,ja,nx=T(()=>{c();lt();Te();rx=v(Xe());Wm();Ha();ja=class extends nr{codec=new qa;serializer=this.codec.createSerializer();deserializer=this.codec.createDeserializer();constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);if(Object.assign(o.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),pt(t.input)==="unit")delete o.body,delete o.headers["content-type"];else{o.body||(this.serializer.write(15,{}),o.body=this.serializer.flush());try{o.headers["content-length"]=String(o.body.byteLength)}catch{}}let{service:s,operation:i}=(0,rx.getSmithyContext)(n),a=`/service/${s}/operation/${i}`;return o.path.endsWith("/")?o.path+=a.slice(1):o.path+=a,o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=$a(n,o)??"Unknown",a=this.options.defaultNamespace;i.includes("#")&&([a]=i.split("#"));let d={$metadata:s,$response:n,$fault:n.statusCode<=500?"client":"server"},l=Ne.for(a),m;try{m=l.getSchema(i)}catch{o.Message&&(o.message=o.Message);let N=Ne.for("smithy.ts.sdk.synthetic."+a),k=N.getBaseException();if(k){let $=N.getErrorCtor(k);throw Object.assign(new $({name:i}),d,o)}throw Object.assign(new Error(i),d,o)}let h=U.of(m),S=l.getErrorCtor(m),y=o.message??o.Message??"Unknown",w=new S(y),R={};for(let[P,N]of h.structIterator())R[P]=this.deserializer.readValue(N,o[P]);throw Object.assign(w,d,{$fault:h.getMergedTraits().error,message:y},R)}getDefaultContentType(){return"application/cbor"}}});var ox=T(()=>{c();Ha();nx();Wm()});var ht,uo=T(()=>{c();Te();ht=class{resolveRestContentType(t,r){let n=r.getMemberSchemas(),o=Object.values(n).find(s=>!!s.getMergedTraits().httpPayload);if(o){let s=o.getMergedTraits().mediaType;return s||(o.isStringSchema()?"text/plain":o.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(i=>{let{httpQuery:a,httpQueryParams:d,httpHeader:l,httpLabel:m,httpPrefixHeaders:h}=i.getMergedTraits();return!a&&!d&&!l&&!m&&h===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,o,s,i){let a=r,d=t;t.includes("#")&&([a,d]=t.split("#"));let l={$metadata:s,$response:n,$fault:n.statusCode<500?"client":"server"},m=Ne.for(a);try{return{errorSchema:i?.(m,d)??m.getSchema(t),errorMetadata:l}}catch{o.message=o.message??o.Message??"UnknownError";let S=Ne.for("smithy.ts.sdk.synthetic."+a),y=S.getBaseException();if(y){let w=S.getErrorCtor(y)??Error;throw Object.assign(new w({name:d}),l,o)}throw Object.assign(new Error(d),l,o)}}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[o,s]=n.split(";"),i=Object.entries(t),a={Code:o,Type:s};Object.assign(t,a);for(let[d,l]of i)a[d]=l;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var Km,sx=T(()=>{c();ox();Te();uo();Km=class extends ja{awsQueryCompatible;mixin=new ht;constructor({defaultNamespace:t,awsQueryCompatible:r}){super({defaultNamespace:t}),this.awsQueryCompatible=!!r}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),o}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=$a(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m),y={};for(let[w,R]of l.structIterator())y[w]=this.deserializer.readValue(R,o[w]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,y),Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}}});var y1,S1,E1,ix=T(()=>{c();y1=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},S1=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},E1=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var We,Hr=T(()=>{c();We=class{serdeContext;setSerdeContext(t){this.serdeContext=t}}});function ax(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new be(n,"bigDecimal"):BigInt(n)}return t}var cx=T(()=>{c();nt()});var fx=I(ux=>{"use strict";c();var Cn=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},qr=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Ym=()=>{let e=[],t=[],r=!1,n=new Set,o=h=>h.sort((S,y)=>dx[y.step]-dx[S.step]||lx[y.priority||"normal"]-lx[S.priority||"normal"]),s=h=>{let S=!1,y=w=>{let R=Cn(w.name,w.aliases);if(R.includes(h)){S=!0;for(let P of R)n.delete(P);return!1}return!0};return e=e.filter(y),t=t.filter(y),S},i=h=>{let S=!1,y=w=>{if(w.middleware===h){S=!0;for(let R of Cn(w.name,w.aliases))n.delete(R);return!1}return!0};return e=e.filter(y),t=t.filter(y),S},a=h=>(e.forEach(S=>{h.add(S.middleware,{...S})}),t.forEach(S=>{h.addRelativeTo(S.middleware,{...S})}),h.identifyOnResolve?.(m.identifyOnResolve()),h),d=h=>{let S=[];return h.before.forEach(y=>{y.before.length===0&&y.after.length===0?S.push(y):S.push(...d(y))}),S.push(h),h.after.reverse().forEach(y=>{y.before.length===0&&y.after.length===0?S.push(y):S.push(...d(y))}),S},l=(h=!1)=>{let S=[],y=[],w={};return e.forEach(P=>{let N={...P,before:[],after:[]};for(let k of Cn(N.name,N.aliases))w[k]=N;S.push(N)}),t.forEach(P=>{let N={...P,before:[],after:[]};for(let k of Cn(N.name,N.aliases))w[k]=N;y.push(N)}),y.forEach(P=>{if(P.toMiddleware){let N=w[P.toMiddleware];if(N===void 0){if(h)return;throw new Error(`${P.toMiddleware} is not found when adding ${qr(P.name,P.aliases)} middleware ${P.relation} ${P.toMiddleware}`)}P.relation==="after"&&N.after.push(P),P.relation==="before"&&N.before.push(P)}}),o(S).map(d).reduce((P,N)=>(P.push(...N),P),[])},m={add:(h,S={})=>{let{name:y,override:w,aliases:R}=S,P={step:"initialize",priority:"normal",middleware:h,...S},N=Cn(y,R);if(N.length>0){if(N.some(k=>n.has(k))){if(!w)throw new Error(`Duplicate middleware name '${qr(y,R)}'`);for(let k of N){let $=e.findIndex(q=>q.name===k||q.aliases?.some(re=>re===k));if($===-1)continue;let z=e[$];if(z.step!==P.step||P.priority!==z.priority)throw new Error(`"${qr(z.name,z.aliases)}" middleware with ${z.priority} priority in ${z.step} step cannot be overridden by "${qr(y,R)}" middleware with ${P.priority} priority in ${P.step} step.`);e.splice($,1)}}for(let k of N)n.add(k)}e.push(P)},addRelativeTo:(h,S)=>{let{name:y,override:w,aliases:R}=S,P={middleware:h,...S},N=Cn(y,R);if(N.length>0){if(N.some(k=>n.has(k))){if(!w)throw new Error(`Duplicate middleware name '${qr(y,R)}'`);for(let k of N){let $=t.findIndex(q=>q.name===k||q.aliases?.some(re=>re===k));if($===-1)continue;let z=t[$];if(z.toMiddleware!==P.toMiddleware||z.relation!==P.relation)throw new Error(`"${qr(z.name,z.aliases)}" middleware ${z.relation} "${z.toMiddleware}" middleware cannot be overridden by "${qr(y,R)}" middleware ${P.relation} "${P.toMiddleware}" middleware.`);t.splice($,1)}}for(let k of N)n.add(k)}t.push(P)},clone:()=>a(Ym()),use:h=>{h.applyToStack(m)},remove:h=>typeof h=="string"?s(h):i(h),removeByTag:h=>{let S=!1,y=w=>{let{tags:R,name:P,aliases:N}=w;if(R&&R.includes(h)){let k=Cn(P,N);for(let $ of k)n.delete($);return S=!0,!1}return!0};return e=e.filter(y),t=t.filter(y),S},concat:h=>{let S=a(Ym());return S.use(h),S.identifyOnResolve(r||S.identifyOnResolve()||(h.identifyOnResolve?.()??!1)),S},applyToStack:a,identify:()=>l(!0).map(h=>{let S=h.step??h.relation+" "+h.toMiddleware;return qr(h.name,h.aliases)+" - "+S}),identifyOnResolve(h){return typeof h=="boolean"&&(r=h),r},resolve:(h,S)=>{for(let y of l().map(w=>w.middleware).reverse())h=y(h,S);return r&&console.log(m.identify()),h}};return m},dx={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},lx={high:3,normal:2,low:1};ux.constructStack=Ym});var K=I(ce=>{"use strict";c();var hx=fx(),op=(lt(),Y(h_)),Xm=br(),_1=(Te(),Y(aE)),mx=(nt(),Y(e_)),Qm=class{config;middlewareStack=hx.constructStack();initConfig;handlers;constructor(t){this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let d=this.handlers;d.has(t.constructor)?a=d.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),d.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(t).then(d=>s(null,d.output),d=>s(d)).catch(()=>{});else return a(t).then(d=>d.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Jm="***SensitiveInformation***";function Zm(e,t){if(t==null)return t;let r=_1.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Jm;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Jm}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Jm}else if(r.isStructSchema()&&typeof t=="object"){let n=t,o={};for(let[s,i]of r.structIterator())n[s]!=null&&(o[s]=Zm(i,n[s]));return o}return t}var za=class{middlewareStack=hx.constructStack();schema;static classBuilder(){return new ep}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,smithyContext:l,additionalContext:m,CommandCtor:h}){for(let P of o.bind(this)(h,t,r,n))this.middlewareStack.use(P);let S=t.concat(this.middlewareStack),{logger:y}=r,w={logger:y,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,[Xm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...m},{requestHandler:R}=r;return S.resolve(P=>R.handle(P.request,n||{}),w)}},ep=class{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends za{input;static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,o,s){return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(t._operationSchema?Zm.bind(null,t._operationSchema.input):i=>i),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(t._operationSchema?Zm.bind(null,t._operationSchema.output):i=>i),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}serialize=t._serializer;deserialize=t._deserializer}}},w1="***SensitiveInformation***",x1=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,d){let l=new n(i);if(typeof a=="function")this.send(l,a);else if(typeof d=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},d)}else return this.send(l,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},tp=class e extends Error{$fault;$response;$retryable;$metadata;constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},gx=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},yx=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=C1(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw gx(i,t)},b1=e=>({output:t,parsedBody:r,errorCode:n})=>{yx({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},C1=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),T1=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},px=!1,v1=e=>{e&&!px&&parseInt(e.substring(1,e.indexOf(".")))<16&&(px=!0)},A1=e=>{let t=[];for(let r in Xm.AlgorithmId){let n=Xm.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},R1=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},I1=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),P1=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},Sx=e=>Object.assign(A1(e),I1(e)),O1=Sx,N1=e=>Object.assign(R1(e),P1(e)),D1=e=>Array.isArray(e)?e:[e],Ex=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Ex(e[r]));return e},k1=e=>e!=null,rp=class{trace(){}debug(){}info(){}warn(){}error(){}};function _x(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,F1(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}wx(n,null,s,i)}return n}var M1=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},L1=(e,t)=>{let r={};for(let n in t)wx(r,e,t,n);return r},F1=(e,t,r)=>_x(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),wx=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=B1,d=U1,l=n]=i;(typeof a=="function"&&a(t[l])||typeof a!="function"&&a)&&(e[n]=d(t[l]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,d=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:d&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},B1=e=>e!=null,U1=e=>e,$1=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},H1=e=>e.toISOString().replace(".000Z","Z"),np=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(np);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=np(e[r]));return t}return e};Object.defineProperty(ce,"collectBody",{enumerable:!0,get:function(){return op.collectBody}});Object.defineProperty(ce,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return op.extendedEncodeURIComponent}});Object.defineProperty(ce,"resolvedPath",{enumerable:!0,get:function(){return op.resolvedPath}});ce.Client=Qm;ce.Command=za;ce.NoOpLogger=rp;ce.SENSITIVE_STRING=w1;ce.ServiceException=tp;ce._json=np;ce.convertMap=M1;ce.createAggregatedClient=x1;ce.decorateServiceException=gx;ce.emitWarningIfUnsupportedVersion=v1;ce.getArrayIfSingleItem=D1;ce.getDefaultClientConfiguration=O1;ce.getDefaultExtensionConfiguration=Sx;ce.getValueFromTextNode=Ex;ce.isSerializableHeaderValue=k1;ce.loadConfigsForDefaultMode=T1;ce.map=_x;ce.resolveDefaultRuntimeConfig=N1;ce.serializeDateTime=H1;ce.serializeFloat=$1;ce.take=L1;ce.throwDefaultError=yx;ce.withBaseException=b1;Object.keys(mx).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(ce,e)&&Object.defineProperty(ce,e,{enumerable:!0,get:function(){return mx[e]}})})});var xx,bx,Va,sp=T(()=>{c();xx=v(K()),bx=v(Le()),Va=(e,t)=>(0,xx.collectBody)(e,t).then(r=>(t?.utf8Encoder??bx.toUtf8)(r))});var fo,ip,Tn,_s=T(()=>{c();sp();fo=(e,t)=>Va(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),ip=async(e,t)=>{let r=await fo(e,t);return r.message=r.message??r.Message,r},Tn=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var Cx,ws,ap=T(()=>{c();lt();Te();nt();Cx=v(Fe());Hr();cx();_s();ws=class extends We{settings;constructor(t){super(),this.settings=t}async read(t,r){return this._read(t,typeof r=="string"?JSON.parse(r,ax):await fo(r,this.serdeContext))}readObject(t,r){return this._read(t,r)}_read(t,r){let n=r!==null&&typeof r=="object",o=U.of(t);if(o.isListSchema()&&Array.isArray(r)){let i=o.getValueSchema(),a=[],d=!!o.getMergedTraits().sparse;for(let l of r)(d||l!=null)&&a.push(this._read(i,l));return a}else if(o.isMapSchema()&&n){let i=o.getValueSchema(),a={},d=!!o.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(d||m!=null)&&(a[l]=this._read(i,m));return a}else if(o.isStructSchema()&&n){let i={};for(let[a,d]of o.structIterator()){let l=this.settings.jsonName?d.getMergedTraits().jsonName??a:a,m=this._read(d,r[l]);m!=null&&(i[a]=m)}return i}if(o.isBlobSchema()&&typeof r=="string")return(0,Cx.fromBase64)(r);let s=o.getMergedTraits().mediaType;if(o.isStringSchema()&&typeof r=="string"&&s&&(s==="application/json"||s.endsWith("+json")))return Qe.from(r);if(o.isTimestampSchema()&&r!=null)switch(dt(o,this.settings)){case 5:return Pf(r);case 6:return Of(r);case 7:return Nf(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(o.isBigIntegerSchema()&&(typeof r=="number"||typeof r=="string"))return BigInt(r);if(o.isBigDecimalSchema()&&r!=null){if(r instanceof be)return r;let i=r;return i.type==="bigDecimal"&&"string"in i?new be(i.string,i.type):new be(String(r),"bigDecimal")}if(o.isNumericSchema()&&typeof r=="string")switch(r){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(o.isDocumentSchema())if(n){let i=Array.isArray(r)?[]:{};for(let[a,d]of Object.entries(r))d instanceof be?i[a]=d:i[a]=this._read(o,d);return i}else return structuredClone(r);return r}}});var Tx,Ga,vx=T(()=>{c();nt();Tx="\u039D",Ga=class{values=new Map;counter=0;stage=0;createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof be){let n=`${Tx+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${Tx+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var Ax,xs,cp=T(()=>{c();lt();Te();nt();Ax=v(Fe());Hr();vx();xs=class extends We{settings;buffer;rootSchema;constructor(t){super(),this.settings=t}write(t,r){this.rootSchema=U.of(t),this.buffer=this._write(this.rootSchema,r)}writeDiscriminatedDocument(t,r){this.write(t,r),typeof this.buffer=="object"&&(this.buffer.__type=U.of(t).getName(!0))}flush(){let{rootSchema:t}=this;if(this.rootSchema=void 0,t?.isStructSchema()||t?.isDocumentSchema()){let r=new Ga;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(t,r,n){let o=r!==null&&typeof r=="object",s=U.of(t);if(s.isListSchema()&&Array.isArray(r)){let i=s.getValueSchema(),a=[],d=!!s.getMergedTraits().sparse;for(let l of r)(d||l!=null)&&a.push(this._write(i,l));return a}else if(s.isMapSchema()&&o){let i=s.getValueSchema(),a={},d=!!s.getMergedTraits().sparse;for(let[l,m]of Object.entries(r))(d||m!=null)&&(a[l]=this._write(i,m));return a}else if(s.isStructSchema()&&o){let i={};for(let[a,d]of s.structIterator()){let l=this.settings.jsonName?d.getMergedTraits().jsonName??a:a,m=this._write(d,r[a],s);m!==void 0&&(i[l]=m)}return i}if(!(r===null&&n?.isStructSchema())){if(s.isBlobSchema()&&(r instanceof Uint8Array||typeof r=="string")||s.isDocumentSchema()&&r instanceof Uint8Array)return s===this.rootSchema?r:this.serdeContext?.base64Encoder?this.serdeContext?.base64Encoder(r):(0,Ax.toBase64)(r);if((s.isTimestampSchema()||s.isDocumentSchema())&&r instanceof Date)switch(dt(s,this.settings)){case 5:return r.toISOString().replace(".000Z","Z");case 6:return as(r);case 7:return r.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",r),r.getTime()/1e3}if(s.isNumericSchema()&&typeof r=="number"&&(Math.abs(r)===1/0||isNaN(r)))return String(r);if(s.isStringSchema()){if(typeof r>"u"&&s.isIdempotencyToken())return(0,Dt.v4)();let i=s.getMergedTraits().mediaType;if(r!=null&&i&&(i==="application/json"||i.endsWith("+json")))return Qe.from(r)}if(s.isDocumentSchema())if(o){let i=Array.isArray(r)?[]:{};for(let[a,d]of Object.entries(r))d instanceof be?i[a]=d:i[a]=this._write(s,d);return i}else return structuredClone(r);return r}}}});var vn,Wa=T(()=>{c();Hr();ap();cp();vn=class extends We{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new xs(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new ws(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var An,Ka=T(()=>{c();lt();Te();uo();Wa();_s();An=class extends nr{serializer;deserializer;serviceTarget;codec;mixin=new ht;awsQueryCompatible;constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t}),this.serviceTarget=r,this.codec=new vn({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!n}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);return o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${U.of(t).getName()}`}),this.awsQueryCompatible&&(o.headers["x-amzn-query-mode"]="true"),(pt(t.input)==="unit"||!o.body)&&(o.body="{}"),o}getPayloadCodec(){return this.codec}async handleError(t,r,n,o,s){this.awsQueryCompatible&&this.mixin.setQueryCompatError(o,n);let i=Tn(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m),y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(R,o[P])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(o,y),Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}}});var dp,Rx=T(()=>{c();Ka();dp=class extends An{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var lp,Ix=T(()=>{c();Ka();lp=class extends An{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var up,Px=T(()=>{c();lt();Te();uo();Wa();_s();up=class extends mn{serializer;deserializer;codec;mixin=new ht;constructor({defaultNamespace:t}){super({defaultNamespace:t});let r={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new vn(r),this.serializer=new gn(this.codec.createSerializer(),r),this.deserializer=new hn(this.codec.createDeserializer(),r)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(t){this.codec.setSerdeContext(t),super.setSerdeContext(t)}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=U.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return o.headers["content-type"]&&!o.body&&(o.body="{}"),o}async handleError(t,r,n,o,s){let i=Tn(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m);await this.deserializeHttpMessage(a,r,n,o);let y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(R,o[P])}throw Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}getDefaultContentType(){return"application/json"}}});var Ox,q1,Nx=T(()=>{c();Ox=v(K()),q1=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,Ox.expectUnion)(e)}});var kx=I((pQ,Dx)=>{c();(()=>{"use strict";var e={d:(u,f)=>{for(var _ in f)e.o(f,_)&&!e.o(u,_)&&Object.defineProperty(u,_,{enumerable:!0,get:f[_]})},o:(u,f)=>Object.prototype.hasOwnProperty.call(u,f),r:u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>wr,XMLParser:()=>AO,XMLValidator:()=>MO});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function o(u,f){let _=[],C=f.exec(u);for(;C;){let x=[];x.startIndex=f.lastIndex-C[0].length;let b=C.length;for(let O=0;O<b;O++)x.push(C[O]);_.push(x),C=f.exec(u)}return _}let s=function(u){return n.exec(u)!=null},i={allowBooleanAttributes:!1,unpairedTags:[]};function a(u,f){f=Object.assign({},i,f);let _=[],C=!1,x=!1;u[0]==="\uFEFF"&&(u=u.substr(1));for(let b=0;b<u.length;b++)if(u[b]==="<"&&u[b+1]==="?"){if(b+=2,b=l(u,b),b.err)return b}else{if(u[b]!=="<"){if(d(u[b]))continue;return N("InvalidChar","char '"+u[b]+"' is not expected.",$(u,b))}{let O=b;if(b++,u[b]==="!"){b=m(u,b);continue}{let A=!1;u[b]==="/"&&(A=!0,b++);let D="";for(;b<u.length&&u[b]!==">"&&u[b]!==" "&&u[b]!=="	"&&u[b]!==`
`&&u[b]!=="\r";b++)D+=u[b];if(D=D.trim(),D[D.length-1]==="/"&&(D=D.substring(0,D.length-1),b--),!s(D)){let j;return j=D.trim().length===0?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",N("InvalidTag",j,$(u,b))}let L=y(u,b);if(L===!1)return N("InvalidAttr","Attributes for '"+D+"' have open quote.",$(u,b));let G=L.value;if(b=L.index,G[G.length-1]==="/"){let j=b-G.length;G=G.substring(0,G.length-1);let ne=R(G,f);if(ne!==!0)return N(ne.err.code,ne.err.msg,$(u,j+ne.err.line));C=!0}else if(A){if(!L.tagClosed)return N("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",$(u,b));if(G.trim().length>0)return N("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",$(u,O));if(_.length===0)return N("InvalidTag","Closing tag '"+D+"' has not been opened.",$(u,O));{let j=_.pop();if(D!==j.tagName){let ne=$(u,j.tagStartPos);return N("InvalidTag","Expected closing tag '"+j.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+D+"'.",$(u,O))}_.length==0&&(x=!0)}}else{let j=R(G,f);if(j!==!0)return N(j.err.code,j.err.msg,$(u,b-G.length+j.err.line));if(x===!0)return N("InvalidXml","Multiple possible root nodes found.",$(u,b));f.unpairedTags.indexOf(D)!==-1||_.push({tagName:D,tagStartPos:O}),C=!0}for(b++;b<u.length;b++)if(u[b]==="<"){if(u[b+1]==="!"){b++,b=m(u,b);continue}if(u[b+1]!=="?")break;if(b=l(u,++b),b.err)return b}else if(u[b]==="&"){let j=P(u,b);if(j==-1)return N("InvalidChar","char '&' is not expected.",$(u,b));b=j}else if(x===!0&&!d(u[b]))return N("InvalidXml","Extra text at the end",$(u,b));u[b]==="<"&&b--}}}return C?_.length==1?N("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",$(u,_[0].tagStartPos)):!(_.length>0)||N("InvalidXml","Invalid '"+JSON.stringify(_.map((b=>b.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):N("InvalidXml","Start tag expected.",1)}function d(u){return u===" "||u==="	"||u===`
`||u==="\r"}function l(u,f){let _=f;for(;f<u.length;f++)if(!(u[f]!="?"&&u[f]!=" ")){let C=u.substr(_,f-_);if(f>5&&C==="xml")return N("InvalidXml","XML declaration allowed only at the start of the document.",$(u,f));if(u[f]=="?"&&u[f+1]==">"){f++;break}}return f}function m(u,f){if(u.length>f+5&&u[f+1]==="-"&&u[f+2]==="-"){for(f+=3;f<u.length;f++)if(u[f]==="-"&&u[f+1]==="-"&&u[f+2]===">"){f+=2;break}}else if(u.length>f+8&&u[f+1]==="D"&&u[f+2]==="O"&&u[f+3]==="C"&&u[f+4]==="T"&&u[f+5]==="Y"&&u[f+6]==="P"&&u[f+7]==="E"){let _=1;for(f+=8;f<u.length;f++)if(u[f]==="<")_++;else if(u[f]===">"&&(_--,_===0))break}else if(u.length>f+9&&u[f+1]==="["&&u[f+2]==="C"&&u[f+3]==="D"&&u[f+4]==="A"&&u[f+5]==="T"&&u[f+6]==="A"&&u[f+7]==="["){for(f+=8;f<u.length;f++)if(u[f]==="]"&&u[f+1]==="]"&&u[f+2]===">"){f+=2;break}}return f}let h='"',S="'";function y(u,f){let _="",C="",x=!1;for(;f<u.length;f++){if(u[f]===h||u[f]===S)C===""?C=u[f]:C!==u[f]||(C="");else if(u[f]===">"&&C===""){x=!0;break}_+=u[f]}return C===""&&{value:_,index:f,tagClosed:x}}let w=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function R(u,f){let _=o(u,w),C={};for(let x=0;x<_.length;x++){if(_[x][1].length===0)return N("InvalidAttr","Attribute '"+_[x][2]+"' has no space in starting.",z(_[x]));if(_[x][3]!==void 0&&_[x][4]===void 0)return N("InvalidAttr","Attribute '"+_[x][2]+"' is without value.",z(_[x]));if(_[x][3]===void 0&&!f.allowBooleanAttributes)return N("InvalidAttr","boolean attribute '"+_[x][2]+"' is not allowed.",z(_[x]));let b=_[x][2];if(!k(b))return N("InvalidAttr","Attribute '"+b+"' is an invalid name.",z(_[x]));if(C.hasOwnProperty(b))return N("InvalidAttr","Attribute '"+b+"' is repeated.",z(_[x]));C[b]=1}return!0}function P(u,f){if(u[++f]===";")return-1;if(u[f]==="#")return(function(C,x){let b=/\d/;for(C[x]==="x"&&(x++,b=/[\da-fA-F]/);x<C.length;x++){if(C[x]===";")return x;if(!C[x].match(b))break}return-1})(u,++f);let _=0;for(;f<u.length;f++,_++)if(!(u[f].match(/\w/)&&_<20)){if(u[f]===";")break;return-1}return f}function N(u,f,_){return{err:{code:u,msg:f,line:_.line||_,col:_.col}}}function k(u){return s(u)}function $(u,f){let _=u.substring(0,f).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function z(u){return u.startIndex+u[1].length}let q={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,f){return f},attributeValueProcessor:function(u,f){return f},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,f,_){return u},captureMetaData:!1},re;re=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class ze{constructor(f){this.tagname=f,this.child=[],this[":@"]={}}add(f,_){f==="__proto__"&&(f="#__proto__"),this.child.push({[f]:_})}addChild(f,_){f.tagname==="__proto__"&&(f.tagname="#__proto__"),f[":@"]&&Object.keys(f[":@"]).length>0?this.child.push({[f.tagname]:f.child,":@":f[":@"]}):this.child.push({[f.tagname]:f.child}),_!==void 0&&(this.child[this.child.length-1][re]={startIndex:_})}static getMetaDataSymbol(){return re}}function tt(u,f){let _={};if(u[f+3]!=="O"||u[f+4]!=="C"||u[f+5]!=="T"||u[f+6]!=="Y"||u[f+7]!=="P"||u[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let C=1,x=!1,b=!1,O="";for(;f<u.length;f++)if(u[f]!=="<"||b)if(u[f]===">"){if(b?u[f-1]==="-"&&u[f-2]==="-"&&(b=!1,C--):C--,C===0)break}else u[f]==="["?x=!0:O+=u[f];else{if(x&&dn(u,"!ENTITY",f)){let A,D;f+=7,[A,D,f]=de(u,f+1),D.indexOf("&")===-1&&(_[A]={regx:RegExp(`&${A};`,"g"),val:D})}else if(x&&dn(u,"!ELEMENT",f)){f+=8;let{index:A}=iO(u,f+1);f=A}else if(x&&dn(u,"!ATTLIST",f))f+=8;else if(x&&dn(u,"!NOTATION",f)){f+=9;let{index:A}=Oe(u,f+1);f=A}else{if(!dn(u,"!--",f))throw new Error("Invalid DOCTYPE");b=!0}C++,O=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:f}}let _e=(u,f)=>{for(;f<u.length&&/\s/.test(u[f]);)f++;return f};function de(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f])&&u[f]!=='"'&&u[f]!=="'";)_+=u[f],f++;if(yu(_),f=_e(u,f),u.substring(f,f+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(u[f]==="%")throw new Error("Parameter entities are not supported");let C="";return[f,C]=zn(u,f,"entity"),[_,C,--f]}function Oe(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f]);)_+=u[f],f++;yu(_),f=_e(u,f);let C=u.substring(f,f+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);f+=C.length,f=_e(u,f);let x=null,b=null;if(C==="PUBLIC")[f,x]=zn(u,f,"publicIdentifier"),u[f=_e(u,f)]!=='"'&&u[f]!=="'"||([f,b]=zn(u,f,"systemIdentifier"));else if(C==="SYSTEM"&&([f,b]=zn(u,f,"systemIdentifier"),!b))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:x,systemIdentifier:b,index:--f}}function zn(u,f,_){let C="",x=u[f];if(x!=='"'&&x!=="'")throw new Error(`Expected quoted string, found "${x}"`);for(f++;f<u.length&&u[f]!==x;)C+=u[f],f++;if(u[f]!==x)throw new Error(`Unterminated ${_} value`);return[++f,C]}function iO(u,f){f=_e(u,f);let _="";for(;f<u.length&&!/\s/.test(u[f]);)_+=u[f],f++;if(!yu(_))throw new Error(`Invalid element name: "${_}"`);let C="";if(u[f=_e(u,f)]==="E"&&dn(u,"MPTY",f))f+=4;else if(u[f]==="A"&&dn(u,"NY",f))f+=2;else{if(u[f]!=="(")throw new Error(`Invalid Element Expression, found "${u[f]}"`);for(f++;f<u.length&&u[f]!==")";)C+=u[f],f++;if(u[f]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:C.trim(),index:f}}function dn(u,f,_){for(let C=0;C<f.length;C++)if(f[C]!==u[_+C+1])return!1;return!0}function yu(u){if(s(u))return u;throw new Error(`Invalid entity name ${u}`)}let aO=/^[-+]?0x[a-fA-F0-9]+$/,cO=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,dO={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},lO=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Xg(u){return typeof u=="function"?u:Array.isArray(u)?f=>{for(let _ of u)if(typeof _=="string"&&f===_||_ instanceof RegExp&&_.test(f))return!0}:()=>!1}class uO{constructor(f){this.options=f,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=fO,this.parseXml=yO,this.parseTextData=mO,this.resolveNameSpace=pO,this.buildAttributesMap=gO,this.isItStopNode=wO,this.replaceEntitiesValue=EO,this.readStopNodeData=xO,this.saveTextToParentTag=_O,this.addChild=SO,this.ignoreAttributesFn=Xg(this.options.ignoreAttributes)}}function fO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:u[C]}}}function mO(u,f,_,C,x,b,O){if(u!==void 0&&(this.options.trimValues&&!C&&(u=u.trim()),u.length>0)){O||(u=this.replaceEntitiesValue(u));let A=this.options.tagValueProcessor(f,u,_,x,b);return A==null?u:typeof A!=typeof u||A!==u?A:this.options.trimValues||u.trim()===u?Qg(u,this.options.parseTagValue,this.options.numberParseOptions):u}}function pO(u){if(this.options.removeNSPrefix){let f=u.split(":"),_=u.charAt(0)==="/"?"/":"";if(f[0]==="xmlns")return"";f.length===2&&(u=_+f[1])}return u}let hO=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function gO(u,f,_){if(this.options.ignoreAttributes!==!0&&typeof u=="string"){let C=o(u,hO),x=C.length,b={};for(let O=0;O<x;O++){let A=this.resolveNameSpace(C[O][1]);if(this.ignoreAttributesFn(A,f))continue;let D=C[O][4],L=this.options.attributeNamePrefix+A;if(A.length)if(this.options.transformAttributeName&&(L=this.options.transformAttributeName(L)),L==="__proto__"&&(L="#__proto__"),D!==void 0){this.options.trimValues&&(D=D.trim()),D=this.replaceEntitiesValue(D);let G=this.options.attributeValueProcessor(A,D,f);b[L]=G==null?D:typeof G!=typeof D||G!==D?G:Qg(D,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(b[L]=!0)}if(!Object.keys(b).length)return;if(this.options.attributesGroupName){let O={};return O[this.options.attributesGroupName]=b,O}return b}}let yO=function(u){u=u.replace(/\r\n?/g,`
`);let f=new ze("!xml"),_=f,C="",x="";for(let b=0;b<u.length;b++)if(u[b]==="<")if(u[b+1]==="/"){let O=ln(u,">",b,"Closing Tag is not closed."),A=u.substring(b+2,O).trim();if(this.options.removeNSPrefix){let G=A.indexOf(":");G!==-1&&(A=A.substr(G+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&(C=this.saveTextToParentTag(C,_,x));let D=x.substring(x.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let L=0;D&&this.options.unpairedTags.indexOf(D)!==-1?(L=x.lastIndexOf(".",x.lastIndexOf(".")-1),this.tagsNodeStack.pop()):L=x.lastIndexOf("."),x=x.substring(0,L),_=this.tagsNodeStack.pop(),C="",b=O}else if(u[b+1]==="?"){let O=Su(u,b,!1,"?>");if(!O)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,_,x),!(this.options.ignoreDeclaration&&O.tagName==="?xml"||this.options.ignorePiTags)){let A=new ze(O.tagName);A.add(this.options.textNodeName,""),O.tagName!==O.tagExp&&O.attrExpPresent&&(A[":@"]=this.buildAttributesMap(O.tagExp,x,O.tagName)),this.addChild(_,A,x,b)}b=O.closeIndex+1}else if(u.substr(b+1,3)==="!--"){let O=ln(u,"-->",b+4,"Comment is not closed.");if(this.options.commentPropName){let A=u.substring(b+4,O-2);C=this.saveTextToParentTag(C,_,x),_.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}b=O}else if(u.substr(b+1,2)==="!D"){let O=tt(u,b);this.docTypeEntities=O.entities,b=O.i}else if(u.substr(b+1,2)==="!["){let O=ln(u,"]]>",b,"CDATA is not closed.")-2,A=u.substring(b+9,O);C=this.saveTextToParentTag(C,_,x);let D=this.parseTextData(A,_.tagname,x,!0,!1,!0,!0);D==null&&(D=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):_.add(this.options.textNodeName,D),b=O+2}else{let O=Su(u,b,this.options.removeNSPrefix),A=O.tagName,D=O.rawTagName,L=O.tagExp,G=O.attrExpPresent,j=O.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),_&&C&&_.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,_,x,!1));let ne=_;ne&&this.options.unpairedTags.indexOf(ne.tagname)!==-1&&(_=this.tagsNodeStack.pop(),x=x.substring(0,x.lastIndexOf("."))),A!==f.tagname&&(x+=x?"."+A:A);let ae=b;if(this.isItStopNode(this.options.stopNodes,x,A)){let oe="";if(L.length>0&&L.lastIndexOf("/")===L.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),x=x.substr(0,x.length-1),L=A):L=L.substr(0,L.length-1),b=O.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)b=O.closeIndex;else{let Pt=this.readStopNodeData(u,D,j+1);if(!Pt)throw new Error(`Unexpected end of ${D}`);b=Pt.i,oe=Pt.tagContent}let ke=new ze(A);A!==L&&G&&(ke[":@"]=this.buildAttributesMap(L,x,A)),oe&&(oe=this.parseTextData(oe,A,x,!0,G,!0,!0)),x=x.substr(0,x.lastIndexOf(".")),ke.add(this.options.textNodeName,oe),this.addChild(_,ke,x,ae)}else{if(L.length>0&&L.lastIndexOf("/")===L.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),x=x.substr(0,x.length-1),L=A):L=L.substr(0,L.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let oe=new ze(A);A!==L&&G&&(oe[":@"]=this.buildAttributesMap(L,x,A)),this.addChild(_,oe,x,ae),x=x.substr(0,x.lastIndexOf("."))}else{let oe=new ze(A);this.tagsNodeStack.push(_),A!==L&&G&&(oe[":@"]=this.buildAttributesMap(L,x,A)),this.addChild(_,oe,x,ae),_=oe}C="",b=j}}else C+=u[b];return f.child};function SO(u,f,_,C){this.options.captureMetaData||(C=void 0);let x=this.options.updateTag(f.tagname,_,f[":@"]);x===!1||(typeof x=="string"&&(f.tagname=x),u.addChild(f,C))}let EO=function(u){if(this.options.processEntities){for(let f in this.docTypeEntities){let _=this.docTypeEntities[f];u=u.replace(_.regx,_.val)}for(let f in this.lastEntities){let _=this.lastEntities[f];u=u.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let f in this.htmlEntities){let _=this.htmlEntities[f];u=u.replace(_.regex,_.val)}u=u.replace(this.ampEntity.regex,this.ampEntity.val)}return u};function _O(u,f,_,C){return u&&(C===void 0&&(C=f.child.length===0),(u=this.parseTextData(u,f.tagname,_,!1,!!f[":@"]&&Object.keys(f[":@"]).length!==0,C))!==void 0&&u!==""&&f.add(this.options.textNodeName,u),u=""),u}function wO(u,f,_){let C="*."+_;for(let x in u){let b=u[x];if(C===b||f===b)return!0}return!1}function ln(u,f,_,C){let x=u.indexOf(f,_);if(x===-1)throw new Error(C);return x+f.length-1}function Su(u,f,_,C=">"){let x=(function(j,ne,ae=">"){let oe,ke="";for(let Pt=ne;Pt<j.length;Pt++){let xr=j[Pt];if(oe)xr===oe&&(oe="");else if(xr==='"'||xr==="'")oe=xr;else if(xr===ae[0]){if(!ae[1])return{data:ke,index:Pt};if(j[Pt+1]===ae[1])return{data:ke,index:Pt}}else xr==="	"&&(xr=" ");ke+=xr}})(u,f+1,C);if(!x)return;let b=x.data,O=x.index,A=b.search(/\s/),D=b,L=!0;A!==-1&&(D=b.substring(0,A),b=b.substring(A+1).trimStart());let G=D;if(_){let j=D.indexOf(":");j!==-1&&(D=D.substr(j+1),L=D!==x.data.substr(j+1))}return{tagName:D,tagExp:b,closeIndex:O,attrExpPresent:L,rawTagName:G}}function xO(u,f,_){let C=_,x=1;for(;_<u.length;_++)if(u[_]==="<")if(u[_+1]==="/"){let b=ln(u,">",_,`${f} is not closed`);if(u.substring(_+2,b).trim()===f&&(x--,x===0))return{tagContent:u.substring(C,_),i:b};_=b}else if(u[_+1]==="?")_=ln(u,"?>",_+1,"StopNode is not closed.");else if(u.substr(_+1,3)==="!--")_=ln(u,"-->",_+3,"StopNode is not closed.");else if(u.substr(_+1,2)==="![")_=ln(u,"]]>",_,"StopNode is not closed.")-2;else{let b=Su(u,_,">");b&&((b&&b.tagName)===f&&b.tagExp[b.tagExp.length-1]!=="/"&&x++,_=b.closeIndex)}}function Qg(u,f,_){if(f&&typeof u=="string"){let C=u.trim();return C==="true"||C!=="false"&&(function(x,b={}){if(b=Object.assign({},dO,b),!x||typeof x!="string")return x;let O=x.trim();if(b.skipLike!==void 0&&b.skipLike.test(O))return x;if(x==="0")return 0;if(b.hex&&aO.test(O))return(function(D){if(parseInt)return parseInt(D,16);if(Number.parseInt)return Number.parseInt(D,16);if(window&&window.parseInt)return window.parseInt(D,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")})(O);if(O.search(/.+[eE].+/)!==-1)return(function(D,L,G){if(!G.eNotation)return D;let j=L.match(lO);if(j){let ne=j[1]||"",ae=j[3].indexOf("e")===-1?"E":"e",oe=j[2],ke=ne?D[oe.length+1]===ae:D[oe.length]===ae;return oe.length>1&&ke?D:oe.length!==1||!j[3].startsWith(`.${ae}`)&&j[3][0]!==ae?G.leadingZeros&&!ke?(L=(j[1]||"")+j[3],Number(L)):D:Number(L)}return D})(x,O,b);{let D=cO.exec(O);if(D){let L=D[1]||"",G=D[2],j=((A=D[3])&&A.indexOf(".")!==-1&&((A=A.replace(/0+$/,""))==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substring(0,A.length-1))),A),ne=L?x[G.length+1]===".":x[G.length]===".";if(!b.leadingZeros&&(G.length>1||G.length===1&&!ne))return x;{let ae=Number(O),oe=String(ae);if(ae===0||ae===-0)return ae;if(oe.search(/[eE]/)!==-1)return b.eNotation?ae:x;if(O.indexOf(".")!==-1)return oe==="0"||oe===j||oe===`${L}${j}`?ae:x;let ke=G?j:O;return G?ke===oe||L+ke===oe?ae:x:ke===oe||ke===L+oe?ae:x}}return x}var A})(u,_)}return u!==void 0?u:""}let Eu=ze.getMetaDataSymbol();function bO(u,f){return Zg(u,f)}function Zg(u,f,_){let C,x={};for(let b=0;b<u.length;b++){let O=u[b],A=CO(O),D="";if(D=_===void 0?A:_+"."+A,A===f.textNodeName)C===void 0?C=O[A]:C+=""+O[A];else{if(A===void 0)continue;if(O[A]){let L=Zg(O[A],f,D),G=vO(L,f);O[Eu]!==void 0&&(L[Eu]=O[Eu]),O[":@"]?TO(L,O[":@"],D,f):Object.keys(L).length!==1||L[f.textNodeName]===void 0||f.alwaysCreateTextNode?Object.keys(L).length===0&&(f.alwaysCreateTextNode?L[f.textNodeName]="":L=""):L=L[f.textNodeName],x[A]!==void 0&&x.hasOwnProperty(A)?(Array.isArray(x[A])||(x[A]=[x[A]]),x[A].push(L)):f.isArray(A,D,G)?x[A]=[L]:x[A]=L}}}return typeof C=="string"?C.length>0&&(x[f.textNodeName]=C):C!==void 0&&(x[f.textNodeName]=C),x}function CO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];if(C!==":@")return C}}function TO(u,f,_,C){if(f){let x=Object.keys(f),b=x.length;for(let O=0;O<b;O++){let A=x[O];C.isArray(A,_+"."+A,!0,!0)?u[A]=[f[A]]:u[A]=f[A]}}}function vO(u,f){let{textNodeName:_}=f,C=Object.keys(u).length;return C===0||!(C!==1||!u[_]&&typeof u[_]!="boolean"&&u[_]!==0)}class AO{constructor(f){this.externalEntities={},this.options=(function(_){return Object.assign({},q,_)})(f)}parse(f,_){if(typeof f!="string"){if(!f.toString)throw new Error("XML data is accepted in String or Bytes[] form.");f=f.toString()}if(_){_===!0&&(_={});let b=a(f,_);if(b!==!0)throw Error(`${b.err.msg}:${b.err.line}:${b.err.col}`)}let C=new uO(this.options);C.addExternalEntities(this.externalEntities);let x=C.parseXml(f);return this.options.preserveOrder||x===void 0?x:bO(x,this.options)}addEntity(f,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(f.indexOf("&")!==-1||f.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[f]=_}static getMetaDataSymbol(){return ze.getMetaDataSymbol()}}function RO(u,f){let _="";return f.format&&f.indentBy.length>0&&(_=`
`),ey(u,f,"",_)}function ey(u,f,_,C){let x="",b=!1;for(let O=0;O<u.length;O++){let A=u[O],D=IO(A);if(D===void 0)continue;let L="";if(L=_.length===0?D:`${_}.${D}`,D===f.textNodeName){let ae=A[D];PO(L,f)||(ae=f.tagValueProcessor(D,ae),ae=ry(ae,f)),b&&(x+=C),x+=ae,b=!1;continue}if(D===f.cdataPropName){b&&(x+=C),x+=`<![CDATA[${A[D][0][f.textNodeName]}]]>`,b=!1;continue}if(D===f.commentPropName){x+=C+`<!--${A[D][0][f.textNodeName]}-->`,b=!0;continue}if(D[0]==="?"){let ae=ty(A[":@"],f),oe=D==="?xml"?"":C,ke=A[D][0][f.textNodeName];ke=ke.length!==0?" "+ke:"",x+=oe+`<${D}${ke}${ae}?>`,b=!0;continue}let G=C;G!==""&&(G+=f.indentBy);let j=C+`<${D}${ty(A[":@"],f)}`,ne=ey(A[D],f,L,G);f.unpairedTags.indexOf(D)!==-1?f.suppressUnpairedNode?x+=j+">":x+=j+"/>":ne&&ne.length!==0||!f.suppressEmptyNode?ne&&ne.endsWith(">")?x+=j+`>${ne}${C}</${D}>`:(x+=j+">",ne&&C!==""&&(ne.includes("/>")||ne.includes("</"))?x+=C+f.indentBy+ne+C:x+=ne,x+=`</${D}>`):x+=j+"/>",b=!0}return x}function IO(u){let f=Object.keys(u);for(let _=0;_<f.length;_++){let C=f[_];if(u.hasOwnProperty(C)&&C!==":@")return C}}function ty(u,f){let _="";if(u&&!f.ignoreAttributes)for(let C in u){if(!u.hasOwnProperty(C))continue;let x=f.attributeValueProcessor(C,u[C]);x=ry(x,f),x===!0&&f.suppressBooleanAttributes?_+=` ${C.substr(f.attributeNamePrefix.length)}`:_+=` ${C.substr(f.attributeNamePrefix.length)}="${x}"`}return _}function PO(u,f){let _=(u=u.substr(0,u.length-f.textNodeName.length-1)).substr(u.lastIndexOf(".")+1);for(let C in f.stopNodes)if(f.stopNodes[C]===u||f.stopNodes[C]==="*."+_)return!0;return!1}function ry(u,f){if(u&&u.length>0&&f.processEntities)for(let _=0;_<f.entities.length;_++){let C=f.entities[_];u=u.replace(C.regex,C.val)}return u}let OO={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(u,f){return f},attributeValueProcessor:function(u,f){return f},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function wr(u){this.options=Object.assign({},OO,u),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Xg(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=kO),this.processTextOrObjNode=NO,this.options.format?(this.indentate=DO,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function NO(u,f,_,C){let x=this.j2x(u,_+1,C.concat(f));return u[this.options.textNodeName]!==void 0&&Object.keys(u).length===1?this.buildTextValNode(u[this.options.textNodeName],f,x.attrStr,_):this.buildObjectNode(x.val,f,x.attrStr,_)}function DO(u){return this.options.indentBy.repeat(u)}function kO(u){return!(!u.startsWith(this.options.attributeNamePrefix)||u===this.options.textNodeName)&&u.substr(this.attrPrefixLen)}wr.prototype.build=function(u){return this.options.preserveOrder?RO(u,this.options):(Array.isArray(u)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(u={[this.options.arrayNodeName]:u}),this.j2x(u,0,[]).val)},wr.prototype.j2x=function(u,f,_){let C="",x="",b=_.join(".");for(let O in u)if(Object.prototype.hasOwnProperty.call(u,O))if(u[O]===void 0)this.isAttribute(O)&&(x+="");else if(u[O]===null)this.isAttribute(O)||O===this.options.cdataPropName?x+="":O[0]==="?"?x+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(u[O]instanceof Date)x+=this.buildTextValNode(u[O],O,"",f);else if(typeof u[O]!="object"){let A=this.isAttribute(O);if(A&&!this.ignoreAttributesFn(A,b))C+=this.buildAttrPairStr(A,""+u[O]);else if(!A)if(O===this.options.textNodeName){let D=this.options.tagValueProcessor(O,""+u[O]);x+=this.replaceEntitiesValue(D)}else x+=this.buildTextValNode(u[O],O,"",f)}else if(Array.isArray(u[O])){let A=u[O].length,D="",L="";for(let G=0;G<A;G++){let j=u[O][G];if(j!==void 0)if(j===null)O[0]==="?"?x+=this.indentate(f)+"<"+O+"?"+this.tagEndChar:x+=this.indentate(f)+"<"+O+"/"+this.tagEndChar;else if(typeof j=="object")if(this.options.oneListGroup){let ne=this.j2x(j,f+1,_.concat(O));D+=ne.val,this.options.attributesGroupName&&j.hasOwnProperty(this.options.attributesGroupName)&&(L+=ne.attrStr)}else D+=this.processTextOrObjNode(j,O,f,_);else if(this.options.oneListGroup){let ne=this.options.tagValueProcessor(O,j);ne=this.replaceEntitiesValue(ne),D+=ne}else D+=this.buildTextValNode(j,O,"",f)}this.options.oneListGroup&&(D=this.buildObjectNode(D,O,L,f)),x+=D}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){let A=Object.keys(u[O]),D=A.length;for(let L=0;L<D;L++)C+=this.buildAttrPairStr(A[L],""+u[O][A[L]])}else x+=this.processTextOrObjNode(u[O],O,f,_);return{attrStr:C,val:x}},wr.prototype.buildAttrPairStr=function(u,f){return f=this.options.attributeValueProcessor(u,""+f),f=this.replaceEntitiesValue(f),this.options.suppressBooleanAttributes&&f==="true"?" "+u:" "+u+'="'+f+'"'},wr.prototype.buildObjectNode=function(u,f,_,C){if(u==="")return f[0]==="?"?this.indentate(C)+"<"+f+_+"?"+this.tagEndChar:this.indentate(C)+"<"+f+_+this.closeTag(f)+this.tagEndChar;{let x="</"+f+this.tagEndChar,b="";return f[0]==="?"&&(b="?",x=""),!_&&_!==""||u.indexOf("<")!==-1?this.options.commentPropName!==!1&&f===this.options.commentPropName&&b.length===0?this.indentate(C)+`<!--${u}-->`+this.newLine:this.indentate(C)+"<"+f+_+b+this.tagEndChar+u+this.indentate(C)+x:this.indentate(C)+"<"+f+_+b+">"+u+x}},wr.prototype.closeTag=function(u){let f="";return this.options.unpairedTags.indexOf(u)!==-1?this.options.suppressUnpairedNode||(f="/"):f=this.options.suppressEmptyNode?"/":`></${u}`,f},wr.prototype.buildTextValNode=function(u,f,_,C){if(this.options.cdataPropName!==!1&&f===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${u}]]>`+this.newLine;if(this.options.commentPropName!==!1&&f===this.options.commentPropName)return this.indentate(C)+`<!--${u}-->`+this.newLine;if(f[0]==="?")return this.indentate(C)+"<"+f+_+"?"+this.tagEndChar;{let x=this.options.tagValueProcessor(f,u);return x=this.replaceEntitiesValue(x),x===""?this.indentate(C)+"<"+f+_+this.closeTag(f)+this.tagEndChar:this.indentate(C)+"<"+f+_+">"+x+"</"+f+this.tagEndChar}},wr.prototype.replaceEntitiesValue=function(u){if(u&&u.length>0&&this.options.processEntities)for(let f=0;f<this.options.entities.length;f++){let _=this.options.entities[f];u=u.replace(_.regex,_.val)}return u};let MO={validate:a};Dx.exports=t})()});var Mx=I(mp=>{"use strict";c();Object.defineProperty(mp,"__esModule",{value:!0});mp.parseXML=z1;var j1=kx(),fp=new j1.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});fp.addEntity("#xD","\r");fp.addEntity("#10",`
`);function z1(e){return fp.parse(e,!0)}});var Qa=I((SQ,$x)=>{"use strict";c();var Ja=Object.defineProperty,V1=Object.getOwnPropertyDescriptor,G1=Object.getOwnPropertyNames,W1=Object.prototype.hasOwnProperty,Xa=(e,t)=>Ja(e,"name",{value:t,configurable:!0}),K1=(e,t)=>{for(var r in t)Ja(e,r,{get:t[r],enumerable:!0})},Y1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of G1(t))!W1.call(e,o)&&o!==r&&Ja(e,o,{get:()=>t[o],enumerable:!(n=V1(t,o))||n.enumerable});return e},J1=e=>Y1(Ja({},"__esModule",{value:!0}),e),Lx={};K1(Lx,{XmlNode:()=>X1,XmlText:()=>Ux,parseXML:()=>Q1.parseXML});$x.exports=J1(Lx);function Fx(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Xa(Fx,"escapeAttribute");function Bx(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}Xa(Bx,"escapeElement");var Ux=class{constructor(e){this.value=e}static{Xa(this,"XmlText")}toString(){return Bx(""+this.value)}},X1=class Ya{constructor(t,r=[]){this.name=t,this.children=r}static{Xa(this,"XmlNode")}attributes={};static of(t,r,n){let o=new Ya(t);return r!==void 0&&o.addChildNode(new Ux(r)),n!==void 0&&o.withName(n),o}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=Ya.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new Ya(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${Fx(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}},Q1=Mx()});var Hx,qx,jx,Rn,Za=T(()=>{c();Hx=v(Qa());lt();Te();qx=v(K()),jx=v(Le());Hr();Rn=class extends We{settings;stringDeserializer;constructor(t){super(),this.settings=t,this.stringDeserializer=new pn(t)}setSerdeContext(t){this.serdeContext=t,this.stringDeserializer.setSerdeContext(t)}read(t,r,n){let o=U.of(t),s=o.getMemberSchemas();if(o.isStructSchema()&&o.isMemberSchema()&&!!Object.values(s).find(l=>!!l.getMemberTraits().eventPayload)){let l={},m=Object.keys(s)[0];return s[m].isBlobSchema()?l[m]=r:l[m]=this.read(s[m],r),l}let a=(this.serdeContext?.utf8Encoder??jx.toUtf8)(r),d=this.parseXml(a);return this.readSchema(t,n?d[n]:d)}readSchema(t,r){let n=U.of(t);if(n.isUnitSchema())return;let o=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(r))return this.readSchema(n,[r]);if(r==null)return r;if(typeof r=="object"){let s=!!o.sparse,i=!!o.xmlFlattened;if(n.isListSchema()){let d=n.getValueSchema(),l=[],m=d.getMergedTraits().xmlName??"member",h=i?r:(r[0]??r)[m],S=Array.isArray(h)?h:[h];for(let y of S)(y!=null||s)&&l.push(this.readSchema(d,y));return l}let a={};if(n.isMapSchema()){let d=n.getKeySchema(),l=n.getValueSchema(),m;i?m=Array.isArray(r)?r:[r]:m=Array.isArray(r.entry)?r.entry:[r.entry];let h=d.getMergedTraits().xmlName??"key",S=l.getMergedTraits().xmlName??"value";for(let y of m){let w=y[h],R=y[S];(R!=null||s)&&(a[w]=this.readSchema(l,R))}return a}if(n.isStructSchema()){for(let[d,l]of n.structIterator()){let m=l.getMergedTraits(),h=m.httpPayload?m.xmlName??l.getName():l.getMemberTraits().xmlName??d;r[h]!=null&&(a[d]=this.readSchema(l,r[h]))}return a}if(n.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,r)}parseXml(t){if(t.length){let r;try{r=(0,Hx.parseXML)(t)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:t}),i}let n="#text",o=Object.keys(r)[0],s=r[o];return s[n]&&(s[o]=s[n],delete s[n]),(0,qx.getValueFromTextNode)(s)}return{}}}});var zx,Vx,ec,Gx=T(()=>{c();lt();Te();nt();zx=v(K()),Vx=v(Fe());Hr();ec=class extends We{settings;buffer;constructor(t){super(),this.settings=t}write(t,r,n=""){this.buffer===void 0&&(this.buffer="");let o=U.of(t);if(n&&!n.endsWith(".")&&(n+="."),o.isBlobSchema())(typeof r=="string"||r instanceof Uint8Array)&&(this.writeKey(n),this.writeValue((this.serdeContext?.base64Encoder??Vx.toBase64)(r)));else if(o.isBooleanSchema()||o.isNumericSchema()||o.isStringSchema())r!=null?(this.writeKey(n),this.writeValue(String(r))):o.isIdempotencyToken()&&(this.writeKey(n),this.writeValue((0,Dt.v4)()));else if(o.isBigIntegerSchema())r!=null&&(this.writeKey(n),this.writeValue(String(r)));else if(o.isBigDecimalSchema())r!=null&&(this.writeKey(n),this.writeValue(r instanceof be?r.string:String(r)));else if(o.isTimestampSchema()){if(r instanceof Date)switch(this.writeKey(n),dt(o,this.settings)){case 5:this.writeValue(r.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,zx.dateToUtcString)(r));break;case 7:this.writeValue(String(r.getTime()/1e3));break}}else{if(o.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${o.getName(!0)}`);if(o.isListSchema()){if(Array.isArray(r))if(r.length===0)this.settings.serializeEmptyLists&&(this.writeKey(n),this.writeValue(""));else{let s=o.getValueSchema(),i=this.settings.flattenLists||o.getMergedTraits().xmlFlattened,a=1;for(let d of r){if(d==null)continue;let l=this.getKey("member",s.getMergedTraits().xmlName),m=i?`${n}${a}`:`${n}${l}.${a}`;this.write(s,d,m),++a}}}else if(o.isMapSchema()){if(r&&typeof r=="object"){let s=o.getKeySchema(),i=o.getValueSchema(),a=o.getMergedTraits().xmlFlattened,d=1;for(let[l,m]of Object.entries(r)){if(m==null)continue;let h=this.getKey("key",s.getMergedTraits().xmlName),S=a?`${n}${d}.${h}`:`${n}entry.${d}.${h}`,y=this.getKey("value",i.getMergedTraits().xmlName),w=a?`${n}${d}.${y}`:`${n}entry.${d}.${y}`;this.write(s,l,S),this.write(i,m,w),++d}}}else if(o.isStructSchema()){if(r&&typeof r=="object")for(let[s,i]of o.structIterator()){if(r[s]==null&&!i.isIdempotencyToken())continue;let a=this.getKey(s,i.getMergedTraits().xmlName),d=`${n}${a}`;this.write(i,r[s],d)}}else if(!o.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${o.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let t=this.buffer;return delete this.buffer,t}getKey(t,r){let n=r??t;return this.settings.capitalizeKeys?n[0].toUpperCase()+n.slice(1):n}writeKey(t){t.endsWith(".")&&(t=t.slice(0,t.length-1)),this.buffer+=`&${Ot(t)}=`}writeValue(t){this.buffer+=Ot(t)}}});var bs,pp=T(()=>{c();lt();Te();uo();Za();Gx();bs=class extends nr{options;serializer;deserializer;mixin=new ht;constructor(t){super({defaultNamespace:t.defaultNamespace}),this.options=t;let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace,serializeEmptyLists:!0};this.serializer=new ec(r),this.deserializer=new Rn(r)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(t){this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n);o.path.endsWith("/")||(o.path+="/"),Object.assign(o.headers,{"content-type":"application/x-www-form-urlencoded"}),(pt(t.input)==="unit"||!o.body)&&(o.body="");let s=t.name.split("#")[1]??t.name;return o.body=`Action=${s}&Version=${this.options.version}`+o.body,o.body.endsWith("&")&&(o.body=o.body.slice(-1)),o}async deserializeResponse(t,r,n){let o=this.deserializer,s=U.of(t.output),i={};if(n.statusCode>=300){let h=await Tt(n.body,r);h.byteLength>0&&Object.assign(i,await o.read(15,h)),await this.handleError(t,r,n,i,this.deserializeMetadata(n))}for(let h in n.headers){let S=n.headers[h];delete n.headers[h],n.headers[h.toLowerCase()]=S}let a=t.name.split("#")[1]??t.name,d=s.isStructSchema()&&this.useNestedResult()?a+"Result":void 0,l=await Tt(n.body,r);return l.byteLength>0&&Object.assign(i,await o.read(s,l,d)),{$metadata:this.deserializeMetadata(n),...i}}useNestedResult(){return!0}async handleError(t,r,n,o,s){let i=this.loadQueryErrorCode(n,o)??"Unknown",a=this.loadQueryError(o),d=this.loadQueryErrorMessage(o);a.message=d,a.Error={Type:a.Type,Code:a.Code,Message:d};let{errorSchema:l,errorMetadata:m}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,a,s,(R,P)=>R.find(N=>U.of(N).getMergedTraits().awsQueryError?.[0]===P)),h=U.of(l),S=Ne.for(l.namespace).getErrorCtor(l)??Error,y=new S(d),w={Error:a.Error};for(let[R,P]of h.structIterator()){let N=P.getMergedTraits().xmlName??R,k=a[N]??o[N];w[R]=this.deserializer.readSchema(P,k)}throw Object.assign(y,m,{$fault:h.getMergedTraits().error,message:d},w)}loadQueryErrorCode(t,r){let n=(r.Errors?.[0]?.Error??r.Errors?.Error??r.Error)?.Code;if(n!==void 0)return n;if(t.statusCode==404)return"NotFound"}loadQueryError(t){return t.Errors?.[0]?.Error??t.Errors?.Error??t.Error}loadQueryErrorMessage(t){let r=this.loadQueryError(t);return r?.message??r?.Message??t.message??t.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var hp,Wx=T(()=>{c();pp();hp=class extends bs{options;constructor(t){super(t),this.options=t;let r={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,r)}useNestedResult(){return!1}}});var Kx,Yx,Cs,gp,yp,Sp=T(()=>{c();Kx=v(Qa()),Yx=v(K());sp();Cs=(e,t)=>Va(e,t).then(r=>{if(r.length){let n;try{n=(0,Kx.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let o="#text",s=Object.keys(n)[0],i=n[s];return i[o]&&(i[s]=i[o],delete i[o]),(0,Yx.getValueFromTextNode)(i)}return{}}),gp=async(e,t)=>{let r=await Cs(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},yp=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var gt,Ep,tc,Ts,_p=T(()=>{c();gt=v(Qa());lt();Te();nt();Ep=v(K()),tc=v(Fe());Hr();Ts=class extends We{settings;stringBuffer;byteBuffer;buffer;constructor(t){super(),this.settings=t}write(t,r){let n=U.of(t);if(n.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(n.isBlobSchema())this.byteBuffer="byteLength"in r?r:(this.serdeContext?.base64Decoder??tc.fromBase64)(r);else{this.buffer=this.writeStruct(n,r,void 0);let o=n.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){let r=this.byteBuffer;return delete this.byteBuffer,r}if(this.stringBuffer!==void 0){let r=this.stringBuffer;return delete this.stringBuffer,r}let t=this.buffer;return this.settings.xmlNamespace&&(t?.attributes?.xmlns||t.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,t.toString()}writeStruct(t,r,n){let o=t.getMergedTraits(),s=t.isMemberSchema()&&!o.httpPayload?t.getMemberTraits().xmlName??t.getMemberName():o.xmlName??t.getName();if(!s||!t.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${t.getName(!0)}.`);let i=gt.XmlNode.of(s),[a,d]=this.getXmlnsAttribute(t,n);for(let[l,m]of t.structIterator()){let h=r[l];if(h!=null||m.isIdempotencyToken()){if(m.getMergedTraits().xmlAttribute){i.addAttribute(m.getMergedTraits().xmlName??l,this.writeSimple(m,h));continue}if(m.isListSchema())this.writeList(m,h,i,d);else if(m.isMapSchema())this.writeMap(m,h,i,d);else if(m.isStructSchema())i.addChildNode(this.writeStruct(m,h,d));else{let S=gt.XmlNode.of(m.getMergedTraits().xmlName??m.getMemberName());this.writeSimpleInto(m,h,S,d),i.addChildNode(S)}}}return d&&i.addAttribute(a,d),i}writeList(t,r,n,o){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${t.getName(!0)}`);let s=t.getMergedTraits(),i=t.getValueSchema(),a=i.getMergedTraits(),d=!!a.sparse,l=!!s.xmlFlattened,[m,h]=this.getXmlnsAttribute(t,o),S=(y,w)=>{if(i.isListSchema())this.writeList(i,Array.isArray(w)?w:[w],y,h);else if(i.isMapSchema())this.writeMap(i,w,y,h);else if(i.isStructSchema()){let R=this.writeStruct(i,w,h);y.addChildNode(R.withName(l?s.xmlName??t.getMemberName():a.xmlName??"member"))}else{let R=gt.XmlNode.of(l?s.xmlName??t.getMemberName():a.xmlName??"member");this.writeSimpleInto(i,w,R,h),y.addChildNode(R)}};if(l)for(let y of r)(d||y!=null)&&S(n,y);else{let y=gt.XmlNode.of(s.xmlName??t.getMemberName());h&&y.addAttribute(m,h);for(let w of r)(d||w!=null)&&S(y,w);n.addChildNode(y)}}writeMap(t,r,n,o,s=!1){if(!t.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${t.getName(!0)}`);let i=t.getMergedTraits(),a=t.getKeySchema(),l=a.getMergedTraits().xmlName??"key",m=t.getValueSchema(),h=m.getMergedTraits(),S=h.xmlName??"value",y=!!h.sparse,w=!!i.xmlFlattened,[R,P]=this.getXmlnsAttribute(t,o),N=(k,$,z)=>{let q=gt.XmlNode.of(l,$),[re,ze]=this.getXmlnsAttribute(a,P);ze&&q.addAttribute(re,ze),k.addChildNode(q);let tt=gt.XmlNode.of(S);m.isListSchema()?this.writeList(m,z,tt,P):m.isMapSchema()?this.writeMap(m,z,tt,P,!0):m.isStructSchema()?tt=this.writeStruct(m,z,P):this.writeSimpleInto(m,z,tt,P),k.addChildNode(tt)};if(w){for(let[k,$]of Object.entries(r))if(y||$!=null){let z=gt.XmlNode.of(i.xmlName??t.getMemberName());N(z,k,$),n.addChildNode(z)}}else{let k;s||(k=gt.XmlNode.of(i.xmlName??t.getMemberName()),P&&k.addAttribute(R,P),n.addChildNode(k));for(let[$,z]of Object.entries(r))if(y||z!=null){let q=gt.XmlNode.of("entry");N(q,$,z),(s?n:k).addChildNode(q)}}}writeSimple(t,r){if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let n=U.of(t),o=null;if(r&&typeof r=="object")if(n.isBlobSchema())o=(this.serdeContext?.base64Encoder??tc.toBase64)(r);else if(n.isTimestampSchema()&&r instanceof Date)switch(dt(n,this.settings)){case 5:o=r.toISOString().replace(".000Z","Z");break;case 6:o=(0,Ep.dateToUtcString)(r);break;case 7:o=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),o=(0,Ep.dateToUtcString)(r);break}else{if(n.isBigDecimalSchema()&&r)return r instanceof be?r.string:String(r);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(o=String(r)),n.isStringSchema()&&(r===void 0&&n.isIdempotencyToken()?o=(0,Dt.v4)():o=String(r)),o===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${r}`);return o}writeSimpleInto(t,r,n,o){let s=this.writeSimple(t,r),i=U.of(t),a=new gt.XmlText(s),[d,l]=this.getXmlnsAttribute(i,o);l&&n.addAttribute(d,l),n.addChildNode(a)}getXmlnsAttribute(t,r){let n=t.getMergedTraits(),[o,s]=n.xmlNamespace??[];return s&&s!==r?[o?`xmlns:${o}`:"xmlns",s]:[void 0,void 0]}}});var vs,wp=T(()=>{c();Hr();Za();_p();vs=class extends We{settings;constructor(t){super(),this.settings=t}createSerializer(){let t=new Ts(this.settings);return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new Rn(this.settings);return t.setSerdeContext(this.serdeContext),t}}});var xp,Jx=T(()=>{c();lt();Te();uo();Sp();wp();xp=class extends mn{codec;serializer;deserializer;mixin=new ht;constructor(t){super(t);let r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:t.xmlNamespace,serviceNamespace:t.defaultNamespace};this.codec=new vs(r),this.serializer=new gn(this.codec.createSerializer(),r),this.deserializer=new hn(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(t,r,n){let o=await super.serializeRequest(t,r,n),s=U.of(t.input);if(!o.headers["content-type"]){let i=this.mixin.resolveRestContentType(this.getDefaultContentType(),s);i&&(o.headers["content-type"]=i)}return o.headers["content-type"]===this.getDefaultContentType()&&typeof o.body=="string"&&(o.body='<?xml version="1.0" encoding="UTF-8"?>'+o.body),o}async deserializeResponse(t,r,n){return super.deserializeResponse(t,r,n)}async handleError(t,r,n,o,s){let i=yp(n,o)??"Unknown",{errorSchema:a,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(i,this.options.defaultNamespace,n,o,s),l=U.of(a),m=o.Error?.message??o.Error?.Message??o.message??o.Message??"Unknown",h=Ne.for(a.namespace).getErrorCtor(a)??Error,S=new h(m);await this.deserializeHttpMessage(a,r,n,o);let y={};for(let[w,R]of l.structIterator()){let P=R.getMergedTraits().xmlName??w,N=o.Error?.[P]??o[P];y[w]=this.codec.createDeserializer().readSchema(R,N)}throw Object.assign(S,d,{$fault:l.getMergedTraits().error,message:m},y)}getDefaultContentType(){return"application/xml"}}});var Xx=T(()=>{c();sx();ix();Rx();Ix();Ka();Px();Wa();ap();cp();Nx();_s();Wx();pp();Jx();wp();Za();_p();Sp()});var st={};Ct(st,{AWSSDKSigV4Signer:()=>fm,AwsEc2QueryProtocol:()=>hp,AwsJson1_0Protocol:()=>dp,AwsJson1_1Protocol:()=>lp,AwsJsonRpcProtocol:()=>An,AwsQueryProtocol:()=>bs,AwsRestJsonProtocol:()=>up,AwsRestXmlProtocol:()=>xp,AwsSdkSigV4ASigner:()=>hs,AwsSdkSigV4Signer:()=>ot,AwsSmithyRpcV2CborProtocol:()=>Km,JsonCodec:()=>vn,JsonShapeDeserializer:()=>ws,JsonShapeSerializer:()=>xs,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>io,NODE_SIGV4A_CONFIG_OPTIONS:()=>hw,XmlCodec:()=>vs,XmlShapeDeserializer:()=>Rn,XmlShapeSerializer:()=>Ts,_toBool:()=>S1,_toNum:()=>E1,_toStr:()=>y1,awsExpectUnion:()=>q1,emitWarningIfUnsupportedVersion:()=>no,getBearerTokenEnvKey:()=>Aa,loadRestJsonErrorCode:()=>Tn,loadRestXmlErrorCode:()=>yp,parseJsonBody:()=>fo,parseJsonErrorBody:()=>ip,parseXmlBody:()=>Cs,parseXmlErrorBody:()=>gp,resolveAWSSDKSigV4Config:()=>Hw,resolveAwsSdkSigV4AConfig:()=>pw,resolveAwsSdkSigV4Config:()=>bn,setCredentialFeature:()=>kr,setFeature:()=>Q_,setTokenFeature:()=>ew,state:()=>va,validateSigningProperties:()=>so});var ve=T(()=>{c();vt();Om();Xx()});var In=I(mo=>{"use strict";c();var Z1=(Ue(),Y(kt)),eL=_n(),tL=ie(),Lt=(ve(),Y(st)),tb=void 0;function rL(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function nL(e){let t=Z1.normalizeProvider(e.userAgentAppId??tb),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!rL(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var oL=/\d{12}\.ddb/;async function sL(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Lt.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?Lt.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Lt.setFeature(e,"RETRY_MODE_STANDARD","E"):Lt.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(oL)&&Lt.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Lt.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Lt.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Lt.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&Lt.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))Lt.setFeature(e,i,a)}}var Qx="user-agent",bp="x-amz-user-agent",Zx=" ",Cp="/",iL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,aL=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,eb="-",cL=1024;function dL(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=cL){t.length?t+=","+n:t+=n;continue}break}return t}var rb=e=>(t,r)=>async n=>{let{request:o}=n;if(!tL.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(rc)||[],a=(await e.defaultUserAgentProvider()).map(rc);await sL(r,e,n);let d=r;a.push(`m/${dL(Object.assign({},r.__smithy_context?.features,d.__aws_sdk_context?.features))}`);let l=e?.customUserAgent?.map(rc)||[],m=await e.userAgentAppId();m&&a.push(rc([`app/${m}`]));let h=eL.getUserAgentPrefix(),S=(h?[h]:[]).concat([...a,...i,...l]).join(Zx),y=[...a.filter(w=>w.startsWith("aws-sdk-")),...l].join(Zx);return e.runtime!=="browser"?(y&&(s[bp]=s[bp]?`${s[Qx]} ${y}`:y),s[Qx]=S):s[bp]=S,t({...n,request:o})},rc=e=>{let t=e[0].split(Cp).map(i=>i.replace(iL,eb)).join(Cp),r=e[1]?.replace(aL,eb),n=t.indexOf(Cp),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,d)=>{switch(d){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},nb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},lL=e=>({applyToStack:t=>{t.add(rb(e),nb)}});mo.DEFAULT_UA_APP_ID=tb;mo.getUserAgentMiddlewareOptions=nb;mo.getUserAgentPlugin=lL;mo.resolveUserAgentConfig=nL;mo.userAgentMiddleware=rb});var ib=I((MZ,sb)=>{c();var nc=Object.defineProperty,uL=Object.getOwnPropertyDescriptor,fL=Object.getOwnPropertyNames,mL=Object.prototype.hasOwnProperty,pL=(e,t)=>nc(e,"name",{value:t,configurable:!0}),hL=(e,t)=>{for(var r in t)nc(e,r,{get:t[r],enumerable:!0})},gL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of fL(t))!mL.call(e,o)&&o!==r&&nc(e,o,{get:()=>t[o],enumerable:!(n=uL(t,o))||n.enumerable});return e},yL=e=>gL(nc({},"__esModule",{value:!0}),e),ob={};hL(ob,{isArrayBuffer:()=>SL});sb.exports=yL(ob);var SL=pL(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var lb=I((FZ,db)=>{c();var oc=Object.defineProperty,EL=Object.getOwnPropertyDescriptor,_L=Object.getOwnPropertyNames,wL=Object.prototype.hasOwnProperty,ab=(e,t)=>oc(e,"name",{value:t,configurable:!0}),xL=(e,t)=>{for(var r in t)oc(e,r,{get:t[r],enumerable:!0})},bL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _L(t))!wL.call(e,o)&&o!==r&&oc(e,o,{get:()=>t[o],enumerable:!(n=EL(t,o))||n.enumerable});return e},CL=e=>bL(oc({},"__esModule",{value:!0}),e),cb={};xL(cb,{fromArrayBuffer:()=>vL,fromString:()=>AL});db.exports=CL(cb);var TL=ib(),Tp=ee("buffer"),vL=ab((e,t=0,r=e.byteLength-t)=>{if(!(0,TL.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return Tp.Buffer.from(e,t,r)},"fromArrayBuffer"),AL=ab((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Tp.Buffer.from(e,t):Tp.Buffer.from(e)},"fromString")});var hb=I((UZ,pb)=>{c();var sc=Object.defineProperty,RL=Object.getOwnPropertyDescriptor,IL=Object.getOwnPropertyNames,PL=Object.prototype.hasOwnProperty,vp=(e,t)=>sc(e,"name",{value:t,configurable:!0}),OL=(e,t)=>{for(var r in t)sc(e,r,{get:t[r],enumerable:!0})},NL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of IL(t))!PL.call(e,o)&&o!==r&&sc(e,o,{get:()=>t[o],enumerable:!(n=RL(t,o))||n.enumerable});return e},DL=e=>NL(sc({},"__esModule",{value:!0}),e),ub={};OL(ub,{fromUtf8:()=>mb,toUint8Array:()=>kL,toUtf8:()=>ML});pb.exports=DL(ub);var fb=lb(),mb=vp(e=>{let t=(0,fb.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),kL=vp(e=>typeof e=="string"?mb(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),ML=vp(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,fb.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var gb=I(ic=>{"use strict";c();Object.defineProperty(ic,"__esModule",{value:!0});ic.convertToBuffer=void 0;var LL=hb(),FL=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:LL.fromUtf8;function BL(e){return e instanceof Uint8Array?e:typeof e=="string"?FL(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}ic.convertToBuffer=BL});var yb=I(ac=>{"use strict";c();Object.defineProperty(ac,"__esModule",{value:!0});ac.isEmptyData=void 0;function UL(e){return typeof e=="string"?e.length===0:e.byteLength===0}ac.isEmptyData=UL});var Sb=I(cc=>{"use strict";c();Object.defineProperty(cc,"__esModule",{value:!0});cc.numToUint8=void 0;function $L(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}cc.numToUint8=$L});var Eb=I(dc=>{"use strict";c();Object.defineProperty(dc,"__esModule",{value:!0});dc.uint32ArrayFrom=void 0;function HL(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}dc.uint32ArrayFrom=HL});var Ap=I(Ft=>{"use strict";c();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.uint32ArrayFrom=Ft.numToUint8=Ft.isEmptyData=Ft.convertToBuffer=void 0;var qL=gb();Object.defineProperty(Ft,"convertToBuffer",{enumerable:!0,get:function(){return qL.convertToBuffer}});var jL=yb();Object.defineProperty(Ft,"isEmptyData",{enumerable:!0,get:function(){return jL.isEmptyData}});var zL=Sb();Object.defineProperty(Ft,"numToUint8",{enumerable:!0,get:function(){return zL.numToUint8}});var VL=Eb();Object.defineProperty(Ft,"uint32ArrayFrom",{enumerable:!0,get:function(){return VL.uint32ArrayFrom}})});var xb=I(lc=>{"use strict";c();Object.defineProperty(lc,"__esModule",{value:!0});lc.AwsCrc32=void 0;var _b=(Or(),Y(Pr)),Rp=Ap(),wb=Ip(),GL=(function(){function e(){this.crc32=new wb.Crc32}return e.prototype.update=function(t){(0,Rp.isEmptyData)(t)||this.crc32.update((0,Rp.convertToBuffer)(t))},e.prototype.digest=function(){return _b.__awaiter(this,void 0,void 0,function(){return _b.__generator(this,function(t){return[2,(0,Rp.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new wb.Crc32},e})();lc.AwsCrc32=GL});var Ip=I(jr=>{"use strict";c();Object.defineProperty(jr,"__esModule",{value:!0});jr.AwsCrc32=jr.Crc32=jr.crc32=void 0;var WL=(Or(),Y(Pr)),KL=Ap();function YL(e){return new bb().update(e).digest()}jr.crc32=YL;var bb=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=WL.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^XL[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();jr.Crc32=bb;var JL=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],XL=(0,KL.uint32ArrayFrom)(JL),QL=xb();Object.defineProperty(jr,"AwsCrc32",{enumerable:!0,get:function(){return QL.AwsCrc32}})});var fc=I(Vr=>{"use strict";c();var vb=Ip(),Pn=es(),po=class e{bytes;constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Cb(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Cb(t),parseInt(Pn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Cb(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var uc=class{toUtf8;fromUtf8;constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let m=new Uint8Array(9);return m[0]=8,m.set(po.fromNumber(t.value.valueOf()).bytes,1),m;case"uuid":if(!aF.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let h=new Uint8Array(17);return h[0]=9,h.set(Pn.fromHex(t.value.replace(/\-/g,"")),1),h}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:Tb,value:!0};break;case 1:r[s]={type:Tb,value:!1};break;case 2:r[s]={type:ZL,value:t.getInt8(n++)};break;case 3:r[s]={type:eF,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:tF,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:rF,value:new po(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:nF,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:oF,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:sF,value:new Date(new po(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let d=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:iF,value:`${Pn.toHex(d.subarray(0,4))}-${Pn.toHex(d.subarray(4,6))}-${Pn.toHex(d.subarray(6,8))}-${Pn.toHex(d.subarray(8,10))}-${Pn.toHex(d.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Tb="boolean",ZL="byte",eF="short",tF="integer",rF="long",nF="binary",oF="string",sF="timestamp",iF="uuid",aF=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Ab=4,zr=Ab*2,On=4,cF=zr+On*2;function dF({byteLength:e,byteOffset:t,buffer:r}){if(e<cF)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Ab,!1),i=n.getUint32(zr,!1),a=n.getUint32(e-On,!1),d=new vb.Crc32().update(new Uint8Array(r,t,zr));if(i!==d.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${d.digest()})`);if(d.update(new Uint8Array(r,t+zr,e-(zr+On))),a!==d.digest())throw new Error(`The message checksum (${d.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+zr+On,s),body:new Uint8Array(r,t+zr+On+s,o-s-(zr+On+On))}}var Pp=class{headerMarshaller;messageBuffer;isEndOfStream;constructor(t,r){this.headerMarshaller=new uc(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new vb.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=dF(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},Op=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},Np=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},Dp=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},kp=class{options;constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};Vr.EventStreamCodec=Pp;Vr.HeaderMarshaller=uc;Vr.Int64=po;Vr.MessageDecoderStream=Op;Vr.MessageEncoderStream=Np;Vr.SmithyMessageDecoderStream=Dp;Vr.SmithyMessageEncoderStream=kp});var Ob=I((nee,Pb)=>{"use strict";c();var mc=Object.defineProperty,lF=Object.getOwnPropertyDescriptor,uF=Object.getOwnPropertyNames,fF=Object.prototype.hasOwnProperty,mF=(e,t)=>mc(e,"name",{value:t,configurable:!0}),pF=(e,t)=>{for(var r in t)mc(e,r,{get:t[r],enumerable:!0})},hF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uF(t))!fF.call(e,o)&&o!==r&&mc(e,o,{get:()=>t[o],enumerable:!(n=lF(t,o))||n.enumerable});return e},gF=e=>hF(mc({},"__esModule",{value:!0}),e),Rb={};pF(Rb,{formatUrl:()=>Ib});Pb.exports=gF(Rb);var yF=Qi();function Ib(e){let{port:t,query:r}=e,{protocol:n,path:o,hostname:s}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(s+=`:${t}`),o&&o.charAt(0)!=="/"&&(o=`/${o}`);let i=r?(0,yF.buildQueryString)(r):"";i&&i[0]!=="?"&&(i=`?${i}`);let a="";if(e.username!=null||e.password!=null){let l=e.username??"",m=e.password??"";a=`${l}:${m}@`}let d="";return e.fragment&&(d=`#${e.fragment}`),`${n}//${a}${s}${o}${i}${d}`}mF(Ib,"formatUrl")});var Lp=I(Mp=>{"use strict";c();var As=fc();function SF(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:d,done:l}=await a.next();if(l){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let m=d.length,h=0;for(;h<m;){if(!n){let y=m-h;o||(o=new Uint8Array(4));let w=Math.min(4-r,y);if(o.set(d.slice(h,h+w),r),r+=w,h+=w,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let S=Math.min(t-r,m-h);n.set(d.slice(h,h+S),r),r+=S,h+=S,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function EF(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var pc=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new As.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=SF(t);return new As.SmithyMessageDecoderStream({messageStream:new As.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:EF(r,this.utfEncoder)})}serialize(t,r){return new As.MessageEncoderStream({messageStream:new As.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},_F=e=>new pc(e);Mp.EventStreamMarshaller=pc;Mp.eventStreamSerdeProvider=_F});var kb=I(Rs=>{"use strict";c();var wF=Lp(),Nb=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),Db=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})},hc=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new wF.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=xF(t)?Nb(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?Db(n):n}},xF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,bF=e=>new hc(e);Rs.EventStreamMarshaller=hc;Rs.eventStreamSerdeProvider=bF;Rs.iterableToReadableStream=Db;Rs.readableStreamtoIterable=Nb});var Bb=I(Is=>{"use strict";c();var CF=fc(),TF=es(),$p=ie(),vF=Ob(),Lb=kb(),Mb=cf(),AF=(e,t,r,n)=>{let o=e,s={start(){},async transform(i,a){try{let d=new Date(Date.now()+await n()),l={":date":{type:"timestamp",value:d}},m=await t.sign({message:{body:i,headers:l},priorSignature:o},{signingDate:d});o=m.signature;let h=r.encode({headers:{...l,":chunk-signature":{type:"binary",value:TF.fromHex(m.signature)}},body:i});a.enqueue(h)}catch(d){a.error(d)}}};return new TransformStream({...s})},Fp=class{messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(t){this.messageSigner=t.messageSigner,this.eventStreamCodec=new CF.EventStreamCodec(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,r,n={}){let o=r.request,{body:s,headers:i,query:a}=o;if(!(s instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");let d=new TransformStream;o.body=d.readable;let l;try{l=await t(r)}catch(w){throw o.body.cancel(),w}let h=((i.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||a&&a["X-Amz-Signature"]||"",S=AF(h,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return s.pipeThrough(S).pipeThrough(d),l}},RF=e=>new Fp(e),IF=()=>e=>async t=>{let r={...t.input},n=await e(t),o=n.output;return r.SessionId&&o.SessionId==null&&(o.SessionId=r.SessionId),n},PF={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},OF=(e,t)=>r=>n=>{let{request:o}=n;if($p.HttpRequest.isInstance(o)&&e.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes("websocket")){o.protocol="wss:",o.method="GET",o.path=`${o.path}-websocket`;let{headers:s}=o;delete s["content-type"],delete s["x-amz-content-sha256"];for(let i of Object.keys(s))if(i.indexOf(t.headerPrefix)===0){let a=i.replace(t.headerPrefix,"");o.query[a]=s[i]}s["x-amz-user-agent"]&&(o.query["user-agent"]=s["x-amz-user-agent"]),o.headers={host:s.host??o.hostname}}return r(n)},NF={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},DF=(e,t)=>({applyToStack:r=>{r.addRelativeTo(OF(e,t),NF),r.add(IF(),PF)}}),Fb=e=>e.protocol==="ws:"||e.protocol==="wss:",Bp=class{signer;constructor(t){this.signer=t.signer}presign(t,r={}){return this.signer.presign(t,r)}async sign(t,r){return $p.HttpRequest.isInstance(t)&&Fb(t)?{...await this.signer.presign({...t,body:""},{...r,expiresIn:60,unsignableHeaders:new Set(Object.keys(t.headers).filter(o=>o!=="host"))}),body:t.body}:this.signer.sign(t,r)}},kF=e=>{let{signer:t}=e;return Object.assign(e,{signer:async r=>{let n=await t(r);if(MF(n))return new Bp({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}})},MF=e=>!!e,LF=2e3,Up=class e{metadata={handlerProtocol:"websocket/h1.1"};config;configPromise;httpHandler;sockets={};static create(t,r=new Mb.FetchHttpHandler){return typeof t?.handle=="function"?t:new e(t,r)}constructor(t,r=new Mb.FetchHttpHandler){this.httpHandler=r,typeof t=="function"?(this.config={},this.configPromise=t().then(n=>this.config=n??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(let[t,r]of Object.entries(this.sockets)){for(let n of r)n.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!Fb(t))return this.httpHandler.handle(t);let r=vF.formatUrl(t),n=new WebSocket(r);this.sockets[r]||(this.sockets[r]=[]),this.sockets[r].push(n),n.binaryType="arraybuffer",this.config=await this.configPromise;let{connectionTimeout:o=LF}=this.config;await this.waitForReady(n,o);let{body:s}=t,i=FF(s),a=this.connect(n,i),d=BF(a);return{response:new $p.HttpResponse({statusCode:200,body:d})}}updateHttpClientConfig(t,r){this.configPromise=this.configPromise.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(r=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(r.readyState))}waitForReady(t,r){return new Promise((n,o)=>{let s=setTimeout(()=>{this.removeNotUsableSockets(t.url),o({$metadata:{httpStatusCode:500}})},r);t.onopen=()=>{clearTimeout(s),n()}})}connect(t,r){let n,o=!1,s=()=>{},i=()=>{};t.onmessage=l=>{i({done:!1,value:new Uint8Array(l.data)})},t.onerror=l=>{o=!0,t.close(),s(l)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!o&&(n?s(n):i({done:!0,value:void 0}))};let a={[Symbol.asyncIterator]:()=>({next:()=>new Promise((l,m)=>{i=l,s=m})})};return(async()=>{try{for await(let l of r)t.send(l)}catch(l){n=l}finally{t.close(1e3)}})(),a}},FF=e=>e[Symbol.asyncIterator]?e:UF(e)?Lb.readableStreamtoIterable(e):{[Symbol.asyncIterator]:async function*(){yield e}},BF=e=>typeof ReadableStream=="function"?Lb.iterableToReadableStream(e):e,UF=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;Is.WebSocketFetchHandler=Up;Is.eventStreamPayloadHandlerProvider=RF;Is.getWebSocketPlugin=DF;Is.resolveWebSocketConfig=kF});var Ub=I(ho=>{"use strict";c();var $F=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},HF=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};ho.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(ho.SelectorType||(ho.SelectorType={}));ho.booleanSelector=$F;ho.numberSelector=HF});var yt=I(He=>{"use strict";c();var Gr=Ub(),gc=Xe(),qb="AWS_USE_DUALSTACK_ENDPOINT",jb="use_dualstack_endpoint",qF=!1,jF={environmentVariableSelector:e=>Gr.booleanSelector(e,qb,Gr.SelectorType.ENV),configFileSelector:e=>Gr.booleanSelector(e,jb,Gr.SelectorType.CONFIG),default:!1},zb="AWS_USE_FIPS_ENDPOINT",Vb="use_fips_endpoint",zF=!1,VF={environmentVariableSelector:e=>Gr.booleanSelector(e,zb,Gr.SelectorType.ENV),configFileSelector:e=>Gr.booleanSelector(e,Vb,Gr.SelectorType.CONFIG),default:!1},GF=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:gc.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:gc.normalizeProvider(o??!1)})},WF=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},KF=e=>{let t=gc.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?gc.normalizeProvider(typeof r=="string"?o(r):r):()=>WF({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},Gb="AWS_REGION",Wb="region",YF={environmentVariableSelector:e=>e[Gb],configFileSelector:e=>e[Wb],default:()=>{throw new Error("Region is missing")}},JF={preferredFile:"credentials"},Kb=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),$b=e=>Kb(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,XF=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t=="string")return $b(t);let n=await t();return $b(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Kb(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Hb=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,QF=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),ZF=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",eB=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},tB=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=ZF(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,d={useFipsEndpoint:t,useDualstackEndpoint:r},l=Hb(o[a]?.variants,d),m=Hb(s[i]?.variants,d),h=QF(a,{regionHostname:l,partitionHostname:m});if(h===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let S=eB(h,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:h,...S&&{signingRegion:S},...o[a]?.signingService&&{signingService:o[a].signingService}}};He.CONFIG_USE_DUALSTACK_ENDPOINT=jb;He.CONFIG_USE_FIPS_ENDPOINT=Vb;He.DEFAULT_USE_DUALSTACK_ENDPOINT=qF;He.DEFAULT_USE_FIPS_ENDPOINT=zF;He.ENV_USE_DUALSTACK_ENDPOINT=qb;He.ENV_USE_FIPS_ENDPOINT=zb;He.NODE_REGION_CONFIG_FILE_OPTIONS=JF;He.NODE_REGION_CONFIG_OPTIONS=YF;He.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=jF;He.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=VF;He.REGION_ENV_NAME=Gb;He.REGION_INI_NAME=Wb;He.getRegionInfo=tB;He.resolveCustomEndpointsConfig=GF;He.resolveEndpointsConfig=KF;He.resolveRegionConfig=XF});var Jb=I(Yb=>{"use strict";c();var rB=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});Yb.resolveEventStreamSerdeConfig=rB});var go=I(yc=>{"use strict";c();var nB=ie(),Xb="content-length";function Qb(e){return t=>async r=>{let n=r.request;if(nB.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Xb)===-1)try{let i=e(o);n.headers={...n.headers,[Xb]:String(i)}}catch{}}return t({...r,request:n})}}var Zb={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},oB=e=>({applyToStack:t=>{t.add(Qb(e.bodyLengthChecker),Zb)}});yc.contentLengthMiddleware=Qb;yc.contentLengthMiddlewareOptions=Zb;yc.getContentLengthPlugin=oB});var qp=I(Sc=>{"use strict";c();Object.defineProperty(Sc,"__esModule",{value:!0});Sc.getHomeDir=void 0;var sB=ee("os"),iB=ee("path"),Hp={},aB=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",cB=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${iB.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=aB();return Hp[o]||(Hp[o]=(0,sB.homedir)()),Hp[o]};Sc.getHomeDir=cB});var jp=I(Ec=>{"use strict";c();Object.defineProperty(Ec,"__esModule",{value:!0});Ec.getSSOTokenFilepath=void 0;var dB=ee("crypto"),lB=ee("path"),uB=qp(),fB=e=>{let r=(0,dB.createHash)("sha1").update(e).digest("hex");return(0,lB.join)((0,uB.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Ec.getSSOTokenFilepath=fB});var eC=I(Wr=>{"use strict";c();Object.defineProperty(Wr,"__esModule",{value:!0});Wr.getSSOTokenFromFile=Wr.tokenIntercept=void 0;var mB=ee("fs"),pB=jp(),{readFile:hB}=mB.promises;Wr.tokenIntercept={};var gB=async e=>{if(Wr.tokenIntercept[e])return Wr.tokenIntercept[e];let t=(0,pB.getSSOTokenFilepath)(e),r=await hB(t,"utf8");return JSON.parse(r)};Wr.getSSOTokenFromFile=gB});var tC=I(ut=>{"use strict";c();Object.defineProperty(ut,"__esModule",{value:!0});ut.slurpFile=ut.fileIntercept=ut.filePromisesHash=void 0;var yB=ee("fs"),{readFile:SB}=yB.promises;ut.filePromisesHash={};ut.fileIntercept={};var EB=(e,t)=>ut.fileIntercept[e]!==void 0?ut.fileIntercept[e]:((!ut.filePromisesHash[e]||t?.ignoreCache)&&(ut.filePromisesHash[e]=SB(e,"utf8")),ut.filePromisesHash[e]);ut.slurpFile=EB});var ur=I(it=>{"use strict";c();var Ps=qp(),rC=jp(),zp=eC(),_c=ee("path"),wc=br(),Os=tC(),oC="AWS_PROFILE",sC="default",_B=e=>e.profile||process.env[oC]||sC,wB=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Nn);return r===-1?!1:Object.values(wc.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(Nn),s=r.substring(0,o)===wc.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),xB="AWS_CONFIG_FILE",iC=()=>process.env[xB]||_c.join(Ps.getHomeDir(),".aws","config"),bB="AWS_SHARED_CREDENTIALS_FILE",CB=()=>process.env[bB]||_c.join(Ps.getHomeDir(),".aws","credentials"),TB=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,vB=["__proto__","profile __proto__"],Vp=e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),d=TB.exec(a);if(d){let[,l,,m]=d;Object.values(wc.IniSectionType).includes(l)&&(r=[l,m].join(Nn))}else r=a;if(vB.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[d,l]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(l==="")n=d;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let m=n?[n,d].join(Nn):d;t[r][m]=l}}}}return t},nC=()=>({}),Nn=".",aC=async(e={})=>{let{filepath:t=CB(),configFilepath:r=iC()}=e,n=Ps.getHomeDir(),o="~/",s=t;t.startsWith(o)&&(s=_c.join(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=_c.join(n,r.slice(2)));let a=await Promise.all([Os.slurpFile(i,{ignoreCache:e.ignoreCache}).then(Vp).then(wB).catch(nC),Os.slurpFile(s,{ignoreCache:e.ignoreCache}).then(Vp).catch(nC)]);return{configFile:a[0],credentialsFile:a[1]}},AB=e=>Object.entries(e).filter(([t])=>t.startsWith(wc.IniSectionType.SSO_SESSION+Nn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Nn)+1)]:n}),{}),RB=()=>({}),IB=async(e={})=>Os.slurpFile(e.configFilepath??iC()).then(Vp).then(AB).catch(RB),PB=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},OB=async e=>{let t=await aC(e);return PB(t.configFile,t.credentialsFile)},NB={getFileRecord(){return Os.fileIntercept},interceptFile(e,t){Os.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return zp.tokenIntercept},interceptToken(e,t){zp.tokenIntercept[e]=t}};Object.defineProperty(it,"getSSOTokenFromFile",{enumerable:!0,get:function(){return zp.getSSOTokenFromFile}});it.CONFIG_PREFIX_SEPARATOR=Nn;it.DEFAULT_PROFILE=sC;it.ENV_PROFILE=oC;it.externalDataInterceptor=NB;it.getProfileName=_B;it.loadSharedConfigFiles=aC;it.loadSsoSessionData=IB;it.parseKnownFiles=OB;Object.keys(Ps).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return Ps[e]}})});Object.keys(rC).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return rC[e]}})})});var fr=I(lC=>{"use strict";c();var Ns=Ze(),cC=ur();function dC(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var DB=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Ns.CredentialsProviderError(r.message||`Not found in ENV: ${dC(e.toString())}`,{logger:t?.logger})}},kB=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=cC.getProfileName(r),{configFile:o,credentialsFile:s}=await cC.loadSharedConfigFiles(r),i=s[n]||{},a=o[n]||{},d=t==="config"?{...i,...a}:{...a,...i};try{let m=e(d,t==="config"?o:s);if(m===void 0)throw new Error;return m}catch(l){throw new Ns.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${dC(e.toString())}`,{logger:r.logger})}},MB=e=>typeof e=="function",LB=e=>MB(e)?async()=>await e():Ns.fromStatic(e),FB=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return Ns.memoize(Ns.chain(DB(e,i),kB(t,n),LB(r)))};lC.loadConfig=FB});var pC=I(xc=>{"use strict";c();Object.defineProperty(xc,"__esModule",{value:!0});xc.getEndpointUrlConfig=void 0;var uC=ur(),fC="AWS_ENDPOINT_URL",mC="endpoint_url",BB=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[fC,...r].join("_")];if(n)return n;let o=t[fC];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(uC.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),mC].join(uC.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[mC];if(n)return n},default:void 0});xc.getEndpointUrlConfig=BB});var hC=I(bc=>{"use strict";c();Object.defineProperty(bc,"__esModule",{value:!0});bc.getEndpointFromConfig=void 0;var UB=fr(),$B=pC(),HB=async e=>(0,UB.loadConfig)((0,$B.getEndpointUrlConfig)(e??""))();bc.getEndpointFromConfig=HB});var pr=I(mr=>{"use strict";c();var yC=hC(),gC=sr(),qB=(Ue(),Y(kt)),Cc=Xe(),jB=Qt(),zB=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),YB(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!KB(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},VB=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,GB=/(\d+\.){3}\d+/,WB=/\.\./,KB=e=>VB.test(e)&&!GB.test(e)&&!WB.test(e),YB=e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},JB=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:d}=o;return`${s}//${i}${a?":"+a:""}${d}`}}return o}:n},Gp=e=>typeof e=="object"?"url"in e?gC.parseUrl(e.url):e:gC.parseUrl(e),SC=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await yC.getEndpointFromConfig(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Gp(i)),r.isCustomEndpoint=!0)}let o=await EC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},EC=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await JB(i.name,s,r)();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await zB(n),n},_C=({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&qB.setFeature(n,"ENDPOINT_OVERRIDE","N");let s=await SC(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let d=Cc.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},wC={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:jB.serializerMiddlewareOption.name},XB=(e,t)=>({applyToStack:r=>{r.addRelativeTo(_C({config:e,instructions:t}),wC)}}),QB=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>Gp(await Cc.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:Cc.normalizeProvider(n??!1),useFipsEndpoint:Cc.normalizeProvider(o??!1)}),d;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!d&&(d=yC.getEndpointFromConfig(e.serviceId)),d),a},ZB=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};mr.endpointMiddleware=_C;mr.endpointMiddlewareOptions=wC;mr.getEndpointFromInstructions=SC;mr.getEndpointPlugin=XB;mr.resolveEndpointConfig=QB;mr.resolveEndpointRequiredConfig=ZB;mr.resolveParams=EC;mr.toEndpointV1=Gp});var Kp=I(Kr=>{"use strict";c();var eU=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],tU=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],rU=["TimeoutError","RequestTimeout","RequestTimeoutException"],nU=[500,502,503,504],oU=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],sU=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],xC=e=>e?.$retryable!==void 0,iU=e=>eU.includes(e.name),bC=e=>e.$metadata?.clockSkewCorrected,CC=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},aU=e=>e.$metadata?.httpStatusCode===429||tU.includes(e.name)||e.$retryable?.throttling==!0,Wp=(e,t=0)=>xC(e)||bC(e)||rU.includes(e.name)||oU.includes(e?.code||"")||sU.includes(e?.code||"")||nU.includes(e.$metadata?.httpStatusCode||0)||CC(e)||e.cause!==void 0&&t<=10&&Wp(e.cause,t+1),cU=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Wp(e)}return!1};Kr.isBrowserNetworkError=CC;Kr.isClockSkewCorrectedError=bC;Kr.isClockSkewError=iU;Kr.isRetryableByTrait=xC;Kr.isServerError=cU;Kr.isThrottlingError=aU;Kr.isTransientError=Wp});var Dn=I(Ae=>{"use strict";c();var dU=Kp();Ae.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ae.RETRY_MODES||(Ae.RETRY_MODES={}));var Yp=3,lU=Ae.RETRY_MODES.STANDARD,Tc=class e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(t){this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),dU.isThrottlingError(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},Ds=100,Zp=20*1e3,vC=500,Jp=500,AC=5,RC=10,IC=1,uU="amz-sdk-invocation-id",fU="amz-sdk-request",mU=()=>{let e=Ds;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Zp,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},TC=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(Zp,e),getRetryCost:()=>r}),ks=class{maxAttempts;mode=Ae.RETRY_MODES.STANDARD;capacity=Jp;retryBackoffStrategy=mU();maxAttemptsProvider;constructor(t){this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return TC({retryDelay:Ds,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?vC:Ds);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,TC({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Jp,this.capacity+(t.getRetryCost()??IC))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Yp}`),Yp}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?RC:AC}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Xp=class{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=Ae.RETRY_MODES.ADAPTIVE;constructor(t,r){this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Tc,this.standardRetryStrategy=new ks(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},Qp=class extends ks{computeNextBackoffDelay;constructor(t,r=Ds){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ae.AdaptiveRetryStrategy=Xp;Ae.ConfiguredRetryStrategy=Qp;Ae.DEFAULT_MAX_ATTEMPTS=Yp;Ae.DEFAULT_RETRY_DELAY_BASE=Ds;Ae.DEFAULT_RETRY_MODE=lU;Ae.DefaultRateLimiter=Tc;Ae.INITIAL_RETRY_TOKENS=Jp;Ae.INVOCATION_ID_HEADER=uU;Ae.MAXIMUM_RETRY_DELAY=Zp;Ae.NO_RETRY_INCREMENT=IC;Ae.REQUEST_HEADER=fU;Ae.RETRY_COST=AC;Ae.StandardRetryStrategy=ks;Ae.THROTTLING_RETRY_DELAY_BASE=vC;Ae.TIMEOUT_RETRY_COST=RC});var PC=I(vc=>{"use strict";c();Object.defineProperty(vc,"__esModule",{value:!0});vc.isStreamingPayload=void 0;var pU=ee("stream"),hU=e=>e?.body instanceof pU.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;vc.isStreamingPayload=hU});var At=I(Me=>{"use strict";c();var Ce=Dn(),yo=ie(),Yr=Kp(),NC=cs(),OC=Xe(),gU=K(),yU=PC(),SU=(e,t)=>{let r=e,n=Ce.NO_RETRY_INCREMENT,o=Ce.RETRY_COST,s=Ce.TIMEOUT_RETRY_COST,i=e,a=h=>h.name==="TimeoutError"?s:o,d=h=>a(h)<=i;return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:h=>{if(!d(h))throw new Error("No retry token available");let S=a(h);return i-=S,S},releaseRetryTokens:h=>{i+=h??n,i=Math.min(i,r)}})},DC=(e,t)=>Math.floor(Math.min(Ce.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),kC=e=>e?Yr.isRetryableByTrait(e)||Yr.isClockSkewError(e)||Yr.isThrottlingError(e)||Yr.isTransientError(e):!1,MC=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ac=class{maxAttemptsProvider;retryDecider;delayDecider;retryQuota;mode=Ce.RETRY_MODES.STANDARD;constructor(t,r){this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??kC,this.delayDecider=r?.delayDecider??DC,this.retryQuota=r?.retryQuota??SU(Ce.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ce.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let o,s=0,i=0,a=await this.getMaxAttempts(),{request:d}=r;for(yo.HttpRequest.isInstance(d)&&(d.headers[Ce.INVOCATION_ID_HEADER]=NC.v4());;)try{yo.HttpRequest.isInstance(d)&&(d.headers[Ce.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:m}=await t(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(o),m.$metadata.attempts=s+1,m.$metadata.totalRetryDelay=i,{response:l,output:m}}catch(l){let m=MC(l);if(s++,this.shouldRetry(m,s,a)){o=this.retryQuota.retrieveRetryTokens(m);let h=this.delayDecider(Yr.isThrottlingError(m)?Ce.THROTTLING_RETRY_DELAY_BASE:Ce.DEFAULT_RETRY_DELAY_BASE,s),S=EU(m.$response),y=Math.max(S||0,h);i+=y,await new Promise(w=>setTimeout(w,y));continue}throw m.$metadata||(m.$metadata={}),m.$metadata.attempts=s,m.$metadata.totalRetryDelay=i,m}}},EU=e=>{if(!yo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},eh=class extends Ac{rateLimiter;constructor(t,r){let{rateLimiter:n,...o}=r??{};super(t,o),this.rateLimiter=n??new Ce.DefaultRateLimiter,this.mode=Ce.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},th="AWS_MAX_ATTEMPTS",rh="max_attempts",_U={environmentVariableSelector:e=>{let t=e[th];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${th} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[rh];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${rh} mast be a number, got "${t}"`);return r},default:Ce.DEFAULT_MAX_ATTEMPTS},wU=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=OC.normalizeProvider(n??Ce.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await OC.normalizeProvider(r)()===Ce.RETRY_MODES.ADAPTIVE?new Ce.AdaptiveRetryStrategy(o):new Ce.StandardRetryStrategy(o))})},LC="AWS_RETRY_MODE",FC="retry_mode",xU={environmentVariableSelector:e=>e[LC],configFileSelector:e=>e[FC],default:Ce.DEFAULT_RETRY_MODE},BC=()=>e=>async t=>{let{request:r}=t;return yo.HttpRequest.isInstance(r)&&(delete r.headers[Ce.INVOCATION_ID_HEADER],delete r.headers[Ce.REQUEST_HEADER]),e(t)},UC={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},bU=e=>({applyToStack:t=>{t.addRelativeTo(BC(),UC)}}),$C=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(CU(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,d=0,l=0,{request:m}=n,h=yo.HttpRequest.isInstance(m);for(h&&(m.headers[Ce.INVOCATION_ID_HEADER]=NC.v4());;)try{h&&(m.headers[Ce.REQUEST_HEADER]=`attempt=${d+1}; max=${s}`);let{response:S,output:y}=await t(n);return o.recordSuccess(i),y.$metadata.attempts=d+1,y.$metadata.totalRetryDelay=l,{response:S,output:y}}catch(S){let y=TU(S);if(a=MC(S),h&&yU.isStreamingPayload(m))throw(r.logger instanceof gU.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,y)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=d+1,a.$metadata.totalRetryDelay=l,a}d=i.getRetryCount();let w=i.getRetryDelay();l+=w,await new Promise(R=>setTimeout(R,w))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},CU=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",TU=e=>{let t={error:e,errorType:vU(e)},r=qC(e.$response);return r&&(t.retryAfterHint=r),t},vU=e=>Yr.isThrottlingError(e)?"THROTTLING":Yr.isTransientError(e)?"TRANSIENT":Yr.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",HC={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},AU=e=>({applyToStack:t=>{t.add($C(e),HC)}}),qC=e=>{if(!yo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};Me.AdaptiveRetryStrategy=eh;Me.CONFIG_MAX_ATTEMPTS=rh;Me.CONFIG_RETRY_MODE=FC;Me.ENV_MAX_ATTEMPTS=th;Me.ENV_RETRY_MODE=LC;Me.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=_U;Me.NODE_RETRY_MODE_CONFIG_OPTIONS=xU;Me.StandardRetryStrategy=Ac;Me.defaultDelayDecider=DC;Me.defaultRetryDecider=kC;Me.getOmitRetryHeadersPlugin=bU;Me.getRetryAfterHint=qC;Me.getRetryPlugin=AU;Me.omitRetryHeadersMiddleware=BC;Me.omitRetryHeadersMiddlewareOptions=UC;Me.resolveRetryConfig=wU;Me.retryMiddleware=$C;Me.retryMiddlewareOptions=HC});var sh=I(Jr=>{"use strict";c();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveHttpAuthSchemeConfig=Jr.defaultBedrockRuntimeHttpAuthSchemeProvider=Jr.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=void 0;var RU=(ve(),Y(st)),nh=(Ue(),Y(kt)),oh=Xe(),IU=async(e,t,r)=>({operation:(0,oh.getSmithyContext)(t).operation,region:await(0,oh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Jr.defaultBedrockRuntimeHttpAuthSchemeParametersProvider=IU;function PU(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function OU(e){return{schemeId:"smithy.api#httpBearerAuth",propertiesExtractor:({profile:t,filepath:r,configFilepath:n,ignoreCache:o},s)=>({identityProperties:{profile:t,filepath:r,configFilepath:n,ignoreCache:o}})}}var NU=e=>{let t=[];switch(e.operation){default:t.push(PU(e)),t.push(OU(e))}return t};Jr.defaultBedrockRuntimeHttpAuthSchemeProvider=NU;var DU=e=>{let t=(0,nh.memoizeIdentityProvider)(e.token,nh.isIdentityExpired,nh.doesIdentityRequireRefresh),r=(0,RU.resolveAwsSdkSigV4Config)(e);return Object.assign(r,{authSchemePreference:(0,oh.normalizeProvider)(e.authSchemePreference??[]),token:t})};Jr.resolveHttpAuthSchemeConfig=DU});var jC=I((Wee,kU)=>{kU.exports={name:"@aws-sdk/client-bedrock-runtime",description:"AWS SDK for JavaScript Bedrock Runtime Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-bedrock-runtime","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo bedrock-runtime"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/credential-provider-node":"3.908.0","@aws-sdk/eventstream-handler-node":"3.901.0","@aws-sdk/middleware-eventstream":"3.901.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/middleware-websocket":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/token-providers":"3.908.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/eventstream-serde-browser":"^4.2.0","@smithy/eventstream-serde-config-resolver":"^4.3.0","@smithy/eventstream-serde-node":"^4.2.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-stream":"^4.5.0","@smithy/util-utf8":"^4.2.0","@smithy/uuid":"^1.1.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-bedrock-runtime",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-bedrock-runtime"}}});var ih=I(Xr=>{"use strict";c();var MU=(vt(),Y(Mr)),LU=Ze(),zC="AWS_ACCESS_KEY_ID",VC="AWS_SECRET_ACCESS_KEY",GC="AWS_SESSION_TOKEN",WC="AWS_CREDENTIAL_EXPIRATION",KC="AWS_CREDENTIAL_SCOPE",YC="AWS_ACCOUNT_ID",FU=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[zC],r=process.env[VC],n=process.env[GC],o=process.env[WC],s=process.env[KC],i=process.env[YC];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return MU.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new LU.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};Xr.ENV_ACCOUNT_ID=YC;Xr.ENV_CREDENTIAL_SCOPE=KC;Xr.ENV_EXPIRATION=WC;Xr.ENV_KEY=zC;Xr.ENV_SECRET=VC;Xr.ENV_SESSION=GC;Xr.fromEnv=FU});var Ls=I(Ke=>{"use strict";c();var Bt=Ze(),BU=ee("url"),UU=ee("buffer"),$U=ee("http"),uh=fr(),HU=sr();function Ms(e){return new Promise((t,r)=>{let n=$U.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Bt.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Bt.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Bt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(UU.Buffer.concat(i)),n.destroy()})}),n.end()})}var ZC=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",eT=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),tT=1e3,rT=0,fh=({maxRetries:e=rT,timeout:t=tT})=>({maxRetries:e,timeout:t}),ch=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},Rc="AWS_CONTAINER_CREDENTIALS_FULL_URI",Ic="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",dh="AWS_CONTAINER_AUTHORIZATION_TOKEN",qU=(e={})=>{let{timeout:t,maxRetries:r}=fh(e);return()=>ch(async()=>{let n=await WU({logger:e.logger}),o=JSON.parse(await jU(t,n));if(!ZC(o))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return eT(o)},r)},jU=async(e,t)=>(process.env[dh]&&(t.headers={...t.headers,Authorization:process.env[dh]}),(await Ms({...t,timeout:e})).toString()),zU="169.254.170.2",VU={localhost:!0,"127.0.0.1":!0},GU={"http:":!0,"https:":!0},WU=async({logger:e})=>{if(process.env[Ic])return{hostname:zU,path:process.env[Ic]};if(process.env[Rc]){let t=BU.parse(process.env[Rc]);if(!t.hostname||!(t.hostname in VU))throw new Bt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in GU))throw new Bt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Bt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${Ic} or ${Rc} environment variable is set`,{tryNextLink:!1,logger:e})},lh=class e extends Bt.CredentialsProviderError{tryNextLink;name="InstanceMetadataV1FallbackError";constructor(t,r=!0){super(t,r),this.tryNextLink=r,Object.setPrototypeOf(this,e.prototype)}};Ke.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Ke.Endpoint||(Ke.Endpoint={}));var KU="AWS_EC2_METADATA_SERVICE_ENDPOINT",YU="ec2_metadata_service_endpoint",JU={environmentVariableSelector:e=>e[KU],configFileSelector:e=>e[YU],default:void 0},So;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(So||(So={}));var XU="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",QU="ec2_metadata_service_endpoint_mode",ZU={environmentVariableSelector:e=>e[XU],configFileSelector:e=>e[QU],default:So.IPv4},nT=async()=>HU.parseUrl(await e$()||await t$()),e$=async()=>uh.loadConfig(JU)(),t$=async()=>{let e=await uh.loadConfig(ZU)();switch(e){case So.IPv4:return Ke.Endpoint.IPv4;case So.IPv6:return Ke.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(So)}`)}},r$=300,n$=300,o$="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",JC=(e,t)=>{let r=r$+Math.floor(Math.random()*n$),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+o$);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},s$=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=JC(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=JC(n,r);else throw s}return n=o,o}},oT="/latest/meta-data/iam/security-credentials/",i$="/latest/api/token",ah="AWS_EC2_METADATA_V1_DISABLED",XC="ec2_metadata_v1_disabled",QC="x-aws-ec2-metadata-token",a$=(e={})=>s$(c$(e),{logger:e.logger}),c$=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=fh(e),i=async(a,d)=>{if(t||d.headers?.[QC]==null){let h=!1,S=!1,y=await uh.loadConfig({environmentVariableSelector:w=>{let R=w[ah];if(S=!!R&&R!=="false",R===void 0)throw new Bt.CredentialsProviderError(`${ah} not set in env, checking config file next.`,{logger:e.logger});return S},configFileSelector:w=>{let R=w[XC];return h=!!R&&R!=="false",h},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||y){let w=[];throw e.ec2MetadataV1Disabled&&w.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),h&&w.push(`config file profile (${XC})`),S&&w.push(`process environment variable (${ah})`),new lh(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${w.join(", ")}].`)}}let m=(await ch(async()=>{let h;try{h=await l$(d)}catch(S){throw S.statusCode===401&&(t=!1),S}return h},a)).trim();return ch(async()=>{let h;try{h=await u$(m,d,e)}catch(S){throw S.statusCode===401&&(t=!1),S}return h},a)};return async()=>{let a=await nT();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let d;try{d=(await d$({...a,timeout:o})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[QC]:d},timeout:o})}}},d$=async e=>Ms({...e,path:i$,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),l$=async e=>(await Ms({...e,path:oT})).toString(),u$=async(e,t,r)=>{let n=JSON.parse((await Ms({...t,path:oT+e})).toString());if(!ZC(n))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return eT(n)};Ke.DEFAULT_MAX_RETRIES=rT;Ke.DEFAULT_TIMEOUT=tT;Ke.ENV_CMDS_AUTH_TOKEN=dh;Ke.ENV_CMDS_FULL_URI=Rc;Ke.ENV_CMDS_RELATIVE_URI=Ic;Ke.fromContainerMetadata=qU;Ke.fromInstanceMetadata=a$;Ke.getInstanceMetadataEndpoint=nT;Ke.httpRequest=Ms;Ke.providerConfigFromInit=fh});var sT=I(Pc=>{"use strict";c();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.checkUrl=void 0;var f$=Ze(),m$="169.254.170.2",p$="169.254.170.23",h$="[fd00:ec2::23]",g$=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===m$||e.hostname===p$||e.hostname===h$)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new f$.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Pc.checkUrl=g$});var iT=I(Oc=>{"use strict";c();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.createGetRequest=_$;Oc.getCredentials=w$;var mh=Ze(),y$=ie(),S$=K(),E$=na();function _$(e){return new y$.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function w$(e,t){let n=await(0,E$.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new mh.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,S$.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new mh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new mh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var aT=I(Nc=>{"use strict";c();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.retryWrapper=void 0;var x$=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};Nc.retryWrapper=x$});var lT=I(Dc=>{"use strict";c();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.fromHttp=void 0;var b$=(Or(),Y(Pr)),C$=(vt(),Y(Mr)),T$=Ar(),cT=Ze(),v$=b$.__importDefault(ee("fs/promises")),A$=sT(),dT=iT(),R$=aT(),I$="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",P$="http://169.254.170.2",O$="AWS_CONTAINER_CREDENTIALS_FULL_URI",N$="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",D$="AWS_CONTAINER_AUTHORIZATION_TOKEN",k$=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[I$],n=e.awsContainerCredentialsFullUri??process.env[O$],o=e.awsContainerAuthorizationToken??process.env[D$],s=e.awsContainerAuthorizationTokenFile??process.env[N$],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${P$}${r}`;else throw new cT.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,A$.checkUrl)(a,e.logger);let d=T$.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,R$.retryWrapper)(async()=>{let l=(0,dT.createGetRequest)(a);o?l.headers.Authorization=o:s&&(l.headers.Authorization=(await v$.default.readFile(s)).toString());try{let m=await d.handle(l);return(0,dT.getCredentials)(m.response).then(h=>(0,C$.setCredentialFeature)(h,"CREDENTIALS_HTTP","z"))}catch(m){throw new cT.CredentialsProviderError(String(m),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};Dc.fromHttp=k$});var ph=I(kc=>{"use strict";c();Object.defineProperty(kc,"__esModule",{value:!0});kc.fromHttp=void 0;var M$=lT();Object.defineProperty(kc,"fromHttp",{enumerable:!0,get:function(){return M$.fromHttp}})});function L$(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function F$(e){return{schemeId:"smithy.api#noAuth"}}var Fs,uT,fT,mT,hh=T(()=>{c();ve();Fs=v(Xe()),uT=async(e,t,r)=>({operation:(0,Fs.getSmithyContext)(t).operation,region:await(0,Fs.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});fT=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(F$(e));break}default:t.push(L$(e))}return t},mT=e=>{let t=bn(e);return Object.assign(t,{authSchemePreference:(0,Fs.normalizeProvider)(e.authSchemePreference??[])})}});var pT,hT,gh=T(()=>{c();pT=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),hT={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Mc,yh=T(()=>{Mc={name:"@aws-sdk/nested-clients",version:"3.908.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Eo=I(kn=>{"use strict";c();var gT=ee("os"),Sh=ee("process"),U$=In(),yT={isCrtAvailable:!1},$$=()=>yT.isCrtAvailable?["md/crt-avail"]:null,ST=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${gT.platform()}`,gT.release()],["lang/js"],["md/nodejs",`${Sh.versions.node}`]],o=$$();o&&n.push(o),e&&n.push([`api/${e}`,t]),Sh.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${Sh.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},H$=ST,ET="AWS_SDK_UA_APP_ID",_T="sdk_ua_app_id",q$="sdk-ua-app-id",j$={environmentVariableSelector:e=>e[ET],configFileSelector:e=>e[_T]??e[q$],default:U$.DEFAULT_UA_APP_ID};kn.NODE_APP_ID_CONFIG_OPTIONS=j$;kn.UA_APP_ID_ENV_NAME=ET;kn.UA_APP_ID_INI_NAME=_T;kn.createDefaultUserAgentProvider=ST;kn.crtAvailability=yT;kn.defaultUserAgent=H$});var _o=I(bT=>{"use strict";c();var Eh=Yn(),z$=Le(),V$=ee("buffer"),wT=ee("crypto"),_h=class{algorithmIdentifier;secret;hash;constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(z$.toUint8Array(xT(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?wT.createHmac(this.algorithmIdentifier,xT(this.secret)):wT.createHash(this.algorithmIdentifier)}};function xT(e,t){return V$.Buffer.isBuffer(e)?e:typeof e=="string"?Eh.fromString(e,t):ArrayBuffer.isView(e)?Eh.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):Eh.fromArrayBuffer(e)}bT.Hash=_h});var wo=I(CT=>{"use strict";c();var wh=ee("node:fs"),G$=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof wh.ReadStream){if(e.path!=null)return wh.lstatSync(e.path).size;if(typeof e.fd=="number")return wh.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};CT.calculateBodyLength=G$});var kT,Et,TT,Bs,xo,bo,hr,xh,bh,vT,AT,RT,MT,LT,St,IT,FT,PT,OT,NT,DT,W$,BT,UT=T(()=>{c();kT="required",Et="argv",TT="isSet",Bs="booleanEquals",xo="error",bo="endpoint",hr="tree",xh="PartitionResult",bh="getAttr",vT={[kT]:!1,type:"String"},AT={[kT]:!0,default:!1,type:"Boolean"},RT={ref:"Endpoint"},MT={fn:Bs,[Et]:[{ref:"UseFIPS"},!0]},LT={fn:Bs,[Et]:[{ref:"UseDualStack"},!0]},St={},IT={fn:bh,[Et]:[{ref:xh},"supportsFIPS"]},FT={ref:xh},PT={fn:Bs,[Et]:[!0,{fn:bh,[Et]:[FT,"supportsDualStack"]}]},OT=[MT],NT=[LT],DT=[{ref:"Region"}],W$={version:"1.0",parameters:{Region:vT,UseDualStack:AT,UseFIPS:AT,Endpoint:vT},rules:[{conditions:[{fn:TT,[Et]:[RT]}],rules:[{conditions:OT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:xo},{conditions:NT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:xo},{endpoint:{url:RT,properties:St,headers:St},type:bo}],type:hr},{conditions:[{fn:TT,[Et]:DT}],rules:[{conditions:[{fn:"aws.partition",[Et]:DT,assign:xh}],rules:[{conditions:[MT,LT],rules:[{conditions:[{fn:Bs,[Et]:[!0,IT]},PT],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:bo}],type:hr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:xo}],type:hr},{conditions:OT,rules:[{conditions:[{fn:Bs,[Et]:[IT,!0]}],rules:[{conditions:[{fn:"stringEquals",[Et]:[{fn:bh,[Et]:[FT,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:St,headers:St},type:bo},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:bo}],type:hr},{error:"FIPS is enabled but this partition does not support FIPS",type:xo}],type:hr},{conditions:NT,rules:[{conditions:[PT],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:St,headers:St},type:bo}],type:hr},{error:"DualStack is enabled but this partition does not support DualStack",type:xo}],type:hr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:St,headers:St},type:bo}],type:hr}],type:hr},{error:"Invalid Configuration: Missing Region",type:xo}]},BT=W$});var $T,Co,K$,HT,qT=T(()=>{c();$T=v(_n()),Co=v(En());UT();K$=new Co.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),HT=(e,t={})=>K$.get(e,()=>(0,Co.resolveEndpoint)(BT,{endpointParams:e,logger:t.logger}));Co.customEndpointFunctions.aws=$T.awsEndpointFunctions});var jT,zT,Lc,Fc,VT,GT=T(()=>{c();ve();Ue();jT=v(K()),zT=v(sr()),Lc=v(Fe()),Fc=v(Le());hh();qT();VT=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Lc.fromBase64,base64Encoder:e?.base64Encoder??Lc.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??HT,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??fT,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],logger:e?.logger??new jT.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??zT.parseUrl,utf8Decoder:e?.utf8Decoder??Fc.fromUtf8,utf8Encoder:e?.utf8Encoder??Fc.toUtf8})});var To=I(JT=>{"use strict";c();var Y$=yt(),WT=fr(),J$=Ze(),X$="AWS_EXECUTION_ENV",KT="AWS_REGION",YT="AWS_DEFAULT_REGION",Q$="AWS_EC2_METADATA_DISABLED",Z$=["in-region","cross-region","mobile","standard","legacy"],eH="/latest/meta-data/placement/region",tH="AWS_DEFAULTS_MODE",rH="defaults_mode",nH={environmentVariableSelector:e=>e[tH],configFileSelector:e=>e[rH],default:"legacy"},oH=({region:e=WT.loadConfig(Y$.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=WT.loadConfig(nH)}={})=>J$.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return sH(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Z$.join(", ")}, got ${r}`)}}),sH=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await iH();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},iH=async()=>{if(process.env[X$]&&(process.env[KT]||process.env[YT]))return process.env[KT]??process.env[YT];if(!process.env[Q$])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>v(Ls())),r=await e();return(await t({...r,path:eH})).toString()}catch{}};JT.resolveDefaultsModeConfig=oH});var Bc,Zr,XT,Uc,Qr,$c,QT,ZT,ev,tv,rv,nv,ov=T(()=>{c();yh();ve();Bc=v(Eo()),Zr=v(yt()),XT=v(_o()),Uc=v(At()),Qr=v(fr()),$c=v(Ar()),QT=v(wo()),ZT=v(Dn());GT();ev=v(K()),tv=v(To()),rv=v(K()),nv=e=>{(0,rv.emitWarningIfUnsupportedVersion)(process.version);let t=(0,tv.resolveDefaultsModeConfig)(e),r=()=>t().then(ev.loadConfigsForDefaultMode),n=VT(e);no(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Qr.loadConfig)(io,o),bodyLengthChecker:e?.bodyLengthChecker??QT.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Bc.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Mc.version}),maxAttempts:e?.maxAttempts??(0,Qr.loadConfig)(Uc.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Qr.loadConfig)(Zr.NODE_REGION_CONFIG_OPTIONS,{...Zr.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:$c.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Qr.loadConfig)({...Uc.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||ZT.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??XT.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??$c.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Qr.loadConfig)(Zr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Qr.loadConfig)(Zr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Qr.loadConfig)(Bc.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var vo=I((Bte,lv)=>{"use strict";c();var Hc=Object.defineProperty,aH=Object.getOwnPropertyDescriptor,cH=Object.getOwnPropertyNames,dH=Object.prototype.hasOwnProperty,Ut=(e,t)=>Hc(e,"name",{value:t,configurable:!0}),lH=(e,t)=>{for(var r in t)Hc(e,r,{get:t[r],enumerable:!0})},uH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cH(t))!dH.call(e,o)&&o!==r&&Hc(e,o,{get:()=>t[o],enumerable:!(n=aH(t,o))||n.enumerable});return e},fH=e=>uH(Hc({},"__esModule",{value:!0}),e),iv={};lH(iv,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>gH,NODE_REGION_CONFIG_OPTIONS:()=>hH,REGION_ENV_NAME:()=>av,REGION_INI_NAME:()=>cv,getAwsRegionExtensionConfiguration:()=>mH,resolveAwsRegionExtensionConfiguration:()=>pH,resolveRegionConfig:()=>yH});lv.exports=fH(iv);var mH=Ut(e=>({setRegion(t){e.region=t},region(){return e.region}}),"getAwsRegionExtensionConfiguration"),pH=Ut(e=>({region:e.region()}),"resolveAwsRegionExtensionConfiguration"),av="AWS_REGION",cv="region",hH={environmentVariableSelector:Ut(e=>e[av],"environmentVariableSelector"),configFileSelector:Ut(e=>e[cv],"configFileSelector"),default:Ut(()=>{throw new Error("Region is missing")},"default")},gH={preferredFile:"credentials"},dv=Ut(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),sv=Ut(e=>dv(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),yH=Ut(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:Ut(async()=>{if(typeof t=="string")return sv(t);let n=await t();return sv(n)},"region"),useFipsEndpoint:Ut(async()=>{let n=typeof t=="string"?t:await t();return dv(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()},"useFipsEndpoint")})},"resolveRegionConfig")});var uv,fv,mv=T(()=>{c();uv=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},fv=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var qc,jc,zc,pv,hv=T(()=>{c();qc=v(vo()),jc=v(ie()),zc=v(K());mv();pv=(e,t)=>{let r=Object.assign((0,qc.getAwsRegionExtensionConfiguration)(e),(0,zc.getDefaultExtensionConfiguration)(e),(0,jc.getHttpHandlerExtensionConfiguration)(e),uv(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,qc.resolveAwsRegionExtensionConfiguration)(r),(0,zc.resolveDefaultRuntimeConfig)(r),(0,jc.resolveHttpHandlerRuntimeConfig)(r),fv(r))}});var Vc,gv,yv,Gc,Sv,Ev,_v,Wc,Ch,Us,Th=T(()=>{c();Vc=v(Vn()),gv=v(Gn()),yv=v(Wn()),Gc=v(In()),Sv=v(yt());Ue();Ev=v(go()),_v=v(pr()),Wc=v(At()),Ch=v(K());hh();gh();ov();hv();Us=class extends Ch.Client{config;constructor(...[t]){let r=nv(t||{});super(r),this.initConfig=r;let n=pT(r),o=(0,Gc.resolveUserAgentConfig)(n),s=(0,Wc.resolveRetryConfig)(o),i=(0,Sv.resolveRegionConfig)(s),a=(0,Vc.resolveHostHeaderConfig)(i),d=(0,_v.resolveEndpointConfig)(a),l=mT(d),m=pv(l,t?.extensions||[]);this.config=m,this.middlewareStack.use((0,Gc.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Wc.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Ev.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Vc.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,gv.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,yv.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Jo(this.config,{httpAuthSchemeParametersProvider:uT,identityProviderConfigProvider:async h=>new yn({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Xo(this.config))}destroy(){super.destroy()}}});var wv,$e,Kc=T(()=>{c();wv=v(K()),$e=class e extends wv.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Mn,SH,$s,Hs,vh,Ah,qs,js,zs,Vs,EH,Gs,Ws,Ks,Ys,Js,Yc=T(()=>{c();Mn=v(K());Kc();SH={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},$s=class e extends $e{name="AccessDeniedException";$fault="client";error;reason;error_description;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Hs=class e extends $e{name="AuthorizationPendingException";$fault="client";error;error_description;constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},vh=e=>({...e,...e.clientSecret&&{clientSecret:Mn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Mn.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:Mn.SENSITIVE_STRING}}),Ah=e=>({...e,...e.accessToken&&{accessToken:Mn.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:Mn.SENSITIVE_STRING},...e.idToken&&{idToken:Mn.SENSITIVE_STRING}}),qs=class e extends $e{name="ExpiredTokenException";$fault="client";error;error_description;constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},js=class e extends $e{name="InternalServerException";$fault="server";error;error_description;constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},zs=class e extends $e{name="InvalidClientException";$fault="client";error;error_description;constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Vs=class e extends $e{name="InvalidGrantException";$fault="client";error;error_description;constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},EH={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Gs=class e extends $e{name="InvalidRequestException";$fault="client";error;reason;error_description;constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.reason=t.reason,this.error_description=t.error_description}},Ws=class e extends $e{name="InvalidScopeException";$fault="client";error;error_description;constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ks=class e extends $e{name="SlowDownException";$fault="client";error;error_description;constructor(t){super({name:"SlowDownException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Ys=class e extends $e{name="UnauthorizedClientException";$fault="client";error;error_description;constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}},Js=class e extends $e{name="UnsupportedGrantTypeException";$fault="client";error;error_description;constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.error=t.error,this.error_description=t.error_description}}});var M,xv,bv,_H,wH,xH,bH,CH,TH,vH,AH,RH,IH,PH,OH,NH,_t,Cv=T(()=>{c();ve();Ue();M=v(K());Yc();Kc();xv=async(e,t)=>{let r=us(e,t),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify((0,M.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>(0,M._json)(s)})),r.m("POST").h(n).b(o),r.build()},bv=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return _H(e,t);let r=(0,M.map)({$metadata:_t(e)}),n=(0,M.expectNonNull)((0,M.expectObject)(await fo(e.body,t)),"body"),o=(0,M.take)(n,{accessToken:M.expectString,expiresIn:M.expectInt32,idToken:M.expectString,refreshToken:M.expectString,tokenType:M.expectString});return Object.assign(r,o),r},_H=async(e,t)=>{let r={...e,body:await ip(e.body,t)},n=Tn(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await xH(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await bH(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await CH(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await TH(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await vH(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await AH(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await RH(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await IH(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await PH(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await OH(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await NH(r,t);default:let o=r.body;return wH({output:e,parsedBody:o,errorCode:n})}},wH=(0,M.withBaseException)($e),xH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,o);let s=new $s({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},bH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Hs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},CH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new qs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},TH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new js({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},vH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new zs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},AH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Vs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},RH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString,reason:M.expectString});Object.assign(r,o);let s=new Gs({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},IH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ws({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},PH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ks({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},OH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Ys({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},NH=async(e,t)=>{let r=(0,M.map)({}),n=e.body,o=(0,M.take)(n,{error:M.expectString,error_description:M.expectString});Object.assign(r,o);let s=new Js({$metadata:_t(e),...r});return(0,M.decorateServiceException)(s,e.body)},_t=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var Tv,vv,Rh,Xs,Ih=T(()=>{c();Tv=v(pr()),vv=v(Qt()),Rh=v(K());gh();Yc();Cv();Xs=class extends Rh.Command.classBuilder().ep(hT).m(function(t,r,n,o){return[(0,vv.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Tv.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(vh,Ah).ser(xv).de(bv).build(){}});var Av,DH,Jc,Rv=T(()=>{c();Av=v(K());Ih();Th();DH={CreateTokenCommand:Xs},Jc=class extends Us{};(0,Av.createAggregatedClient)(DH,Jc)});var Iv=T(()=>{c();Ih()});var Pv=T(()=>{c();Yc()});var Ph={};Ct(Ph,{$Command:()=>Rh.Command,AccessDeniedException:()=>$s,AccessDeniedExceptionReason:()=>SH,AuthorizationPendingException:()=>Hs,CreateTokenCommand:()=>Xs,CreateTokenRequestFilterSensitiveLog:()=>vh,CreateTokenResponseFilterSensitiveLog:()=>Ah,ExpiredTokenException:()=>qs,InternalServerException:()=>js,InvalidClientException:()=>zs,InvalidGrantException:()=>Vs,InvalidRequestException:()=>Gs,InvalidRequestExceptionReason:()=>EH,InvalidScopeException:()=>Ws,SSOOIDC:()=>Jc,SSOOIDCClient:()=>Us,SSOOIDCServiceException:()=>$e,SlowDownException:()=>Ks,UnauthorizedClientException:()=>Ys,UnsupportedGrantTypeException:()=>Js,__Client:()=>Ch.Client});var Oh=T(()=>{c();Th();Rv();Iv();Pv();Kc()});var Dh=I(Zs=>{"use strict";c();var kH=(vt(),Y(Mr)),MH=(Om(),Y(zw)),ft=Ze(),Qs=ur(),LH=ee("fs"),FH=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new ft.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=MH.getBearerTokenEnvKey(t);if(!(r in process.env))throw new ft.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return kH.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},BH=300*1e3,Nh="To refresh this SSO session run 'aws sso login' with the corresponding profile.",UH=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Oh(),Ph));return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:t.clientConfig?.logger??t.parentClientConfig?.logger}))},$H=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Oh(),Ph));return(await UH(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},Ov=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ft.TokenProviderError(`Token is expired. ${Nh}`,!1)},Ln=(e,t,r=!1)=>{if(typeof t>"u")throw new ft.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Nh}`,!1)},{writeFile:HH}=LH.promises,qH=(e,t)=>{let r=Qs.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return HH(r,n)},Nv=new Date(0),Dv=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await Qs.parseKnownFiles(r),o=Qs.getProfileName({profile:r.profile??t?.profile}),s=n[o];if(s){if(!s.sso_session)throw new ft.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new ft.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let i=s.sso_session,d=(await Qs.loadSsoSessionData(r))[i];if(!d)throw new ft.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let w of["sso_start_url","sso_region"])if(!d[w])throw new ft.TokenProviderError(`Sso session '${i}' is missing required property '${w}'.`,!1);d.sso_start_url;let l=d.sso_region,m;try{m=await Qs.getSSOTokenFromFile(i)}catch{throw new ft.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${Nh}`,!1)}Ln("accessToken",m.accessToken),Ln("expiresAt",m.expiresAt);let{accessToken:h,expiresAt:S}=m,y={token:h,expiration:new Date(S)};if(y.expiration.getTime()-Date.now()>BH)return y;if(Date.now()-Nv.getTime()<30*1e3)return Ov(y),y;Ln("clientId",m.clientId,!0),Ln("clientSecret",m.clientSecret,!0),Ln("refreshToken",m.refreshToken,!0);try{Nv.setTime(Date.now());let w=await $H(m,l,r);Ln("accessToken",w.accessToken),Ln("expiresIn",w.expiresIn);let R=new Date(Date.now()+w.expiresIn*1e3);try{await qH(i,{...m,accessToken:w.accessToken,expiresAt:R.toISOString(),refreshToken:w.refreshToken})}catch{}return{token:w.accessToken,expiration:R}}catch{return Ov(y),y}},jH=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new ft.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},zH=(e={})=>ft.memoize(ft.chain(Dv(e),async()=>{throw new ft.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);Zs.fromEnvSigningName=FH;Zs.fromSso=Dv;Zs.fromStatic=jH;Zs.nodeProvider=zH});var Mh=I(en=>{"use strict";c();Object.defineProperty(en,"__esModule",{value:!0});en.resolveHttpAuthSchemeConfig=en.defaultSSOHttpAuthSchemeProvider=en.defaultSSOHttpAuthSchemeParametersProvider=void 0;var VH=(ve(),Y(st)),kh=Xe(),GH=async(e,t,r)=>({operation:(0,kh.getSmithyContext)(t).operation,region:await(0,kh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});en.defaultSSOHttpAuthSchemeParametersProvider=GH;function WH(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Xc(e){return{schemeId:"smithy.api#noAuth"}}var KH=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(Xc(e));break}case"ListAccountRoles":{t.push(Xc(e));break}case"ListAccounts":{t.push(Xc(e));break}case"Logout":{t.push(Xc(e));break}default:t.push(WH(e))}return t};en.defaultSSOHttpAuthSchemeProvider=KH;var YH=e=>{let t=(0,VH.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,kh.normalizeProvider)(e.authSchemePreference??[])})};en.resolveHttpAuthSchemeConfig=YH});var kv=I((kre,JH)=>{JH.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var Yv=I(Qc=>{"use strict";c();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.ruleSet=void 0;var Vv="required",xt="fn",bt="argv",Io="ref",Mv=!0,Lv="isSet",ei="booleanEquals",Ao="error",Ro="endpoint",gr="tree",Lh="PartitionResult",Fh="getAttr",Fv={[Vv]:!1,type:"String"},Bv={[Vv]:!0,default:!1,type:"Boolean"},Uv={[Io]:"Endpoint"},Gv={[xt]:ei,[bt]:[{[Io]:"UseFIPS"},!0]},Wv={[xt]:ei,[bt]:[{[Io]:"UseDualStack"},!0]},wt={},$v={[xt]:Fh,[bt]:[{[Io]:Lh},"supportsFIPS"]},Kv={[Io]:Lh},Hv={[xt]:ei,[bt]:[!0,{[xt]:Fh,[bt]:[Kv,"supportsDualStack"]}]},qv=[Gv],jv=[Wv],zv=[{[Io]:"Region"}],XH={version:"1.0",parameters:{Region:Fv,UseDualStack:Bv,UseFIPS:Bv,Endpoint:Fv},rules:[{conditions:[{[xt]:Lv,[bt]:[Uv]}],rules:[{conditions:qv,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ao},{conditions:jv,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ao},{endpoint:{url:Uv,properties:wt,headers:wt},type:Ro}],type:gr},{conditions:[{[xt]:Lv,[bt]:zv}],rules:[{conditions:[{[xt]:"aws.partition",[bt]:zv,assign:Lh}],rules:[{conditions:[Gv,Wv],rules:[{conditions:[{[xt]:ei,[bt]:[Mv,$v]},Hv],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:Ro}],type:gr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ao}],type:gr},{conditions:qv,rules:[{conditions:[{[xt]:ei,[bt]:[$v,Mv]}],rules:[{conditions:[{[xt]:"stringEquals",[bt]:[{[xt]:Fh,[bt]:[Kv,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:wt,headers:wt},type:Ro},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:Ro}],type:gr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ao}],type:gr},{conditions:jv,rules:[{conditions:[Hv],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:wt,headers:wt},type:Ro}],type:gr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ao}],type:gr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:wt,headers:wt},type:Ro}],type:gr}],type:gr},{error:"Invalid Configuration: Missing Region",type:Ao}]};Qc.ruleSet=XH});var Jv=I(Zc=>{"use strict";c();Object.defineProperty(Zc,"__esModule",{value:!0});Zc.defaultEndpointResolver=void 0;var QH=_n(),Bh=En(),ZH=Yv(),eq=new Bh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),tq=(e,t={})=>eq.get(e,()=>(0,Bh.resolveEndpoint)(ZH.ruleSet,{endpointParams:e,logger:t.logger}));Zc.defaultEndpointResolver=tq;Bh.customEndpointFunctions.aws=QH.awsEndpointFunctions});var Zv=I(ed=>{"use strict";c();Object.defineProperty(ed,"__esModule",{value:!0});ed.getRuntimeConfig=void 0;var rq=(ve(),Y(st)),nq=(Ue(),Y(kt)),oq=K(),sq=sr(),Xv=Fe(),Qv=Le(),iq=Mh(),aq=Jv(),cq=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Xv.fromBase64,base64Encoder:e?.base64Encoder??Xv.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??aq.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??iq.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new rq.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new nq.NoAuthSigner}],logger:e?.logger??new oq.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??sq.parseUrl,utf8Decoder:e?.utf8Decoder??Qv.fromUtf8,utf8Encoder:e?.utf8Encoder??Qv.toUtf8});ed.getRuntimeConfig=cq});var oA=I(rd=>{"use strict";c();Object.defineProperty(rd,"__esModule",{value:!0});rd.getRuntimeConfig=void 0;var dq=(Or(),Y(Pr)),lq=dq.__importDefault(kv()),eA=(ve(),Y(st)),tA=Eo(),td=yt(),uq=_o(),rA=At(),Fn=fr(),nA=Ar(),fq=wo(),mq=Dn(),pq=Zv(),hq=K(),gq=To(),yq=K(),Sq=e=>{(0,yq.emitWarningIfUnsupportedVersion)(process.version);let t=(0,gq.resolveDefaultsModeConfig)(e),r=()=>t().then(hq.loadConfigsForDefaultMode),n=(0,pq.getRuntimeConfig)(e);(0,eA.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Fn.loadConfig)(eA.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??fq.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,tA.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:lq.default.version}),maxAttempts:e?.maxAttempts??(0,Fn.loadConfig)(rA.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Fn.loadConfig)(td.NODE_REGION_CONFIG_OPTIONS,{...td.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:nA.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Fn.loadConfig)({...rA.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||mq.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??uq.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??nA.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Fn.loadConfig)(td.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Fn.loadConfig)(td.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Fn.loadConfig)(tA.NODE_APP_ID_CONFIG_OPTIONS,o)}};rd.getRuntimeConfig=Sq});var bA=I(Re=>{"use strict";c();var sA=Vn(),Eq=Gn(),_q=Wn(),iA=In(),wq=yt(),yr=(Ue(),Y(kt)),xq=go(),oi=pr(),aA=At(),F=K(),cA=Mh(),bq=oA(),dA=vo(),lA=ie(),ld=Qt(),ti=(ve(),Y(st)),Cq=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),ud={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Tq=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},vq=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Aq=(e,t)=>{let r=Object.assign(dA.getAwsRegionExtensionConfiguration(e),F.getDefaultExtensionConfiguration(e),lA.getHttpHandlerExtensionConfiguration(e),Tq(e));return t.forEach(n=>n.configure(r)),Object.assign(e,dA.resolveAwsRegionExtensionConfiguration(r),F.resolveDefaultRuntimeConfig(r),lA.resolveHttpHandlerRuntimeConfig(r),vq(r))},Po=class extends F.Client{config;constructor(...[t]){let r=bq.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=Cq(r),o=iA.resolveUserAgentConfig(n),s=aA.resolveRetryConfig(o),i=wq.resolveRegionConfig(s),a=sA.resolveHostHeaderConfig(i),d=oi.resolveEndpointConfig(a),l=cA.resolveHttpAuthSchemeConfig(d),m=Aq(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(iA.getUserAgentPlugin(this.config)),this.middlewareStack.use(aA.getRetryPlugin(this.config)),this.middlewareStack.use(xq.getContentLengthPlugin(this.config)),this.middlewareStack.use(sA.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Eq.getLoggerPlugin(this.config)),this.middlewareStack.use(_q.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(yr.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:cA.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new yr.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(yr.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},tn=class e extends F.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},nd=class e extends tn{name="InvalidRequestException";$fault="client";constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},od=class e extends tn{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sd=class e extends tn{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},id=class e extends tn{name="UnauthorizedException";$fault="client";constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},uA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),fA=e=>({...e,...e.secretAccessKey&&{secretAccessKey:F.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:F.SENSITIVE_STRING}}),mA=e=>({...e,...e.roleCredentials&&{roleCredentials:fA(e.roleCredentials)}}),pA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),hA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),gA=e=>({...e,...e.accessToken&&{accessToken:F.SENSITIVE_STRING}}),Rq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[pd]:e[md]});r.bp("/federation/credentials");let o=F.map({[qq]:[,F.expectNonNull(e[Hq],"roleName")],[SA]:[,F.expectNonNull(e[yA],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Iq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[pd]:e[md]});r.bp("/assignment/roles");let o=F.map({[xA]:[,e[wA]],[_A]:[()=>e.maxResults!==void 0,()=>e[EA].toString()],[SA]:[,F.expectNonNull(e[yA],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Pq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[pd]:e[md]});r.bp("/assignment/accounts");let o=F.map({[xA]:[,e[wA]],[_A]:[()=>e.maxResults!==void 0,()=>e[EA].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()},Oq=async(e,t)=>{let r=yr.requestBuilder(e,t),n=F.map({},F.isSerializableHeaderValue,{[pd]:e[md]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},Nq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fd(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ti.parseJsonBody(e.body,t)),"body"),o=F.take(n,{roleCredentials:F._json});return Object.assign(r,o),r},Dq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fd(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ti.parseJsonBody(e.body,t)),"body"),o=F.take(n,{nextToken:F.expectString,roleList:F._json});return Object.assign(r,o),r},kq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fd(e,t);let r=F.map({$metadata:rn(e)}),n=F.expectNonNull(F.expectObject(await ti.parseJsonBody(e.body,t)),"body"),o=F.take(n,{accountList:F._json,nextToken:F.expectString});return Object.assign(r,o),r},Mq=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fd(e,t);let r=F.map({$metadata:rn(e)});return await F.collectBody(e.body,t),r},fd=async(e,t)=>{let r={...e,body:await ti.parseJsonErrorBody(e.body,t)},n=ti.loadRestJsonErrorCode(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Fq(r);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Bq(r);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Uq(r);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await $q(r);default:let o=r.body;return Lq({output:e,parsedBody:o,errorCode:n})}},Lq=F.withBaseException(tn),Fq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new nd({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},Bq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new od({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},Uq=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new sd({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},$q=async(e,t)=>{let r=F.map({}),n=e.body,o=F.take(n,{message:F.expectString});Object.assign(r,o);let s=new id({$metadata:rn(e),...r});return F.decorateServiceException(s,e.body)},rn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),yA="accountId",md="accessToken",SA="account_id",EA="maxResults",_A="max_result",wA="nextToken",xA="next_token",Hq="roleName",qq="role_name",pd="x-amz-sso_bearer_token",ad=class extends F.Command.classBuilder().ep(ud).m(function(t,r,n,o){return[ld.getSerdePlugin(n,this.serialize,this.deserialize),oi.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(uA,mA).ser(Rq).de(Nq).build(){},ri=class extends F.Command.classBuilder().ep(ud).m(function(t,r,n,o){return[ld.getSerdePlugin(n,this.serialize,this.deserialize),oi.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(pA,void 0).ser(Iq).de(Dq).build(){},ni=class extends F.Command.classBuilder().ep(ud).m(function(t,r,n,o){return[ld.getSerdePlugin(n,this.serialize,this.deserialize),oi.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(hA,void 0).ser(Pq).de(kq).build(){},cd=class extends F.Command.classBuilder().ep(ud).m(function(t,r,n,o){return[ld.getSerdePlugin(n,this.serialize,this.deserialize),oi.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(gA,void 0).ser(Oq).de(Mq).build(){},jq={GetRoleCredentialsCommand:ad,ListAccountRolesCommand:ri,ListAccountsCommand:ni,LogoutCommand:cd},dd=class extends Po{};F.createAggregatedClient(jq,dd);var zq=yr.createPaginator(Po,ri,"nextToken","nextToken","maxResults"),Vq=yr.createPaginator(Po,ni,"nextToken","nextToken","maxResults");Object.defineProperty(Re,"$Command",{enumerable:!0,get:function(){return F.Command}});Object.defineProperty(Re,"__Client",{enumerable:!0,get:function(){return F.Client}});Re.GetRoleCredentialsCommand=ad;Re.GetRoleCredentialsRequestFilterSensitiveLog=uA;Re.GetRoleCredentialsResponseFilterSensitiveLog=mA;Re.InvalidRequestException=nd;Re.ListAccountRolesCommand=ri;Re.ListAccountRolesRequestFilterSensitiveLog=pA;Re.ListAccountsCommand=ni;Re.ListAccountsRequestFilterSensitiveLog=hA;Re.LogoutCommand=cd;Re.LogoutRequestFilterSensitiveLog=gA;Re.ResourceNotFoundException=od;Re.RoleCredentialsFilterSensitiveLog=fA;Re.SSO=dd;Re.SSOClient=Po;Re.SSOServiceException=tn;Re.TooManyRequestsException=sd;Re.UnauthorizedException=id;Re.paginateListAccountRoles=zq;Re.paginateListAccounts=Vq});var TA=I(Uh=>{"use strict";c();var CA=bA();Object.defineProperty(Uh,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return CA.GetRoleCredentialsCommand}});Object.defineProperty(Uh,"SSOClient",{enumerable:!0,get:function(){return CA.SSOClient}})});var $h=I(gd=>{"use strict";c();var Rt=Ze(),hd=ur(),vA=(vt(),Y(Mr)),Gq=Dh(),RA=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),si=!1,AA=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,profile:d,filepath:l,configFilepath:m,ignoreCache:h,logger:S})=>{let y,w="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Oe=await Gq.fromSso({profile:d,filepath:l,configFilepath:m,ignoreCache:h})();y={accessToken:Oe.token,expiresAt:new Date(Oe.expiration).toISOString()}}catch(Oe){throw new Rt.CredentialsProviderError(Oe.message,{tryNextLink:si,logger:S})}else try{y=await hd.getSSOTokenFromFile(e)}catch{throw new Rt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${w}`,{tryNextLink:si,logger:S})}if(new Date(y.expiresAt).getTime()-Date.now()<=0)throw new Rt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${w}`,{tryNextLink:si,logger:S});let{accessToken:R}=y,{SSOClient:P,GetRoleCredentialsCommand:N}=await Promise.resolve().then(function(){return TA()}),k=s||new P(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n})),$;try{$=await k.send(new N({accountId:r,roleName:o,accessToken:R}))}catch(Oe){throw new Rt.CredentialsProviderError(Oe,{tryNextLink:si,logger:S})}let{roleCredentials:{accessKeyId:z,secretAccessKey:q,sessionToken:re,expiration:ze,credentialScope:tt,accountId:_e}={}}=$;if(!z||!q||!re||!ze)throw new Rt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:si,logger:S});let de={accessKeyId:z,secretAccessKey:q,sessionToken:re,expiration:new Date(ze),...tt&&{credentialScope:tt},..._e&&{accountId:_e}};return t?vA.setCredentialFeature(de,"CREDENTIALS_SSO","s"):vA.setCredentialFeature(de,"CREDENTIALS_SSO_LEGACY","u"),de},IA=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new Rt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},Wq=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,d=hd.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let m=(await hd.parseKnownFiles(e))[d];if(!m)throw new Rt.CredentialsProviderError(`Profile ${d} was not found.`,{logger:e.logger});if(!RA(m))throw new Rt.CredentialsProviderError(`Profile ${d} is not configured with SSO credentials.`,{logger:e.logger});if(m?.sso_session){let N=(await hd.loadSsoSessionData(e))[m.sso_session],k=` configurations in profile ${d} and sso-session ${m.sso_session}`;if(o&&o!==N.sso_region)throw new Rt.CredentialsProviderError("Conflicting SSO region"+k,{tryNextLink:!1,logger:e.logger});if(r&&r!==N.sso_start_url)throw new Rt.CredentialsProviderError("Conflicting SSO start_url"+k,{tryNextLink:!1,logger:e.logger});m.sso_region=N.sso_region,m.sso_start_url=N.sso_start_url}let{sso_start_url:h,sso_account_id:S,sso_region:y,sso_role_name:w,sso_session:R}=IA(m,e.logger);return AA({ssoStartUrl:h,ssoSession:R,ssoAccountId:S,ssoRegion:y,ssoRoleName:w,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:d,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!o||!s)throw new Rt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return AA({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:d,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};gd.fromSSO=Wq;gd.isSsoProfile=RA;gd.validateSsoProfile=IA});function Kq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function Yq(e){return{schemeId:"smithy.api#noAuth"}}var ii,PA,OA,Jq,NA,Hh=T(()=>{c();ve();ii=v(Xe());ai();PA=async(e,t,r)=>({operation:(0,ii.getSmithyContext)(t).operation,region:await(0,ii.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});OA=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(Yq(e));break}default:t.push(Kq(e))}return t},Jq=e=>Object.assign(e,{stsClientCtor:$t}),NA=e=>{let t=Jq(e),r=bn(t);return Object.assign(r,{authSchemePreference:(0,ii.normalizeProvider)(e.authSchemePreference??[])})}});var DA,yd,Sd=T(()=>{c();DA=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),yd={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var zA,J,se,nn,qe,VA,GA,we,kA,Ht,Oo,jh,MA,qh,WA,LA,je,FA,KA,YA,Ye,mt,BA,JA,XA,UA,QA,$A,HA,qA,jA,Xq,ZA,e0=T(()=>{c();zA="required",J="type",se="argv",nn="booleanEquals",qe="stringEquals",VA="sigv4",GA="us-east-1",we="endpoint",kA="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ht="tree",Oo="error",jh="getAttr",MA={[zA]:!1,[J]:"String"},qh={[zA]:!0,default:!1,[J]:"Boolean"},WA={ref:"Endpoint"},LA={fn:"isSet",[se]:[{ref:"Region"}]},je={ref:"Region"},FA={fn:"aws.partition",[se]:[je],assign:"PartitionResult"},KA={ref:"UseFIPS"},YA={ref:"UseDualStack"},Ye={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:VA,signingName:"sts",signingRegion:GA}]},headers:{}},mt={},BA={conditions:[{fn:qe,[se]:[je,"aws-global"]}],[we]:Ye,[J]:we},JA={fn:nn,[se]:[KA,!0]},XA={fn:nn,[se]:[YA,!0]},UA={fn:jh,[se]:[{ref:"PartitionResult"},"supportsFIPS"]},QA={ref:"PartitionResult"},$A={fn:nn,[se]:[!0,{fn:jh,[se]:[QA,"supportsDualStack"]}]},HA=[{fn:"isSet",[se]:[WA]}],qA=[JA],jA=[XA],Xq={version:"1.0",parameters:{Region:MA,UseDualStack:qh,UseFIPS:qh,Endpoint:MA,UseGlobalEndpoint:qh},rules:[{conditions:[{fn:nn,[se]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[se]:HA},LA,FA,{fn:nn,[se]:[KA,!1]},{fn:nn,[se]:[YA,!1]}],rules:[{conditions:[{fn:qe,[se]:[je,"ap-northeast-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-south-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-southeast-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"ap-southeast-2"]}],endpoint:Ye,[J]:we},BA,{conditions:[{fn:qe,[se]:[je,"ca-central-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-central-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-north-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-2"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"eu-west-3"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"sa-east-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,GA]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-east-2"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-west-1"]}],endpoint:Ye,[J]:we},{conditions:[{fn:qe,[se]:[je,"us-west-2"]}],endpoint:Ye,[J]:we},{endpoint:{url:kA,properties:{authSchemes:[{name:VA,signingName:"sts",signingRegion:"{Region}"}]},headers:mt},[J]:we}],[J]:Ht},{conditions:HA,rules:[{conditions:qA,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[J]:Oo},{conditions:jA,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[J]:Oo},{endpoint:{url:WA,properties:mt,headers:mt},[J]:we}],[J]:Ht},{conditions:[LA],rules:[{conditions:[FA],rules:[{conditions:[JA,XA],rules:[{conditions:[{fn:nn,[se]:[!0,UA]},$A],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[J]:Oo}],[J]:Ht},{conditions:qA,rules:[{conditions:[{fn:nn,[se]:[UA,!0]}],rules:[{conditions:[{fn:qe,[se]:[{fn:jh,[se]:[QA,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:mt,headers:mt},[J]:we},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"FIPS is enabled but this partition does not support FIPS",[J]:Oo}],[J]:Ht},{conditions:jA,rules:[{conditions:[$A],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:mt,headers:mt},[J]:we}],[J]:Ht},{error:"DualStack is enabled but this partition does not support DualStack",[J]:Oo}],[J]:Ht},BA,{endpoint:{url:kA,properties:mt,headers:mt},[J]:we}],[J]:Ht}],[J]:Ht},{error:"Invalid Configuration: Missing Region",[J]:Oo}]},ZA=Xq});var t0,No,Qq,r0,n0=T(()=>{c();t0=v(_n()),No=v(En());e0();Qq=new No.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),r0=(e,t={})=>Qq.get(e,()=>(0,No.resolveEndpoint)(ZA,{endpointParams:e,logger:t.logger}));No.customEndpointFunctions.aws=t0.awsEndpointFunctions});var o0,s0,Ed,_d,i0,a0=T(()=>{c();ve();Ue();o0=v(K()),s0=v(sr()),Ed=v(Fe()),_d=v(Le());Hh();n0();i0=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Ed.fromBase64,base64Encoder:e?.base64Encoder??Ed.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??r0,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??OA,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],logger:e?.logger??new o0.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??s0.parseUrl,utf8Decoder:e?.utf8Decoder??_d.fromUtf8,utf8Encoder:e?.utf8Encoder??_d.toUtf8})});var wd,sn,c0,xd,on,bd,d0,l0,u0,f0,m0,p0,h0=T(()=>{c();yh();ve();wd=v(Eo()),sn=v(yt());Ue();c0=v(_o()),xd=v(At()),on=v(fr()),bd=v(Ar()),d0=v(wo()),l0=v(Dn());a0();u0=v(K()),f0=v(To()),m0=v(K()),p0=e=>{(0,m0.emitWarningIfUnsupportedVersion)(process.version);let t=(0,f0.resolveDefaultsModeConfig)(e),r=()=>t().then(u0.loadConfigsForDefaultMode),n=i0(e);no(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,on.loadConfig)(io,o),bodyLengthChecker:e?.bodyLengthChecker??d0.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,wd.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Mc.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new ot},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new or}],maxAttempts:e?.maxAttempts??(0,on.loadConfig)(xd.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,on.loadConfig)(sn.NODE_REGION_CONFIG_OPTIONS,{...sn.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:bd.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,on.loadConfig)({...xd.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||l0.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??c0.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??bd.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,on.loadConfig)(sn.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,on.loadConfig)(sn.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,on.loadConfig)(wd.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var g0,y0,S0=T(()=>{c();g0=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},y0=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Cd,Td,vd,E0,_0=T(()=>{c();Cd=v(vo()),Td=v(ie()),vd=v(K());S0();E0=(e,t)=>{let r=Object.assign((0,Cd.getAwsRegionExtensionConfiguration)(e),(0,vd.getDefaultExtensionConfiguration)(e),(0,Td.getHttpHandlerExtensionConfiguration)(e),g0(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Cd.resolveAwsRegionExtensionConfiguration)(r),(0,vd.resolveDefaultRuntimeConfig)(r),(0,Td.resolveHttpHandlerRuntimeConfig)(r),y0(r))}});var Ad,w0,x0,Rd,b0,C0,T0,Id,zh,$t,ai=T(()=>{c();Ad=v(Vn()),w0=v(Gn()),x0=v(Wn()),Rd=v(In()),b0=v(yt());Ue();C0=v(go()),T0=v(pr()),Id=v(At()),zh=v(K());Hh();Sd();h0();_0();$t=class extends zh.Client{config;constructor(...[t]){let r=p0(t||{});super(r),this.initConfig=r;let n=DA(r),o=(0,Rd.resolveUserAgentConfig)(n),s=(0,Id.resolveRetryConfig)(o),i=(0,b0.resolveRegionConfig)(s),a=(0,Ad.resolveHostHeaderConfig)(i),d=(0,T0.resolveEndpointConfig)(a),l=NA(d),m=E0(l,t?.extensions||[]);this.config=m,this.middlewareStack.use((0,Rd.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Id.getRetryPlugin)(this.config)),this.middlewareStack.use((0,C0.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ad.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,w0.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,x0.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Jo(this.config,{httpAuthSchemeParametersProvider:PA,identityProviderConfigProvider:async h=>new yn({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Xo(this.config))}destroy(){super.destroy()}}});var v0,at,Pd=T(()=>{c();v0=v(K()),at=class e extends v0.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var Vh,Gh,Wh,ci,di,li,ui,fi,mi,Kh,Yh,pi,hi=T(()=>{c();Vh=v(K());Pd();Gh=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Vh.SENSITIVE_STRING}}),Wh=e=>({...e,...e.Credentials&&{Credentials:Gh(e.Credentials)}}),ci=class e extends at{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},di=class e extends at{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},li=class e extends at{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ui=class e extends at{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},fi=class e extends at{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},mi=class e extends at{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kh=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Vh.SENSITIVE_STRING}}),Yh=e=>({...e,...e.Credentials&&{Credentials:Gh(e.Credentials)}}),pi=class e extends at{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}}});var A0,Q,R0,I0,P0,O0,N0,Zq,e2,t2,r2,n2,o2,s2,i2,a2,D0,c2,d2,l2,u2,f2,m2,k0,p2,h2,M0,g2,y2,S2,E2,_2,w2,x2,Er,b2,L0,F0,B0,U0,Jh,C2,Xh,Do,T2,Qh,Zh,ko,eg,Mo,tg,rg,ng,Lo,Fo,og,sg,ig,Bo,ag,Uo,$o,cg,dg,Sr,lg,ug,fg,mg,pg,$0,hg,gg,yg,De,H0,v2,Sg=T(()=>{c();ve();A0=v(ie()),Q=v(K());hi();Pd();R0=async(e,t)=>{let r=F0,n;return n=H0({...i2(e,t),[U0]:C2,[$0]:B0}),L0(t,r,"/",void 0,n)},I0=async(e,t)=>{let r=F0,n;return n=H0({...a2(e,t),[U0]:T2,[$0]:B0}),L0(t,r,"/",void 0,n)},P0=async(e,t)=>{if(e.statusCode>=300)return N0(e,t);let r=await Cs(e.body,t),n={};return n=p2(r.AssumeRoleResult,t),{$metadata:Er(e),...n}},O0=async(e,t)=>{if(e.statusCode>=300)return N0(e,t);let r=await Cs(e.body,t),n={};return n=h2(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Er(e),...n}},N0=async(e,t)=>{let r={...e,body:await gp(e.body,t)},n=v2(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Zq(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await n2(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await o2(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await s2(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await e2(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await t2(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await r2(r,t);default:let o=r.body;return b2({output:e,parsedBody:o.Error,errorCode:n})}},Zq=async(e,t)=>{let r=e.body,n=g2(r.Error,t),o=new ci({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},e2=async(e,t)=>{let r=e.body,n=y2(r.Error,t),o=new pi({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},t2=async(e,t)=>{let r=e.body,n=S2(r.Error,t),o=new fi({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},r2=async(e,t)=>{let r=e.body,n=E2(r.Error,t),o=new mi({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},n2=async(e,t)=>{let r=e.body,n=_2(r.Error,t),o=new di({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},o2=async(e,t)=>{let r=e.body,n=w2(r.Error,t),o=new li({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},s2=async(e,t)=>{let r=e.body,n=x2(r.Error,t),o=new ui({$metadata:Er(e),...n});return(0,Q.decorateServiceException)(o,r)},i2=(e,t)=>{let r={};if(e[Uo]!=null&&(r[Uo]=e[Uo]),e[$o]!=null&&(r[$o]=e[$o]),e[Fo]!=null){let n=D0(e[Fo],t);e[Fo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[Lo]!=null&&(r[Lo]=e[Lo]),e[Mo]!=null&&(r[Mo]=e[Mo]),e[fg]!=null){let n=m2(e[fg],t);e[fg]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e[pg]!=null){let n=f2(e[pg],t);e[pg]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e[rg]!=null&&(r[rg]=e[rg]),e[lg]!=null&&(r[lg]=e[lg]),e[mg]!=null&&(r[mg]=e[mg]),e[Sr]!=null&&(r[Sr]=e[Sr]),e[sg]!=null){let n=l2(e[sg],t);e[sg]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r},a2=(e,t)=>{let r={};if(e[Uo]!=null&&(r[Uo]=e[Uo]),e[$o]!=null&&(r[$o]=e[$o]),e[gg]!=null&&(r[gg]=e[gg]),e[ig]!=null&&(r[ig]=e[ig]),e[Fo]!=null){let n=D0(e[Fo],t);e[Fo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[Lo]!=null&&(r[Lo]=e[Lo]),e[Mo]!=null&&(r[Mo]=e[Mo]),r},D0=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=c2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},c2=(e,t)=>{let r={};return e[yg]!=null&&(r[yg]=e[yg]),r},d2=(e,t)=>{let r={};return e[og]!=null&&(r[og]=e[og]),e[eg]!=null&&(r[eg]=e[eg]),r},l2=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=d2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},u2=(e,t)=>{let r={};return e[ng]!=null&&(r[ng]=e[ng]),e[hg]!=null&&(r[hg]=e[hg]),r},f2=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},m2=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=u2(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},k0=(e,t)=>{let r={};return e[Xh]!=null&&(r[Xh]=(0,Q.expectString)(e[Xh])),e[Qh]!=null&&(r[Qh]=(0,Q.expectString)(e[Qh])),r},p2=(e,t)=>{let r={};return e[ko]!=null&&(r[ko]=M0(e[ko],t)),e[Do]!=null&&(r[Do]=k0(e[Do],t)),e[Bo]!=null&&(r[Bo]=(0,Q.strictParseInt32)(e[Bo])),e[Sr]!=null&&(r[Sr]=(0,Q.expectString)(e[Sr])),r},h2=(e,t)=>{let r={};return e[ko]!=null&&(r[ko]=M0(e[ko],t)),e[dg]!=null&&(r[dg]=(0,Q.expectString)(e[dg])),e[Do]!=null&&(r[Do]=k0(e[Do],t)),e[Bo]!=null&&(r[Bo]=(0,Q.strictParseInt32)(e[Bo])),e[ag]!=null&&(r[ag]=(0,Q.expectString)(e[ag])),e[Zh]!=null&&(r[Zh]=(0,Q.expectString)(e[Zh])),e[Sr]!=null&&(r[Sr]=(0,Q.expectString)(e[Sr])),r},M0=(e,t)=>{let r={};return e[Jh]!=null&&(r[Jh]=(0,Q.expectString)(e[Jh])),e[cg]!=null&&(r[cg]=(0,Q.expectString)(e[cg])),e[ug]!=null&&(r[ug]=(0,Q.expectString)(e[ug])),e[tg]!=null&&(r[tg]=(0,Q.expectNonNull)((0,Q.parseRfc3339DateTimeWithOffset)(e[tg]))),r},g2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},y2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},S2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},E2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},_2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},w2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},x2=(e,t)=>{let r={};return e[De]!=null&&(r[De]=(0,Q.expectString)(e[De])),r},Er=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),b2=(0,Q.withBaseException)(at),L0=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return n!==void 0&&(l.hostname=n),o!==void 0&&(l.body=o),new A0.HttpRequest(l)},F0={"content-type":"application/x-www-form-urlencoded"},B0="2011-06-15",U0="Action",Jh="AccessKeyId",C2="AssumeRole",Xh="AssumedRoleId",Do="AssumedRoleUser",T2="AssumeRoleWithWebIdentity",Qh="Arn",Zh="Audience",ko="Credentials",eg="ContextAssertion",Mo="DurationSeconds",tg="Expiration",rg="ExternalId",ng="Key",Lo="Policy",Fo="PolicyArns",og="ProviderArn",sg="ProvidedContexts",ig="ProviderId",Bo="PackedPolicySize",ag="Provider",Uo="RoleArn",$o="RoleSessionName",cg="SecretAccessKey",dg="SubjectFromWebIdentityToken",Sr="SourceIdentity",lg="SerialNumber",ug="SessionToken",fg="Tags",mg="TokenCode",pg="TransitiveTagKeys",$0="Version",hg="Value",gg="WebIdentityToken",yg="arn",De="message",H0=e=>Object.entries(e).map(([t,r])=>(0,Q.extendedEncodeURIComponent)(t)+"="+(0,Q.extendedEncodeURIComponent)(r)).join("&"),v2=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var q0,j0,z0,Bn,Od=T(()=>{c();q0=v(pr()),j0=v(Qt()),z0=v(K());Sd();hi();Sg();Bn=class extends z0.Command.classBuilder().ep(yd).m(function(t,r,n,o){return[(0,j0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,q0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Wh).ser(R0).de(P0).build(){}});var V0,G0,W0,Un,Nd=T(()=>{c();V0=v(pr()),G0=v(Qt()),W0=v(K());Sd();hi();Sg();Un=class extends W0.Command.classBuilder().ep(yd).m(function(t,r,n,o){return[(0,G0.getSerdePlugin)(n,this.serialize,this.deserialize),(0,V0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Kh,Yh).ser(I0).de(O0).build(){}});var K0,A2,Dd,Y0=T(()=>{c();K0=v(K());Od();Nd();ai();A2={AssumeRoleCommand:Bn,AssumeRoleWithWebIdentityCommand:Un},Dd=class extends $t{};(0,K0.createAggregatedClient)(A2,Dd)});var J0=T(()=>{c();Od();Nd()});var X0=T(()=>{c();hi()});var Q0,Z0,eR,tR,rR,nR,oR=T(()=>{c();vt();Od();Nd();Q0="us-east-1",Z0=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},eR=async(e,t,r)=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${Q0} (STS default)`),n??o??Q0},tR=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:m=e?.parentClientConfig?.logger,region:h,requestHandler:S=e?.parentClientConfig?.requestHandler,credentialProviderLogger:y}=e,w=await eR(h,e?.parentClientConfig?.region,y),R=!nR(S);r=new t({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>n,region:w,requestHandler:R?S:void 0,logger:m})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new Bn(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let d=Z0(a),l={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...d&&{accountId:d}};return kr(l,"CREDENTIALS_STS_ASSUME_ROLE","i"),l}},rR=(e,t)=>{let r;return async n=>{if(!r){let{logger:d=e?.parentClientConfig?.logger,region:l,requestHandler:m=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=e,S=await eR(l,e?.parentClientConfig?.region,h),y=!nR(m);r=new t({profile:e?.parentClientConfig?.profile,region:S,requestHandler:y?m:void 0,logger:d})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new Un(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=Z0(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&kr(a,"RESOLVED_ACCOUNT_ID","T"),kr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},nR=e=>e?.metadata?.handlerProtocol==="h2"});var sR,iR,aR,R2,cR=T(()=>{c();oR();ai();sR=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,iR=(e={},t)=>tR(e,sR($t,t)),aR=(e={},t)=>rR(e,sR($t,t)),R2=e=>t=>e({roleAssumer:iR(t),roleAssumerWithWebIdentity:aR(t),...t})});var Eg={};Ct(Eg,{AssumeRoleCommand:()=>Bn,AssumeRoleResponseFilterSensitiveLog:()=>Wh,AssumeRoleWithWebIdentityCommand:()=>Un,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Kh,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Yh,CredentialsFilterSensitiveLog:()=>Gh,ExpiredTokenException:()=>ci,IDPCommunicationErrorException:()=>pi,IDPRejectedClaimException:()=>fi,InvalidIdentityTokenException:()=>mi,MalformedPolicyDocumentException:()=>di,PackedPolicyTooLargeException:()=>li,RegionDisabledException:()=>ui,STS:()=>Dd,STSClient:()=>$t,STSServiceException:()=>at,__Client:()=>zh.Client,decorateDefaultCredentialProvider:()=>R2,getDefaultRoleAssumer:()=>iR,getDefaultRoleAssumerWithWebIdentity:()=>aR});var _g=T(()=>{c();ai();Y0();J0();X0();cR();Pd()});var bg=I(dR=>{"use strict";c();var xg=ur(),wg=Ze(),I2=ee("child_process"),P2=ee("util"),O2=(vt(),Y(Mr)),N2=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return O2.setCredentialFeature(o,"CREDENTIALS_PROCESS","w"),o},D2=async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=P2.promisify(xg.externalDataInterceptor?.getTokenRecord?.().exec??I2.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return N2(e,a,t)}catch(i){throw new wg.CredentialsProviderError(i.message,{logger:r})}}else throw new wg.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new wg.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},k2=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await xg.parseKnownFiles(e);return D2(xg.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};dR.fromProcess=k2});var Cg=I(qt=>{"use strict";c();var M2=qt&&qt.__createBinding||(Object.create?(function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]})),L2=qt&&qt.__setModuleDefault||(Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t}),F2=qt&&qt.__importStar||(function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&M2(r,t,n[o]);return L2(r,t),r}})();Object.defineProperty(qt,"__esModule",{value:!0});qt.fromWebToken=void 0;var B2=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:d}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:m}=await Promise.resolve().then(()=>F2((_g(),Y(Eg))));l=m({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return l({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:d})};qt.fromWebToken=B2});var uR=I(kd=>{"use strict";c();Object.defineProperty(kd,"__esModule",{value:!0});kd.fromTokenFile=void 0;var U2=(vt(),Y(Mr)),$2=Ze(),H2=ur(),q2=ee("fs"),j2=Cg(),lR="AWS_WEB_IDENTITY_TOKEN_FILE",z2="AWS_ROLE_ARN",V2="AWS_ROLE_SESSION_NAME",G2=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=e?.webIdentityTokenFile??process.env[lR],r=e?.roleArn??process.env[z2],n=e?.roleSessionName??process.env[V2];if(!t||!r)throw new $2.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,j2.fromWebToken)({...e,webIdentityToken:H2.externalDataInterceptor?.getTokenRecord?.()[t]??(0,q2.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[lR]&&(0,U2.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};kd.fromTokenFile=G2});var Tg=I(gi=>{"use strict";c();var fR=uR(),mR=Cg();Object.keys(fR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(gi,e)&&Object.defineProperty(gi,e,{enumerable:!0,get:function(){return fR[e]}})});Object.keys(mR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(gi,e)&&Object.defineProperty(gi,e,{enumerable:!0,get:function(){return mR[e]}})})});var ER=I(SR=>{"use strict";c();var Ag=ur(),yi=Ze(),an=(vt(),Y(Mr)),W2=(e,t,r)=>{let n={EcsContainer:async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>v(ph())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>v(Ls()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>yi.chain(s(o??{}),i(o))().then(vg)},Ec2InstanceMetadata:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>v(Ls()));return async()=>s(o)().then(vg)},Environment:async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>v(ih()));return async()=>s(o)().then(vg)}};if(e in n)return n[e];throw new yi.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},vg=e=>an.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),K2=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Y2(e,{profile:t,logger:r})||J2(e,{profile:t,logger:r})),Y2=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},J2=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},X2=async(e,t,r,n={})=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:s,region:i}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:d}=await Promise.resolve().then(()=>(_g(),Eg));r.roleAssumer=d({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:i??r?.parentClientConfig?.region}},r.clientPlugins)}if(s&&s in n)throw new yi.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Ag.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${s?`source_profile=[${s}]`:`profile=[${e}]`}`);let a=s?yR(s,t,r,{...n,[s]:!0},pR(t[s]??{})):(await W2(o.credential_source,e,r.logger)(r))();if(pR(o))return a.then(d=>an.setCredentialFeature(d,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let d={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:l}=o;if(l){if(!r.mfaCodeProvider)throw new yi.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});d.SerialNumber=l,d.TokenCode=await r.mfaCodeProvider(l)}let m=await a;return r.roleAssumer(m,d).then(h=>an.setCredentialFeature(h,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},pR=e=>!e.role_arn&&!!e.credential_source,Q2=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Z2=async(e,t)=>Promise.resolve().then(()=>v(bg())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>an.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),ej=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>v($h()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(o=>t.sso_session?an.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO","r"):an.setCredentialFeature(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},tj=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),hR=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,gR=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return an.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},rj=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,nj=async(e,t)=>Promise.resolve().then(()=>v(Tg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>an.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),yR=async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&hR(s))return gR(s,r);if(o||K2(s,{profile:e,logger:r.logger}))return X2(e,t,r,n);if(hR(s))return gR(s,r);if(rj(s))return nj(s,r);if(Q2(s))return Z2(r,e);if(tj(s))return await ej(e,s,r);throw new yi.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},oj=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await Ag.parseKnownFiles(r);return yR(Ag.getProfileName({profile:e.profile??t?.profile}),n,r)};SR.fromIni=oj});var Ig=I(Md=>{"use strict";c();var Rg=ih(),$n=Ze(),sj=ur(),_R="AWS_EC2_METADATA_DISABLED",ij=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>v(Ls()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>v(ph()));return $n.chain(s(e),n(e))}return process.env[_R]&&process.env[_R]!=="false"?async()=>{throw new $n.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))},wR=!1,aj=(e={})=>$n.memoize($n.chain(async()=>{if(e.profile??process.env[sj.ENV_PROFILE])throw process.env[Rg.ENV_KEY]&&process.env[Rg.ENV_SECRET]&&(wR||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),wR=!0)),new $n.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Rg.fromEnv(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e;if(!t&&!r&&!n&&!o&&!s)throw new $n.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:i}=await Promise.resolve().then(()=>v($h()));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>v(ER()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>v(bg()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>v(Tg()));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await ij(e))()),async()=>{throw new $n.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),bR,xR),xR=e=>e?.expiration!==void 0,bR=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Md.credentialsTreatedAsExpired=bR;Md.credentialsWillNeedRefresh=xR;Md.defaultProvider=aj});var AR=I((Foe,vR)=>{"use strict";c();var Fd=Object.defineProperty,cj=Object.getOwnPropertyDescriptor,dj=Object.getOwnPropertyNames,lj=Object.prototype.hasOwnProperty,Bd=(e,t)=>Fd(e,"name",{value:t,configurable:!0}),uj=(e,t)=>{for(var r in t)Fd(e,r,{get:t[r],enumerable:!0})},fj=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of dj(t))!lj.call(e,o)&&o!==r&&Fd(e,o,{get:()=>t[o],enumerable:!(n=cj(t,o))||n.enumerable});return e},mj=e=>fj(Fd({},"__esModule",{value:!0}),e),CR={};uj(CR,{eventStreamPayloadHandlerProvider:()=>yj});vR.exports=mj(CR);var pj=fc(),Ld=ee("stream"),hj=class extends Ld.Transform{static{Bd(this,"EventSigningStream")}priorSignature;messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){super({autoDestroy:!0,readableObjectMode:!0,writableObjectMode:!0,...e}),this.priorSignature=e.priorSignature,this.eventStreamCodec=e.eventStreamCodec,this.messageSigner=e.messageSigner,this.systemClockOffsetProvider=e.systemClockOffsetProvider}async _transform(e,t,r){try{let n=new Date(Date.now()+await this.systemClockOffsetProvider()),o={":date":{type:"timestamp",value:n}},s=await this.messageSigner.sign({message:{body:e,headers:o},priorSignature:this.priorSignature},{signingDate:n});this.priorSignature=s.signature;let i=this.eventStreamCodec.encode({headers:{...o,":chunk-signature":{type:"binary",value:TR(s.signature)}},body:e});return this.push(i),r()}catch(n){r(n)}}};function TR(e){let t=Buffer.from(e,"hex");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)}Bd(TR,"getSignatureBinary");var gj=class{static{Bd(this,"EventStreamPayloadHandler")}messageSigner;eventStreamCodec;systemClockOffsetProvider;constructor(e){this.messageSigner=e.messageSigner,this.eventStreamCodec=new pj.EventStreamCodec(e.utf8Encoder,e.utf8Decoder),this.systemClockOffsetProvider=async()=>e.systemClockOffset??0}async handle(e,t,r={}){let n=t.request,{body:o,query:s}=n;if(!(o instanceof Ld.Readable))throw new Error("Eventstream payload must be a Readable stream.");let i=o;n.body=new Ld.PassThrough({objectMode:!0});let d=n.headers?.authorization?.match(/Signature=([\w]+)$/)?.[1]??s?.["X-Amz-Signature"]??"",l=new hj({priorSignature:d,eventStreamCodec:this.eventStreamCodec,messageSigner:await this.messageSigner(),systemClockOffsetProvider:this.systemClockOffsetProvider});(0,Ld.pipeline)(i,l,n.body,h=>{if(h)throw h});let m;try{m=await e(t)}catch(h){throw n.body.end(),h}return m}},yj=Bd(e=>new gj(e),"eventStreamPayloadHandlerProvider")});var RR=I(Pg=>{"use strict";c();var Sj=Lp(),Ej=ee("stream");async function*_j(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Ud=class{universalMarshaller;constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Sj.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:_j(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return Ej.Readable.from(this.universalMarshaller.serialize(t,r))}},wj=e=>new Ud(e);Pg.EventStreamMarshaller=Ud;Pg.eventStreamSerdeProvider=wj});var qR=I($d=>{"use strict";c();Object.defineProperty($d,"__esModule",{value:!0});$d.ruleSet=void 0;var UR="required",zt="fn",Vt="argv",qo="ref",IR=!0,PR="isSet",Ei="booleanEquals",Ho="error",Si="endpoint",et="tree",Og="PartitionResult",OR={[UR]:!1,type:"String"},NR={[UR]:!0,default:!1,type:"Boolean"},DR={[qo]:"Endpoint"},$R={[zt]:Ei,[Vt]:[{[qo]:"UseFIPS"},!0]},HR={[zt]:Ei,[Vt]:[{[qo]:"UseDualStack"},!0]},jt={},kR={[zt]:"getAttr",[Vt]:[{[qo]:Og},"supportsFIPS"]},MR={[zt]:Ei,[Vt]:[!0,{[zt]:"getAttr",[Vt]:[{[qo]:Og},"supportsDualStack"]}]},LR=[$R],FR=[HR],BR=[{[qo]:"Region"}],xj={version:"1.0",parameters:{Region:OR,UseDualStack:NR,UseFIPS:NR,Endpoint:OR},rules:[{conditions:[{[zt]:PR,[Vt]:[DR]}],rules:[{conditions:LR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ho},{rules:[{conditions:FR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ho},{endpoint:{url:DR,properties:jt,headers:jt},type:Si}],type:et}],type:et},{rules:[{conditions:[{[zt]:PR,[Vt]:BR}],rules:[{conditions:[{[zt]:"aws.partition",[Vt]:BR,assign:Og}],rules:[{conditions:[$R,HR],rules:[{conditions:[{[zt]:Ei,[Vt]:[IR,kR]},MR],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:Si}],type:et}],type:et},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ho}],type:et},{conditions:LR,rules:[{conditions:[{[zt]:Ei,[Vt]:[kR,IR]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:Si}],type:et}],type:et},{error:"FIPS is enabled but this partition does not support FIPS",type:Ho}],type:et},{conditions:FR,rules:[{conditions:[MR],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:jt,headers:jt},type:Si}],type:et}],type:et},{error:"DualStack is enabled but this partition does not support DualStack",type:Ho}],type:et},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:jt,headers:jt},type:Si}],type:et}],type:et}],type:et},{error:"Invalid Configuration: Missing Region",type:Ho}],type:et}]};$d.ruleSet=xj});var jR=I(Hd=>{"use strict";c();Object.defineProperty(Hd,"__esModule",{value:!0});Hd.defaultEndpointResolver=void 0;var bj=_n(),Ng=En(),Cj=qR(),Tj=new Ng.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),vj=(e,t={})=>Tj.get(e,()=>(0,Ng.resolveEndpoint)(Cj.ruleSet,{endpointParams:e,logger:t.logger}));Hd.defaultEndpointResolver=vj;Ng.customEndpointFunctions.aws=bj.awsEndpointFunctions});var GR=I(qd=>{"use strict";c();Object.defineProperty(qd,"__esModule",{value:!0});qd.getRuntimeConfig=void 0;var Aj=(ve(),Y(st)),Rj=(Ue(),Y(kt)),Ij=K(),Pj=sr(),zR=Fe(),VR=Le(),Oj=sh(),Nj=jR(),Dj=e=>({apiVersion:"2023-09-30",base64Decoder:e?.base64Decoder??zR.fromBase64,base64Encoder:e?.base64Encoder??zR.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Nj.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Oj.defaultBedrockRuntimeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Aj.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#httpBearerAuth"),signer:new Rj.HttpBearerAuthSigner}],logger:e?.logger??new Ij.NoOpLogger,serviceId:e?.serviceId??"Bedrock Runtime",urlParser:e?.urlParser??Pj.parseUrl,utf8Decoder:e?.utf8Decoder??VR.fromUtf8,utf8Encoder:e?.utf8Encoder??VR.toUtf8});qd.getRuntimeConfig=Dj});var XR=I(zd=>{"use strict";c();Object.defineProperty(zd,"__esModule",{value:!0});zd.getRuntimeConfig=void 0;var kj=(Or(),Y(Pr)),Mj=kj.__importDefault(jC()),Dg=(ve(),Y(st)),Lj=Ig(),Fj=AR(),WR=Dh(),KR=Eo(),jd=yt(),Bj=(Ue(),Y(kt)),Uj=RR(),$j=_o(),YR=At(),Hn=fr(),JR=Ar(),Hj=wo(),qj=Dn(),jj=GR(),zj=K(),Vj=To(),Gj=K(),Wj=e=>{(0,Gj.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Vj.resolveDefaultsModeConfig)(e),r=()=>t().then(zj.loadConfigsForDefaultMode),n=(0,jj.getRuntimeConfig)(e);(0,Dg.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger,signingName:"bedrock"};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Hn.loadConfig)(Dg.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??Hj.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??Lj.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,KR.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Mj.default.version}),eventStreamPayloadHandlerProvider:e?.eventStreamPayloadHandlerProvider??Fj.eventStreamPayloadHandlerProvider,eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Uj.eventStreamSerdeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new Dg.AwsSdkSigV4Signer},{schemeId:"smithy.api#httpBearerAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#httpBearerAuth")||(async i=>{try{return await(0,WR.fromEnvSigningName)({signingName:"bedrock"})()}catch{return await(0,WR.nodeProvider)(i)(i)}}),signer:new Bj.HttpBearerAuthSigner}],maxAttempts:e?.maxAttempts??(0,Hn.loadConfig)(YR.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Hn.loadConfig)(jd.NODE_REGION_CONFIG_OPTIONS,{...jd.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:JR.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,Hn.loadConfig)({...YR.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||qj.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??$j.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??JR.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Hn.loadConfig)(jd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Hn.loadConfig)(jd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Hn.loadConfig)(KR.NODE_APP_ID_CONFIG_OPTIONS,o)}};zd.getRuntimeConfig=Wj});var EP=I(E=>{"use strict";c();var uI=fy(),QR=Vn(),Kj=Gn(),Yj=Wn(),ZR=In(),fI=Bb(),Jj=yt(),ct=(Ue(),Y(kt)),Xj=Jb(),Qj=go(),It=pr(),eI=At(),p=K(),tI=sh(),Zj=XR(),rI=vo(),nI=ie(),Gt=Qt(),te=(ve(),Y(st)),ez=cs(),tz=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),Wt={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},rz=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials,o=e.token;return{setHttpAuthScheme(s){let i=t.findIndex(a=>a.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n},setToken(s){o=s},token(){return o}}},nz=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials(),token:e.token()}),oz=(e,t)=>{let r=Object.assign(rI.getAwsRegionExtensionConfiguration(e),p.getDefaultExtensionConfiguration(e),nI.getHttpHandlerExtensionConfiguration(e),rz(e));return t.forEach(n=>n.configure(r)),Object.assign(e,rI.resolveAwsRegionExtensionConfiguration(r),p.resolveDefaultRuntimeConfig(r),nI.resolveHttpHandlerRuntimeConfig(r),nz(r))},_i=class extends p.Client{config;constructor(...[t]){let r=Zj.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=tz(r),o=ZR.resolveUserAgentConfig(n),s=eI.resolveRetryConfig(o),i=Jj.resolveRegionConfig(s),a=QR.resolveHostHeaderConfig(i),d=It.resolveEndpointConfig(a),l=Xj.resolveEventStreamSerdeConfig(d),m=tI.resolveHttpAuthSchemeConfig(l),h=uI.resolveEventStreamConfig(m),S=fI.resolveWebSocketConfig(h),y=oz(S,t?.extensions||[]);this.config=y,this.middlewareStack.use(ZR.getUserAgentPlugin(this.config)),this.middlewareStack.use(eI.getRetryPlugin(this.config)),this.middlewareStack.use(Qj.getContentLengthPlugin(this.config)),this.middlewareStack.use(QR.getHostHeaderPlugin(this.config)),this.middlewareStack.use(Kj.getLoggerPlugin(this.config)),this.middlewareStack.use(Yj.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ct.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:tI.defaultBedrockRuntimeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async w=>new ct.DefaultIdentityProviderConfig({"aws.auth#sigv4":w.credentials,"smithy.api#httpBearerAuth":w.token})})),this.middlewareStack.use(ct.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Je=class e extends p.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Vd=class e extends Je{name="AccessDeniedException";$fault="client";constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};E.AsyncInvokeOutputDataConfig=void 0;(function(e){e.visit=(t,r)=>t.s3OutputDataConfig!==void 0?r.s3OutputDataConfig(t.s3OutputDataConfig):r._(t.$unknown[0],t.$unknown[1])})(E.AsyncInvokeOutputDataConfig||(E.AsyncInvokeOutputDataConfig={}));var sz={COMPLETED:"Completed",FAILED:"Failed",IN_PROGRESS:"InProgress"},Gd=class e extends Je{name="InternalServerException";$fault="server";constructor(t){super({name:"InternalServerException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},Wd=class e extends Je{name="ThrottlingException";$fault="client";constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Kd=class e extends Je{name="ValidationException";$fault="client";constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},iz={SUBMISSION_TIME:"SubmissionTime"},az={ASCENDING:"Ascending",DESCENDING:"Descending"},Yd=class e extends Je{name="ConflictException";$fault="client";constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Jd=class e extends Je{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xd=class e extends Je{name="ServiceQuotaExceededException";$fault="client";constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Qd=class e extends Je{name="ServiceUnavailableException";$fault="server";constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype)}},cz={JPEG:"jpeg",PNG:"png"};E.GuardrailImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailImageSource||(E.GuardrailImageSource={}));var dz={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"};E.GuardrailContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailContentBlock||(E.GuardrailContentBlock={}));var lz={FULL:"FULL",INTERVENTIONS:"INTERVENTIONS"},uz={INPUT:"INPUT",OUTPUT:"OUTPUT"},fz={GUARDRAIL_INTERVENED:"GUARDRAIL_INTERVENED",NONE:"NONE"},mz={ALWAYS_FALSE:"ALWAYS_FALSE",ALWAYS_TRUE:"ALWAYS_TRUE"};E.GuardrailAutomatedReasoningFinding=void 0;(function(e){e.visit=(t,r)=>t.valid!==void 0?r.valid(t.valid):t.invalid!==void 0?r.invalid(t.invalid):t.satisfiable!==void 0?r.satisfiable(t.satisfiable):t.impossible!==void 0?r.impossible(t.impossible):t.translationAmbiguous!==void 0?r.translationAmbiguous(t.translationAmbiguous):t.tooComplex!==void 0?r.tooComplex(t.tooComplex):t.noTranslations!==void 0?r.noTranslations(t.noTranslations):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailAutomatedReasoningFinding||(E.GuardrailAutomatedReasoningFinding={}));var pz={BLOCKED:"BLOCKED",NONE:"NONE"},hz={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},gz={HIGH:"HIGH",LOW:"LOW",MEDIUM:"MEDIUM",NONE:"NONE"},yz={HATE:"HATE",INSULTS:"INSULTS",MISCONDUCT:"MISCONDUCT",PROMPT_ATTACK:"PROMPT_ATTACK",SEXUAL:"SEXUAL",VIOLENCE:"VIOLENCE"},Sz={BLOCKED:"BLOCKED",NONE:"NONE"},Ez={GROUNDING:"GROUNDING",RELEVANCE:"RELEVANCE"},_z={ANONYMIZED:"ANONYMIZED",BLOCKED:"BLOCKED",NONE:"NONE"},wz={ADDRESS:"ADDRESS",AGE:"AGE",AWS_ACCESS_KEY:"AWS_ACCESS_KEY",AWS_SECRET_KEY:"AWS_SECRET_KEY",CA_HEALTH_NUMBER:"CA_HEALTH_NUMBER",CA_SOCIAL_INSURANCE_NUMBER:"CA_SOCIAL_INSURANCE_NUMBER",CREDIT_DEBIT_CARD_CVV:"CREDIT_DEBIT_CARD_CVV",CREDIT_DEBIT_CARD_EXPIRY:"CREDIT_DEBIT_CARD_EXPIRY",CREDIT_DEBIT_CARD_NUMBER:"CREDIT_DEBIT_CARD_NUMBER",DRIVER_ID:"DRIVER_ID",EMAIL:"EMAIL",INTERNATIONAL_BANK_ACCOUNT_NUMBER:"INTERNATIONAL_BANK_ACCOUNT_NUMBER",IP_ADDRESS:"IP_ADDRESS",LICENSE_PLATE:"LICENSE_PLATE",MAC_ADDRESS:"MAC_ADDRESS",NAME:"NAME",PASSWORD:"PASSWORD",PHONE:"PHONE",PIN:"PIN",SWIFT_CODE:"SWIFT_CODE",UK_NATIONAL_HEALTH_SERVICE_NUMBER:"UK_NATIONAL_HEALTH_SERVICE_NUMBER",UK_NATIONAL_INSURANCE_NUMBER:"UK_NATIONAL_INSURANCE_NUMBER",UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER:"UK_UNIQUE_TAXPAYER_REFERENCE_NUMBER",URL:"URL",USERNAME:"USERNAME",US_BANK_ACCOUNT_NUMBER:"US_BANK_ACCOUNT_NUMBER",US_BANK_ROUTING_NUMBER:"US_BANK_ROUTING_NUMBER",US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER:"US_INDIVIDUAL_TAX_IDENTIFICATION_NUMBER",US_PASSPORT_NUMBER:"US_PASSPORT_NUMBER",US_SOCIAL_SECURITY_NUMBER:"US_SOCIAL_SECURITY_NUMBER",VEHICLE_IDENTIFICATION_NUMBER:"VEHICLE_IDENTIFICATION_NUMBER"},xz={BLOCKED:"BLOCKED",NONE:"NONE"},bz={DENY:"DENY"},Cz={BLOCKED:"BLOCKED",NONE:"NONE"},Tz={PROFANITY:"PROFANITY"},vz={DISABLED:"disabled",ENABLED:"enabled",ENABLED_FULL:"enabled_full"},Az={DEFAULT:"default"};E.CitationLocation=void 0;(function(e){e.visit=(t,r)=>t.documentChar!==void 0?r.documentChar(t.documentChar):t.documentPage!==void 0?r.documentPage(t.documentPage):t.documentChunk!==void 0?r.documentChunk(t.documentChunk):r._(t.$unknown[0],t.$unknown[1])})(E.CitationLocation||(E.CitationLocation={}));E.CitationSourceContent=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.CitationSourceContent||(E.CitationSourceContent={}));E.CitationGeneratedContent=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.CitationGeneratedContent||(E.CitationGeneratedContent={}));var Rz={CSV:"csv",DOC:"doc",DOCX:"docx",HTML:"html",MD:"md",PDF:"pdf",TXT:"txt",XLS:"xls",XLSX:"xlsx"};E.DocumentContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.DocumentContentBlock||(E.DocumentContentBlock={}));E.DocumentSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):t.text!==void 0?r.text(t.text):t.content!==void 0?r.content(t.content):r._(t.$unknown[0],t.$unknown[1])})(E.DocumentSource||(E.DocumentSource={}));var Iz={JPEG:"jpeg",PNG:"png"};E.GuardrailConverseImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailConverseImageSource||(E.GuardrailConverseImageSource={}));var Pz={GROUNDING_SOURCE:"grounding_source",GUARD_CONTENT:"guard_content",QUERY:"query"};E.GuardrailConverseContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):r._(t.$unknown[0],t.$unknown[1])})(E.GuardrailConverseContentBlock||(E.GuardrailConverseContentBlock={}));var Oz={GIF:"gif",JPEG:"jpeg",PNG:"png",WEBP:"webp"};E.ImageSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1])})(E.ImageSource||(E.ImageSource={}));E.ReasoningContentBlock=void 0;(function(e){e.visit=(t,r)=>t.reasoningText!==void 0?r.reasoningText(t.reasoningText):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):r._(t.$unknown[0],t.$unknown[1])})(E.ReasoningContentBlock||(E.ReasoningContentBlock={}));var Nz={FLV:"flv",MKV:"mkv",MOV:"mov",MP4:"mp4",MPEG:"mpeg",MPG:"mpg",THREE_GP:"three_gp",WEBM:"webm",WMV:"wmv"};E.VideoSource=void 0;(function(e){e.visit=(t,r)=>t.bytes!==void 0?r.bytes(t.bytes):t.s3Location!==void 0?r.s3Location(t.s3Location):r._(t.$unknown[0],t.$unknown[1])})(E.VideoSource||(E.VideoSource={}));E.ToolResultContentBlock=void 0;(function(e){e.visit=(t,r)=>t.json!==void 0?r.json(t.json):t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):r._(t.$unknown[0],t.$unknown[1])})(E.ToolResultContentBlock||(E.ToolResultContentBlock={}));var Dz={ERROR:"error",SUCCESS:"success"};E.ContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.image!==void 0?r.image(t.image):t.document!==void 0?r.document(t.document):t.video!==void 0?r.video(t.video):t.toolUse!==void 0?r.toolUse(t.toolUse):t.toolResult!==void 0?r.toolResult(t.toolResult):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citationsContent!==void 0?r.citationsContent(t.citationsContent):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlock||(E.ContentBlock={}));var kz={ASSISTANT:"assistant",USER:"user"},Mz={OPTIMIZED:"optimized",STANDARD:"standard"};E.PromptVariableValues=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):r._(t.$unknown[0],t.$unknown[1])})(E.PromptVariableValues||(E.PromptVariableValues={}));E.SystemContentBlock=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.guardContent!==void 0?r.guardContent(t.guardContent):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1])})(E.SystemContentBlock||(E.SystemContentBlock={}));E.ToolChoice=void 0;(function(e){e.visit=(t,r)=>t.auto!==void 0?r.auto(t.auto):t.any!==void 0?r.any(t.any):t.tool!==void 0?r.tool(t.tool):r._(t.$unknown[0],t.$unknown[1])})(E.ToolChoice||(E.ToolChoice={}));E.ToolInputSchema=void 0;(function(e){e.visit=(t,r)=>t.json!==void 0?r.json(t.json):r._(t.$unknown[0],t.$unknown[1])})(E.ToolInputSchema||(E.ToolInputSchema={}));E.Tool=void 0;(function(e){e.visit=(t,r)=>t.toolSpec!==void 0?r.toolSpec(t.toolSpec):t.cachePoint!==void 0?r.cachePoint(t.cachePoint):r._(t.$unknown[0],t.$unknown[1])})(E.Tool||(E.Tool={}));E.ConverseOutput=void 0;(function(e){e.visit=(t,r)=>t.message!==void 0?r.message(t.message):r._(t.$unknown[0],t.$unknown[1])})(E.ConverseOutput||(E.ConverseOutput={}));var Lz={CONTENT_FILTERED:"content_filtered",END_TURN:"end_turn",GUARDRAIL_INTERVENED:"guardrail_intervened",MAX_TOKENS:"max_tokens",MODEL_CONTEXT_WINDOW_EXCEEDED:"model_context_window_exceeded",STOP_SEQUENCE:"stop_sequence",TOOL_USE:"tool_use"},Zd=class e extends Je{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(t){super({name:"ModelErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.resourceName=t.resourceName}},el=class e extends Je{name="ModelNotReadyException";$fault="client";$retryable={};constructor(t){super({name:"ModelNotReadyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},tl=class e extends Je{name="ModelTimeoutException";$fault="client";constructor(t){super({name:"ModelTimeoutException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Fz={ASYNC:"async",SYNC:"sync"};E.ReasoningContentBlockDelta=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.redactedContent!==void 0?r.redactedContent(t.redactedContent):t.signature!==void 0?r.signature(t.signature):r._(t.$unknown[0],t.$unknown[1])})(E.ReasoningContentBlockDelta||(E.ReasoningContentBlockDelta={}));E.ContentBlockDelta=void 0;(function(e){e.visit=(t,r)=>t.text!==void 0?r.text(t.text):t.toolUse!==void 0?r.toolUse(t.toolUse):t.reasoningContent!==void 0?r.reasoningContent(t.reasoningContent):t.citation!==void 0?r.citation(t.citation):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlockDelta||(E.ContentBlockDelta={}));E.ContentBlockStart=void 0;(function(e){e.visit=(t,r)=>t.toolUse!==void 0?r.toolUse(t.toolUse):r._(t.$unknown[0],t.$unknown[1])})(E.ContentBlockStart||(E.ContentBlockStart={}));var rl=class e extends Je{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(t){super({name:"ModelStreamErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.originalStatusCode=t.originalStatusCode,this.originalMessage=t.originalMessage}};E.ConverseStreamOutput=void 0;(function(e){e.visit=(t,r)=>t.messageStart!==void 0?r.messageStart(t.messageStart):t.contentBlockStart!==void 0?r.contentBlockStart(t.contentBlockStart):t.contentBlockDelta!==void 0?r.contentBlockDelta(t.contentBlockDelta):t.contentBlockStop!==void 0?r.contentBlockStop(t.contentBlockStop):t.messageStop!==void 0?r.messageStop(t.messageStop):t.metadata!==void 0?r.metadata(t.metadata):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.ConverseStreamOutput||(E.ConverseStreamOutput={}));var Bz={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_FULL:"ENABLED_FULL"};E.InvokeModelWithBidirectionalStreamInput=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):r._(t.$unknown[0],t.$unknown[1])})(E.InvokeModelWithBidirectionalStreamInput||(E.InvokeModelWithBidirectionalStreamInput={}));E.InvokeModelWithBidirectionalStreamOutput=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.InvokeModelWithBidirectionalStreamOutput||(E.InvokeModelWithBidirectionalStreamOutput={}));E.ResponseStream=void 0;(function(e){e.visit=(t,r)=>t.chunk!==void 0?r.chunk(t.chunk):t.internalServerException!==void 0?r.internalServerException(t.internalServerException):t.modelStreamErrorException!==void 0?r.modelStreamErrorException(t.modelStreamErrorException):t.validationException!==void 0?r.validationException(t.validationException):t.throttlingException!==void 0?r.throttlingException(t.throttlingException):t.modelTimeoutException!==void 0?r.modelTimeoutException(t.modelTimeoutException):t.serviceUnavailableException!==void 0?r.serviceUnavailableException(t.serviceUnavailableException):r._(t.$unknown[0],t.$unknown[1])})(E.ResponseStream||(E.ResponseStream={}));E.CountTokensInput=void 0;(function(e){e.visit=(t,r)=>t.invokeModel!==void 0?r.invokeModel(t.invokeModel):t.converse!==void 0?r.converse(t.converse):r._(t.$unknown[0],t.$unknown[1])})(E.CountTokensInput||(E.CountTokensInput={}));var mI=e=>({...e,...e.failureMessage&&{failureMessage:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),pI=e=>({...e,...e.failureMessage&&{failureMessage:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),hI=e=>({...e,...e.asyncInvokeSummaries&&{asyncInvokeSummaries:e.asyncInvokeSummaries.map(t=>pI(t))}}),gI=e=>({...e,...e.modelInput&&{modelInput:p.SENSITIVE_STRING},...e.outputDataConfig&&{outputDataConfig:e.outputDataConfig}}),Uz=e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},$z=e=>({...e,...e.source&&{source:p.SENSITIVE_STRING}}),yI=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},SI=e=>({...e,...e.content&&{content:e.content.map(t=>yI(t))}}),jo=e=>({...e,...e.logic&&{logic:p.SENSITIVE_STRING},...e.naturalLanguage&&{naturalLanguage:p.SENSITIVE_STRING}}),xi=e=>({...e,...e.premises&&{premises:e.premises.map(t=>jo(t))},...e.claims&&{claims:e.claims.map(t=>jo(t))}}),kg=e=>({...e,...e.text&&{text:p.SENSITIVE_STRING}}),bi=e=>({...e,...e.premises&&{premises:e.premises.map(t=>jo(t))},...e.claims&&{claims:e.claims.map(t=>jo(t))},...e.untranslatedPremises&&{untranslatedPremises:e.untranslatedPremises.map(t=>kg(t))},...e.untranslatedClaims&&{untranslatedClaims:e.untranslatedClaims.map(t=>kg(t))}}),EI=e=>({...e,...e.translation&&{translation:bi(e.translation)},...e.logicWarning&&{logicWarning:xi(e.logicWarning)}}),_I=e=>({...e,...e.translation&&{translation:bi(e.translation)},...e.logicWarning&&{logicWarning:xi(e.logicWarning)}}),nl=e=>({...e,...e.statements&&{statements:e.statements.map(t=>jo(t))}}),wI=e=>({...e,...e.translation&&{translation:bi(e.translation)},...e.claimsTrueScenario&&{claimsTrueScenario:nl(e.claimsTrueScenario)},...e.claimsFalseScenario&&{claimsFalseScenario:nl(e.claimsFalseScenario)},...e.logicWarning&&{logicWarning:xi(e.logicWarning)}}),Hz=e=>({...e}),xI=e=>({...e}),bI=e=>({...e,...e.translation&&{translation:bi(e.translation)},...e.claimsTrueScenario&&{claimsTrueScenario:nl(e.claimsTrueScenario)},...e.logicWarning&&{logicWarning:xi(e.logicWarning)}}),CI=e=>{if(e.valid!==void 0)return{valid:bI(e.valid)};if(e.invalid!==void 0)return{invalid:_I(e.invalid)};if(e.satisfiable!==void 0)return{satisfiable:wI(e.satisfiable)};if(e.impossible!==void 0)return{impossible:EI(e.impossible)};if(e.translationAmbiguous!==void 0)return{translationAmbiguous:xI(e.translationAmbiguous)};if(e.tooComplex!==void 0)return{tooComplex:e.tooComplex};if(e.noTranslations!==void 0)return{noTranslations:e.noTranslations};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},TI=e=>({...e,...e.findings&&{findings:e.findings.map(t=>CI(t))}}),ol=e=>({...e,...e.automatedReasoningPolicy&&{automatedReasoningPolicy:TI(e.automatedReasoningPolicy)}}),vI=e=>({...e,...e.assessments&&{assessments:e.assessments.map(t=>ol(t))}}),qz=e=>{if(e.bytes!==void 0)return{bytes:e.bytes};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},jz=e=>({...e,...e.source&&{source:p.SENSITIVE_STRING}}),Lg=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},zz=e=>({...e}),Vz=e=>{if(e.reasoningText!==void 0)return{reasoningText:p.SENSITIVE_STRING};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},AI=e=>{if(e.text!==void 0)return{text:e.text};if(e.image!==void 0)return{image:e.image};if(e.document!==void 0)return{document:e.document};if(e.video!==void 0)return{video:e.video};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.toolResult!==void 0)return{toolResult:e.toolResult};if(e.guardContent!==void 0)return{guardContent:Lg(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.reasoningContent!==void 0)return{reasoningContent:p.SENSITIVE_STRING};if(e.citationsContent!==void 0)return{citationsContent:e.citationsContent};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},Ci=e=>({...e,...e.content&&{content:e.content.map(t=>AI(t))}}),hl=e=>{if(e.text!==void 0)return{text:e.text};if(e.guardContent!==void 0)return{guardContent:Lg(e.guardContent)};if(e.cachePoint!==void 0)return{cachePoint:e.cachePoint};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},RI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>Ci(t))},...e.system&&{system:e.system.map(t=>hl(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:p.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:p.SENSITIVE_STRING}}),II=e=>{if(e.message!==void 0)return{message:Ci(e.message)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},Fg=e=>({...e,...e.inputAssessment&&{inputAssessment:Object.entries(e.inputAssessment).reduce((t,[r,n])=>(t[r]=ol(n),t),{})},...e.outputAssessments&&{outputAssessments:Object.entries(e.outputAssessments).reduce((t,[r,n])=>(t[r]=n.map(o=>ol(o)),t),{})}}),PI=e=>({...e,...e.guardrail&&{guardrail:Fg(e.guardrail)}}),OI=e=>({...e,...e.output&&{output:II(e.output)},...e.trace&&{trace:PI(e.trace)}}),NI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>Ci(t))},...e.system&&{system:e.system.map(t=>hl(t))},...e.toolConfig&&{toolConfig:e.toolConfig},...e.promptVariables&&{promptVariables:p.SENSITIVE_STRING},...e.requestMetadata&&{requestMetadata:p.SENSITIVE_STRING}}),Gz=e=>{if(e.text!==void 0)return{text:e.text};if(e.redactedContent!==void 0)return{redactedContent:e.redactedContent};if(e.signature!==void 0)return{signature:e.signature};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},DI=e=>{if(e.text!==void 0)return{text:e.text};if(e.toolUse!==void 0)return{toolUse:e.toolUse};if(e.reasoningContent!==void 0)return{reasoningContent:p.SENSITIVE_STRING};if(e.citation!==void 0)return{citation:e.citation};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},kI=e=>({...e,...e.delta&&{delta:DI(e.delta)}}),MI=e=>({...e,...e.guardrail&&{guardrail:Fg(e.guardrail)}}),LI=e=>({...e,...e.trace&&{trace:MI(e.trace)}}),Wz=e=>{if(e.messageStart!==void 0)return{messageStart:e.messageStart};if(e.contentBlockStart!==void 0)return{contentBlockStart:e.contentBlockStart};if(e.contentBlockDelta!==void 0)return{contentBlockDelta:kI(e.contentBlockDelta)};if(e.contentBlockStop!==void 0)return{contentBlockStop:e.contentBlockStop};if(e.messageStop!==void 0)return{messageStop:e.messageStop};if(e.metadata!==void 0)return{metadata:LI(e.metadata)};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},FI=e=>({...e,...e.stream&&{stream:"STREAMING_CONTENT"}}),BI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),UI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),Kz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Yz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},$I=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),Jz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Xz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},HI=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),qI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),Qz=e=>({...e,...e.bytes&&{bytes:p.SENSITIVE_STRING}}),Zz=e=>{if(e.chunk!==void 0)return{chunk:p.SENSITIVE_STRING};if(e.internalServerException!==void 0)return{internalServerException:e.internalServerException};if(e.modelStreamErrorException!==void 0)return{modelStreamErrorException:e.modelStreamErrorException};if(e.validationException!==void 0)return{validationException:e.validationException};if(e.throttlingException!==void 0)return{throttlingException:e.throttlingException};if(e.modelTimeoutException!==void 0)return{modelTimeoutException:e.modelTimeoutException};if(e.serviceUnavailableException!==void 0)return{serviceUnavailableException:e.serviceUnavailableException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},jI=e=>({...e,...e.body&&{body:"STREAMING_CONTENT"}}),zI=e=>({...e,...e.messages&&{messages:e.messages.map(t=>Ci(t))},...e.system&&{system:e.system.map(t=>hl(t))}}),VI=e=>({...e,...e.body&&{body:p.SENSITIVE_STRING}}),GI=e=>{if(e.invokeModel!==void 0)return{invokeModel:VI(e.invokeModel)};if(e.converse!==void 0)return{converse:zI(e.converse)};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},WI=e=>({...e,...e.input&&{input:GI(e.input)}}),e3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/guardrail/{guardrailIdentifier}/version/{guardrailVersion}/apply"),r.p("guardrailIdentifier",()=>e.guardrailIdentifier,"{guardrailIdentifier}",!1),r.p("guardrailVersion",()=>e.guardrailVersion,"{guardrailVersion}",!1);let o;return o=JSON.stringify(p.take(e,{content:s=>W3(s,t),outputScope:[],source:[]})),r.m("POST").h(n).b(o),r.build()},t3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{additionalModelRequestFields:s=>Ti(s),additionalModelResponseFieldPaths:s=>p._json(s),guardrailConfig:s=>p._json(s),inferenceConfig:s=>oP(s),messages:s=>jg(s,t),performanceConfig:s=>p._json(s),promptVariables:s=>p._json(s),requestMetadata:s=>p._json(s),system:s=>zg(s,t),toolConfig:s=>sP(s)})),r.m("POST").h(n).b(o),r.build()},r3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/converse-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{additionalModelRequestFields:s=>Ti(s),additionalModelResponseFieldPaths:s=>p._json(s),guardrailConfig:s=>p._json(s),inferenceConfig:s=>oP(s),messages:s=>jg(s,t),performanceConfig:s=>p._json(s),promptVariables:s=>p._json(s),requestMetadata:s=>p._json(s),system:s=>zg(s,t),toolConfig:s=>sP(s)})),r.m("POST").h(n).b(o),r.build()},n3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/count-tokens"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return o=JSON.stringify(p.take(e,{input:s=>z3(s,t)})),r.m("POST").h(n).b(o),r.build()},o3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={};return r.bp("/async-invoke/{invocationArn}"),r.p("invocationArn",()=>e.invocationArn,"{invocationArn}",!1),r.m("GET").h(n).b(void 0),r.build()},s3=async(e,t)=>{let r=ct.requestBuilder(e,t),n=p.map({},p.isSerializableHeaderValue,{[Vg]:e[yl]||"application/octet-stream",[Mg]:e[Mg],[SP]:e[hP],[gP]:e[mP],[yP]:e[pP],[El]:e[Sl]});r.bp("/model/{modelId}/invoke"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},i3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/model/{modelId}/invoke-with-bidirectional-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=A3(e.body,t)),r.m("POST").h(n).b(o),r.build()},a3=async(e,t)=>{let r=ct.requestBuilder(e,t),n=p.map({},p.isSerializableHeaderValue,{[Vg]:e[yl]||"application/octet-stream",[tG]:e[Mg],[SP]:e[hP],[gP]:e[mP],[yP]:e[pP],[El]:e[Sl]});r.bp("/model/{modelId}/invoke-with-response-stream"),r.p("modelId",()=>e.modelId,"{modelId}",!1);let o;return e.body!==void 0&&(o=e.body),r.m("POST").h(n).b(o),r.build()},c3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={};r.bp("/async-invoke");let o=p.map({[dI]:[()=>e.submitTimeAfter!==void 0,()=>p.serializeDateTime(e[dI]).toString()],[lI]:[()=>e.submitTimeBefore!==void 0,()=>p.serializeDateTime(e[lI]).toString()],[aI]:[,e[aI]],[oI]:[()=>e.maxResults!==void 0,()=>e[oI].toString()],[sI]:[,e[sI]],[iI]:[,e[iI]],[cI]:[,e[cI]]});return r.m("GET").h(n).q(o).b(void 0),r.build()},d3=async(e,t)=>{let r=ct.requestBuilder(e,t),n={"content-type":"application/json"};r.bp("/async-invoke");let o;return o=JSON.stringify(p.take(e,{clientRequestToken:[!0,s=>s??ez.v4()],modelId:[],modelInput:s=>tV(s),outputDataConfig:s=>p._json(s),tags:s=>p._json(s)})),r.m("POST").h(n).b(o),r.build()},l3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{action:p.expectString,actionReason:p.expectString,assessments:s=>dP(s),guardrailCoverage:p._json,outputs:p._json,usage:p._json});return Object.assign(r,o),r},u3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{additionalModelResponseFields:s=>gl(s),metrics:p._json,output:s=>_V(te.awsExpectUnion(s),t),performanceConfig:p._json,stopReason:p.expectString,trace:s=>bV(s),usage:p._json});return Object.assign(r,o),r},f3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=e.body;return r.stream=I3(n,t),r},m3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{inputTokens:p.expectInt32});return Object.assign(r,o),r},p3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{clientRequestToken:p.expectString,endTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s)),failureMessage:p.expectString,invocationArn:p.expectString,lastModifiedTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s)),modelArn:p.expectString,outputDataConfig:s=>p._json(te.awsExpectUnion(s)),status:p.expectString,submitTime:s=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(s))});return Object.assign(r,o),r},h3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e),[yl]:[,e.headers[Vg]],[Sl]:[,e.headers[El]]}),n=await p.collectBody(e.body,t);return r.body=n,r},g3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=e.body;return r.body=P3(n,t),r},y3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e),[yl]:[,e.headers[rG]],[Sl]:[,e.headers[El]]}),n=e.body;return r.body=O3(n,t),r},S3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{asyncInvokeSummaries:s=>mV(s),nextToken:p.expectString});return Object.assign(r,o),r},E3=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kt(e,t);let r=p.map({$metadata:Ie(e)}),n=p.expectNonNull(p.expectObject(await te.parseJsonBody(e.body,t)),"body"),o=p.take(n,{invocationArn:p.expectString});return Object.assign(r,o),r},Kt=async(e,t)=>{let r={...e,body:await te.parseJsonErrorBody(e.body,t)},n=te.loadRestJsonErrorCode(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await w3(r);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await KI(r);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await T3(r);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await v3(r);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await XI(r);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await QI(r);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await ZI(r);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await b3(r);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await C3(r);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await JI(r);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await YI(r);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await x3(r);default:let o=r.body;return _3({output:e,parsedBody:o,errorCode:n})}},_3=p.withBaseException(Je),w3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Vd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},x3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Yd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},KI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Gd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},b3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString,originalStatusCode:p.expectInt32,resourceName:p.expectString});Object.assign(r,o);let s=new Zd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},C3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new el({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},YI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString,originalMessage:p.expectString,originalStatusCode:p.expectInt32});Object.assign(r,o);let s=new rl({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},JI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new tl({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},T3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Jd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},v3=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Xd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},XI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Qd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},QI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Wd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},ZI=async(e,t)=>{let r=p.map({}),n=e.body,o=p.take(n,{message:p.expectString});Object.assign(r,o);let s=new Kd({$metadata:Ie(e),...r});return p.decorateServiceException(s,e.body)},A3=(e,t)=>{let r=n=>E.InvokeModelWithBidirectionalStreamInput.visit(n,{chunk:o=>R3(o,t),_:o=>o});return t.eventStreamMarshaller.serialize(e,r)},R3=(e,t)=>{let r={":event-type":{type:"string",value:"chunk"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}},n=new Uint8Array;return n=$3(e,t),n=t.utf8Decoder(JSON.stringify(n)),{headers:r,body:n}},I3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.messageStart!=null?{messageStart:await F3(r.messageStart,t)}:r.contentBlockStart!=null?{contentBlockStart:await k3(r.contentBlockStart,t)}:r.contentBlockDelta!=null?{contentBlockDelta:await D3(r.contentBlockDelta,t)}:r.contentBlockStop!=null?{contentBlockStop:await M3(r.contentBlockStop,t)}:r.messageStop!=null?{messageStop:await B3(r.messageStop,t)}:r.metadata!=null?{metadata:await L3(r.metadata,t)}:r.internalServerException!=null?{internalServerException:await Bg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Ug(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await qg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Hg(r.throttlingException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await $g(r.serviceUnavailableException,t)}:{$unknown:r}),P3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await N3(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await Bg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Ug(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await qg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Hg(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await eP(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await $g(r.serviceUnavailableException,t)}:{$unknown:r}),O3=(e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.chunk!=null?{chunk:await U3(r.chunk,t)}:r.internalServerException!=null?{internalServerException:await Bg(r.internalServerException,t)}:r.modelStreamErrorException!=null?{modelStreamErrorException:await Ug(r.modelStreamErrorException,t)}:r.validationException!=null?{validationException:await qg(r.validationException,t)}:r.throttlingException!=null?{throttlingException:await Hg(r.throttlingException,t)}:r.modelTimeoutException!=null?{modelTimeoutException:await eP(r.modelTimeoutException,t)}:r.serviceUnavailableException!=null?{serviceUnavailableException:await $g(r.serviceUnavailableException,t)}:{$unknown:r}),N3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,hV(n,t)),r},D3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,SV(n,t)),r},k3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},M3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},L3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,wV(n)),r},Bg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return KI(r)},F3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,p._json(n)),r},B3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,GV(n)),r},Ug=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return YI(r)},eP=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return JI(r)},U3=async(e,t)=>{let r={},n=await te.parseJsonBody(e.body,t);return Object.assign(r,WV(n,t)),r},$g=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return XI(r)},Hg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return QI(r)},qg=async(e,t)=>{let r={...e,body:await te.parseJsonBody(e.body,t)};return ZI(r)},$3=(e,t)=>p.take(e,{bytes:t.base64Encoder}),H3=(e,t)=>E.ContentBlock.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),citationsContent:r=>({citationsContent:p._json(r)}),document:r=>({document:tP(r,t)}),guardContent:r=>({guardContent:rP(r,t)}),image:r=>({image:nP(r,t)}),reasoningContent:r=>({reasoningContent:rV(r,t)}),text:r=>({text:r}),toolResult:r=>({toolResult:iV(r,t)}),toolUse:r=>({toolUse:uV(r)}),video:r=>({video:iP(r,t)}),_:(r,n)=>({[r]:n})}),q3=(e,t)=>e.filter(r=>r!=null).map(r=>H3(r,t)),j3=(e,t)=>p.take(e,{messages:r=>jg(r,t),system:r=>zg(r,t)}),z3=(e,t)=>E.CountTokensInput.visit(e,{converse:r=>({converse:j3(r,t)}),invokeModel:r=>({invokeModel:Z3(r,t)}),_:(r,n)=>({[r]:n})}),tP=(e,t)=>p.take(e,{citations:p._json,context:[],format:[],name:[],source:r=>V3(r,t)}),V3=(e,t)=>E.DocumentSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),content:r=>({content:p._json(r)}),s3Location:r=>({s3Location:p._json(r)}),text:r=>({text:r}),_:(r,n)=>({[r]:n})}),G3=(e,t)=>E.GuardrailContentBlock.visit(e,{image:r=>({image:J3(r,t)}),text:r=>({text:p._json(r)}),_:(r,n)=>({[r]:n})}),W3=(e,t)=>e.filter(r=>r!=null).map(r=>G3(r,t)),rP=(e,t)=>E.GuardrailConverseContentBlock.visit(e,{image:r=>({image:K3(r,t)}),text:r=>({text:p._json(r)}),_:(r,n)=>({[r]:n})}),K3=(e,t)=>p.take(e,{format:[],source:r=>Y3(r,t)}),Y3=(e,t)=>E.GuardrailConverseImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),J3=(e,t)=>p.take(e,{format:[],source:r=>X3(r,t)}),X3=(e,t)=>E.GuardrailImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),nP=(e,t)=>p.take(e,{format:[],source:r=>Q3(r,t)}),Q3=(e,t)=>E.ImageSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),s3Location:r=>({s3Location:p._json(r)}),_:(r,n)=>({[r]:n})}),oP=(e,t)=>p.take(e,{maxTokens:[],stopSequences:p._json,temperature:p.serializeFloat,topP:p.serializeFloat}),Z3=(e,t)=>p.take(e,{body:t.base64Encoder}),eV=(e,t)=>p.take(e,{content:r=>q3(r,t),role:[]}),jg=(e,t)=>e.filter(r=>r!=null).map(r=>eV(r,t)),tV=(e,t)=>e,rV=(e,t)=>E.ReasoningContentBlock.visit(e,{reasoningText:r=>({reasoningText:p._json(r)}),redactedContent:r=>({redactedContent:t.base64Encoder(r)}),_:(r,n)=>({[r]:n})}),nV=(e,t)=>E.SystemContentBlock.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),guardContent:r=>({guardContent:rP(r,t)}),text:r=>({text:r}),_:(r,n)=>({[r]:n})}),zg=(e,t)=>e.filter(r=>r!=null).map(r=>nV(r,t)),oV=(e,t)=>E.Tool.visit(e,{cachePoint:r=>({cachePoint:p._json(r)}),toolSpec:r=>({toolSpec:lV(r)}),_:(r,n)=>({[r]:n})}),sP=(e,t)=>p.take(e,{toolChoice:p._json,tools:r=>dV(r)}),sV=(e,t)=>E.ToolInputSchema.visit(e,{json:r=>({json:Ti(r)}),_:(r,n)=>({[r]:n})}),iV=(e,t)=>p.take(e,{content:r=>cV(r,t),status:[],toolUseId:[]}),aV=(e,t)=>E.ToolResultContentBlock.visit(e,{document:r=>({document:tP(r,t)}),image:r=>({image:nP(r,t)}),json:r=>({json:Ti(r)}),text:r=>({text:r}),video:r=>({video:iP(r,t)}),_:(r,n)=>({[r]:n})}),cV=(e,t)=>e.filter(r=>r!=null).map(r=>aV(r,t)),dV=(e,t)=>e.filter(r=>r!=null).map(r=>oV(r)),lV=(e,t)=>p.take(e,{description:[],inputSchema:r=>sV(r),name:[]}),uV=(e,t)=>p.take(e,{input:r=>Ti(r),name:[],toolUseId:[]}),iP=(e,t)=>p.take(e,{format:[],source:r=>fV(r,t)}),fV=(e,t)=>E.VideoSource.visit(e,{bytes:r=>({bytes:t.base64Encoder(r)}),s3Location:r=>({s3Location:p._json(r)}),_:(r,n)=>({[r]:n})}),Ti=(e,t)=>e,mV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>pV(n)),pV=(e,t)=>p.take(e,{clientRequestToken:p.expectString,endTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r)),failureMessage:p.expectString,invocationArn:p.expectString,lastModifiedTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r)),modelArn:p.expectString,outputDataConfig:r=>p._json(te.awsExpectUnion(r)),status:p.expectString,submitTime:r=>p.expectNonNull(p.parseRfc3339DateTimeWithOffset(r))}),hV=(e,t)=>p.take(e,{bytes:t.base64Decoder}),gV=(e,t)=>e.cachePoint!=null?{cachePoint:p._json(e.cachePoint)}:e.citationsContent!=null?{citationsContent:p._json(e.citationsContent)}:e.document!=null?{document:aP(e.document,t)}:e.guardContent!=null?{guardContent:HV(te.awsExpectUnion(e.guardContent),t)}:e.image!=null?{image:uP(e.image,t)}:e.reasoningContent!=null?{reasoningContent:KV(te.awsExpectUnion(e.reasoningContent),t)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.toolResult!=null?{toolResult:JV(e.toolResult,t)}:e.toolUse!=null?{toolUse:ZV(e.toolUse)}:e.video!=null?{video:fP(e.video,t)}:{$unknown:Object.entries(e)[0]},yV=(e,t)=>e.citation!=null?{citation:p._json(e.citation)}:e.reasoningContent!=null?{reasoningContent:YV(te.awsExpectUnion(e.reasoningContent),t)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.toolUse!=null?{toolUse:p._json(e.toolUse)}:{$unknown:Object.entries(e)[0]},SV=(e,t)=>p.take(e,{contentBlockIndex:p.expectInt32,delta:r=>yV(te.awsExpectUnion(r),t)}),EV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>gV(te.awsExpectUnion(n),t)),_V=(e,t)=>e.message!=null?{message:VV(e.message,t)}:{$unknown:Object.entries(e)[0]},wV=(e,t)=>p.take(e,{metrics:p._json,performanceConfig:p._json,trace:r=>xV(r),usage:p._json}),xV=(e,t)=>p.take(e,{guardrail:r=>lP(r),promptRouter:p._json}),bV=(e,t)=>p.take(e,{guardrail:r=>lP(r),promptRouter:p._json}),aP=(e,t)=>p.take(e,{citations:p._json,context:p.expectString,format:p.expectString,name:p.expectString,source:r=>CV(te.awsExpectUnion(r),t)}),CV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.content!=null?{content:p._json(e.content)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:{$unknown:Object.entries(e)[0]},cP=(e,t)=>p.take(e,{automatedReasoningPolicy:r=>OV(r),contentPolicy:p._json,contextualGroundingPolicy:r=>$V(r),invocationMetrics:p._json,sensitiveInformationPolicy:p._json,topicPolicy:p._json,wordPolicy:p._json}),dP=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>cP(n)),TV=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=dP(o)),r),{}),vV=(e,t)=>Object.entries(e).reduce((r,[n,o])=>(o===null||(r[n]=cP(o)),r),{}),AV=(e,t)=>e.impossible!=null?{impossible:IV(e.impossible)}:e.invalid!=null?{invalid:PV(e.invalid)}:e.noTranslations!=null?{noTranslations:p._json(e.noTranslations)}:e.satisfiable!=null?{satisfiable:NV(e.satisfiable)}:e.tooComplex!=null?{tooComplex:p._json(e.tooComplex)}:e.translationAmbiguous!=null?{translationAmbiguous:DV(e.translationAmbiguous)}:e.valid!=null?{valid:FV(e.valid)}:{$unknown:Object.entries(e)[0]},RV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>AV(te.awsExpectUnion(n))),IV=(e,t)=>p.take(e,{contradictingRules:p._json,logicWarning:p._json,translation:r=>vi(r)}),PV=(e,t)=>p.take(e,{contradictingRules:p._json,logicWarning:p._json,translation:r=>vi(r)}),OV=(e,t)=>p.take(e,{findings:r=>RV(r)}),NV=(e,t)=>p.take(e,{claimsFalseScenario:p._json,claimsTrueScenario:p._json,logicWarning:p._json,translation:r=>vi(r)}),vi=(e,t)=>p.take(e,{claims:p._json,confidence:p.limitedParseDouble,premises:p._json,untranslatedClaims:p._json,untranslatedPremises:p._json}),DV=(e,t)=>p.take(e,{differenceScenarios:p._json,options:r=>LV(r)}),kV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>vi(n)),MV=(e,t)=>p.take(e,{translations:r=>kV(r)}),LV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>MV(n)),FV=(e,t)=>p.take(e,{claimsTrueScenario:p._json,logicWarning:p._json,supportingRules:p._json,translation:r=>vi(r)}),BV=(e,t)=>p.take(e,{action:p.expectString,detected:p.expectBoolean,score:p.limitedParseDouble,threshold:p.limitedParseDouble,type:p.expectString}),UV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>BV(n)),$V=(e,t)=>p.take(e,{filters:r=>UV(r)}),HV=(e,t)=>e.image!=null?{image:qV(e.image,t)}:e.text!=null?{text:p._json(e.text)}:{$unknown:Object.entries(e)[0]},qV=(e,t)=>p.take(e,{format:p.expectString,source:r=>jV(te.awsExpectUnion(r),t)}),jV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:{$unknown:Object.entries(e)[0]},lP=(e,t)=>p.take(e,{actionReason:p.expectString,inputAssessment:r=>vV(r),modelOutput:p._json,outputAssessments:r=>TV(r)}),uP=(e,t)=>p.take(e,{format:p.expectString,source:r=>zV(te.awsExpectUnion(r),t)}),zV=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:{$unknown:Object.entries(e)[0]},VV=(e,t)=>p.take(e,{content:r=>EV(r,t),role:p.expectString}),GV=(e,t)=>p.take(e,{additionalModelResponseFields:r=>gl(r),stopReason:p.expectString}),WV=(e,t)=>p.take(e,{bytes:t.base64Decoder}),KV=(e,t)=>e.reasoningText!=null?{reasoningText:p._json(e.reasoningText)}:e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:{$unknown:Object.entries(e)[0]},YV=(e,t)=>e.redactedContent!=null?{redactedContent:t.base64Decoder(e.redactedContent)}:p.expectString(e.signature)!==void 0?{signature:p.expectString(e.signature)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:{$unknown:Object.entries(e)[0]},JV=(e,t)=>p.take(e,{content:r=>QV(r,t),status:p.expectString,toolUseId:p.expectString}),XV=(e,t)=>e.document!=null?{document:aP(e.document,t)}:e.image!=null?{image:uP(e.image,t)}:e.json!=null?{json:gl(e.json)}:p.expectString(e.text)!==void 0?{text:p.expectString(e.text)}:e.video!=null?{video:fP(e.video,t)}:{$unknown:Object.entries(e)[0]},QV=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>XV(te.awsExpectUnion(n),t)),ZV=(e,t)=>p.take(e,{input:r=>gl(r),name:p.expectString,toolUseId:p.expectString}),fP=(e,t)=>p.take(e,{format:p.expectString,source:r=>eG(te.awsExpectUnion(r),t)}),eG=(e,t)=>e.bytes!=null?{bytes:t.base64Decoder(e.bytes)}:e.s3Location!=null?{s3Location:p._json(e.s3Location)}:{$unknown:Object.entries(e)[0]},gl=(e,t)=>e,Ie=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Mg="accept",yl="contentType",Vg="content-type",mP="guardrailIdentifier",pP="guardrailVersion",oI="maxResults",sI="nextToken",Sl="performanceConfigLatency",iI="sortBy",aI="statusEquals",cI="sortOrder",dI="submitTimeAfter",lI="submitTimeBefore",hP="trace",tG="x-amzn-bedrock-accept",rG="x-amzn-bedrock-content-type",gP="x-amzn-bedrock-guardrailidentifier",yP="x-amzn-bedrock-guardrailversion",El="x-amzn-bedrock-performanceconfig-latency",SP="x-amzn-bedrock-trace",sl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ApplyGuardrail",{}).n("BedrockRuntimeClient","ApplyGuardrailCommand").f(SI,vI).ser(e3).de(l3).build(){},il=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").f(RI,OI).ser(t3).de(u3).build(){},al=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").f(NI,FI).ser(r3).de(f3).build(){},cl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","CountTokens",{}).n("BedrockRuntimeClient","CountTokensCommand").f(WI,void 0).ser(n3).de(m3).build(){},dl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","GetAsyncInvoke",{}).n("BedrockRuntimeClient","GetAsyncInvokeCommand").f(void 0,mI).ser(o3).de(p3).build(){},ll=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").f(BI,UI).ser(s3).de(h3).build(){},ul=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions()),uI.getEventStreamPlugin(n),fI.getWebSocketPlugin(n,{headerPrefix:"x-amz-bedrock-"})]}).s("AmazonBedrockFrontendService","InvokeModelWithBidirectionalStream",{eventStream:{input:!0,output:!0}}).n("BedrockRuntimeClient","InvokeModelWithBidirectionalStreamCommand").f($I,HI).ser(i3).de(g3).build(){},fl=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModelWithResponseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","InvokeModelWithResponseStreamCommand").f(qI,jI).ser(a3).de(y3).build(){},wi=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ListAsyncInvokes",{}).n("BedrockRuntimeClient","ListAsyncInvokesCommand").f(void 0,hI).ser(c3).de(S3).build(){},ml=class extends p.Command.classBuilder().ep(Wt).m(function(t,r,n,o){return[Gt.getSerdePlugin(n,this.serialize,this.deserialize),It.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","StartAsyncInvoke",{}).n("BedrockRuntimeClient","StartAsyncInvokeCommand").f(gI,void 0).ser(d3).de(E3).build(){},nG={ApplyGuardrailCommand:sl,ConverseCommand:il,ConverseStreamCommand:al,CountTokensCommand:cl,GetAsyncInvokeCommand:dl,InvokeModelCommand:ll,InvokeModelWithBidirectionalStreamCommand:ul,InvokeModelWithResponseStreamCommand:fl,ListAsyncInvokesCommand:wi,StartAsyncInvokeCommand:ml},pl=class extends _i{};p.createAggregatedClient(nG,pl);var oG=ct.createPaginator(_i,wi,"nextToken","nextToken","maxResults");Object.defineProperty(E,"$Command",{enumerable:!0,get:function(){return p.Command}});Object.defineProperty(E,"__Client",{enumerable:!0,get:function(){return p.Client}});E.AccessDeniedException=Vd;E.ApplyGuardrailCommand=sl;E.ApplyGuardrailRequestFilterSensitiveLog=SI;E.ApplyGuardrailResponseFilterSensitiveLog=vI;E.AsyncInvokeStatus=sz;E.AsyncInvokeSummaryFilterSensitiveLog=pI;E.BedrockRuntime=pl;E.BedrockRuntimeClient=_i;E.BedrockRuntimeServiceException=Je;E.BidirectionalInputPayloadPartFilterSensitiveLog=Kz;E.BidirectionalOutputPayloadPartFilterSensitiveLog=Jz;E.CachePointType=Az;E.ConflictException=Yd;E.ContentBlockDeltaEventFilterSensitiveLog=kI;E.ContentBlockDeltaFilterSensitiveLog=DI;E.ContentBlockFilterSensitiveLog=AI;E.ConversationRole=kz;E.ConverseCommand=il;E.ConverseOutputFilterSensitiveLog=II;E.ConverseRequestFilterSensitiveLog=RI;E.ConverseResponseFilterSensitiveLog=OI;E.ConverseStreamCommand=al;E.ConverseStreamMetadataEventFilterSensitiveLog=LI;E.ConverseStreamOutputFilterSensitiveLog=Wz;E.ConverseStreamRequestFilterSensitiveLog=NI;E.ConverseStreamResponseFilterSensitiveLog=FI;E.ConverseStreamTraceFilterSensitiveLog=MI;E.ConverseTokensRequestFilterSensitiveLog=zI;E.ConverseTraceFilterSensitiveLog=PI;E.CountTokensCommand=cl;E.CountTokensInputFilterSensitiveLog=GI;E.CountTokensRequestFilterSensitiveLog=WI;E.DocumentFormat=Rz;E.GetAsyncInvokeCommand=dl;E.GetAsyncInvokeResponseFilterSensitiveLog=mI;E.GuardrailAction=fz;E.GuardrailAssessmentFilterSensitiveLog=ol;E.GuardrailAutomatedReasoningFindingFilterSensitiveLog=CI;E.GuardrailAutomatedReasoningImpossibleFindingFilterSensitiveLog=EI;E.GuardrailAutomatedReasoningInputTextReferenceFilterSensitiveLog=kg;E.GuardrailAutomatedReasoningInvalidFindingFilterSensitiveLog=_I;E.GuardrailAutomatedReasoningLogicWarningFilterSensitiveLog=xi;E.GuardrailAutomatedReasoningLogicWarningType=mz;E.GuardrailAutomatedReasoningPolicyAssessmentFilterSensitiveLog=TI;E.GuardrailAutomatedReasoningSatisfiableFindingFilterSensitiveLog=wI;E.GuardrailAutomatedReasoningScenarioFilterSensitiveLog=nl;E.GuardrailAutomatedReasoningStatementFilterSensitiveLog=jo;E.GuardrailAutomatedReasoningTranslationAmbiguousFindingFilterSensitiveLog=xI;E.GuardrailAutomatedReasoningTranslationFilterSensitiveLog=bi;E.GuardrailAutomatedReasoningTranslationOptionFilterSensitiveLog=Hz;E.GuardrailAutomatedReasoningValidFindingFilterSensitiveLog=bI;E.GuardrailContentBlockFilterSensitiveLog=yI;E.GuardrailContentFilterConfidence=hz;E.GuardrailContentFilterStrength=gz;E.GuardrailContentFilterType=yz;E.GuardrailContentPolicyAction=pz;E.GuardrailContentQualifier=dz;E.GuardrailContentSource=uz;E.GuardrailContextualGroundingFilterType=Ez;E.GuardrailContextualGroundingPolicyAction=Sz;E.GuardrailConverseContentBlockFilterSensitiveLog=Lg;E.GuardrailConverseContentQualifier=Pz;E.GuardrailConverseImageBlockFilterSensitiveLog=jz;E.GuardrailConverseImageFormat=Iz;E.GuardrailConverseImageSourceFilterSensitiveLog=qz;E.GuardrailImageBlockFilterSensitiveLog=$z;E.GuardrailImageFormat=cz;E.GuardrailImageSourceFilterSensitiveLog=Uz;E.GuardrailManagedWordType=Tz;E.GuardrailOutputScope=lz;E.GuardrailPiiEntityType=wz;E.GuardrailSensitiveInformationPolicyAction=_z;E.GuardrailStreamProcessingMode=Fz;E.GuardrailTopicPolicyAction=xz;E.GuardrailTopicType=bz;E.GuardrailTrace=vz;E.GuardrailTraceAssessmentFilterSensitiveLog=Fg;E.GuardrailWordPolicyAction=Cz;E.ImageFormat=Oz;E.InternalServerException=Gd;E.InvokeModelCommand=ll;E.InvokeModelRequestFilterSensitiveLog=BI;E.InvokeModelResponseFilterSensitiveLog=UI;E.InvokeModelTokensRequestFilterSensitiveLog=VI;E.InvokeModelWithBidirectionalStreamCommand=ul;E.InvokeModelWithBidirectionalStreamInputFilterSensitiveLog=Yz;E.InvokeModelWithBidirectionalStreamOutputFilterSensitiveLog=Xz;E.InvokeModelWithBidirectionalStreamRequestFilterSensitiveLog=$I;E.InvokeModelWithBidirectionalStreamResponseFilterSensitiveLog=HI;E.InvokeModelWithResponseStreamCommand=fl;E.InvokeModelWithResponseStreamRequestFilterSensitiveLog=qI;E.InvokeModelWithResponseStreamResponseFilterSensitiveLog=jI;E.ListAsyncInvokesCommand=wi;E.ListAsyncInvokesResponseFilterSensitiveLog=hI;E.MessageFilterSensitiveLog=Ci;E.ModelErrorException=Zd;E.ModelNotReadyException=el;E.ModelStreamErrorException=rl;E.ModelTimeoutException=tl;E.PayloadPartFilterSensitiveLog=Qz;E.PerformanceConfigLatency=Mz;E.ReasoningContentBlockDeltaFilterSensitiveLog=Gz;E.ReasoningContentBlockFilterSensitiveLog=Vz;E.ReasoningTextBlockFilterSensitiveLog=zz;E.ResourceNotFoundException=Jd;E.ResponseStreamFilterSensitiveLog=Zz;E.ServiceQuotaExceededException=Xd;E.ServiceUnavailableException=Qd;E.SortAsyncInvocationBy=iz;E.SortOrder=az;E.StartAsyncInvokeCommand=ml;E.StartAsyncInvokeRequestFilterSensitiveLog=gI;E.StopReason=Lz;E.SystemContentBlockFilterSensitiveLog=hl;E.ThrottlingException=Wd;E.ToolResultStatus=Dz;E.Trace=Bz;E.ValidationException=Kd;E.VideoFormat=Nz;E.paginateListAsyncInvokes=oG});var Wg=I(cn=>{"use strict";c();Object.defineProperty(cn,"__esModule",{value:!0});cn.resolveHttpAuthSchemeConfig=cn.defaultTextractHttpAuthSchemeProvider=cn.defaultTextractHttpAuthSchemeParametersProvider=void 0;var sG=(ve(),Y(st)),Gg=Xe(),iG=async(e,t,r)=>({operation:(0,Gg.getSmithyContext)(t).operation,region:await(0,Gg.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});cn.defaultTextractHttpAuthSchemeParametersProvider=iG;function aG(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"textract",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var cG=e=>{let t=[];switch(e.operation){default:t.push(aG(e))}return t};cn.defaultTextractHttpAuthSchemeProvider=cG;var dG=e=>{let t=(0,sG.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Gg.normalizeProvider)(e.authSchemePreference??[])})};cn.resolveHttpAuthSchemeConfig=dG});var _P=I((tse,lG)=>{lG.exports={name:"@aws-sdk/client-textract",description:"AWS SDK for JavaScript Textract Client for Node.js, Browser and React Native",version:"3.908.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-textract","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo textract"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.908.0","@aws-sdk/credential-provider-node":"3.908.0","@aws-sdk/middleware-host-header":"3.901.0","@aws-sdk/middleware-logger":"3.901.0","@aws-sdk/middleware-recursion-detection":"3.901.0","@aws-sdk/middleware-user-agent":"3.908.0","@aws-sdk/region-config-resolver":"3.901.0","@aws-sdk/types":"3.901.0","@aws-sdk/util-endpoints":"3.901.0","@aws-sdk/util-user-agent-browser":"3.907.0","@aws-sdk/util-user-agent-node":"3.908.0","@smithy/config-resolver":"^4.3.0","@smithy/core":"^3.15.0","@smithy/fetch-http-handler":"^5.3.1","@smithy/hash-node":"^4.2.0","@smithy/invalid-dependency":"^4.2.0","@smithy/middleware-content-length":"^4.2.0","@smithy/middleware-endpoint":"^4.3.1","@smithy/middleware-retry":"^4.4.1","@smithy/middleware-serde":"^4.2.0","@smithy/middleware-stack":"^4.2.0","@smithy/node-config-provider":"^4.3.0","@smithy/node-http-handler":"^4.3.0","@smithy/protocol-http":"^5.3.0","@smithy/smithy-client":"^4.7.1","@smithy/types":"^4.6.0","@smithy/url-parser":"^4.2.0","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.0","@smithy/util-defaults-mode-node":"^4.2.1","@smithy/util-endpoints":"^3.2.0","@smithy/util-middleware":"^4.2.0","@smithy/util-retry":"^4.2.0","@smithy/util-utf8":"^4.2.0","@smithy/uuid":"^1.1.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-textract",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-textract"}}});var kP=I(_l=>{"use strict";c();Object.defineProperty(_l,"__esModule",{value:!0});_l.ruleSet=void 0;var OP="required",Jt="fn",Xt="argv",Vo="ref",wP=!0,xP="isSet",Ri="booleanEquals",zo="error",Ai="endpoint",_r="tree",Kg="PartitionResult",bP={[OP]:!1,type:"String"},CP={[OP]:!0,default:!1,type:"Boolean"},TP={[Vo]:"Endpoint"},NP={[Jt]:Ri,[Xt]:[{[Vo]:"UseFIPS"},!0]},DP={[Jt]:Ri,[Xt]:[{[Vo]:"UseDualStack"},!0]},Yt={},vP={[Jt]:"getAttr",[Xt]:[{[Vo]:Kg},"supportsFIPS"]},AP={[Jt]:Ri,[Xt]:[!0,{[Jt]:"getAttr",[Xt]:[{[Vo]:Kg},"supportsDualStack"]}]},RP=[NP],IP=[DP],PP=[{[Vo]:"Region"}],uG={version:"1.0",parameters:{Region:bP,UseDualStack:CP,UseFIPS:CP,Endpoint:bP},rules:[{conditions:[{[Jt]:xP,[Xt]:[TP]}],rules:[{conditions:RP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:zo},{conditions:IP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:zo},{endpoint:{url:TP,properties:Yt,headers:Yt},type:Ai}],type:_r},{conditions:[{[Jt]:xP,[Xt]:PP}],rules:[{conditions:[{[Jt]:"aws.partition",[Xt]:PP,assign:Kg}],rules:[{conditions:[NP,DP],rules:[{conditions:[{[Jt]:Ri,[Xt]:[wP,vP]},AP],rules:[{endpoint:{url:"https://textract-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:Ai}],type:_r},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:zo}],type:_r},{conditions:RP,rules:[{conditions:[{[Jt]:Ri,[Xt]:[vP,wP]}],rules:[{endpoint:{url:"https://textract-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:Ai}],type:_r},{error:"FIPS is enabled but this partition does not support FIPS",type:zo}],type:_r},{conditions:IP,rules:[{conditions:[AP],rules:[{endpoint:{url:"https://textract.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Yt,headers:Yt},type:Ai}],type:_r},{error:"DualStack is enabled but this partition does not support DualStack",type:zo}],type:_r},{endpoint:{url:"https://textract.{Region}.{PartitionResult#dnsSuffix}",properties:Yt,headers:Yt},type:Ai}],type:_r}],type:_r},{error:"Invalid Configuration: Missing Region",type:zo}]};_l.ruleSet=uG});var MP=I(wl=>{"use strict";c();Object.defineProperty(wl,"__esModule",{value:!0});wl.defaultEndpointResolver=void 0;var fG=_n(),Yg=En(),mG=kP(),pG=new Yg.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),hG=(e,t={})=>pG.get(e,()=>(0,Yg.resolveEndpoint)(mG.ruleSet,{endpointParams:e,logger:t.logger}));wl.defaultEndpointResolver=hG;Yg.customEndpointFunctions.aws=fG.awsEndpointFunctions});var BP=I(xl=>{"use strict";c();Object.defineProperty(xl,"__esModule",{value:!0});xl.getRuntimeConfig=void 0;var gG=(ve(),Y(st)),yG=K(),SG=sr(),LP=Fe(),FP=Le(),EG=Wg(),_G=MP(),wG=e=>({apiVersion:"2018-06-27",base64Decoder:e?.base64Decoder??LP.fromBase64,base64Encoder:e?.base64Encoder??LP.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??_G.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??EG.defaultTextractHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new gG.AwsSdkSigV4Signer}],logger:e?.logger??new yG.NoOpLogger,serviceId:e?.serviceId??"Textract",urlParser:e?.urlParser??SG.parseUrl,utf8Decoder:e?.utf8Decoder??FP.fromUtf8,utf8Encoder:e?.utf8Encoder??FP.toUtf8});xl.getRuntimeConfig=wG});var jP=I(Cl=>{"use strict";c();Object.defineProperty(Cl,"__esModule",{value:!0});Cl.getRuntimeConfig=void 0;var xG=(Or(),Y(Pr)),bG=xG.__importDefault(_P()),UP=(ve(),Y(st)),CG=Ig(),$P=Eo(),bl=yt(),TG=_o(),HP=At(),qn=fr(),qP=Ar(),vG=wo(),AG=Dn(),RG=BP(),IG=K(),PG=To(),OG=K(),NG=e=>{(0,OG.emitWarningIfUnsupportedVersion)(process.version);let t=(0,PG.resolveDefaultsModeConfig)(e),r=()=>t().then(IG.loadConfigsForDefaultMode),n=(0,RG.getRuntimeConfig)(e);(0,UP.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,qn.loadConfig)(UP.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??vG.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??CG.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,$P.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:bG.default.version}),maxAttempts:e?.maxAttempts??(0,qn.loadConfig)(HP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,qn.loadConfig)(bl.NODE_REGION_CONFIG_OPTIONS,{...bl.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:qP.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,qn.loadConfig)({...HP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||AG.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??TG.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??qP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,qn.loadConfig)(bl.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,qn.loadConfig)(bl.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,qn.loadConfig)($P.NODE_APP_ID_CONFIG_OPTIONS,o)}};Cl.getRuntimeConfig=NG});var sO=I(B=>{"use strict";c();var zP=Vn(),DG=Gn(),kG=Wn(),VP=In(),MG=yt(),Ii=(Ue(),Y(kt)),LG=go(),pe=pr(),GP=At(),g=K(),WP=Wg(),FG=jP(),KP=vo(),Jg=ie(),he=Qt(),fe=(ve(),Y(st)),ZP=cs(),BG=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"textract"}),ge={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},UG=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},$G=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),HG=(e,t)=>{let r=Object.assign(KP.getAwsRegionExtensionConfiguration(e),g.getDefaultExtensionConfiguration(e),Jg.getHttpHandlerExtensionConfiguration(e),UG(e));return t.forEach(n=>n.configure(r)),Object.assign(e,KP.resolveAwsRegionExtensionConfiguration(r),g.resolveDefaultRuntimeConfig(r),Jg.resolveHttpHandlerRuntimeConfig(r),$G(r))},Go=class extends g.Client{config;constructor(...[t]){let r=FG.getRuntimeConfig(t||{});super(r),this.initConfig=r;let n=BG(r),o=VP.resolveUserAgentConfig(n),s=GP.resolveRetryConfig(o),i=MG.resolveRegionConfig(s),a=zP.resolveHostHeaderConfig(i),d=pe.resolveEndpointConfig(a),l=WP.resolveHttpAuthSchemeConfig(d),m=HG(l,t?.extensions||[]);this.config=m,this.middlewareStack.use(VP.getUserAgentPlugin(this.config)),this.middlewareStack.use(GP.getRetryPlugin(this.config)),this.middlewareStack.use(LG.getContentLengthPlugin(this.config)),this.middlewareStack.use(zP.getHostHeaderPlugin(this.config)),this.middlewareStack.use(DG.getLoggerPlugin(this.config)),this.middlewareStack.use(kG.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Ii.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:WP.defaultTextractHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async h=>new Ii.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(Ii.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Pe=class e extends g.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},Tl=class e extends Pe{name="AccessDeniedException";$fault="client";Message;Code;constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},qG={FORMS:"FORMS",LAYOUT:"LAYOUT",QUERIES:"QUERIES",SIGNATURES:"SIGNATURES",TABLES:"TABLES"},jG={ACTIVE:"ACTIVE",AT_RISK:"AT_RISK",CREATION_ERROR:"CREATION_ERROR",CREATION_IN_PROGRESS:"CREATION_IN_PROGRESS",DEPRECATED:"DEPRECATED"},zG={FREE_OF_ADULT_CONTENT:"FreeOfAdultContent",FREE_OF_PERSONALLY_IDENTIFIABLE_INFORMATION:"FreeOfPersonallyIdentifiableInformation"},VG={CELL:"CELL",KEY_VALUE_SET:"KEY_VALUE_SET",LAYOUT_FIGURE:"LAYOUT_FIGURE",LAYOUT_FOOTER:"LAYOUT_FOOTER",LAYOUT_HEADER:"LAYOUT_HEADER",LAYOUT_KEY_VALUE:"LAYOUT_KEY_VALUE",LAYOUT_LIST:"LAYOUT_LIST",LAYOUT_PAGE_NUMBER:"LAYOUT_PAGE_NUMBER",LAYOUT_SECTION_HEADER:"LAYOUT_SECTION_HEADER",LAYOUT_TABLE:"LAYOUT_TABLE",LAYOUT_TEXT:"LAYOUT_TEXT",LAYOUT_TITLE:"LAYOUT_TITLE",LINE:"LINE",MERGED_CELL:"MERGED_CELL",PAGE:"PAGE",QUERY:"QUERY",QUERY_RESULT:"QUERY_RESULT",SELECTION_ELEMENT:"SELECTION_ELEMENT",SIGNATURE:"SIGNATURE",TABLE:"TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_TITLE:"TABLE_TITLE",TITLE:"TITLE",WORD:"WORD"},GG={COLUMN_HEADER:"COLUMN_HEADER",KEY:"KEY",SEMI_STRUCTURED_TABLE:"SEMI_STRUCTURED_TABLE",STRUCTURED_TABLE:"STRUCTURED_TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_SECTION_TITLE:"TABLE_SECTION_TITLE",TABLE_SUMMARY:"TABLE_SUMMARY",TABLE_TITLE:"TABLE_TITLE",VALUE:"VALUE"},WG={ANSWER:"ANSWER",CHILD:"CHILD",COMPLEX_FEATURES:"COMPLEX_FEATURES",MERGED_CELL:"MERGED_CELL",TABLE:"TABLE",TABLE_FOOTER:"TABLE_FOOTER",TABLE_TITLE:"TABLE_TITLE",TITLE:"TITLE",VALUE:"VALUE"},KG={NOT_SELECTED:"NOT_SELECTED",SELECTED:"SELECTED"},YG={HANDWRITING:"HANDWRITING",PRINTED:"PRINTED"},vl=class e extends Pe{name="BadDocumentException";$fault="client";Message;Code;constructor(t){super({name:"BadDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Al=class e extends Pe{name="DocumentTooLargeException";$fault="client";Message;Code;constructor(t){super({name:"DocumentTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Rl=class e extends Pe{name="HumanLoopQuotaExceededException";$fault="client";ResourceType;QuotaCode;ServiceCode;Message;Code;constructor(t){super({name:"HumanLoopQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.ResourceType=t.ResourceType,this.QuotaCode=t.QuotaCode,this.ServiceCode=t.ServiceCode,this.Message=t.Message,this.Code=t.Code}},Il=class e extends Pe{name="InternalServerError";$fault="server";Message;Code;constructor(t){super({name:"InternalServerError",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Pl=class e extends Pe{name="InvalidParameterException";$fault="client";Message;Code;constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ol=class e extends Pe{name="InvalidS3ObjectException";$fault="client";Message;Code;constructor(t){super({name:"InvalidS3ObjectException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Nl=class e extends Pe{name="ProvisionedThroughputExceededException";$fault="client";Message;Code;constructor(t){super({name:"ProvisionedThroughputExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Dl=class e extends Pe{name="ThrottlingException";$fault="server";Message;Code;constructor(t){super({name:"ThrottlingException",$fault:"server",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},kl=class e extends Pe{name="UnsupportedDocumentException";$fault="client";Message;Code;constructor(t){super({name:"UnsupportedDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},JG={DATE:"DATE"},XG={DISABLED:"DISABLED",ENABLED:"ENABLED"},Ml=class e extends Pe{name="ConflictException";$fault="client";Message;Code;constructor(t){super({name:"ConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ll=class e extends Pe{name="IdempotentParameterMismatchException";$fault="client";Message;Code;constructor(t){super({name:"IdempotentParameterMismatchException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Fl=class e extends Pe{name="LimitExceededException";$fault="client";Message;Code;constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Bl=class e extends Pe{name="ServiceQuotaExceededException";$fault="client";Message;Code;constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Ul=class e extends Pe{name="ValidationException";$fault="client";Message;Code;constructor(t){super({name:"ValidationException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},$l=class e extends Pe{name="InvalidKMSKeyException";$fault="client";Message;Code;constructor(t){super({name:"InvalidKMSKeyException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},Hl=class e extends Pe{name="ResourceNotFoundException";$fault="client";Message;Code;constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},QG={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PARTIAL_SUCCESS:"PARTIAL_SUCCESS",SUCCEEDED:"SUCCEEDED"},ql=class e extends Pe{name="InvalidJobIdException";$fault="client";Message;Code;constructor(t){super({name:"InvalidJobIdException",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.Message=t.Message,this.Code=t.Code}},ZG=async(e,t)=>{let r=Ee("AnalyzeDocument"),n;return n=JSON.stringify(m6(e,t)),Se(t,r,"/",void 0,n)},e4=async(e,t)=>{let r=Ee("AnalyzeExpense"),n;return n=JSON.stringify(p6(e,t)),Se(t,r,"/",void 0,n)},t4=async(e,t)=>{let r=Ee("AnalyzeID"),n;return n=JSON.stringify(h6(e,t)),Se(t,r,"/",void 0,n)},r4=async(e,t)=>{let r=Ee("CreateAdapter"),n;return n=JSON.stringify(g6(e)),Se(t,r,"/",void 0,n)},n4=async(e,t)=>{let r=Ee("CreateAdapterVersion"),n;return n=JSON.stringify(y6(e)),Se(t,r,"/",void 0,n)},o4=async(e,t)=>{let r=Ee("DeleteAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},s4=async(e,t)=>{let r=Ee("DeleteAdapterVersion"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},i4=async(e,t)=>{let r=Ee("DetectDocumentText"),n;return n=JSON.stringify(S6(e,t)),Se(t,r,"/",void 0,n)},a4=async(e,t)=>{let r=Ee("GetAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},c4=async(e,t)=>{let r=Ee("GetAdapterVersion"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},d4=async(e,t)=>{let r=Ee("GetDocumentAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},l4=async(e,t)=>{let r=Ee("GetDocumentTextDetection"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},u4=async(e,t)=>{let r=Ee("GetExpenseAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},f4=async(e,t)=>{let r=Ee("GetLendingAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},m4=async(e,t)=>{let r=Ee("GetLendingAnalysisSummary"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},p4=async(e,t)=>{let r=Ee("ListAdapters"),n;return n=JSON.stringify(_6(e)),Se(t,r,"/",void 0,n)},h4=async(e,t)=>{let r=Ee("ListAdapterVersions"),n;return n=JSON.stringify(w6(e)),Se(t,r,"/",void 0,n)},g4=async(e,t)=>{let r=Ee("ListTagsForResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},y4=async(e,t)=>{let r=Ee("StartDocumentAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},S4=async(e,t)=>{let r=Ee("StartDocumentTextDetection"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},E4=async(e,t)=>{let r=Ee("StartExpenseAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},_4=async(e,t)=>{let r=Ee("StartLendingAnalysis"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},w4=async(e,t)=>{let r=Ee("TagResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},x4=async(e,t)=>{let r=Ee("UntagResource"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},b4=async(e,t)=>{let r=Ee("UpdateAdapter"),n;return n=JSON.stringify(g._json(e)),Se(t,r,"/",void 0,n)},C4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=R6(r),{$metadata:W(e),...n}},T4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=I6(r),{$metadata:W(e),...n}},v4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=P6(r),{$metadata:W(e),...n}},A4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},R4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},I4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},P4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},O4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=D6(r),{$metadata:W(e),...n}},N4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=U6(r),{$metadata:W(e),...n}},D4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=$6(r),{$metadata:W(e),...n}},k4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=H6(r),{$metadata:W(e),...n}},M4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=q6(r),{$metadata:W(e),...n}},L4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=j6(r),{$metadata:W(e),...n}},F4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=z6(r),{$metadata:W(e),...n}},B4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},U4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=s8(r),{$metadata:W(e),...n}},$4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=i8(r),{$metadata:W(e),...n}},H4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},q4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},j4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},z4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},V4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},G4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},W4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=g._json(r),{$metadata:W(e),...n}},K4=async(e,t)=>{if(e.statusCode>=300)return ye(e,t);let r=await fe.parseJsonBody(e.body,t),n={};return n=m8(r),{$metadata:W(e),...n}},ye=async(e,t)=>{let r={...e,body:await fe.parseJsonErrorBody(e.body,t)},n=fe.loadRestJsonErrorCode(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.textract#AccessDeniedException":throw await Y4(r);case"BadDocumentException":case"com.amazonaws.textract#BadDocumentException":throw await J4(r);case"DocumentTooLargeException":case"com.amazonaws.textract#DocumentTooLargeException":throw await Q4(r);case"HumanLoopQuotaExceededException":case"com.amazonaws.textract#HumanLoopQuotaExceededException":throw await Z4(r);case"InternalServerError":case"com.amazonaws.textract#InternalServerError":throw await t6(r);case"InvalidParameterException":case"com.amazonaws.textract#InvalidParameterException":throw await o6(r);case"InvalidS3ObjectException":case"com.amazonaws.textract#InvalidS3ObjectException":throw await s6(r);case"ProvisionedThroughputExceededException":case"com.amazonaws.textract#ProvisionedThroughputExceededException":throw await a6(r);case"ThrottlingException":case"com.amazonaws.textract#ThrottlingException":throw await l6(r);case"UnsupportedDocumentException":case"com.amazonaws.textract#UnsupportedDocumentException":throw await u6(r);case"ConflictException":case"com.amazonaws.textract#ConflictException":throw await X4(r);case"IdempotentParameterMismatchException":case"com.amazonaws.textract#IdempotentParameterMismatchException":throw await e6(r);case"LimitExceededException":case"com.amazonaws.textract#LimitExceededException":throw await i6(r);case"ServiceQuotaExceededException":case"com.amazonaws.textract#ServiceQuotaExceededException":throw await d6(r);case"ValidationException":case"com.amazonaws.textract#ValidationException":throw await f6(r);case"InvalidKMSKeyException":case"com.amazonaws.textract#InvalidKMSKeyException":throw await n6(r);case"ResourceNotFoundException":case"com.amazonaws.textract#ResourceNotFoundException":throw await c6(r);case"InvalidJobIdException":case"com.amazonaws.textract#InvalidJobIdException":throw await r6(r);default:let o=r.body;return p8({output:e,parsedBody:o,errorCode:n})}},Y4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Tl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},J4=async(e,t)=>{let r=e.body,n=g._json(r),o=new vl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},X4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ml({$metadata:W(e),...n});return g.decorateServiceException(o,r)},Q4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Al({$metadata:W(e),...n});return g.decorateServiceException(o,r)},Z4=async(e,t)=>{let r=e.body,n=g._json(r),o=new Rl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},e6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ll({$metadata:W(e),...n});return g.decorateServiceException(o,r)},t6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Il({$metadata:W(e),...n});return g.decorateServiceException(o,r)},r6=async(e,t)=>{let r=e.body,n=g._json(r),o=new ql({$metadata:W(e),...n});return g.decorateServiceException(o,r)},n6=async(e,t)=>{let r=e.body,n=g._json(r),o=new $l({$metadata:W(e),...n});return g.decorateServiceException(o,r)},o6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Pl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},s6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ol({$metadata:W(e),...n});return g.decorateServiceException(o,r)},i6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Fl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},a6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Nl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},c6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Hl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},d6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Bl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},l6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Dl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},u6=async(e,t)=>{let r=e.body,n=g._json(r),o=new kl({$metadata:W(e),...n});return g.decorateServiceException(o,r)},f6=async(e,t)=>{let r=e.body,n=g._json(r),o=new Ul({$metadata:W(e),...n});return g.decorateServiceException(o,r)},m6=(e,t)=>g.take(e,{AdaptersConfig:g._json,Document:r=>mu(r,t),FeatureTypes:g._json,HumanLoopConfig:g._json,QueriesConfig:g._json}),p6=(e,t)=>g.take(e,{Document:r=>mu(r,t)}),h6=(e,t)=>g.take(e,{DocumentPages:r=>E6(r,t)}),g6=(e,t)=>g.take(e,{AdapterName:[],AutoUpdate:[],ClientRequestToken:[!0,r=>r??ZP.v4()],Description:[],FeatureTypes:g._json,Tags:g._json}),y6=(e,t)=>g.take(e,{AdapterId:[],ClientRequestToken:[!0,r=>r??ZP.v4()],DatasetConfig:g._json,KMSKeyId:[],OutputConfig:g._json,Tags:g._json}),S6=(e,t)=>g.take(e,{Document:r=>mu(r,t)}),mu=(e,t)=>g.take(e,{Bytes:t.base64Encoder,S3Object:g._json}),E6=(e,t)=>e.filter(r=>r!=null).map(r=>mu(r,t)),_6=(e,t)=>g.take(e,{AfterCreationTime:r=>r.getTime()/1e3,BeforeCreationTime:r=>r.getTime()/1e3,MaxResults:[],NextToken:[]}),w6=(e,t)=>g.take(e,{AdapterId:[],AfterCreationTime:r=>r.getTime()/1e3,BeforeCreationTime:r=>r.getTime()/1e3,MaxResults:[],NextToken:[]}),x6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>b6(n)),b6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),FeatureTypes:g._json}),C6=(e,t)=>g.take(e,{AdapterVersion:r=>JP(r),Baseline:r=>JP(r),FeatureType:g.expectString}),T6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>C6(n)),v6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>A6(n)),A6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterVersion:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),FeatureTypes:g._json,Status:g.expectString,StatusMessage:g.expectString}),R6=(e,t)=>g.take(e,{AnalyzeDocumentModelVersion:g.expectString,Blocks:r=>Wo(r),DocumentMetadata:g._json,HumanLoopActivationOutput:r=>V6(r)}),I6=(e,t)=>g.take(e,{DocumentMetadata:g._json,ExpenseDocuments:r=>tO(r)}),YP=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,NormalizedValue:g._json,Text:g.expectString}),P6=(e,t)=>g.take(e,{AnalyzeIDModelVersion:g.expectString,DocumentMetadata:g._json,IdentityDocuments:r=>K6(r)}),O6=(e,t)=>g.take(e,{BlockType:g.expectString,ColumnIndex:g.expectInt32,ColumnSpan:g.expectInt32,Confidence:g.limitedParseFloat32,EntityTypes:g._json,Geometry:r=>pu(r),Id:g.expectString,Page:g.expectInt32,Query:g._json,Relationships:g._json,RowIndex:g.expectInt32,RowSpan:g.expectInt32,SelectionStatus:g.expectString,Text:g.expectString,TextType:g.expectString}),Wo=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>O6(n)),N6=(e,t)=>g.take(e,{Height:g.limitedParseFloat32,Left:g.limitedParseFloat32,Top:g.limitedParseFloat32,Width:g.limitedParseFloat32}),D6=(e,t)=>g.take(e,{Blocks:r=>Wo(r),DetectDocumentTextModelVersion:g.expectString,DocumentMetadata:g._json}),JP=(e,t)=>g.take(e,{F1Score:g.limitedParseFloat32,Precision:g.limitedParseFloat32,Recall:g.limitedParseFloat32}),k6=(e,t)=>g.take(e,{Code:g.expectString,Confidence:g.limitedParseFloat32}),XP=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>pu(r),Text:g.expectString}),eO=(e,t)=>g.take(e,{Blocks:r=>Wo(r),ExpenseIndex:g.expectInt32,LineItemGroups:r=>n8(r),SummaryFields:r=>rO(r)}),tO=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>eO(n)),M6=(e,t)=>g.take(e,{Currency:r=>k6(r),GroupProperties:g._json,LabelDetection:r=>XP(r),PageNumber:g.expectInt32,Type:r=>L6(r),ValueDetection:r=>XP(r)}),rO=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>M6(n)),L6=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Text:g.expectString}),F6=(e,t)=>g.take(e,{ExpenseDocument:r=>eO(r),IdentityDocument:r=>nO(r),LendingDocument:r=>J6(r)}),B6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>F6(n)),pu=(e,t)=>g.take(e,{BoundingBox:r=>N6(r),Polygon:r=>d8(r),RotationAngle:g.limitedParseFloat32}),U6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,AutoUpdate:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),Description:g.expectString,FeatureTypes:g._json,Tags:g._json}),$6=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterVersion:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),DatasetConfig:g._json,EvaluationMetrics:r=>T6(r),FeatureTypes:g._json,KMSKeyId:g.expectString,OutputConfig:g._json,Status:g.expectString,StatusMessage:g.expectString,Tags:g._json}),H6=(e,t)=>g.take(e,{AnalyzeDocumentModelVersion:g.expectString,Blocks:r=>Wo(r),DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),q6=(e,t)=>g.take(e,{Blocks:r=>Wo(r),DetectDocumentTextModelVersion:g.expectString,DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),j6=(e,t)=>g.take(e,{AnalyzeExpenseModelVersion:g.expectString,DocumentMetadata:g._json,ExpenseDocuments:r=>tO(r),JobStatus:g.expectString,NextToken:g.expectString,StatusMessage:g.expectString,Warnings:g._json}),z6=(e,t)=>g.take(e,{AnalyzeLendingModelVersion:g.expectString,DocumentMetadata:g._json,JobStatus:g.expectString,NextToken:g.expectString,Results:r=>e8(r),StatusMessage:g.expectString,Warnings:g._json}),V6=(e,t)=>g.take(e,{HumanLoopActivationConditionsEvaluationResults:g.LazyJsonString.from,HumanLoopActivationReasons:g._json,HumanLoopArn:g.expectString}),nO=(e,t)=>g.take(e,{Blocks:r=>Wo(r),DocumentIndex:g.expectInt32,IdentityDocumentFields:r=>W6(r)}),G6=(e,t)=>g.take(e,{Type:r=>YP(r),ValueDetection:r=>YP(r)}),W6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>G6(n)),K6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>nO(n)),oO=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>pu(r),SelectionStatus:g.expectString,Text:g.expectString}),Y6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>oO(n)),J6=(e,t)=>g.take(e,{LendingFields:r=>Q6(r),SignatureDetections:r=>f8(r)}),X6=(e,t)=>g.take(e,{KeyDetection:r=>oO(r),Type:g.expectString,ValueDetections:r=>Y6(r)}),Q6=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>X6(n)),Z6=(e,t)=>g.take(e,{Extractions:r=>B6(r),Page:g.expectInt32,PageClassification:r=>a8(r)}),e8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>Z6(n)),t8=(e,t)=>g.take(e,{LineItemExpenseFields:r=>rO(r)}),r8=(e,t)=>g.take(e,{LineItemGroupIndex:g.expectInt32,LineItems:r=>o8(r)}),n8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>r8(n)),o8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>t8(n)),s8=(e,t)=>g.take(e,{Adapters:r=>x6(r),NextToken:g.expectString}),i8=(e,t)=>g.take(e,{AdapterVersions:r=>v6(r),NextToken:g.expectString}),a8=(e,t)=>g.take(e,{PageNumber:r=>QP(r),PageType:r=>QP(r)}),c8=(e,t)=>g.take(e,{X:g.limitedParseFloat32,Y:g.limitedParseFloat32}),d8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>c8(n)),l8=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Value:g.expectString}),QP=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>l8(n)),u8=(e,t)=>g.take(e,{Confidence:g.limitedParseFloat32,Geometry:r=>pu(r)}),f8=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>u8(n)),m8=(e,t)=>g.take(e,{AdapterId:g.expectString,AdapterName:g.expectString,AutoUpdate:g.expectString,CreationTime:r=>g.expectNonNull(g.parseEpochTimestamp(g.expectNumber(r))),Description:g.expectString,FeatureTypes:g._json}),W=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),p8=g.withBaseException(Pe),Se=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:d}=await e.endpoint(),l={protocol:i,hostname:s,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:t};return o!==void 0&&(l.body=o),new Jg.HttpRequest(l)};function Ee(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`Textract.${e}`}}var jl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeDocument",{}).n("TextractClient","AnalyzeDocumentCommand").f(void 0,void 0).ser(ZG).de(C4).build(){},zl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeExpense",{}).n("TextractClient","AnalyzeExpenseCommand").f(void 0,void 0).ser(e4).de(T4).build(){},Vl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","AnalyzeID",{}).n("TextractClient","AnalyzeIDCommand").f(void 0,void 0).ser(t4).de(v4).build(){},Gl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","CreateAdapter",{}).n("TextractClient","CreateAdapterCommand").f(void 0,void 0).ser(r4).de(A4).build(){},Wl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","CreateAdapterVersion",{}).n("TextractClient","CreateAdapterVersionCommand").f(void 0,void 0).ser(n4).de(R4).build(){},Kl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DeleteAdapter",{}).n("TextractClient","DeleteAdapterCommand").f(void 0,void 0).ser(o4).de(I4).build(){},Yl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DeleteAdapterVersion",{}).n("TextractClient","DeleteAdapterVersionCommand").f(void 0,void 0).ser(s4).de(P4).build(){},Jl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","DetectDocumentText",{}).n("TextractClient","DetectDocumentTextCommand").f(void 0,void 0).ser(i4).de(O4).build(){},Xl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetAdapter",{}).n("TextractClient","GetAdapterCommand").f(void 0,void 0).ser(a4).de(N4).build(){},Ql=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetAdapterVersion",{}).n("TextractClient","GetAdapterVersionCommand").f(void 0,void 0).ser(c4).de(D4).build(){},Zl=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetDocumentAnalysis",{}).n("TextractClient","GetDocumentAnalysisCommand").f(void 0,void 0).ser(d4).de(k4).build(){},eu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetDocumentTextDetection",{}).n("TextractClient","GetDocumentTextDetectionCommand").f(void 0,void 0).ser(l4).de(M4).build(){},tu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetExpenseAnalysis",{}).n("TextractClient","GetExpenseAnalysisCommand").f(void 0,void 0).ser(u4).de(L4).build(){},ru=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetLendingAnalysis",{}).n("TextractClient","GetLendingAnalysisCommand").f(void 0,void 0).ser(f4).de(F4).build(){},nu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","GetLendingAnalysisSummary",{}).n("TextractClient","GetLendingAnalysisSummaryCommand").f(void 0,void 0).ser(m4).de(B4).build(){},Pi=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListAdapters",{}).n("TextractClient","ListAdaptersCommand").f(void 0,void 0).ser(p4).de(U4).build(){},Oi=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListAdapterVersions",{}).n("TextractClient","ListAdapterVersionsCommand").f(void 0,void 0).ser(h4).de($4).build(){},ou=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","ListTagsForResource",{}).n("TextractClient","ListTagsForResourceCommand").f(void 0,void 0).ser(g4).de(H4).build(){},su=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartDocumentAnalysis",{}).n("TextractClient","StartDocumentAnalysisCommand").f(void 0,void 0).ser(y4).de(q4).build(){},iu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartDocumentTextDetection",{}).n("TextractClient","StartDocumentTextDetectionCommand").f(void 0,void 0).ser(S4).de(j4).build(){},au=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartExpenseAnalysis",{}).n("TextractClient","StartExpenseAnalysisCommand").f(void 0,void 0).ser(E4).de(z4).build(){},cu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","StartLendingAnalysis",{}).n("TextractClient","StartLendingAnalysisCommand").f(void 0,void 0).ser(_4).de(V4).build(){},du=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","TagResource",{}).n("TextractClient","TagResourceCommand").f(void 0,void 0).ser(w4).de(G4).build(){},lu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","UntagResource",{}).n("TextractClient","UntagResourceCommand").f(void 0,void 0).ser(x4).de(W4).build(){},uu=class extends g.Command.classBuilder().ep(ge).m(function(t,r,n,o){return[he.getSerdePlugin(n,this.serialize,this.deserialize),pe.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("Textract","UpdateAdapter",{}).n("TextractClient","UpdateAdapterCommand").f(void 0,void 0).ser(b4).de(K4).build(){},h8={AnalyzeDocumentCommand:jl,AnalyzeExpenseCommand:zl,AnalyzeIDCommand:Vl,CreateAdapterCommand:Gl,CreateAdapterVersionCommand:Wl,DeleteAdapterCommand:Kl,DeleteAdapterVersionCommand:Yl,DetectDocumentTextCommand:Jl,GetAdapterCommand:Xl,GetAdapterVersionCommand:Ql,GetDocumentAnalysisCommand:Zl,GetDocumentTextDetectionCommand:eu,GetExpenseAnalysisCommand:tu,GetLendingAnalysisCommand:ru,GetLendingAnalysisSummaryCommand:nu,ListAdaptersCommand:Pi,ListAdapterVersionsCommand:Oi,ListTagsForResourceCommand:ou,StartDocumentAnalysisCommand:su,StartDocumentTextDetectionCommand:iu,StartExpenseAnalysisCommand:au,StartLendingAnalysisCommand:cu,TagResourceCommand:du,UntagResourceCommand:lu,UpdateAdapterCommand:uu},fu=class extends Go{};g.createAggregatedClient(h8,fu);var g8=Ii.createPaginator(Go,Oi,"NextToken","NextToken","MaxResults"),y8=Ii.createPaginator(Go,Pi,"NextToken","NextToken","MaxResults");Object.defineProperty(B,"$Command",{enumerable:!0,get:function(){return g.Command}});Object.defineProperty(B,"__Client",{enumerable:!0,get:function(){return g.Client}});B.AccessDeniedException=Tl;B.AdapterVersionStatus=jG;B.AnalyzeDocumentCommand=jl;B.AnalyzeExpenseCommand=zl;B.AnalyzeIDCommand=Vl;B.AutoUpdate=XG;B.BadDocumentException=vl;B.BlockType=VG;B.ConflictException=Ml;B.ContentClassifier=zG;B.CreateAdapterCommand=Gl;B.CreateAdapterVersionCommand=Wl;B.DeleteAdapterCommand=Kl;B.DeleteAdapterVersionCommand=Yl;B.DetectDocumentTextCommand=Jl;B.DocumentTooLargeException=Al;B.EntityType=GG;B.FeatureType=qG;B.GetAdapterCommand=Xl;B.GetAdapterVersionCommand=Ql;B.GetDocumentAnalysisCommand=Zl;B.GetDocumentTextDetectionCommand=eu;B.GetExpenseAnalysisCommand=tu;B.GetLendingAnalysisCommand=ru;B.GetLendingAnalysisSummaryCommand=nu;B.HumanLoopQuotaExceededException=Rl;B.IdempotentParameterMismatchException=Ll;B.InternalServerError=Il;B.InvalidJobIdException=ql;B.InvalidKMSKeyException=$l;B.InvalidParameterException=Pl;B.InvalidS3ObjectException=Ol;B.JobStatus=QG;B.LimitExceededException=Fl;B.ListAdapterVersionsCommand=Oi;B.ListAdaptersCommand=Pi;B.ListTagsForResourceCommand=ou;B.ProvisionedThroughputExceededException=Nl;B.RelationshipType=WG;B.ResourceNotFoundException=Hl;B.SelectionStatus=KG;B.ServiceQuotaExceededException=Bl;B.StartDocumentAnalysisCommand=su;B.StartDocumentTextDetectionCommand=iu;B.StartExpenseAnalysisCommand=au;B.StartLendingAnalysisCommand=cu;B.TagResourceCommand=du;B.TextType=YG;B.Textract=fu;B.TextractClient=Go;B.TextractServiceException=Pe;B.ThrottlingException=Dl;B.UnsupportedDocumentException=kl;B.UntagResourceCommand=lu;B.UpdateAdapterCommand=uu;B.ValidationException=Ul;B.ValueType=JG;B.paginateListAdapterVersions=g8;B.paginateListAdapters=y8});c();var hu=v(EP(),1),gu=v(sO(),1),S8=new hu.BedrockRuntimeClient({region:process.env.BEDROCK_REGION||"us-east-1"}),E8=new gu.TextractClient({region:process.env.BEDROCK_REGION||"us-east-1"}),jn={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"},_8=async e=>{try{let{documentContent:t,documentType:r="text",fileName:n,fileType:o}=JSON.parse(e.body||"{}"),s="";r==="image"||r==="scanned-pdf"?s=(await E8.send(new gu.DetectDocumentTextCommand({Document:{Bytes:Buffer.from(t,"base64")}}))).Blocks?.filter(h=>h.BlockType==="LINE").map(h=>h.Text).join(`
`)||"":s=t;let i=`
Extract and structure the following resume content into JSON format:

${s}

Return a JSON object with the following structure:
{
  "personalInfo": {
    "name": "",
    "email": "",
    "phone": "",
    "location": "",
    "linkedin": "",
    "github": "",
    "website": ""
  },
  "summary": "",
  "experience": [
    {
      "company": "",
      "position": "",
      "duration": "",
      "location": "",
      "responsibilities": []
    }
  ],
  "education": [
    {
      "institution": "",
      "degree": "",
      "field": "",
      "graduationDate": "",
      "gpa": ""
    }
  ],
  "skills": [],
  "certifications": [],
  "projects": [
    {
      "name": "",
      "description": "",
      "technologies": [],
      "link": ""
    }
  ]
}`,a=await S8.send(new hu.InvokeModelCommand({modelId:"anthropic.claude-3-sonnet-20240229-v1:0",body:JSON.stringify({anthropic_version:"bedrock-2023-05-31",max_tokens:4e3,messages:[{role:"user",content:i}]}),contentType:"application/json"})),d=JSON.parse(new TextDecoder().decode(a.body)),l=JSON.parse(d.content[0].text);return{statusCode:200,headers:jn,body:JSON.stringify({success:!0,data:l,extractedText:s,fileName:n,fileType:o})}}catch(t){return console.error("Resume parsing error:",t),{statusCode:500,headers:jn,body:JSON.stringify({success:!1,error:"Failed to parse resume",message:t instanceof Error?t.message:"Unknown error"})}}},w8=async()=>({statusCode:200,headers:jn,body:JSON.stringify({success:!0,status:"healthy",timestamp:new Date().toISOString(),services:{bedrock:"available",textract:"available"}})}),fse=async e=>{if(e.httpMethod==="OPTIONS")return{statusCode:200,headers:jn,body:""};let t=e.path,r=e.httpMethod;try{switch(t){case"/parse-resume":if(r==="POST")return await _8(e);break;case"/health":return await w8();default:return{statusCode:404,headers:jn,body:JSON.stringify({success:!1,error:"Endpoint not found"})}}}catch(n){return console.error("Lambda handler error:",n),{statusCode:500,headers:jn,body:JSON.stringify({success:!1,error:"Internal server error",message:n instanceof Error?n.message:"Unknown error"})}}return{statusCode:405,headers:jn,body:JSON.stringify({success:!1,error:"Method not allowed"})}};export{fse as handler};
//# sourceMappingURL=index.mjs.map
